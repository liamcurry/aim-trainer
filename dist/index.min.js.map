{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","EE","fn","context","once","this","EventEmitter","prototype","_events","undefined","listeners","event","l","ee","Array","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","apply","j","on","listener","push","events","removeAllListeners","off","addListener","setMaxListeners","EventEmitter2","EventEmitter3",2,"m","app","window","initialize","$document","document","$location","location","$cancelAnimationFrame","cancelAnimationFrame","clearTimeout","$requestAnimationFrame","requestAnimationFrame","setTimeout","match","slice","hasAttrs","type","OBJECT","attrs","classAttrName","cell","tag","classes","STRING","parser","exec","id","pair","attrParser","join","children","ARRAY","attrName","build","parentElement","parentTag","parentCache","parentIndex","data","cached","shouldReattach","index","editable","namespace","configs","toString","subtree","cachedType","dataType","nodes","offset","end","clear","constructor","concat","intact","subArrayCount","DELETION","INSERTION","MOVE","existing","unkeyed","shouldMaintainIdentities","key","action","indexOf","filter","x","keysDiffer","cachedCell","dataCell","from","element","childNodes","createElement","actions","prop","change","changes","sort","sortChanges","newCached","splice","dummy","insertBefore","child","cacheCount","item","$trusted","node","parentNode","dataAttrKeys","Object","keys","hasKeys","configContext","onunload","FUNCTION","isNew","xmlns","is","createElementNS","setAttributes","contenteditable","value","callback","injectHTML","createTextNode","nodeName","voidElements","valueOf","activeElement","innerHTML","nodeType","nodeValue","b","dataAttrs","cachedAttrs","dataAttr","cachedAttr","autoredraw","rule","style","setAttributeNS","setAttribute","message","removeChild","unload","nextSibling","isElement","placeholder","insertAdjacentHTML","object","redraw","strategy","startComputation","endFirstComputation","getCellCacheKey","nodeCache","gettersetter","store","toJSON","root","forceRedraw","roots","controllers","render","modules","view","computePostRedrawHook","lastRedrawId","lastRedrawCallTime","Date","normalizeRoute","route","modes","mode","routeByValue","router","path","routeParams","queryStart","parseQueryString","substr","matcher","RegExp","replace","test","values","decodeURIComponent","routeUnobtrusive","ctrlKey","metaKey","which","preventDefault","returnValue","currentTarget","search","setScroll","hash","scrollTo","buildQueryString","prefix","str","encodeURIComponent","pairs","split","params","decodeSpace","string","reset","cacheKey","cellCache","propify","promise","then","resolve","reject","Deferred","successCallback","failureCallback","finish","state","REJECTED","next","map","deferred","RESOLVED","promiseValue","thennable","notThennableCallback","count","onerror","fire","REJECTING","RESOLVING","self","TypeError","identity","ajax","options","toLowerCase","xhr","XMLHttpRequest","open","method","url","user","password","onreadystatechange","readyState","status","onload","target","serialize","JSON","stringify","setRequestHeader","deserialize","parse","config","maybeXhr","FormData","send","callbackKey","getTime","Math","round","random","script","resp","body","responseText","error","src","appendChild","bindData","xhrOptions","querystring","parameterizeUrl","tokens","html","documentNode","documentElement","replaceChild","forceRecreation","isDocumentRoot","trust","String","topModule","FRAME_BUDGET","isPrevented","currentModule","controller","force","pendingRequests","endComputation","max","withAttr","withAttrCallback","getAttribute","currentRoute","pathname","redirect","defaultRoute","source","addEventListener","href","removeEventListener","queryIndex","currentPath","shouldReplaceHistoryEntry","history","pushState","title","param","sync","synchronizer","pos","resolved","results","outstanding","request","background","isJSONP","extract","unwrap","unwrapSuccess","unwrapError","response","initialValue","deps","mock","factory","define","amd",3,"Stats","now","g","Infinity","h","p","q","cssText","c","d","k","display","REVISION","domElement","setMode","begin","min","textContent","firstChild","height","update",4,"THREE","sign","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","NoShading","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","MultiplyOperation","MixOperation","AddOperation","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","Projector","console","projectVector","vector","camera","warn","project","unprojectVector","unproject","pickingRay","CanvasRenderer","setClearColor","setSize","Color","color","setRGB","set","copy","setHex","setStyle","hex","floor","setHSL","hue2rgb","parseInt","ColorKeywords","copyGammaToLinear","copyLinearToGamma","sqrt","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","optionalTarget","hue","saturation","hsl","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","fromArray","array","toArray","clone","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Quaternion","y","z","w","_x","_y","_z","_w",{"end":{"file":"?","comments_before":[],"nlb":false,"endpos":62770,"pos":62769,"col":5,"line":1915,"value":"x","type":"name"},"start":{"file":"?","comments_before":[],"nlb":false,"endpos":62770,"pos":62769,"col":5,"line":1915,"value":"x","type":"name"},"name":"x"},"onChangeCallback","quaternion","setFromEuler","euler","Euler","c1","cos","c2","c3","s1","sin","s2","s3","order","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","v1","EPS","vFrom","vTo","Vector3","dot","abs","crossVectors","normalize","inverse","conjugate","v","lengthSq","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVector3","applyQuaternion","slerp","qb","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","onChange","qa","qm","Vector2","setX","setY","setComponent","getComponent","addVectors","sub","subVectors","divide","divideScalar","scalar","invScalar","clamp","clampScalar","minVal","maxVal","ceil","roundToZero","negate","distanceTo","distanceToSquared","dx","dy","setLength","oldLength","fromAttribute","attribute","itemSize","setZ","multiplyVectors","applyEuler","applyAxisAngle","applyMatrix3","applyMatrix4","applyProjection","qx","qy","qz","qw","ix","iy","iz","iw","matrix","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","transformDirection","lengthManhattan","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","theta","dz","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","setFromMatrixPosition","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","setFromMatrixColumn","sx","sy","sz","me","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","PI","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","atan2","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","start","line","center","result","distanceSq","distance","at","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","startEnd_startP","closestPointToPoint","Box2","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","box","empty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","isIntersectionBox","clampPoint","distanceToPoint","clampedPoint","intersect","union","translate","Box3","setFromObject","scope","updateMatrixWorld","traverse","geometry","Geometry","vertices","BufferGeometry","attributes","positions","getBoundingSphere","Sphere","radius","Matrix3","Float32Array","n11","n12","n13","n21","n22","n23","n31","n32","n33","multiplyVector3Array","applyToVector3Array","determinant","throwOnInvertible","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","extractPosition","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","setRotationFromQuaternion","x2","y2","z2","wx","wy","wz","lookAt","eye","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","multiplyVector4","rotateAxis","crossVector","getPosition","setPosition","rotateX","rotateY","rotateZ","rotateByAxis","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","position","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","ymax","degToRad","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","b1","invDet","isIntersectionSphere","sphere","intersectSphere","tca","d2","radius2","thc","t0","t1","isIntersectionPlane","plane","distToPoint","denominator","distanceToPlane","constant","intersectPlane","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","optionalCenter","maxRadiusSq","intersectsSphere","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","computeBoundingSphere","negRadius","intersectsBox","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","v2","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","isIntersectionLine","startSign","endSign","intersectLine","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","generateUUID","chars","uuid","rnd","clampBottom","mapLinear","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degreeToRadiansFactor","degrees","radToDeg","radianToDegreesFactor","radians","isPowerOfTwo","Spline","interpolate","t2","t3","intPoint","weight","w2","w3","pa","pb","pc","pd","v3","initFromArray","getPoint","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","Clock","autoStart","startTime","oldTime","elapsedTime","running","performance","stop","getElapsedTime","getDelta","newTime","EventDispatcher","hasEventListener","dispatchEvent","_listeners","listenerArray","Raycaster","Sprite","Mesh","PointCloud","threshold","LOD","Line","descSort","intersectObject","raycaster","intersects","recursive","raycast","precision","linePrecision","setFromCamera","PerspectiveCamera","OrthographicCamera","intersectObjects","objects","log","Object3D","defineProperty","Object3DIdCount","name","parent","DefaultUp","rotation","onRotationChange","onQuaternionChange","defineProperties","enumerable","rotationAutoUpdate","matrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","userData","eulerOrder","useQuaternion","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","rotateOnAxis","q1","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getChildByName","getObjectByName","getObjectById","getObjectByProperty","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","updateMatrix","output","metadata","version","generator","geometries","parseGeometry","json","materials","parseMaterial","material","parseObject","AmbientLight","DirectionalLight","intensity","PointLight","SpotLight","exponent","HemisphereLight","groundColor","Face3","materialIndex","vertexNormals","vertexColors","vertexTangents","face","Face4","BufferAttribute","needsUpdate","copyAt","index1","index2","setXY","setXYZ","setXYZW","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","GeometryIdCount","attributesKeys","drawcalls","offsets","boundingBox","addAttribute","addDrawCall","indexOffset","fromGeometry","settings","faces","faceVertexUvs","hasFaceVertexUv","hasFaceVertexNormals","normals","colors","uvs","i3","na","nb","nc","fc","vca","vcb","vcc","uva","uvb","uvc","computeBoundingBox","bb","isNaN","computeFaceNormals","computeVertexNormals","vA","vB","vC","pA","pB","pC","cb","ab","indices","jl","normalizeNormals","computeTangents","handleTriangle","uvA","uvB","uvC","x1","y1","z1","sdir","tdir","tan1","tan2","handleVertex","n2","tmp2","tangents","uv","nVertices","tangent","iA","iB","iC","computeOffsets","indexBufferSize","facesCount","sortedIndices","Uint16Array","indexPtr","vertexPtr","duplicatedVertices","newVerticeMaps","faceVertices","Int32Array","vertexMap","revVertexMap","findex","vo","vid","faceMax","new_offset","new_vid","reorderBuffers","merge","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","indexBuffer","indexMap","vertexCount","sortedAttributes","attr","sourceArray","attrArray","attrSize","sortedAttr","numItems","typeArray","sourceAttr","dispose","morphTargets","morphColors","morphNormals","skinWeights","skinIndices","lineDistances","hasTangents","dynamic","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","tangentsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","fromBufferGeometry","tempNormals","tempUVs","addFace","fl","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","faceNormal","dstNormalsFace","dstNormalsVertex","ua","ub","uc","vertexIndex","faceIndex","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","uvs2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","verticesMap","unique","precisionPoints","pow","faceIndicesToRemove","dupIndex","idx","setBit","enabled","getNormalIndex","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","parameters","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","kl","Camera","matrixWorldInverse","create","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLRenderTargetCube","format","magFilter","minFilter","updateCubeMap","renderer","scene","generateMipmaps","activeCubeFace","zoom","updateProjectionMatrix","cx","cy","setLens","focalLength","frameHeight","atan","setViewOffset","fullWidth","fullHeight","width","Light","light","AreaLight","constantAttenuation","linearAttenuation","quadraticAttenuation","onlyShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowCascade","shadowCascadeOffset","shadowCascadeCount","shadowCascadeBias","shadowCascadeWidth","shadowCascadeHeight","shadowCascadeNearZ","shadowCascadeFarZ","shadowCascadeArray","shadowMap","shadowMapSize","shadowCamera","shadowMatrix","skyColor","shadowCameraFov","Cache","files","file","get","Loader","showStatus","statusDomElement","addStatusElement","imageLoader","ImageLoader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","fontSize","textAlign","padding","zIndex","updateProgress","progress","loaded","toFixed","extractUrlBase","parts","pop","initMaterials","texturePath","createMaterial","needsTangents","ShaderMaterial","nearest_pow2","LN2","create_texture","where","sourceFile","repeat","wrap","anisotropy","texture","fullPath","loader","Handlers","load","Texture","image","canvas","getContext","drawImage","wrapS","wrapT","wrapMap","mirror","rgb2hex","rgb","mtype","mpars","opacity","lightMap","normalMap","bumpMap","wireframe","shading","blending","transparent","depthTest","depthWrite","flipSided","side","doubleSided","colorDiffuse","DbgColor","colorSpecular","specular","colorAmbient","ambient","colorEmissive","emissive","transparency","specularCoef","shininess","mapDiffuse","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapLight","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapBump","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormal","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecular","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapAlpha","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","mapBumpScale","bumpScale","mapNormalFactor","normalScale","DbgName","handlers","regex","XHRLoader","manager","cache","DefaultLoadingManager","onLoad","onProgress","onError","itemEnd","responseType","itemStart","setResponseType","setCrossOrigin","JSONLoader","withCredentials","loadAjaxJSON","callbackProgress","DONE","LOADING","getResponseHeader","HEADERS_RECEIVED","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","bones","animation","animations","parseMorphing","dstVertices","srcVertices","cl","dstColors","srcColors","LoadingManager","BufferGeometryLoader","text","typedArray","MaterialLoader","uniforms","vertexShader","fragmentShader","ObjectLoader","parseGeometries","parseMaterials","geometryLoader","bufferGeometryLoader","PlaneGeometry","widthSegments","heightSegments","BoxGeometry","depth","depthSegments","CircleGeometry","segments","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","IcosahedronGeometry","detail","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","heightScale","Scene","Group","TextureLoader","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","buffer","texData","mipmaps","mipmapCount","CompressedTextureLoader","images","CompressedTexture","loadTexture","texDatas","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","alphaTest","overdraw","setValues","newValue","currentValue","Number","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshNormalMaterial","MeshDepthMaterial","SpriteMaterial","LineBasicMaterial","linewidth","linecap","linejoin","fog","LineDashedMaterial","dashSize","gapSize","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","wrapAround","wrapRGB","metal","MeshFaceMaterial","PointCloudMaterial","sizeAttenuation","ParticleBasicMaterial","ParticleSystemMaterial","defines","lights","defaultAttributeValues","uv2","index0AttributeName","UniformsUtils","RawShaderMaterial","mapping","TextureIdCount","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","_needsUpdate","onUpdate","CubeTexture","VideoTexture","video","HAVE_ENOUGH_DATA","inverseMatrix","localThreshold","testPoint","rayPointDistance","intersectPoint","distanceToRay","oi","ol","pointCount","ParticleSystem","LineStrip","LinePieces","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","nbVertices","updateMorphTargets","morphTargetBase","morphTargetForcedOrder","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","intersectionPoint","isFaceMaterial","objectMaterials","morphInfluences","tl","influence","targets","Bone","belongsToSkin","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","bone","offsetMatrix","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","gbone","rotq","scl","normalizeSkinWeights","bind","skeleton","sw","MorphAnimMesh","duration","mirroredLoop","time","lastKeyframe","currentKeyframe","directionBackwards","setFrameRange","startKeyframe","endKeyframe","setDirectionForward","setDirectionBackward","parseAnimations","firstAnimation","pattern","morph","label","setAnimationLabel","playAnimation","fps","updateAnimation","frameTime","keyframe","mix","interpolateTargets","influences","addLevel","getObjectForDistance","matrixPosition","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","common","diffuse","offsetRepeat","flipEnvMap","bump","normalmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","directionalLightDirection","directionalLightColor","hemisphereLightDirection","hemisphereLightSkyColor","hemisphereLightGroundColor","pointLightColor","pointLightPosition","pointLightDistance","spotLightColor","spotLightPosition","spotLightDirection","spotLightDistance","spotLightAngleCos","spotLightExponent","particle","psColor","shadowmap","ShaderLib","basic","lambert","phong","particle_basic","dashed","totalSize","mNear","mFar","cube","tCube","tFlip","equirect","tEquirect","depthRGBA","WebGLRenderer","createParticleBuffers","__webglVertexBuffer","_gl","createBuffer","__webglColorBuffer","_this","info","memory","createLineBuffers","__webglLineDistanceBuffer","createMeshBuffers","geometryGroup","__webglNormalBuffer","__webglTangentBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","numMorphTargets","__webglMorphTargetsBuffers","numMorphNormals","__webglMorphNormalsBuffers","initCustomAttributes","nvertices","__webglCustomAttributesList","__webglInitialized","createUniqueBuffers","belongsToAttribute","initParticleBuffers","__vertexArray","__colorArray","__sortArray","__webglParticleCount","initLineBuffers","__lineDistanceArray","__webglLineCount","initMeshBuffers","faces3","ntris","nlines","getBufferMaterial","__normalArray","__uvArray","__uv2Array","__tangentArray","__skinIndexArray","__skinWeightArray","UintArray","extensions","Uint32Array","__typeArray","__faceArray","__lineArray","__morphTargetsArrays","__morphNormalsArrays","__webglFaceCount","originalAttribute","property","__original","__inittedArrays","materialNeedsSmoothNormals","setParticleBuffers","hint","ca","cal","customAttribute","vertexArray","colorArray","dirtyVertices","dirtyColors","customAttributes","bindBuffer","ARRAY_BUFFER","bufferData","boundTo","setLineBuffers","dl","lineDistanceArray","dirtyLineDistances","setMeshBuffers","faceColor","n1","n3","sw1","sw2","sw3","si1","si2","si3","vn","uvi","uv2i","vk","vkl","vka","nka","chf","needsSmoothNormals","offset_uv","offset_uv2","offset_face","offset_normal","offset_tangent","offset_line","offset_color","offset_skin","offset_morphTarget","offset_custom","offset_customSrc","uvArray","uv2Array","normalArray","tangentArray","skinIndexArray","skinWeightArray","morphTargetsArrays","morphNormalsArrays","faceArray","lineArray","dirtyElements","dirtyUvs","dirtyNormals","dirtyTangents","dirtyMorphTargets","morphTargetsNeedUpdate","chunk_faces3","obj_faces","obj_uvs","obj_uvs2","obj_skinIndices","obj_skinWeights","ELEMENT_ARRAY_BUFFER","pp","setupVertexAttributes","program","startIndex","geometryAttributes","programAttributes","programAttributesKeys","programAttribute","geometryAttribute","enableAttribute","vertexAttribPointer","FLOAT","vertexAttrib2fv","vertexAttrib3fv","disableUnusedAttributes","initAttributes","_newAttributes","_enabledAttributes","enableVertexAttribArray","disableVertexAttribArray","setupMorphTargets","numSupportedMorphTargets","__webglMorphTargetInfluences","activeInfluenceIndices","numericalSort","numSupportedMorphNormals","influenceIndex","uniform1fv","painterSortStable","reversePainterSortStable","projectObject","initObject","sprites","webglObjects","_webglObjects","_frustum","webglObject","unrollBufferMaterial","sortObjects","_vector3","_projScreenMatrix","renderObjects","renderList","useBlending","setupMatrices","setBlending","setDepthTest","setDepthWrite","setPolygonOffset","setMaterialFaces","renderBufferDirect","renderBuffer","renderObjectsImmediate","materialType","renderImmediateObject","unrollImmediateBufferMaterial","globject","opaque","transparentObjects","opaqueObjects","__webglInit","_modelViewMatrix","_normalMatrix","onObjectRemoved","onGeometryDispose","initGeometryGroups","__webglActive","addBuffer","geometryGroupsList","geometryGroups","ImmediateRenderObject","immediateRenderCallback","addBufferImmediate","_webglObjectsImmediate","makeGroups","usesFaceMaterial","groupHash","group","maxVerticesInGroup","hash_map","groups","groupsList","counter","geometryGroupCounter","addBuffers","objlist","updateObject","bufferType","STATIC_DRAW","customAttributesDirty","areCustomAttributesDirty","DYNAMIC_DRAW","clearCustomAttributes","removeObject","removeInstances","initMaterial","onMaterialDispose","shaderID","shaderIDs","shader","__webglShader","maxLightCount","allocateLights","maxShadows","allocateShadows","maxBones","allocateBones","_precision","supportsVertexTextures","_supportsVertexTextures","envMapMode","useFog","fogExp","logarithmicDepthBuffer","_logarithmicDepthBuffer","_supportsBoneTextures","maxMorphTargets","maxMorphNormals","maxDirLights","directional","maxPointLights","maxSpotLights","spot","maxHemiLights","hemi","shadowMapEnabled","shadowMapType","shadowMapDebug","shadowMapCascade","code","pl","_programs","programInfo","usedTimes","WebGLProgram","programs","base","uniformsList","setProgram","_usedTextureUnits","deallocateMaterial","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","_currentProgram","useProgram","_currentMaterialId","_currentCamera","uniformMatrix4fv","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","refreshUniformsFog","_lightsNeedUpdate","setupLights","refreshUniformsLights","_lights","markUniformsLightsNeedsUpdate","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsParticle","refreshUniformsPhong","refreshUniformsLambert","_shadowPass","refreshUniformsShadow","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","gammaInput","uvScaleMap","_canvas","distances","directions","anglesCos","exponents","skyColors","groundColors","boolean","modelViewMatrix","uniformMatrix3fv","_maxTextures","uniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform2fv","uniform3fv","uniform4fv","_array","setCubeTexture","setCubeTextureDynamic","setColorGamma","intensitySq","setColorLinear","ll","zlights","dirColors","dirPositions","pointColors","pointPositions","pointDistances","spotColors","spotPositions","spotDistances","spotDirections","spotAnglesCos","spotExponents","hemiSkyColors","hemiGroundColors","hemiPositions","dirLength","pointLength","spotLength","hemiLength","dirCount","spotCount","hemiCount","dirOffset","pointOffset","spotOffset","hemiOffset","_direction","setLineWidth","pixelRatio","_oldLineWidth","lineWidth","polygonoffset","factor","units","_oldPolygonOffset","enable","POLYGON_OFFSET_FILL","disable","_oldPolygonOffsetFactor","_oldPolygonOffsetUnits","setTextureParameters","textureType","isImagePowerOfTwo","extension","texParameteri","TEXTURE_WRAP_S","paramThreeToGL","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__oldAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","clampToMaxSize","maxSize","slot","__webglTextureCube","onTextureDispose","createTexture","textures","activeTexture","TEXTURE0","bindTexture","TEXTURE_CUBE_MAP","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isDataTexture","cubeImage","autoScaleCubemaps","_maxCubemapSize","glFormat","glType","mipmap","getCompressedTextureFormats","compressedTexImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","texImage2D","generateMipmap","__webglTexture","setupFrameBuffer","framebuffer","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setupRenderBuffer","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","updateRenderTargetMipmap","TEXTURE_2D","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","MIN_EXT","MAX_EXT","nVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","nVertexMatrices","dirLights","pointLights","spotLights","hemiLights","_context","_alpha","_depth","_stencil","stencil","_antialias","antialias","_premultipliedAlpha","premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_clearColor","_clearAlpha","autoClear","autoClearColor","autoClearDepth","autoClearStencil","gammaOutput","shadowMapCullFace","calls","_currentFramebuffer","_currentGeometryProgram","_oldDoubleSided","_oldFlipSided","_oldBlending","_oldBlendEquation","_oldBlendSrc","_oldBlendDst","_oldDepthTest","_oldDepthWrite","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_currentWidth","_currentHeight","Uint8Array","resetGLState","setDefaultGLState","getShaderPrecisionFormat","rangeMin","rangeMax","WebGLExtensions","clearColor","clearDepth","clearStencil","DEPTH_TEST","depthFunc","LEQUAL","frontFace","CCW","cullFace","BACK","CULL_FACE","BLEND","blendFunc","viewport","MAX_TEXTURE_IMAGE_UNITS","_maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","_maxTextureSize","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","_vertexShaderPrecisionHighpFloat","VERTEX_SHADER","HIGH_FLOAT","_vertexShaderPrecisionMediumpFloat","MEDIUM_FLOAT","_fragmentShaderPrecisionHighpFloat","LOW_FLOAT","FRAGMENT_SHADER","_fragmentShaderPrecisionMediumpFloat","formats","COMPRESSED_TEXTURE_FORMATS","highpAvailable","mediumpAvailable","shadowMapPlugin","ShadowMapPlugin","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","forceContextLoss","loseContext","supportsFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","updateStyle","setViewport","setScissor","scissor","enableScissorTest","SCISSOR_TEST","getClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","setRenderTarget","deallocateGeometry","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","deleteBuffers","buffers","deleteBuffer","deleteTexture","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglRenderbuffer","deleteProgram","newPrograms","renderBufferImmediate","hasPositions","hasNormals","hasUvs","__webglUvBuffer","hasColors","positionArray","nx","ny","nz","nax","nbx","ncx","nay","nby","ncy","naz","nbz","ncz","drawArrays","TRIANGLES","updateBuffers","wireframeBit","geometryProgram","LINES","drawElements","POINTS","LINE_STRIP","skinIndex","skinWeight","lineDistance","forceClear","setFaceCulling","frontFaceDirection","CW","FRONT","FRONT_AND_BACK","depthMask","blendEquationSeparate","blendFuncSeparate","uploadTexture","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isCube","isTargetPowerOfTwo","createFramebuffer","createRenderbuffer","shareDepthFrom","vx","vy","addPrePlugin","addPostPlugin","updateShadowMap","WebGLRenderTarget","gl","getExtension","programIdCount","generateDefines","chunk","cacheUniformLocations","identifiers","getUniformLocation","cacheAttributeLocations","getAttribLocation","shadowMapTypeDefine","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefix_vertex","prefix_fragment","customDefines","createProgram","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","VALIDATE_STATUS","getError","getProgramInfoLog","deleteShader","addLineNumbers","lines","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","flares","vertexBuffer","elementBuffer","hasVertexTexture","tempTexture","occlusionTexture","init","renderType","occlusionMap","screenPosition","viewportWidth","viewportHeight","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","TEXTURE1","copyTexImage2D","sprite","_renderer","_renderList","createVirtualLight","cascade","virtualLight","isVirtual","pointsWorld","pointsFrustum","nearZ","farZ","updateVirtualLight","updateShadowCamera","_min","_max","getObjectMaterial","_depthMaterial","_depthMaterialMorph","_depthMaterialSkin","_depthMaterialMorphSkin","_matrixPosition","depthShader","depthUniforms","originalCamera","gyro","Gyroscope","shadowFilter","pars","cameraHelper","CameraHelper","objectMaterial","useMorphing","useSkinning","customDepthMaterial","clearAlpha","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","GeometryUtils","geometry1","geometry2","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","getNormalMap","subtract","getImageData","imageData","createImageData","ly","uy","lx","ux","num_points","putImageData","generateDataTexture","SceneUtils","createMultiMaterialObject","detach","attach","FontUtils","divisions","getFace","loadFace","family","familyName","ThreeFont","cssFontWeight","cssFontStyle","drawText","resolution","fontPaths","Path","ret","extractGlyphPoints","paths","outline","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","pts","glyph","glyphs","_cachedOutline","moveTo","lineTo","quadraticCurveTo","Shape","Utils","bezierCurveTo","b3","ha","generateShapes","curveSegments","font","shapes","toShapes","EPSILON","process","contour","verts","vertIndices","nv","snip","px","py","aX","aY","bX","bY","cX","cY","apx","apy","bpx","bpy","cCROSSap","bCROSScp","aCROSSbp","Triangulate","_typeface_js","typeface_js","Audio","createBufferSource","gain","createGain","connect","destination","panner","createPanner","decodeAudioData","setLoop","loop","setRefDistance","refDistance","setRolloffFactor","rolloffFactor","AudioListener","AudioContext","webkitAudioContext","orientation","velocity","positionPrev","setOrientation","setVelocity","Curve","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","vec","getTangentAt","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h00","h10","h01","h11","getPointFunc","CurvePath","curves","bends","autoClose","curve","checkConnection","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","maxX","maxY","maxZ","minX","minY","minZ","NEGATIVE_INFINITY","POSITIVE_INFINITY","createPointsGeometry","createGeometry","createSpacedPointsGeometry","addWrapPath","bendpath","getTransformedPoints","oldPts","getWrapPoints","getTransformedSpacedPoints","oldX","oldY","xNorm","bounds","pathPt","translationObject","quaternionObject","scaleObject","translationWorld","quaternionWorld","scaleWorld","fromPoints","PathActions","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","BEZIER_CURVE_TO","CSPLINE_THRU","ARC","ELLIPSE","vectors","vlen","lastargs","x0","y0","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","EllipseCurve","lastPoint","closedPath","useSpacedPoints","spts","spline","deltaAngle","tdivisions","isCCW","noHoles","extractSubpaths","inActions","subPaths","lastPath","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","isClockWise","tmpPoints","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambigious","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","hole","tmpHoles","holes","extrude","extruded","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","getSpacedPointsHoles","extractAllPoints","shape","extractPoints","extractAllSpacedPoints","triangulateShape","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","removeHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","nextIdx","intersection","intersectsHoleEdge","ihIdx","chkHole","indepHoles","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","hl","minShapeIndex","h2","allPointsMap","allpoints","shapeWithoutHoles","triangles","b2p0","b2p1","b2p2","b3p0","b3p1","b3p2","b3p3","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","ClosedSplineCurve3","AnimationHandler","CATMULLROM","CATMULLROM_FORWARD","initialized","hierarchy","rot","quat","usedMorphTargets","morphTargetName","morphTargetsInfluences","parseRecurseHierarchy","play","deltaTimeMS","resetBlendWeights","Animation","currentTime","timeScale","isPlaying","interpolationType","keyTypes","animationCache","positionWeight","quaternionWeight","scaleWeight","prevKey","nextKey","originalMatrix","getNextKeyWith","newVector","newQuat","interpolateCatmullRom","prevXYZ","nextXYZ","proportionalWeight","getPrevKeyWith","currentPoint","forwardPoint","KeyFrameAnimation","isPaused","sids","obj","sid","endTime","original","hasTarget","MorphAnimation","frames","lastFrame","currentFrame","pause","interpolation","frame","buildPlane","udir","vdir","gridX","gridY","width_half","height_half","gridX1","gridY1","segment_width","segment_height","uvd","depth_half","centerUV","segment","CubeGeometry","heightHalf","verticesRow","uvsRow","tanTheta","v4","n4","uv1","uv3","uv4","addShapeList","addShape","scalePt2","pt","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","colinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","buildLidFaces","bevelEnabled","layer","flen","f3","steps","bevelSegments","buildSideFaces","layeroffset","sidewalls","ahole","slen1","slen2","f4","shapesOffset","uvgen","generateTopUV","extrudeMaterial","generateSideWallUV","extrudePts","splineTube","binormal","position2","amount","bevelThickness","bevelSize","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","TubeGeometry","FrenetFrames","shapePoints","reverse","bs","vert","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","indexA","indexB","indexC","indexD","LatheGeometry","inversePointLength","inverseSegments","phi","np","u0","u1","PlaneBufferGeometry","offset2","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegment","TextGeometry","textShapes","getPos","in_q","in_p","cu","su","quOverP","cs","tz","grid","tang","bitan","ip","jp","closed","taper","NoTaper","numpoints","pos2","SinusoidalTaper","initialNormal3","smallest","MAX_VALUE","mat","PolyhedronGeometry","prepare","that","azimuth","inclination","make","centroid","azi","correctUV","subdivide","cols","aj","bj","rows","DodecahedronGeometry","OctahedronGeometry","TetrahedronGeometry","ParametricGeometry","func","slices","stacks","sliceCount","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","dir","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","addLine","addPoint","pointMap","hexFrustum","hexCone","hexUp","hexTarget","hexCross","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","edge","sortFunction","numEdges","vert1","vert2","face1","face2","FaceNormalsHelper","objectVertices","objectFaces","objectWorldMatrix","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","worldMatrix","vertexId","VertexTangentsHelper","WireframeHelper","edges","numTris","MorphBlendMesh","animationsMap","animationsList","numFrames","startFrame","endFrame","createAnimation","setAnimationWeight","active","autoCreateAnimations","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","stopAnimation",5,"_interopRequire","__esModule","_prototypeProperties","staticProps","instanceProps","_inherits","subClass","superClass","writable","configurable","__proto__","_classCallCheck","instance","Constructor","Target","Game","numTargets","el","querySelector","mouse","animate","getBoundingClientRect","initCamera","initRenderer","initScene","initTargets","initEvents","devicePixelRatio","onMouseDown","onTouchStart","onHit","spawnTarget","clientX","touches","offsetX","clientY","offsetY","hits","hit","updateCamera","./Target","eventemitter3","three",6,"PlayerStats","game","hitTimes","numHit","numMiss","timeStarted","timeLastHit","initFPS","initView","avgResponseTime","accuracy","addHit","elapsed","addMiss","totalTime","reduce","totalShots","mithril","stats-js",7,"randomizeObjScale","randomizeObjRotation","randomizeObjPosition","randomizeObj",8,"makeAudio","audio","hsBodyshot","hsTeammate","stats","./Game","./PlayerStats"],"mappings":"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","file":"index.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} once Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Holds the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  if (!this._events || !this._events[event]) return [];\n  if (this._events[event].fn) return [this._events[event].fn];\n\n  for (var i = 0, l = this._events[event].length, ee = new Array(l); i < l; i++) {\n    ee[i] = this._events[event][i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  if (!this._events || !this._events[event]) return false;\n\n  var listeners = this._events[event]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Functon} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this);\n\n  if (!this._events) this._events = {};\n  if (!this._events[event]) this._events[event] = listener;\n  else {\n    if (!this._events[event].fn) this._events[event].push(listener);\n    else this._events[event] = [\n      this._events[event], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true);\n\n  if (!this._events) this._events = {};\n  if (!this._events[event]) this._events[event] = listener;\n  else {\n    if (!this._events[event].fn) this._events[event].push(listener);\n    else this._events[event] = [\n      this._events[event], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, once) {\n  if (!this._events || !this._events[event]) return this;\n\n  var listeners = this._events[event]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn && (listeners.fn !== fn || (once && !listeners.once))) {\n      events.push(listeners);\n    }\n    if (!listeners.fn) for (var i = 0, length = listeners.length; i < length; i++) {\n      if (listeners[i].fn !== fn || (once && !listeners[i].once)) {\n        events.push(listeners[i]);\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[event] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[event];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[event];\n  else this._events = {};\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the module.\n//\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.EventEmitter2 = EventEmitter;\nEventEmitter.EventEmitter3 = EventEmitter;\n\n//\n// Expose the module.\n//\nmodule.exports = EventEmitter;\n\n},{}],2:[function(require,module,exports){\nvar m = (function app(window, undefined) {\r\n\tvar OBJECT = \"[object Object]\", ARRAY = \"[object Array]\", STRING = \"[object String]\", FUNCTION = \"function\";\r\n\tvar type = {}.toString;\r\n\tvar parser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[.+?\\])/g, attrParser = /\\[(.+?)(?:=(\"|'|)(.*?)\\2)?\\]/;\r\n\tvar voidElements = /^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;\r\n\r\n\t// caching commonly used variables\r\n\tvar $document, $location, $requestAnimationFrame, $cancelAnimationFrame;\r\n\r\n\t// self invoking function needed because of the way mocks work\r\n\tfunction initialize(window){\r\n\t\t$document = window.document;\r\n\t\t$location = window.location;\r\n\t\t$cancelAnimationFrame = window.cancelAnimationFrame || window.clearTimeout;\r\n\t\t$requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;\r\n\t}\r\n\r\n\tinitialize(window);\r\n\r\n\r\n\t/*\r\n\t * @typedef {String} Tag\r\n\t * A string that looks like -> div.classname#id[param=one][param2=two]\r\n\t * Which describes a DOM node\r\n\t */\r\n\r\n\t/*\r\n\t *\r\n\t * @param {Tag} The DOM node tag\r\n\t * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs\r\n\t * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array, or splat (optional)\r\n\t *\r\n\t */\r\n\tfunction m() {\r\n\t\tvar args = [].slice.call(arguments);\r\n\t\tvar hasAttrs = args[1] != null && type.call(args[1]) === OBJECT && !(\"tag\" in args[1]) && !(\"subtree\" in args[1]);\r\n\t\tvar attrs = hasAttrs ? args[1] : {};\r\n\t\tvar classAttrName = \"class\" in attrs ? \"class\" : \"className\";\r\n\t\tvar cell = {tag: \"div\", attrs: {}};\r\n\t\tvar match, classes = [];\r\n\t\tif (type.call(args[0]) != STRING) throw new Error(\"selector in m(selector, attrs, children) should be a string\")\r\n\t\twhile (match = parser.exec(args[0])) {\r\n\t\t\tif (match[1] === \"\" && match[2]) cell.tag = match[2];\r\n\t\t\telse if (match[1] === \"#\") cell.attrs.id = match[2];\r\n\t\t\telse if (match[1] === \".\") classes.push(match[2]);\r\n\t\t\telse if (match[3][0] === \"[\") {\r\n\t\t\t\tvar pair = attrParser.exec(match[3]);\r\n\t\t\t\tcell.attrs[pair[1]] = pair[3] || (pair[2] ? \"\" :true)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (classes.length > 0) cell.attrs[classAttrName] = classes.join(\" \");\r\n\r\n\r\n\t\tvar children = hasAttrs ? args[2] : args[1];\r\n\t\tif (type.call(children) === ARRAY) {\r\n\t\t\tcell.children = children\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcell.children = hasAttrs ? args.slice(2) : args.slice(1)\r\n\t\t}\r\n\r\n\t\tfor (var attrName in attrs) {\r\n\t\t\tif (attrName === classAttrName) cell.attrs[attrName] = (cell.attrs[attrName] || \"\") + \" \" + attrs[attrName];\r\n\t\t\telse cell.attrs[attrName] = attrs[attrName]\r\n\t\t}\r\n\t\treturn cell\r\n\t}\r\n\tfunction build(parentElement, parentTag, parentCache, parentIndex, data, cached, shouldReattach, index, editable, namespace, configs) {\r\n\t\t//`build` is a recursive function that manages creation/diffing/removal of DOM elements based on comparison between `data` and `cached`\r\n\t\t//the diff algorithm can be summarized as this:\r\n\t\t//1 - compare `data` and `cached`\r\n\t\t//2 - if they are different, copy `data` to `cached` and update the DOM based on what the difference is\r\n\t\t//3 - recursively apply this algorithm for every array and for the children of every virtual element\r\n\r\n\t\t//the `cached` data structure is essentially the same as the previous redraw's `data` data structure, with a few additions:\r\n\t\t//- `cached` always has a property called `nodes`, which is a list of DOM elements that correspond to the data represented by the respective virtual element\r\n\t\t//- in order to support attaching `nodes` as a property of `cached`, `cached` is *always* a non-primitive object, i.e. if the data was a string, then cached is a String instance. If data was `null` or `undefined`, cached is `new String(\"\")`\r\n\t\t//- `cached also has a `configContext` property, which is the state storage object exposed by config(element, isInitialized, context)\r\n\t\t//- when `cached` is an Object, it represents a virtual element; when it's an Array, it represents a list of elements; when it's a String, Number or Boolean, it represents a text node\r\n\r\n\t\t//`parentElement` is a DOM element used for W3C DOM API calls\r\n\t\t//`parentTag` is only used for handling a corner case for textarea values\r\n\t\t//`parentCache` is used to remove nodes in some multi-node cases\r\n\t\t//`parentIndex` and `index` are used to figure out the offset of nodes. They're artifacts from before arrays started being flattened and are likely refactorable\r\n\t\t//`data` and `cached` are, respectively, the new and old nodes being diffed\r\n\t\t//`shouldReattach` is a flag indicating whether a parent node was recreated (if so, and if this node is reused, then this node must reattach itself to the new parent)\r\n\t\t//`editable` is a flag that indicates whether an ancestor is contenteditable\r\n\t\t//`namespace` indicates the closest HTML namespace as it cascades down from an ancestor\r\n\t\t//`configs` is a list of config functions to run after the topmost `build` call finishes running\r\n\r\n\t\t//there's logic that relies on the assumption that null and undefined data are equivalent to empty strings\r\n\t\t//- this prevents lifecycle surprises from procedural helpers that mix implicit and explicit return statements (e.g. function foo() {if (cond) return m(\"div\")}\r\n\t\t//- it simplifies diffing code\r\n\t\t//data.toString() is null if data is the return value of Console.log in Firefox\r\n\t\tif (data == null || data.toString() == null) data = \"\";\r\n\t\tif (data.subtree === \"retain\") return cached;\r\n\t\tvar cachedType = type.call(cached), dataType = type.call(data);\r\n\t\tif (cached == null || cachedType !== dataType) {\r\n\t\t\tif (cached != null) {\r\n\t\t\t\tif (parentCache && parentCache.nodes) {\r\n\t\t\t\t\tvar offset = index - parentIndex;\r\n\t\t\t\t\tvar end = offset + (dataType === ARRAY ? data : cached.nodes).length;\r\n\t\t\t\t\tclear(parentCache.nodes.slice(offset, end), parentCache.slice(offset, end))\r\n\t\t\t\t}\r\n\t\t\t\telse if (cached.nodes) clear(cached.nodes, cached)\r\n\t\t\t}\r\n\t\t\tcached = new data.constructor;\r\n\t\t\tif (cached.tag) cached = {}; //if constructor creates a virtual dom element, use a blank object as the base cached node instead of copying the virtual el (#277)\r\n\t\t\tcached.nodes = []\r\n\t\t}\r\n\r\n\t\tif (dataType === ARRAY) {\r\n\t\t\t//recursively flatten array\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t\tif (type.call(data[i]) === ARRAY) {\r\n\t\t\t\t\tdata = data.concat.apply([], data);\r\n\t\t\t\t\ti-- //check current index again and flatten until there are no more nested arrays at that index\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar nodes = [], intact = cached.length === data.length, subArrayCount = 0;\r\n\r\n\t\t\t//keys algorithm: sort elements without recreating them if keys are present\r\n\t\t\t//1) create a map of all existing keys, and mark all for deletion\r\n\t\t\t//2) add new keys to map and mark them for addition\r\n\t\t\t//3) if key exists in new list, change action from deletion to a move\r\n\t\t\t//4) for each key, handle its corresponding action as marked in previous steps\r\n\t\t\t//5) copy unkeyed items into their respective gaps\r\n\t\t\tvar DELETION = 1, INSERTION = 2 , MOVE = 3;\r\n\t\t\tvar existing = {}, unkeyed = [], shouldMaintainIdentities = false;\r\n\t\t\tfor (var i = 0; i < cached.length; i++) {\r\n\t\t\t\tif (cached[i] && cached[i].attrs && cached[i].attrs.key != null) {\r\n\t\t\t\t\tshouldMaintainIdentities = true;\r\n\t\t\t\t\texisting[cached[i].attrs.key] = {action: DELETION, index: i}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (shouldMaintainIdentities) {\r\n\t\t\t\tif (data.indexOf(null) > -1) data = data.filter(function(x) {return x != null})\r\n\t\t\t\t\r\n\t\t\t\tvar keysDiffer = false\r\n\t\t\t\tif (data.length != cached.length) keysDiffer = true\r\n\t\t\t\telse for (var i = 0, cachedCell, dataCell; cachedCell = cached[i], dataCell = data[i]; i++) {\r\n\t\t\t\t\tif (cachedCell.attrs && dataCell.attrs && cachedCell.attrs.key != dataCell.attrs.key) {\r\n\t\t\t\t\t\tkeysDiffer = true\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (keysDiffer) {\r\n\t\t\t\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t\t\t\tif (data[i] && data[i].attrs) {\r\n\t\t\t\t\t\t\tif (data[i].attrs.key != null) {\r\n\t\t\t\t\t\t\t\tvar key = data[i].attrs.key;\r\n\t\t\t\t\t\t\t\tif (!existing[key]) existing[key] = {action: INSERTION, index: i};\r\n\t\t\t\t\t\t\t\telse existing[key] = {\r\n\t\t\t\t\t\t\t\t\taction: MOVE,\r\n\t\t\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\t\t\tfrom: existing[key].index,\r\n\t\t\t\t\t\t\t\t\telement: parentElement.childNodes[existing[key].index] || $document.createElement(\"div\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse unkeyed.push({index: i, element: parentElement.childNodes[i] || $document.createElement(\"div\")})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar actions = []\r\n\t\t\t\t\tfor (var prop in existing) actions.push(existing[prop])\r\n\t\t\t\t\tvar changes = actions.sort(sortChanges);\r\n\t\t\t\t\tvar newCached = new Array(cached.length)\r\n\r\n\t\t\t\t\tfor (var i = 0, change; change = changes[i]; i++) {\r\n\t\t\t\t\t\tif (change.action === DELETION) {\r\n\t\t\t\t\t\t\tclear(cached[change.index].nodes, cached[change.index]);\r\n\t\t\t\t\t\t\tnewCached.splice(change.index, 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (change.action === INSERTION) {\r\n\t\t\t\t\t\t\tvar dummy = $document.createElement(\"div\");\r\n\t\t\t\t\t\t\tdummy.key = data[change.index].attrs.key;\r\n\t\t\t\t\t\t\tparentElement.insertBefore(dummy, parentElement.childNodes[change.index] || null);\r\n\t\t\t\t\t\t\tnewCached.splice(change.index, 0, {attrs: {key: data[change.index].attrs.key}, nodes: [dummy]})\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (change.action === MOVE) {\r\n\t\t\t\t\t\t\tif (parentElement.childNodes[change.index] !== change.element && change.element !== null) {\r\n\t\t\t\t\t\t\t\tparentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewCached[change.index] = cached[change.from]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0, len = unkeyed.length; i < len; i++) {\r\n\t\t\t\t\t\tvar change = unkeyed[i];\r\n\t\t\t\t\t\tparentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null);\r\n\t\t\t\t\t\tnewCached[change.index] = cached[change.index]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcached = newCached;\r\n\t\t\t\t\tcached.nodes = new Array(parentElement.childNodes.length);\r\n\t\t\t\t\tfor (var i = 0, child; child = parentElement.childNodes[i]; i++) cached.nodes[i] = child\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//end key algorithm\r\n\r\n\t\t\tfor (var i = 0, cacheCount = 0, len = data.length; i < len; i++) {\r\n\t\t\t\t//diff each item in the array\r\n\t\t\t\tvar item = build(parentElement, parentTag, cached, index, data[i], cached[cacheCount], shouldReattach, index + subArrayCount || subArrayCount, editable, namespace, configs);\r\n\t\t\t\tif (item === undefined) continue;\r\n\t\t\t\tif (!item.nodes.intact) intact = false;\r\n\t\t\t\tif (item.$trusted) {\r\n\t\t\t\t\t//fix offset of next element if item was a trusted string w/ more than one html element\r\n\t\t\t\t\t//the first clause in the regexp matches elements\r\n\t\t\t\t\t//the second clause (after the pipe) matches text nodes\r\n\t\t\t\t\tsubArrayCount += (item.match(/<[^\\/]|\\>\\s*[^<]/g) || []).length\r\n\t\t\t\t}\r\n\t\t\t\telse subArrayCount += type.call(item) === ARRAY ? item.length : 1;\r\n\t\t\t\tcached[cacheCount++] = item\r\n\t\t\t}\r\n\t\t\tif (!intact) {\r\n\t\t\t\t//diff the array itself\r\n\t\t\t\t\r\n\t\t\t\t//update the list of DOM nodes by collecting the nodes from each item\r\n\t\t\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t\t\tif (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)\r\n\t\t\t\t}\r\n\t\t\t\t//remove items from the end of the array if the new array is shorter than the old one\r\n\t\t\t\t//if errors ever happen here, the issue is most likely a bug in the construction of the `cached` data structure somewhere earlier in the program\r\n\t\t\t\tfor (var i = 0, node; node = cached.nodes[i]; i++) {\r\n\t\t\t\t\tif (node.parentNode != null && nodes.indexOf(node) < 0) clear([node], [cached[i]])\r\n\t\t\t\t}\r\n\t\t\t\tif (data.length < cached.length) cached.length = data.length;\r\n\t\t\t\tcached.nodes = nodes\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (data != null && dataType === OBJECT) {\r\n\t\t\tif (!data.attrs) data.attrs = {};\r\n\t\t\tif (!cached.attrs) cached.attrs = {};\r\n\r\n\t\t\tvar dataAttrKeys = Object.keys(data.attrs)\r\n\t\t\tvar hasKeys = dataAttrKeys.length > (\"key\" in data.attrs ? 1 : 0)\r\n\t\t\t//if an element is different enough from the one in cache, recreate it\r\n\t\t\tif (data.tag != cached.tag || dataAttrKeys.join() != Object.keys(cached.attrs).join() || data.attrs.id != cached.attrs.id) {\r\n\t\t\t\tif (cached.nodes.length) clear(cached.nodes);\r\n\t\t\t\tif (cached.configContext && typeof cached.configContext.onunload === FUNCTION) cached.configContext.onunload()\r\n\t\t\t}\r\n\t\t\tif (type.call(data.tag) != STRING) return;\r\n\r\n\t\t\tvar node, isNew = cached.nodes.length === 0;\r\n\t\t\tif (data.attrs.xmlns) namespace = data.attrs.xmlns;\r\n\t\t\telse if (data.tag === \"svg\") namespace = \"http://www.w3.org/2000/svg\";\r\n\t\t\telse if (data.tag === \"math\") namespace = \"http://www.w3.org/1998/Math/MathML\";\r\n\t\t\tif (isNew) {\r\n\t\t\t\tif (data.attrs.is) node = namespace === undefined ? $document.createElement(data.tag, data.attrs.is) : $document.createElementNS(namespace, data.tag, data.attrs.is);\r\n\t\t\t\telse node = namespace === undefined ? $document.createElement(data.tag) : $document.createElementNS(namespace, data.tag);\r\n\t\t\t\tcached = {\r\n\t\t\t\t\ttag: data.tag,\r\n\t\t\t\t\t//set attributes first, then create children\r\n\t\t\t\t\tattrs: hasKeys ? setAttributes(node, data.tag, data.attrs, {}, namespace) : data.attrs,\r\n\t\t\t\t\tchildren: data.children != null && data.children.length > 0 ?\r\n\t\t\t\t\t\tbuild(node, data.tag, undefined, undefined, data.children, cached.children, true, 0, data.attrs.contenteditable ? node : editable, namespace, configs) :\r\n\t\t\t\t\t\tdata.children,\r\n\t\t\t\t\tnodes: [node]\r\n\t\t\t\t};\r\n\t\t\t\tif (cached.children && !cached.children.nodes) cached.children.nodes = [];\r\n\t\t\t\t//edge case: setting value on <select> doesn't work before children exist, so set it again after children have been created\r\n\t\t\t\tif (data.tag === \"select\" && data.attrs.value) setAttributes(node, data.tag, {value: data.attrs.value}, {}, namespace);\r\n\t\t\t\tparentElement.insertBefore(node, parentElement.childNodes[index] || null)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode = cached.nodes[0];\r\n\t\t\t\tif (hasKeys) setAttributes(node, data.tag, data.attrs, cached.attrs, namespace);\r\n\t\t\t\tcached.children = build(node, data.tag, undefined, undefined, data.children, cached.children, false, 0, data.attrs.contenteditable ? node : editable, namespace, configs);\r\n\t\t\t\tcached.nodes.intact = true;\r\n\t\t\t\tif (shouldReattach === true && node != null) parentElement.insertBefore(node, parentElement.childNodes[index] || null)\r\n\t\t\t}\r\n\t\t\t//schedule configs to be called. They are called after `build` finishes running\r\n\t\t\tif (typeof data.attrs[\"config\"] === FUNCTION) {\r\n\t\t\t\tvar context = cached.configContext = cached.configContext || {};\r\n\r\n\t\t\t\t// bind\r\n\t\t\t\tvar callback = function(data, args) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\treturn data.attrs[\"config\"].apply(data, args)\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tconfigs.push(callback(data, [node, !isNew, context, cached]))\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (typeof dataType != FUNCTION) {\r\n\t\t\t//handle text nodes\r\n\t\t\tvar nodes;\r\n\t\t\tif (cached.nodes.length === 0) {\r\n\t\t\t\tif (data.$trusted) {\r\n\t\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnodes = [$document.createTextNode(data)];\r\n\t\t\t\t\tif (!parentElement.nodeName.match(voidElements)) parentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null)\r\n\t\t\t\t}\r\n\t\t\t\tcached = \"string number boolean\".indexOf(typeof data) > -1 ? new data.constructor(data) : data;\r\n\t\t\t\tcached.nodes = nodes\r\n\t\t\t}\r\n\t\t\telse if (cached.valueOf() !== data.valueOf() || shouldReattach === true) {\r\n\t\t\t\tnodes = cached.nodes;\r\n\t\t\t\tif (!editable || editable !== $document.activeElement) {\r\n\t\t\t\t\tif (data.$trusted) {\r\n\t\t\t\t\t\tclear(nodes, cached);\r\n\t\t\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//corner case: replacing the nodeValue of a text node that is a child of a textarea/contenteditable doesn't work\r\n\t\t\t\t\t\t//we need to update the value property of the parent textarea or the innerHTML of the contenteditable element instead\r\n\t\t\t\t\t\tif (parentTag === \"textarea\") parentElement.value = data;\r\n\t\t\t\t\t\telse if (editable) editable.innerHTML = data;\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (nodes[0].nodeType === 1 || nodes.length > 1) { //was a trusted string\r\n\t\t\t\t\t\t\t\tclear(cached.nodes, cached);\r\n\t\t\t\t\t\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tparentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null);\r\n\t\t\t\t\t\t\tnodes[0].nodeValue = data\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcached = new data.constructor(data);\r\n\t\t\t\tcached.nodes = nodes\r\n\t\t\t}\r\n\t\t\telse cached.nodes.intact = true\r\n\t\t}\r\n\r\n\t\treturn cached\r\n\t}\r\n\tfunction sortChanges(a, b) {return a.action - b.action || a.index - b.index}\r\n\tfunction setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {\r\n\t\tfor (var attrName in dataAttrs) {\r\n\t\t\tvar dataAttr = dataAttrs[attrName];\r\n\t\t\tvar cachedAttr = cachedAttrs[attrName];\r\n\t\t\tif (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr)) {\r\n\t\t\t\tcachedAttrs[attrName] = dataAttr;\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//`config` isn't a real attributes, so ignore it\r\n\t\t\t\t\tif (attrName === \"config\" || attrName == \"key\") continue;\r\n\t\t\t\t\t//hook event handlers to the auto-redrawing system\r\n\t\t\t\t\telse if (typeof dataAttr === FUNCTION && attrName.indexOf(\"on\") === 0) {\r\n\t\t\t\t\t\tnode[attrName] = autoredraw(dataAttr, node)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handle `style: {...}`\r\n\t\t\t\t\telse if (attrName === \"style\" && dataAttr != null && type.call(dataAttr) === OBJECT) {\r\n\t\t\t\t\t\tfor (var rule in dataAttr) {\r\n\t\t\t\t\t\t\tif (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) node.style[rule] = dataAttr[rule]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var rule in cachedAttr) {\r\n\t\t\t\t\t\t\tif (!(rule in dataAttr)) node.style[rule] = \"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handle SVG\r\n\t\t\t\t\telse if (namespace != null) {\r\n\t\t\t\t\t\tif (attrName === \"href\") node.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", dataAttr);\r\n\t\t\t\t\t\telse if (attrName === \"className\") node.setAttribute(\"class\", dataAttr);\r\n\t\t\t\t\t\telse node.setAttribute(attrName, dataAttr)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//handle cases that are properties (but ignore cases where we should use setAttribute instead)\r\n\t\t\t\t\t//- list and form are typically used as strings, but are DOM element references in js\r\n\t\t\t\t\t//- when using CSS selectors (e.g. `m(\"[style='']\")`), style is used as a string, but it's an object in js\r\n\t\t\t\t\telse if (attrName in node && !(attrName === \"list\" || attrName === \"style\" || attrName === \"form\" || attrName === \"type\")) {\r\n\t\t\t\t\t\t//#348 don't set the value if not needed otherwise cursor placement breaks in Chrome\r\n\t\t\t\t\t\tif (tag !== \"input\" || node[attrName] !== dataAttr) node[attrName] = dataAttr\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse node.setAttribute(attrName, dataAttr)\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\t//swallow IE's invalid argument errors to mimic HTML's fallback-to-doing-nothing-on-invalid-attributes behavior\r\n\t\t\t\t\tif (e.message.indexOf(\"Invalid argument\") < 0) throw e\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//#348 dataAttr may not be a string, so use loose comparison (double equal) instead of strict (triple equal)\r\n\t\t\telse if (attrName === \"value\" && tag === \"input\" && node.value != dataAttr) {\r\n\t\t\t\tnode.value = dataAttr\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cachedAttrs\r\n\t}\r\n\tfunction clear(nodes, cached) {\r\n\t\tfor (var i = nodes.length - 1; i > -1; i--) {\r\n\t\t\tif (nodes[i] && nodes[i].parentNode) {\r\n\t\t\t\ttry {nodes[i].parentNode.removeChild(nodes[i])}\r\n\t\t\t\tcatch (e) {} //ignore if this fails due to order of events (see http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)\r\n\t\t\t\tcached = [].concat(cached);\r\n\t\t\t\tif (cached[i]) unload(cached[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nodes.length != 0) nodes.length = 0\r\n\t}\r\n\tfunction unload(cached) {\r\n\t\tif (cached.configContext && typeof cached.configContext.onunload === FUNCTION) cached.configContext.onunload();\r\n\t\tif (cached.children) {\r\n\t\t\tif (type.call(cached.children) === ARRAY) {\r\n\t\t\t\tfor (var i = 0, child; child = cached.children[i]; i++) unload(child)\r\n\t\t\t}\r\n\t\t\telse if (cached.children.tag) unload(cached.children)\r\n\t\t}\r\n\t}\r\n\tfunction injectHTML(parentElement, index, data) {\r\n\t\tvar nextSibling = parentElement.childNodes[index];\r\n\t\tif (nextSibling) {\r\n\t\t\tvar isElement = nextSibling.nodeType != 1;\r\n\t\t\tvar placeholder = $document.createElement(\"span\");\r\n\t\t\tif (isElement) {\r\n\t\t\t\tparentElement.insertBefore(placeholder, nextSibling || null);\r\n\t\t\t\tplaceholder.insertAdjacentHTML(\"beforebegin\", data);\r\n\t\t\t\tparentElement.removeChild(placeholder)\r\n\t\t\t}\r\n\t\t\telse nextSibling.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t}\r\n\t\telse parentElement.insertAdjacentHTML(\"beforeend\", data);\r\n\t\tvar nodes = [];\r\n\t\twhile (parentElement.childNodes[index] !== nextSibling) {\r\n\t\t\tnodes.push(parentElement.childNodes[index]);\r\n\t\t\tindex++\r\n\t\t}\r\n\t\treturn nodes\r\n\t}\r\n\tfunction autoredraw(callback, object) {\r\n\t\treturn function(e) {\r\n\t\t\te = e || event;\r\n\t\t\tm.redraw.strategy(\"diff\");\r\n\t\t\tm.startComputation();\r\n\t\t\ttry {return callback.call(object, e)}\r\n\t\t\tfinally {\r\n\t\t\t\tendFirstComputation()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar html;\r\n\tvar documentNode = {\r\n\t\tappendChild: function(node) {\r\n\t\t\tif (html === undefined) html = $document.createElement(\"html\");\r\n\t\t\tif ($document.documentElement && $document.documentElement !== node) {\r\n\t\t\t\t$document.replaceChild(node, $document.documentElement)\r\n\t\t\t}\r\n\t\t\telse $document.appendChild(node);\r\n\t\t\tthis.childNodes = $document.childNodes\r\n\t\t},\r\n\t\tinsertBefore: function(node) {\r\n\t\t\tthis.appendChild(node)\r\n\t\t},\r\n\t\tchildNodes: []\r\n\t};\r\n\tvar nodeCache = [], cellCache = {};\r\n\tm.render = function(root, cell, forceRecreation) {\r\n\t\tvar configs = [];\r\n\t\tif (!root) throw new Error(\"Please ensure the DOM element exists before rendering a template into it.\");\r\n\t\tvar id = getCellCacheKey(root);\r\n\t\tvar isDocumentRoot = root === $document;\r\n\t\tvar node = isDocumentRoot || root === $document.documentElement ? documentNode : root;\r\n\t\tif (isDocumentRoot && cell.tag != \"html\") cell = {tag: \"html\", attrs: {}, children: cell};\r\n\t\tif (cellCache[id] === undefined) clear(node.childNodes);\r\n\t\tif (forceRecreation === true) reset(root);\r\n\t\tcellCache[id] = build(node, null, undefined, undefined, cell, cellCache[id], false, 0, null, undefined, configs);\r\n\t\tfor (var i = 0, len = configs.length; i < len; i++) configs[i]()\r\n\t};\r\n\tfunction getCellCacheKey(element) {\r\n\t\tvar index = nodeCache.indexOf(element);\r\n\t\treturn index < 0 ? nodeCache.push(element) - 1 : index\r\n\t}\r\n\r\n\tm.trust = function(value) {\r\n\t\tvalue = new String(value);\r\n\t\tvalue.$trusted = true;\r\n\t\treturn value\r\n\t};\r\n\r\n\tfunction gettersetter(store) {\r\n\t\tvar prop = function() {\r\n\t\t\tif (arguments.length) store = arguments[0];\r\n\t\t\treturn store\r\n\t\t};\r\n\r\n\t\tprop.toJSON = function() {\r\n\t\t\treturn store\r\n\t\t};\r\n\r\n\t\treturn prop\r\n\t}\r\n\r\n\tm.prop = function (store) {\r\n\t\t//note: using non-strict equality check here because we're checking if store is null OR undefined\r\n\t\tif (((store != null && type.call(store) === OBJECT) || typeof store === FUNCTION) && typeof store.then === FUNCTION) {\r\n\t\t\treturn propify(store)\r\n\t\t}\r\n\r\n\t\treturn gettersetter(store)\r\n\t};\r\n\r\n\tvar roots = [], modules = [], controllers = [], lastRedrawId = null, lastRedrawCallTime = 0, computePostRedrawHook = null, prevented = false, topModule;\r\n\tvar FRAME_BUDGET = 16; //60 frames per second = 1 call per 16 ms\r\n\tm.module = function(root, module) {\r\n\t\tif (!root) throw new Error(\"Please ensure the DOM element exists before rendering a template into it.\");\r\n\t\tvar index = roots.indexOf(root);\r\n\t\tif (index < 0) index = roots.length;\r\n\t\tvar isPrevented = false;\r\n\t\tif (controllers[index] && typeof controllers[index].onunload === FUNCTION) {\r\n\t\t\tvar event = {\r\n\t\t\t\tpreventDefault: function() {isPrevented = true}\r\n\t\t\t};\r\n\t\t\tcontrollers[index].onunload(event)\r\n\t\t}\r\n\t\tif (!isPrevented) {\r\n\t\t\tm.redraw.strategy(\"all\");\r\n\t\t\tm.startComputation();\r\n\t\t\troots[index] = root;\r\n\t\t\tvar currentModule = topModule = module;\r\n\t\t\tvar controller = new module.controller;\r\n\t\t\t//controllers may call m.module recursively (via m.route redirects, for example)\r\n\t\t\t//this conditional ensures only the last recursive m.module call is applied\r\n\t\t\tif (currentModule === topModule) {\r\n\t\t\t\tcontrollers[index] = controller;\r\n\t\t\t\tmodules[index] = module\r\n\t\t\t}\r\n\t\t\tendFirstComputation();\r\n\t\t\treturn controllers[index]\r\n\t\t}\r\n\t};\r\n\tm.redraw = function(force) {\r\n\t\t//lastRedrawId is a positive number if a second redraw is requested before the next animation frame\r\n\t\t//lastRedrawID is null if it's the first redraw and not an event handler\r\n\t\tif (lastRedrawId && force !== true) {\r\n\t\t\t//when setTimeout: only reschedule redraw if time between now and previous redraw is bigger than a frame, otherwise keep currently scheduled timeout\r\n\t\t\t//when rAF: always reschedule redraw\r\n\t\t\tif (new Date - lastRedrawCallTime > FRAME_BUDGET || $requestAnimationFrame === window.requestAnimationFrame) {\r\n\t\t\t\tif (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId);\r\n\t\t\t\tlastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tredraw();\r\n\t\t\tlastRedrawId = $requestAnimationFrame(function() {lastRedrawId = null}, FRAME_BUDGET)\r\n\t\t}\r\n\t};\r\n\tm.redraw.strategy = m.prop();\r\n\tfunction redraw() {\r\n\t\tvar forceRedraw = m.redraw.strategy() === \"all\";\r\n\t\tfor (var i = 0, root; root = roots[i]; i++) {\r\n\t\t\tif (controllers[i]) {\r\n\t\t\t\tm.render(root, modules[i].view(controllers[i]), forceRedraw)\r\n\t\t\t}\r\n\t\t}\r\n\t\t//after rendering within a routed context, we need to scroll back to the top, and fetch the document title for history.pushState\r\n\t\tif (computePostRedrawHook) {\r\n\t\t\tcomputePostRedrawHook();\r\n\t\t\tcomputePostRedrawHook = null\r\n\t\t}\r\n\t\tlastRedrawId = null;\r\n\t\tlastRedrawCallTime = new Date;\r\n\t\tm.redraw.strategy(\"diff\")\r\n\t}\r\n\r\n\tvar pendingRequests = 0;\r\n\tm.startComputation = function() {pendingRequests++};\r\n\tm.endComputation = function() {\r\n\t\tpendingRequests = Math.max(pendingRequests - 1, 0);\r\n\t\tif (pendingRequests === 0) m.redraw()\r\n\t};\r\n\tvar endFirstComputation = function() {\r\n\t\tif (m.redraw.strategy() == \"none\") {\r\n\t\t\tpendingRequests--\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t}\r\n\t\telse m.endComputation();\r\n\t}\r\n\r\n\tm.withAttr = function(prop, withAttrCallback) {\r\n\t\treturn function(e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar currentTarget = e.currentTarget || this;\r\n\t\t\twithAttrCallback(prop in currentTarget ? currentTarget[prop] : currentTarget.getAttribute(prop))\r\n\t\t}\r\n\t};\r\n\r\n\t//routing\r\n\tvar modes = {pathname: \"\", hash: \"#\", search: \"?\"};\r\n\tvar redirect = function() {}, routeParams, currentRoute;\r\n\tm.route = function() {\r\n\t\t//m.route()\r\n\t\tif (arguments.length === 0) return currentRoute;\r\n\t\t//m.route(el, defaultRoute, routes)\r\n\t\telse if (arguments.length === 3 && type.call(arguments[1]) === STRING) {\r\n\t\t\tvar root = arguments[0], defaultRoute = arguments[1], router = arguments[2];\r\n\t\t\tredirect = function(source) {\r\n\t\t\t\tvar path = currentRoute = normalizeRoute(source);\r\n\t\t\t\tif (!routeByValue(root, router, path)) {\r\n\t\t\t\t\tm.route(defaultRoute, true)\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar listener = m.route.mode === \"hash\" ? \"onhashchange\" : \"onpopstate\";\r\n\t\t\twindow[listener] = function() {\r\n\t\t\t\tif (currentRoute != normalizeRoute($location[m.route.mode])) {\r\n\t\t\t\t\tredirect($location[m.route.mode])\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tcomputePostRedrawHook = setScroll;\r\n\t\t\twindow[listener]()\r\n\t\t}\r\n\t\t//config: m.route\r\n\t\telse if (arguments[0].addEventListener) {\r\n\t\t\tvar element = arguments[0];\r\n\t\t\tvar isInitialized = arguments[1];\r\n\t\t\tvar context = arguments[2];\r\n\t\t\telement.href = (m.route.mode !== 'pathname' ? $location.pathname : '') + modes[m.route.mode] + this.attrs.href;\r\n\t\t\telement.removeEventListener(\"click\", routeUnobtrusive);\r\n\t\t\telement.addEventListener(\"click\", routeUnobtrusive)\r\n\t\t}\r\n\t\t//m.route(route, params)\r\n\t\telse if (type.call(arguments[0]) === STRING) {\r\n\t\t\tcurrentRoute = arguments[0];\r\n\t\t\tvar args = arguments[1] || {}\r\n\t\t\tvar queryIndex = currentRoute.indexOf(\"?\")\r\n\t\t\tvar params = queryIndex > -1 ? parseQueryString(currentRoute.slice(queryIndex + 1)) : {}\r\n\t\t\tfor (var i in args) params[i] = args[i]\r\n\t\t\tvar querystring = buildQueryString(params)\r\n\t\t\tvar currentPath = queryIndex > -1 ? currentRoute.slice(0, queryIndex) : currentRoute\r\n\t\t\tif (querystring) currentRoute = currentPath + (currentPath.indexOf(\"?\") === -1 ? \"?\" : \"&\") + querystring;\r\n\r\n\t\t\tvar shouldReplaceHistoryEntry = (arguments.length === 3 ? arguments[2] : arguments[1]) === true;\r\n\r\n\t\t\tif (window.history.pushState) {\r\n\t\t\t\tcomputePostRedrawHook = function() {\r\n\t\t\t\t\twindow.history[shouldReplaceHistoryEntry ? \"replaceState\" : \"pushState\"](null, $document.title, modes[m.route.mode] + currentRoute);\r\n\t\t\t\t\tsetScroll()\r\n\t\t\t\t};\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t}\r\n\t\t\telse $location[m.route.mode] = currentRoute\r\n\t\t}\r\n\t};\r\n\tm.route.param = function(key) {\r\n\t\tif (!routeParams) throw new Error(\"You must call m.route(element, defaultRoute, routes) before calling m.route.param()\")\r\n\t\treturn routeParams[key]\r\n\t};\r\n\tm.route.mode = \"search\";\r\n\tfunction normalizeRoute(route) {return route.slice(modes[m.route.mode].length)}\r\n\tfunction routeByValue(root, router, path) {\r\n\t\trouteParams = {};\r\n\r\n\t\tvar queryStart = path.indexOf(\"?\");\r\n\t\tif (queryStart !== -1) {\r\n\t\t\trouteParams = parseQueryString(path.substr(queryStart + 1, path.length));\r\n\t\t\tpath = path.substr(0, queryStart)\r\n\t\t}\r\n\r\n\t\tfor (var route in router) {\r\n\t\t\tif (route === path) {\r\n\t\t\t\tm.module(root, router[route]);\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tvar matcher = new RegExp(\"^\" + route.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\");\r\n\r\n\t\t\tif (matcher.test(path)) {\r\n\t\t\t\tpath.replace(matcher, function() {\r\n\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || [];\r\n\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2);\r\n\t\t\t\t\tfor (var i = 0, len = keys.length; i < len; i++) routeParams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\r\n\t\t\t\t\tm.module(root, router[route])\r\n\t\t\t\t});\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction routeUnobtrusive(e) {\r\n\t\te = e || event;\r\n\t\tif (e.ctrlKey || e.metaKey || e.which === 2) return;\r\n\t\tif (e.preventDefault) e.preventDefault();\r\n\t\telse e.returnValue = false;\r\n\t\tvar currentTarget = e.currentTarget || this;\r\n\t\tvar args = m.route.mode === \"pathname\" && currentTarget.search ? parseQueryString(currentTarget.search.slice(1)) : {};\r\n\t\tm.route(currentTarget[m.route.mode].slice(modes[m.route.mode].length), args)\r\n\t}\r\n\tfunction setScroll() {\r\n\t\tif (m.route.mode != \"hash\" && $location.hash) $location.hash = $location.hash;\r\n\t\telse window.scrollTo(0, 0)\r\n\t}\r\n\tfunction buildQueryString(object, prefix) {\r\n\t\tvar str = [];\r\n\t\tfor(var prop in object) {\r\n\t\t\tvar key = prefix ? prefix + \"[\" + prop + \"]\" : prop, value = object[prop];\r\n\t\t\tstr.push(value != null && type.call(value) === OBJECT ? buildQueryString(value, key) : encodeURIComponent(key) + \"=\" + encodeURIComponent(value))\r\n\t\t}\r\n\t\treturn str.join(\"&\")\r\n\t}\r\n\tfunction parseQueryString(str) {\r\n\t\tvar pairs = str.split(\"&\"), params = {};\r\n\t\tfor (var i = 0, len = pairs.length; i < len; i++) {\r\n\t\t\tvar pair = pairs[i].split(\"=\");\r\n\t\t\tparams[decodeSpace(pair[0])] = pair[1] ? decodeSpace(pair[1]) : \"\"\r\n\t\t}\r\n\t\treturn params\r\n\t}\r\n\tfunction decodeSpace(string) {\r\n\t\treturn decodeURIComponent(string.replace(/\\+/g, \" \"))\r\n\t}\r\n\tfunction reset(root) {\r\n\t\tvar cacheKey = getCellCacheKey(root);\r\n\t\tclear(root.childNodes, cellCache[cacheKey]);\r\n\t\tcellCache[cacheKey] = undefined\r\n\t}\r\n\r\n\tm.deferred = function () {\r\n\t\tvar deferred = new Deferred();\r\n\t\tdeferred.promise = propify(deferred.promise);\r\n\t\treturn deferred\r\n\t};\r\n\tfunction propify(promise) {\r\n\t\tvar prop = m.prop();\r\n\t\tpromise.then(prop);\r\n\t\tprop.then = function(resolve, reject) {\r\n\t\t\treturn propify(promise.then(resolve, reject))\r\n\t\t};\r\n\t\treturn prop\r\n\t}\r\n\t//Promiz.mithril.js | Zolmeister | MIT\r\n\t//a modified version of Promiz.js, which does not conform to Promises/A+ for two reasons:\r\n\t//1) `then` callbacks are called synchronously (because setTimeout is too slow, and the setImmediate polyfill is too big\r\n\t//2) throwing subclasses of Error cause the error to be bubbled up instead of triggering rejection (because the spec does not account for the important use case of default browser error handling, i.e. message w/ line number)\r\n\tfunction Deferred(successCallback, failureCallback) {\r\n\t\tvar RESOLVING = 1, REJECTING = 2, RESOLVED = 3, REJECTED = 4;\r\n\t\tvar self = this, state = 0, promiseValue = 0, next = [];\r\n\r\n\t\tself[\"promise\"] = {};\r\n\r\n\t\tself[\"resolve\"] = function(value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value;\r\n\t\t\t\tstate = RESOLVING;\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\t\t\treturn this\r\n\t\t};\r\n\r\n\t\tself[\"reject\"] = function(value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value;\r\n\t\t\t\tstate = REJECTING;\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\t\t\treturn this\r\n\t\t};\r\n\r\n\t\tself.promise[\"then\"] = function(successCallback, failureCallback) {\r\n\t\t\tvar deferred = new Deferred(successCallback, failureCallback);\r\n\t\t\tif (state === RESOLVED) {\r\n\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t}\r\n\t\t\telse if (state === REJECTED) {\r\n\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnext.push(deferred)\r\n\t\t\t}\r\n\t\t\treturn deferred.promise\r\n\t\t};\r\n\r\n\t\tfunction finish(type) {\r\n\t\t\tstate = type || REJECTED;\r\n\t\t\tnext.map(function(deferred) {\r\n\t\t\t\tstate === RESOLVED && deferred.resolve(promiseValue) || deferred.reject(promiseValue)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfunction thennable(then, successCallback, failureCallback, notThennableCallback) {\r\n\t\t\tif (((promiseValue != null && type.call(promiseValue) === OBJECT) || typeof promiseValue === FUNCTION) && typeof then === FUNCTION) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// count protects against abuse calls from spec checker\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\tthen.call(promiseValue, function(value) {\r\n\t\t\t\t\t\tif (count++) return;\r\n\t\t\t\t\t\tpromiseValue = value;\r\n\t\t\t\t\t\tsuccessCallback()\r\n\t\t\t\t\t}, function (value) {\r\n\t\t\t\t\t\tif (count++) return;\r\n\t\t\t\t\t\tpromiseValue = value;\r\n\t\t\t\t\t\tfailureCallback()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e);\r\n\t\t\t\t\tpromiseValue = e;\r\n\t\t\t\t\tfailureCallback()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnotThennableCallback()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fire() {\r\n\t\t\t// check if it's a thenable\r\n\t\t\tvar then;\r\n\t\t\ttry {\r\n\t\t\t\tthen = promiseValue && promiseValue.then\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tm.deferred.onerror(e);\r\n\t\t\t\tpromiseValue = e;\r\n\t\t\t\tstate = REJECTING;\r\n\t\t\t\treturn fire()\r\n\t\t\t}\r\n\t\t\tthennable(then, function() {\r\n\t\t\t\tstate = RESOLVING;\r\n\t\t\t\tfire()\r\n\t\t\t}, function() {\r\n\t\t\t\tstate = REJECTING;\r\n\t\t\t\tfire()\r\n\t\t\t}, function() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state === RESOLVING && typeof successCallback === FUNCTION) {\r\n\t\t\t\t\t\tpromiseValue = successCallback(promiseValue)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (state === REJECTING && typeof failureCallback === \"function\") {\r\n\t\t\t\t\t\tpromiseValue = failureCallback(promiseValue);\r\n\t\t\t\t\t\tstate = RESOLVING\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e);\r\n\t\t\t\t\tpromiseValue = e;\r\n\t\t\t\t\treturn finish()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (promiseValue === self) {\r\n\t\t\t\t\tpromiseValue = TypeError();\r\n\t\t\t\t\tfinish()\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthennable(then, function () {\r\n\t\t\t\t\t\tfinish(RESOLVED)\r\n\t\t\t\t\t}, finish, function () {\r\n\t\t\t\t\t\tfinish(state === RESOLVING && RESOLVED)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tm.deferred.onerror = function(e) {\r\n\t\tif (type.call(e) === \"[object Error]\" && !e.constructor.toString().match(/ Error/)) throw e\r\n\t};\r\n\r\n\tm.sync = function(args) {\r\n\t\tvar method = \"resolve\";\r\n\t\tfunction synchronizer(pos, resolved) {\r\n\t\t\treturn function(value) {\r\n\t\t\t\tresults[pos] = value;\r\n\t\t\t\tif (!resolved) method = \"reject\";\r\n\t\t\t\tif (--outstanding === 0) {\r\n\t\t\t\t\tdeferred.promise(results);\r\n\t\t\t\t\tdeferred[method](results)\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar deferred = m.deferred();\r\n\t\tvar outstanding = args.length;\r\n\t\tvar results = new Array(outstanding);\r\n\t\tif (args.length > 0) {\r\n\t\t\tfor (var i = 0; i < args.length; i++) {\r\n\t\t\t\targs[i].then(synchronizer(i, true), synchronizer(i, false))\r\n\t\t\t}\r\n\t\t}\r\n\t\telse deferred.resolve([]);\r\n\r\n\t\treturn deferred.promise\r\n\t};\r\n\tfunction identity(value) {return value}\r\n\r\n\tfunction ajax(options) {\r\n\t\tif (options.dataType && options.dataType.toLowerCase() === \"jsonp\") {\r\n\t\t\tvar callbackKey = \"mithril_callback_\" + new Date().getTime() + \"_\" + (Math.round(Math.random() * 1e16)).toString(36);\r\n\t\t\tvar script = $document.createElement(\"script\");\r\n\r\n\t\t\twindow[callbackKey] = function(resp) {\r\n\t\t\t\t$document.body.removeChild(script);\r\n\t\t\t\toptions.onload({\r\n\t\t\t\t\ttype: \"load\",\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tresponseText: resp\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\twindow[callbackKey] = undefined\r\n\t\t\t};\r\n\r\n\t\t\tscript.onerror = function(e) {\r\n\t\t\t\t$document.body.removeChild(script);\r\n\r\n\t\t\t\toptions.onerror({\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tstatus: 500,\r\n\t\t\t\t\t\tresponseText: JSON.stringify({error: \"Error making jsonp request\"})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\twindow[callbackKey] = undefined;\r\n\r\n\t\t\t\treturn false\r\n\t\t\t};\r\n\r\n\t\t\tscript.onload = function(e) {\r\n\t\t\t\treturn false\r\n\t\t\t};\r\n\r\n\t\t\tscript.src = options.url\r\n\t\t\t\t+ (options.url.indexOf(\"?\") > 0 ? \"&\" : \"?\")\r\n\t\t\t\t+ (options.callbackKey ? options.callbackKey : \"callback\")\r\n\t\t\t\t+ \"=\" + callbackKey\r\n\t\t\t\t+ \"&\" + buildQueryString(options.data || {});\r\n\t\t\t$document.body.appendChild(script)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar xhr = new window.XMLHttpRequest;\r\n\t\t\txhr.open(options.method, options.url, true, options.user, options.password);\r\n\t\t\txhr.onreadystatechange = function() {\r\n\t\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) options.onload({type: \"load\", target: xhr});\r\n\t\t\t\t\telse options.onerror({type: \"error\", target: xhr})\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (options.serialize === JSON.stringify && options.data && options.method !== \"GET\") {\r\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\r\n\t\t\t}\r\n\t\t\tif (options.deserialize === JSON.parse) {\r\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\");\r\n\t\t\t}\r\n\t\t\tif (typeof options.config === FUNCTION) {\r\n\t\t\t\tvar maybeXhr = options.config(xhr, options);\r\n\t\t\t\tif (maybeXhr != null) xhr = maybeXhr\r\n\t\t\t}\r\n\r\n\t\t\tvar data = options.method === \"GET\" || !options.data ? \"\" : options.data\r\n\t\t\tif (data && (type.call(data) != STRING && data.constructor != window.FormData)) {\r\n\t\t\t\tthrow \"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`\";\r\n\t\t\t}\r\n\t\t\txhr.send(data);\r\n\t\t\treturn xhr\r\n\t\t}\r\n\t}\r\n\tfunction bindData(xhrOptions, data, serialize) {\r\n\t\tif (xhrOptions.method === \"GET\" && xhrOptions.dataType != \"jsonp\") {\r\n\t\t\tvar prefix = xhrOptions.url.indexOf(\"?\") < 0 ? \"?\" : \"&\";\r\n\t\t\tvar querystring = buildQueryString(data);\r\n\t\t\txhrOptions.url = xhrOptions.url + (querystring ? prefix + querystring : \"\")\r\n\t\t}\r\n\t\telse xhrOptions.data = serialize(data);\r\n\t\treturn xhrOptions\r\n\t}\r\n\tfunction parameterizeUrl(url, data) {\r\n\t\tvar tokens = url.match(/:[a-z]\\w+/gi);\r\n\t\tif (tokens && data) {\r\n\t\t\tfor (var i = 0; i < tokens.length; i++) {\r\n\t\t\t\tvar key = tokens[i].slice(1);\r\n\t\t\t\turl = url.replace(tokens[i], data[key]);\r\n\t\t\t\tdelete data[key]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url\r\n\t}\r\n\r\n\tm.request = function(xhrOptions) {\r\n\t\tif (xhrOptions.background !== true) m.startComputation();\r\n\t\tvar deferred = m.deferred();\r\n\t\tvar isJSONP = xhrOptions.dataType && xhrOptions.dataType.toLowerCase() === \"jsonp\";\r\n\t\tvar serialize = xhrOptions.serialize = isJSONP ? identity : xhrOptions.serialize || JSON.stringify;\r\n\t\tvar deserialize = xhrOptions.deserialize = isJSONP ? identity : xhrOptions.deserialize || JSON.parse;\r\n\t\tvar extract = xhrOptions.extract || function(xhr) {\r\n\t\t\treturn xhr.responseText.length === 0 && deserialize === JSON.parse ? null : xhr.responseText\r\n\t\t};\r\n\t\txhrOptions.url = parameterizeUrl(xhrOptions.url, xhrOptions.data);\r\n\t\txhrOptions = bindData(xhrOptions, xhrOptions.data, serialize);\r\n\t\txhrOptions.onload = xhrOptions.onerror = function(e) {\r\n\t\t\ttry {\r\n\t\t\t\te = e || event;\r\n\t\t\t\tvar unwrap = (e.type === \"load\" ? xhrOptions.unwrapSuccess : xhrOptions.unwrapError) || identity;\r\n\t\t\t\tvar response = unwrap(deserialize(extract(e.target, xhrOptions)));\r\n\t\t\t\tif (e.type === \"load\") {\r\n\t\t\t\t\tif (type.call(response) === ARRAY && xhrOptions.type) {\r\n\t\t\t\t\t\tfor (var i = 0; i < response.length; i++) response[i] = new xhrOptions.type(response[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (xhrOptions.type) response = new xhrOptions.type(response)\r\n\t\t\t\t}\r\n\t\t\t\tdeferred[e.type === \"load\" ? \"resolve\" : \"reject\"](response)\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tm.deferred.onerror(e);\r\n\t\t\t\tdeferred.reject(e)\r\n\t\t\t}\r\n\t\t\tif (xhrOptions.background !== true) m.endComputation()\r\n\t\t};\r\n\t\tajax(xhrOptions);\r\n\t\tdeferred.promise(xhrOptions.initialValue);\r\n\t\treturn deferred.promise\r\n\t};\r\n\r\n\t//testing API\r\n\tm.deps = function(mock) {\r\n\t\tinitialize(window = mock || window);\r\n\t\treturn window;\r\n\t};\r\n\t//for internal testing only, do not use `m.deps.factory`\r\n\tm.deps.factory = app;\r\n\r\n\treturn m\r\n})(typeof window != \"undefined\" ? window : {});\r\n\r\nif (typeof module != \"undefined\" && module !== null && module.exports) module.exports = m;\r\nelse if (typeof define === \"function\" && define.amd) define(function() {return m});\r\n\n},{}],3:[function(require,module,exports){\n// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement(\"div\");f.id=\"stats\";f.addEventListener(\"mousedown\",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText=\"width:80px;opacity:0.9;cursor:pointer\";var a=document.createElement(\"div\");a.id=\"fps\";a.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#002\";f.appendChild(a);var i=document.createElement(\"div\");i.id=\"fpsText\";i.style.cssText=\"color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";\ni.innerHTML=\"FPS\";a.appendChild(i);var c=document.createElement(\"div\");c.id=\"fpsGraph\";c.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0ff\";for(a.appendChild(c);74>c.children.length;){var j=document.createElement(\"span\");j.style.cssText=\"width:1px;height:30px;float:left;background-color:#113\";c.appendChild(j)}var d=document.createElement(\"div\");d.id=\"ms\";d.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#020;display:none\";f.appendChild(d);var k=document.createElement(\"div\");\nk.id=\"msText\";k.style.cssText=\"color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";k.innerHTML=\"MS\";d.appendChild(k);var e=document.createElement(\"div\");e.id=\"msGraph\";e.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0f0\";for(d.appendChild(e);74>e.children.length;)j=document.createElement(\"span\"),j.style.cssText=\"width:1px;height:30px;float:left;background-color:#131\",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=\n\"block\";d.style.display=\"none\";break;case 1:a.style.display=\"none\",d.style.display=\"block\"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+\" MS (\"+n+\"-\"+o+\")\";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+\"px\";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+\" FPS (\"+p+\"-\"+q+\")\",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=\na+\"px\",m=b,r=0);return b},update:function(){l=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n},{}],4:[function(require,module,exports){\n// File:src/Three.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar THREE = { REVISION: '70' };\n\n// browserify support\n\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = THREE;\n\n}\n\n// polyfills\n\nif ( Math.sign === undefined ) {\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : 0;\n\n\t};\n\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\n\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n// GL STATE CONSTANTS\n\nTHREE.CullFaceNone = 0;\nTHREE.CullFaceBack = 1;\nTHREE.CullFaceFront = 2;\nTHREE.CullFaceFrontBack = 3;\n\nTHREE.FrontFaceDirectionCW = 0;\nTHREE.FrontFaceDirectionCCW = 1;\n\n// SHADOWING TYPES\n\nTHREE.BasicShadowMap = 0;\nTHREE.PCFShadowMap = 1;\nTHREE.PCFSoftShadowMap = 2;\n\n// MATERIAL CONSTANTS\n\n// side\n\nTHREE.FrontSide = 0;\nTHREE.BackSide = 1;\nTHREE.DoubleSide = 2;\n\n// shading\n\nTHREE.NoShading = 0;\nTHREE.FlatShading = 1;\nTHREE.SmoothShading = 2;\n\n// colors\n\nTHREE.NoColors = 0;\nTHREE.FaceColors = 1;\nTHREE.VertexColors = 2;\n\n// blending modes\n\nTHREE.NoBlending = 0;\nTHREE.NormalBlending = 1;\nTHREE.AdditiveBlending = 2;\nTHREE.SubtractiveBlending = 3;\nTHREE.MultiplyBlending = 4;\nTHREE.CustomBlending = 5;\n\n// custom blending equations\n// (numbers start from 100 not to clash with other\n//  mappings to OpenGL constants defined in Texture.js)\n\nTHREE.AddEquation = 100;\nTHREE.SubtractEquation = 101;\nTHREE.ReverseSubtractEquation = 102;\nTHREE.MinEquation = 103;\nTHREE.MaxEquation = 104;\n\n// custom blending destination factors\n\nTHREE.ZeroFactor = 200;\nTHREE.OneFactor = 201;\nTHREE.SrcColorFactor = 202;\nTHREE.OneMinusSrcColorFactor = 203;\nTHREE.SrcAlphaFactor = 204;\nTHREE.OneMinusSrcAlphaFactor = 205;\nTHREE.DstAlphaFactor = 206;\nTHREE.OneMinusDstAlphaFactor = 207;\n\n// custom blending source factors\n\n//THREE.ZeroFactor = 200;\n//THREE.OneFactor = 201;\n//THREE.SrcAlphaFactor = 204;\n//THREE.OneMinusSrcAlphaFactor = 205;\n//THREE.DstAlphaFactor = 206;\n//THREE.OneMinusDstAlphaFactor = 207;\nTHREE.DstColorFactor = 208;\nTHREE.OneMinusDstColorFactor = 209;\nTHREE.SrcAlphaSaturateFactor = 210;\n\n\n// TEXTURE CONSTANTS\n\nTHREE.MultiplyOperation = 0;\nTHREE.MixOperation = 1;\nTHREE.AddOperation = 2;\n\n// Mapping modes\n\nTHREE.UVMapping = 300;\n\nTHREE.CubeReflectionMapping = 301;\nTHREE.CubeRefractionMapping = 302;\n\nTHREE.EquirectangularReflectionMapping = 303;\nTHREE.EquirectangularRefractionMapping = 304;\n\nTHREE.SphericalReflectionMapping = 305;\n\n// Wrapping modes\n\nTHREE.RepeatWrapping = 1000;\nTHREE.ClampToEdgeWrapping = 1001;\nTHREE.MirroredRepeatWrapping = 1002;\n\n// Filters\n\nTHREE.NearestFilter = 1003;\nTHREE.NearestMipMapNearestFilter = 1004;\nTHREE.NearestMipMapLinearFilter = 1005;\nTHREE.LinearFilter = 1006;\nTHREE.LinearMipMapNearestFilter = 1007;\nTHREE.LinearMipMapLinearFilter = 1008;\n\n// Data types\n\nTHREE.UnsignedByteType = 1009;\nTHREE.ByteType = 1010;\nTHREE.ShortType = 1011;\nTHREE.UnsignedShortType = 1012;\nTHREE.IntType = 1013;\nTHREE.UnsignedIntType = 1014;\nTHREE.FloatType = 1015;\n\n// Pixel types\n\n//THREE.UnsignedByteType = 1009;\nTHREE.UnsignedShort4444Type = 1016;\nTHREE.UnsignedShort5551Type = 1017;\nTHREE.UnsignedShort565Type = 1018;\n\n// Pixel formats\n\nTHREE.AlphaFormat = 1019;\nTHREE.RGBFormat = 1020;\nTHREE.RGBAFormat = 1021;\nTHREE.LuminanceFormat = 1022;\nTHREE.LuminanceAlphaFormat = 1023;\n// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\nTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\n\n// DDS / ST3C Compressed texture formats\n\nTHREE.RGB_S3TC_DXT1_Format = 2001;\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\n\n\n// PVRTC compressed texture formats\n\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\n\n\n// DEPRECATED\n\nTHREE.Projector = function () {\n\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function ( vector, camera ) {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n};\n\nTHREE.CanvasRenderer = function () {\n\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\n\n\tthis.domElement = document.createElement( 'canvas' );\n\tthis.clear = function () {};\n\tthis.render = function () {};\n\tthis.setClearColor = function () {};\n\tthis.setSize = function () {};\n\n};\n\n// File:src/math/Color.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Color = function ( color ) {\n\n\tif ( arguments.length === 3 ) {\n\n\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\n\n\t}\n\n\treturn this.set( color )\n\n};\n\nTHREE.Color.prototype = {\n\n\tconstructor: THREE.Color,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value instanceof THREE.Color ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar hue2rgb = function ( p, q, t ) {\n\n\t\t\t\tif ( t < 0 ) t += 1;\n\t\t\t\tif ( t > 1 ) t -= 1;\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\t\treturn p;\n\n\t\t\t};\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\t// rgb(255,0,0)\n\n\t\tif ( /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.test( style ) ) {\n\n\t\t\tvar color = /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.exec( style );\n\n\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// rgb(100%,0%,0%)\n\n\t\tif ( /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.test( style ) ) {\n\n\t\t\tvar color = /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.exec( style );\n\n\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// #ff0000\n\n\t\tif ( /^\\#([0-9a-f]{6})$/i.test( style ) ) {\n\n\t\t\tvar color = /^\\#([0-9a-f]{6})$/i.exec( style );\n\n\t\t\tthis.setHex( parseInt( color[ 1 ], 16 ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// #f00\n\n\t\tif ( /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test( style ) ) {\n\n\t\t\tvar color = /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec( style );\n\n\t\t\tthis.setHex( parseInt( color[ 1 ] + color[ 1 ] + color[ 2 ] + color[ 2 ] + color[ 3 ] + color[ 3 ], 16 ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// red\n\n\t\tif ( /^(\\w+)$/i.test( style ) ) {\n\n\t\t\tthis.setHex( THREE.ColorKeywords[ style ] );\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color ) {\n\n\t\tthis.r = color.r * color.r;\n\t\tthis.g = color.g * color.g;\n\t\tthis.b = color.b * color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color ) {\n\n\t\tthis.r = Math.sqrt( color.r );\n\t\tthis.g = Math.sqrt( color.g );\n\t\tthis.b = Math.sqrt( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( optionalTarget ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\thsl.h = hue;\n\t\thsl.s = saturation;\n\t\thsl.l = lightness;\n\n\t\treturn hsl;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tvar hsl = this.getHSL();\n\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.r = array[ 0 ];\n\t\tthis.g = array[ 1 ];\n\t\tthis.b = array[ 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\treturn [ this.r, this.g, this.b ];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Color().setRGB( this.r, this.g, this.b );\n\n\t}\n\n};\n\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\n// File:src/math/Quaternion.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Quaternion = function ( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Quaternion.prototype = {\n\n\tconstructor: THREE.Quaternion,\n\n\t_x: 0,_y: 0, _z: 0, _w: 0,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget w () {\n\n\t\treturn this._w;\n\n\t},\n\n\tset w ( value ) {\n\n\t\tthis._w = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\t\t}\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar c1 = Math.cos( euler._x / 2 );\n\t\tvar c2 = Math.cos( euler._y / 2 );\n\t\tvar c3 = Math.cos( euler._z / 2 );\n\t\tvar s1 = Math.sin( euler._x / 2 );\n\t\tvar s2 = Math.sin( euler._y / 2 );\n\t\tvar s3 = Math.sin( euler._z / 2 );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1, r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function ( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\tthis.normalize();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\tinverse: function () {\n\n\t\tthis.conjugate().normalize();\n\n\t\treturn this;\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\t\treturn vector.applyQuaternion( this );\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.acos( cosHalfTheta );\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {},\n\n\tclone: function () {\n\n\t\treturn new THREE.Quaternion( this._x, this._y, this._z, this._w );\n\n\t}\n\n};\n\nTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\n\n\treturn qm.copy( qa ).slerp( qb, t );\n\n}\n\n// File:src/math/Vector2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.Vector2 = function ( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n};\n\nTHREE.Vector2.prototype = {\n\n\tconstructor: THREE.Vector2,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.x *= s;\n\t\tthis.y *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector2();\n\t\t\t\tmax = new THREE.Vector2();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t    if ( offset === undefined ) offset = 0;\n\n\t    index = index * attribute.itemSize + offset;\n\n\t    this.x = attribute.array[ index ];\n\t    this.y = attribute.array[ index + 1 ];\n\n\t    return this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector2( this.x, this.y );\n\n\t}\n\n};\n\n// File:src/math/Vector3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author *kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector3 = function ( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n};\n\nTHREE.Vector3.prototype = {\n\n\tconstructor: THREE.Vector3,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function ( euler ) {\n\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function ( axis, angle ) {\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tapplyProjection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 projection matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\n\t\tvar qx = q.x;\n\t\tvar qy = q.y;\n\t\tvar qz = q.z;\n\t\tvar qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix =  qw * x + qy * z - qz * y;\n\t\tvar iy =  qw * y + qz * x - qx * z;\n\t\tvar iz =  qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\tthis.normalize();\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\t\t\tthis.z *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z > v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z < v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\tif ( this.z < min.z ) {\n\n\t\t\tthis.z = min.z;\n\n\t\t} else if ( this.z > max.z ) {\n\n\t\t\tthis.z = max.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector3();\n\t\t\t\tmax = new THREE.Vector3();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength  ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tthis.x = y * v.z - z * v.y;\n\t\tthis.y = z * v.x - x * v.z;\n\t\tthis.z = x * v.y - y * v.x;\n\n\t\treturn this;\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function () {\n\n\t\tvar v1, dot;\n\n\t\treturn function ( vector ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tv1.copy( vector ).normalize();\n\n\t\t\tdot = this.dot( v1 );\n\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\n\n\t\t};\n\n\t}(),\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1;\n\n\t\treturn function ( planeNormal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t}\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1;\n\n\t\treturn function ( normal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t}\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x;\n\t\tvar dy = this.y - v.y;\n\t\tvar dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tsetEulerFromRotationMatrix: function ( m, order ) {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\n\tsetEulerFromQuaternion: function ( q, order ) {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\n\t\treturn this.setFromMatrixScale( m );\n\t},\n\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\n\t\treturn this.setFromMatrixColumn( index, matrix );\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tthis.x = m.elements[ 12 ];\n\t\tthis.y = m.elements[ 13 ];\n\t\tthis.z = m.elements[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[  2 ] ).length();\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[  6 ] ).length();\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\t},\n\n\tsetFromMatrixColumn: function ( index, matrix ) {\n\n\t\tvar offset = index * 4;\n\n\t\tvar me = matrix.elements;\n\n\t\tthis.x = me[ offset ];\n\t\tthis.y = me[ offset + 1 ];\n\t\tthis.z = me[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t    if ( offset === undefined ) offset = 0;\n\n\t    index = index * attribute.itemSize + offset;\n\n\t    this.x = attribute.array[ index ];\n\t    this.y = attribute.array[ index + 1 ];\n\t    this.z = attribute.array[ index + 2 ];\n\n\t    return this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector3( this.x, this.y, this.z );\n\n\t}\n\n};\n\n// File:src/math/Vector4.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector4 = function ( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Vector4.prototype = {\n\n\tconstructor: THREE.Vector4,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\t\tvar w = this.w;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\t\t\tthis.z *= invScalar;\n\t\t\tthis.w *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\t\t\tthis.w = 1;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\t this.x = 1;\n\t\t\t this.y = 0;\n\t\t\t this.z = 0;\n\n\t\t} else {\n\n\t\t\t this.x = q.x / s;\n\t\t\t this.y = q.y / s;\n\t\t\t this.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) { // m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) { // m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else { // m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z > v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\tif ( this.w > v.w ) {\n\n\t\t\tthis.w = v.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z < v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\tif ( this.w < v.w ) {\n\n\t\t\tthis.w = v.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\tif ( this.z < min.z ) {\n\n\t\t\tthis.z = min.z;\n\n\t\t} else if ( this.z > max.z ) {\n\n\t\t\tthis.z = max.z;\n\n\t\t}\n\n\t\tif ( this.w < min.w ) {\n\n\t\t\tthis.w = min.w;\n\n\t\t} else if ( this.w > max.w ) {\n\n\t\t\tthis.w = max.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector4();\n\t\t\t\tmax = new THREE.Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n    floor: function () {\n\n        this.x = Math.floor( this.x );\n        this.y = Math.floor( this.y );\n        this.z = Math.floor( this.z );\n        this.w = Math.floor( this.w );\n\n        return this;\n\n    },\n\n    ceil: function () {\n\n        this.x = Math.ceil( this.x );\n        this.y = Math.ceil( this.y );\n        this.z = Math.ceil( this.z );\n        this.w = Math.ceil( this.w );\n\n        return this;\n\n    },\n\n    round: function () {\n\n        this.x = Math.round( this.x );\n        this.y = Math.round( this.y );\n        this.z = Math.round( this.z );\n        this.w = Math.round( this.w );\n\n        return this;\n\n    },\n\n    roundToZero: function () {\n\n        this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n        this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n        this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n        this.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n        return this;\n\n    },\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t    if ( offset === undefined ) offset = 0;\n\n\t    index = index * attribute.itemSize + offset;\n\n\t    this.x = attribute.array[ index ];\n\t    this.y = attribute.array[ index + 1 ];\n\t    this.z = attribute.array[ index + 2 ];\n\t    this.w = attribute.array[ index + 3 ];\n\n\t    return this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector4( this.x, this.y, this.z, this.w );\n\n\t}\n\n};\n\n// File:src/math/Euler.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Euler = function ( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || THREE.Euler.DefaultOrder;\n\n};\n\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nTHREE.Euler.DefaultOrder = 'XYZ';\n\nTHREE.Euler.prototype = {\n\n\tconstructor: THREE.Euler,\n\n\t_x: 0, _y: 0, _z: 0, _order: THREE.Euler.DefaultOrder,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget order () {\n\n\t\treturn this._order;\n\n\t},\n\n\tset order ( value ) {\n\n\t\tthis._order = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = THREE.Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( q, order, update ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\t\t\tthis.setFromRotationMatrix( matrix, order, update );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new THREE.Quaternion();\n\n\t\treturn function ( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\t\t\tthis.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\treturn [ this._x, this._y, this._z, this._order ];\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {},\n\n\tclone: function () {\n\n\t\treturn new THREE.Euler( this._x, this._y, this._z, this._order );\n\n\t}\n\n};\n\n// File:src/math/Line3.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Line3 = function ( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\n\n};\n\nTHREE.Line3.prototype = {\n\n\tconstructor: THREE.Line3,\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new THREE.Vector3();\n\t\tvar startEnd = new THREE.Vector3();\n\n\t\treturn function ( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Line3().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Box2.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Box2 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\n\n};\n\nTHREE.Box2.prototype = {\n\n\tconstructor: THREE.Box2,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] )\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function ( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tisIntersectionBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Box2().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Box3.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Box3 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\n\n};\n\nTHREE.Box3.prototype = {\n\n\tconstructor: THREE.Box3,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] )\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and childrens', world transforms\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( object ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tobject.traverse( function ( node ) {\n\n\t\t\t\tvar geometry = node.geometry;\n\n\t\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\n\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\n\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t     point.y < this.min.y || point.y > this.max.y ||\n\t\t     point.z < this.min.z || point.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tisIntersectionBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\n\n\t\t\tresult.center = this.center();\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3()\n\t\t];\n\n\t\treturn function ( matrix ) {\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\n\n\t\t\tthis.makeEmpty();\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Box3().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Matrix3.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Matrix3 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix3.prototype = {\n\n\tconstructor: THREE.Matrix3,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( array, offset, length ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.x = array[ j ];\n\t\t\t\tv1.y = array[ j + 1 ];\n\t\t\t\tv1.z = array[ j + 2 ];\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tarray[ j ]     = v1.x;\n\t\t\t\tarray[ j + 1 ] = v1.y;\n\t\t\t\tarray[ j + 2 ] = v1.z;\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnInvertible ) {\n\n\t\t// input: THREE.Matrix4\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\n\n\t\tvar me = matrix.elements;\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\n\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\n\n\t\t// no inverse\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnInvertible || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\tthis.identity();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.multiplyScalar( 1.0 / det );\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset     ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\n\t\treturn array;\n\n\t},\n\n\tgetNormalMatrix: function ( m ) {\n\n\t\t// input: THREE.Matrix4\n\n\t\tthis.getInverse( m ).transpose();\n\n\t\treturn this;\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.elements.set( array );\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\tvar te = this.elements;\n\n\t\treturn [\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\n\t\t];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Matrix3().fromArray( this.elements );\n\n\t}\n\n};\n\n// File:src/math/Matrix4.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://exocortex.com\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Matrix4 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix4.prototype = {\n\n\tconstructor: THREE.Matrix4,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tthis.elements.set( m.elements );\n\n\t\treturn this;\n\n\t},\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n \n \t\tvar te = this.elements;\n \n\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\n \n \t\treturn this;\n \t\t\n \t},\n \n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0,       0,       0,       1\n\t\t);\n\n\t    return this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x = new THREE.Vector3();\n\t\tvar y = new THREE.Vector3();\n\t\tvar z = new THREE.Vector3();\n\n\t\treturn function ( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target ).normalize();\n\n\t\t\tif ( z.length() === 0 ) {\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\tif ( x.length() === 0 ) {\n\n\t\t\t\tz.x += 0.0001;\n\t\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\t}\n\n\t\t\ty.crossVectors( z, x );\n\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyToArray: function ( a, b, r ) {\n\n\t\tvar te = this.elements;\n\n\t\tthis.multiplyMatrices( a, b );\n\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\n\t\treturn vector.applyProjection( this );\n\n\t},\n\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( array, offset, length ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.x = array[ j ];\n\t\t\t\tv1.y = array[ j + 1 ];\n\t\t\t\tv1.z = array[ j + 2 ];\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tarray[ j ]     = v1.x;\n\t\t\t\tarray[ j + 1 ] = v1.y;\n\t\t\t\tarray[ j + 2 ] = v1.z;\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\n\t\tv.transformDirection( this );\n\n\t},\n\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset     ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\t\tarray[ offset + 9 ]  = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t},\n\n\tgetPosition: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\n\t\t\tvar te = this.elements;\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\n\n\t\t};\n\n\t}(),\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnInvertible ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\n\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\n\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\n\n\t\tif ( det == 0 ) {\n\n\t\t\tvar msg = \"Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnInvertible || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\tthis.identity();\n\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.multiplyScalar( 1 / det );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\n\trotateByAxis: function ( axis, angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0,  0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s,  c, 0,\n\t\t\t0, 0,  0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts,  c, 0, 0,\n\t\t\t0,  0, 1, 0,\n\t\t\t0,  0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new THREE.Vector3();\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\treturn function ( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) {\n\t\t\t\tsx = - sx;\n\t\t\t}\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( fov, aspect, near, far ) {\n\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\n\t\tvar ymin = - ymax;\n\t\tvar xmin = ymin * aspect;\n\t\tvar xmax = ymax * aspect;\n\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = right - left;\n\t\tvar h = top - bottom;\n\t\tvar p = far - near;\n\n\t\tvar x = ( right + left ) / w;\n\t\tvar y = ( top + bottom ) / h;\n\t\tvar z = ( far + near ) / p;\n\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.elements.set( array );\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\tvar te = this.elements;\n\n\t\treturn [\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\n\t\t];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\n\n\t}\n\n};\n\n// File:src/math/Ray.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Ray = function ( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\n\n};\n\nTHREE.Ray.prototype = {\n\n\tconstructor: THREE.Ray,\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\tresult.subVectors( point, this.origin );\n\t\tvar directionDistance = result.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn result.copy( this.origin );\n\n\t\t}\n\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceTo( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceTo( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new THREE.Vector3();\n\t\tvar segDir = new THREE.Vector3();\n\t\tvar diff = new THREE.Vector3();\n\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tintersectSphere: function () {\n\n\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( sphere, optionalTarget ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\n\t\t\tvar tca = v1.dot( this.direction );\n\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0 \n\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t}\n\n\t}(),\n\n\tisIntersectionPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\t\tif ( denominator == 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) == 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t :  null;\n\n\t},\n\n\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.at( t, optionalTarget );\n\n\t},\n\n\tisIntersectionBox: function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function ( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t}(),\n\n\tintersectBox: function ( box , optionalTarget ) {\n\n\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\n\n\t\tvar tmin,tmax,tymin,tymax,tzmin,tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t},\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new THREE.Vector3();\n\t\tvar edge1 = new THREE.Vector3();\n\t\tvar edge2 = new THREE.Vector3();\n\t\tvar normal = new THREE.Vector3();\n\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.sub( this.origin );\n\t\tthis.direction.normalize();\n\n\t\treturn this;\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Ray().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Sphere.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Sphere = function ( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n};\n\nTHREE.Sphere.prototype = {\n\n\tconstructor: THREE.Sphere,\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new THREE.Box3();\n\n\t\treturn function ( points, optionalCenter )  {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).center( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n \t\t};\n\n\t}(),\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\tresult.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tresult.sub( this.center ).normalize();\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\tvar box = optionalTarget || new THREE.Box3();\n\n\t\tbox.set( this.center, this.center );\n\t\tbox.expandByScalar( this.radius );\n\n\t\treturn box;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Sphere().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Frustum.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\n\n\t];\n\n};\n\nTHREE.Frustum.prototype = {\n\n\tconstructor: THREE.Frustum,\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new THREE.Sphere();\n\n\t\treturn function ( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new THREE.Vector3(),\n\t\t\tp2 = new THREE.Vector3();\n\n\t\treturn function ( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t}(),\n\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Frustum().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Plane.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Plane = function ( normal, constant ) {\n\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n};\n\nTHREE.Plane.prototype = {\n\n\tconstructor: THREE.Plane,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\n\t\treturn function ( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\n\n\t},\n\n\torthoPoint: function ( point, optionalTarget ) {\n\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\n\n\t},\n\n\tisIntersectionLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( line, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator == 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) == 0 ) {\n\n\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\n\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\t\tvar m1 = new THREE.Matrix3();\n\n\t\treturn function ( matrix, optionalNormalMatrix ) {\n\n\t\t\t// compute new normal based on theory here:\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\n\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant = this.constant - offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant == this.constant );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Plane().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Math.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Math = {\n\n\tgenerateUUID: function () {\n\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\n\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\n\t\tvar uuid = new Array( 36 );\n\t\tvar rnd = 0, r;\n\n\t\treturn function () {\n\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\n\n\t\t\t\tif ( i == 8 || i == 13 || i == 18 || i == 23 ) {\n\n\t\t\t\t\tuuid[ i ] = '-';\n\n\t\t\t\t} else if ( i == 14 ) {\n\n\t\t\t\t\tuuid[ i ] = '4';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\n\t\t\t\t\tr = rnd & 0xf;\n\t\t\t\t\trnd = rnd >> 4;\n\t\t\t\t\tuuid[ i ] = chars[ ( i == 19 ) ? ( r & 0x3 ) | 0x8 : r ];\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn uuid.join( '' );\n\n\t\t};\n\n\t}(),\n\n\t// Clamp value to range <a, b>\n\n\tclamp: function ( x, a, b ) {\n\n\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\n\n\t},\n\n\t// Clamp value to range <a, inf)\n\n\tclampBottom: function ( x, a ) {\n\n\t\treturn x < a ? a : x;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random float from <0, 1> with 16 bits of randomness\n\t// (standard Math.random() creates repetitive patterns when applied over larger space)\n\n\trandom16: function () {\n\n\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn Math.floor( this.randFloat( low, high ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function () {\n\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\n\n\t\treturn function ( degrees ) {\n\n\t\t\treturn degrees * degreeToRadiansFactor;\n\n\t\t};\n\n\t}(),\n\n\tradToDeg: function () {\n\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\n\n\t\treturn function ( radians ) {\n\n\t\t\treturn radians * radianToDegreesFactor;\n\n\t\t};\n\n\t}(),\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n};\n\n// File:src/math/Spline.js\n\n/**\n * Spline from Tween.js, slightly optimized (and trashed)\n * http://sole.github.com/tween.js/examples/05_spline.html\n *\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Spline = function ( points ) {\n\n\tthis.points = points;\n\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\n\tpoint, intPoint, weight, w2, w3,\n\tpa, pb, pc, pd;\n\n\tthis.initFromArray = function ( a ) {\n\n\t\tthis.points = [];\n\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\n\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\n\n\t\t}\n\n\t};\n\n\tthis.getPoint = function ( k ) {\n\n\t\tpoint = ( this.points.length - 1 ) * k;\n\t\tintPoint = Math.floor( point );\n\t\tweight = point - intPoint;\n\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\tc[ 1 ] = intPoint;\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\n\n\t\tpa = this.points[ c[ 0 ] ];\n\t\tpb = this.points[ c[ 1 ] ];\n\t\tpc = this.points[ c[ 2 ] ];\n\t\tpd = this.points[ c[ 3 ] ];\n\n\t\tw2 = weight * weight;\n\t\tw3 = weight * w2;\n\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\n\n\t\treturn v3;\n\n\t};\n\n\tthis.getControlPointsArray = function () {\n\n\t\tvar i, p, l = this.points.length,\n\t\t\tcoords = [];\n\n\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\tp = this.points[ i ];\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\n\n\t\t}\n\n\t\treturn coords;\n\n\t};\n\n\t// approximate length by summing linear segments\n\n\tthis.getLength = function ( nSubDivisions ) {\n\n\t\tvar i, index, nSamples, position,\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\n\t\t\toldPosition = new THREE.Vector3(),\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tchunkLengths = [],\n\t\t\ttotalLength = 0;\n\n\t\t// first point has 0 length\n\n\t\tchunkLengths[ 0 ] = 0;\n\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\n\n\t\tnSamples = this.points.length * nSubDivisions;\n\n\t\toldPosition.copy( this.points[ 0 ] );\n\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\n\n\t\t\tindex = i / nSamples;\n\n\t\t\tposition = this.getPoint( index );\n\t\t\ttmpVec.copy( position );\n\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\n\n\t\t\toldPosition.copy( position );\n\n\t\t\tpoint = ( this.points.length - 1 ) * index;\n\t\t\tintPoint = Math.floor( point );\n\n\t\t\tif ( intPoint != oldIntPoint ) {\n\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\n\t\t\t\toldIntPoint = intPoint;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// last point ends with total length\n\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\n\n\t\treturn { chunks: chunkLengths, total: totalLength };\n\n\t};\n\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\n\n\t\tvar i, j,\n\t\t\tindex, indexCurrent, indexNext,\n\t\t\tlinearDistance, realDistance,\n\t\t\tsampling, position,\n\t\t\tnewpoints = [],\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tsl = this.getLength();\n\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\n\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\n\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\n\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\n\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\n\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\n\t\t\tindexNext = i / ( this.points.length - 1 );\n\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\n\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\n\n\t\t\t\tposition = this.getPoint( index );\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\n\n\t\t\t}\n\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\n\n\t\t}\n\n\t\tthis.points = newpoints;\n\n\t};\n\n\t// Catmull-Rom\n\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t};\n\n};\n\n// File:src/math/Triangle.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Triangle = function ( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\n\n};\n\nTHREE.Triangle.normal = function () {\n\n\tvar v0 = new THREE.Vector3();\n\n\treturn function ( a, b, c, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tresult.subVectors( c, b );\n\t\tv0.subVectors( a, b );\n\t\tresult.cross( v0 );\n\n\t\tvar resultLengthSq = result.lengthSq();\n\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t}\n\n\t\treturn result.set( 0, 0, 0 );\n\n\t};\n\n}();\n\n// static/instance method to calculate barycoordinates\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\nTHREE.Triangle.barycoordFromPoint = function () {\n\n\tvar v0 = new THREE.Vector3();\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\n\treturn function ( point, a, b, c, optionalTarget ) {\n\n\t\tv0.subVectors( c, a );\n\t\tv1.subVectors( b, a );\n\t\tv2.subVectors( point, a );\n\n\t\tvar dot00 = v0.dot( v0 );\n\t\tvar dot01 = v0.dot( v1 );\n\t\tvar dot02 = v0.dot( v2 );\n\t\tvar dot11 = v1.dot( v1 );\n\t\tvar dot12 = v1.dot( v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t// colinear or singular triangle\n\t\tif ( denom == 0 ) {\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn result.set( - 2, - 1, - 1 );\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycoordinates must always sum to 1\n\t\treturn result.set( 1 - u - v, v, u );\n\n\t};\n\n}();\n\nTHREE.Triangle.containsPoint = function () {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function ( point, a, b, c ) {\n\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t};\n\n}();\n\nTHREE.Triangle.prototype = {\n\n\tconstructor: THREE.Triangle,\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tarea: function () {\n\n\t\tvar v0 = new THREE.Vector3();\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tmidpoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tnormal: function ( optionalTarget ) {\n\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tplane: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Plane();\n\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Triangle().copy( this );\n\n\t}\n\n};\n\n// File:src/core/Clock.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Clock = function ( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n};\n\nTHREE.Clock.prototype = {\n\n\tconstructor: THREE.Clock,\n\n\tstart: function () {\n\n\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\n\t\t\t\t\t ? self.performance.now()\n\t\t\t\t\t : Date.now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.running = true;\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\n\t\t\t\t\t ? self.performance.now()\n\t\t\t\t\t : Date.now();\n\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n};\n\n// File:src/core/EventDispatcher.js\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nTHREE.EventDispatcher = function () {}\n\nTHREE.EventDispatcher.prototype = {\n\n\tconstructor: THREE.EventDispatcher,\n\n\tapply: function ( object ) {\n\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\n\n\t},\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = [];\n\t\t\tvar length = listenerArray.length;\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ] = listenerArray[ i ];\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/core/Raycaster.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://exocortex.com/\n * @author stephomi / http://stephaneginier.com/\n */\n\n( function ( THREE ) {\n\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\n\n\t\tthis.ray = new THREE.Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near || 0;\n\t\tthis.far = far || Infinity;\n\n\t\tthis.params = {\n\t\t\tSprite: {},\n\t\t\tMesh: {},\n\t\t\tPointCloud: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tLine: {}\n\t\t};\n\n\t};\n\n\tvar descSort = function ( a, b ) {\n\n\t\treturn a.distance - b.distance;\n\n\t};\n\n\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tvar children = object.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t//\n\n\tTHREE.Raycaster.prototype = {\n\n\t\tconstructor: THREE.Raycaster,\n\n\t\tprecision: 0.0001,\n\t\tlinePrecision: 1,\n\n\t\tset: function ( origin, direction ) {\n\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\t\tthis.ray.set( origin, direction );\n\n\t\t},\n\n\t\tsetFromCamera: function ( coords, camera ) {\n\n\t\t\t// camera is assumed _not_ to be a child of a transformed object\n\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tthis.ray.origin.copy( camera.position );\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( camera.position ).normalize();\n\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t\t}\n\n\t\t},\n\n\t\tintersectObject: function ( object, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tintersectObject( object, this, intersects, recursive );\n\n\t\t\tintersects.sort( descSort );\n\n\t\t\treturn intersects;\n\n\t\t},\n\n\t\tintersectObjects: function ( objects, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tif ( objects instanceof Array === false ) {\n\n\t\t\t\tconsole.log( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\t\treturn intersects;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t\t}\n\n\t\t\tintersects.sort( descSort );\n\n\t\t\treturn intersects;\n\n\t\t}\n\n\t};\n\n}( THREE ) );\n\n// File:src/core/Object3D.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Object3D = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = undefined;\n\tthis.children = [];\n\n\tthis.up = THREE.Object3D.DefaultUp.clone();\n\n\tvar scope = this;\n\n\tvar position = new THREE.Vector3();\n\tvar rotation = new THREE.Euler();\n\tvar quaternion = new THREE.Quaternion();\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\n\n\tvar onRotationChange = function () {\n\t\tquaternion.setFromEuler( rotation, false );\n\t};\n\n\tvar onQuaternionChange = function () {\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\t};\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t} );\n\n\tthis.rotationAutoUpdate = true;\n\n\tthis.matrix = new THREE.Matrix4();\n\tthis.matrixWorld = new THREE.Matrix4();\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\n\tthis.userData = {};\n\n};\n\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\n\nTHREE.Object3D.prototype = {\n\n\tconstructor: THREE.Object3D,\n\n\tget eulerOrder () {\n\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\n\n\t\treturn this.rotation.order;\n\n\t},\n\n\tset eulerOrder ( value ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\n\n\t\tthis.rotation.order = value;\n\n\t},\n\n\tget useQuaternion () {\n\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t},\n\n\tset useQuaternion ( value ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new THREE.Quaternion();\n\n\t\treturn function ( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( vector ) {\n\n\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"can't be added as a child of itself.\" );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object instanceof THREE.Object3D ) {\n\n\t\t\tif ( object.parent !== undefined ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"is not an instance of THREE.Object3D.\" );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = undefined;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tgetChildByName: function ( name, recursive ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name, recursive );\n\n\t},\n\n\tgetObjectById: function ( id, recursive ) {\n\n\t\treturn this.getObjectByProperty( 'id', id, recursive );\n\n\t},\n\n\tgetObjectByName: function ( name, recursive ) {\n\n\t\treturn this.getObjectByProperty( 'name', name, recursive );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value, recursive ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value, recursive );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar scale = new THREE.Vector3();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t}(),\n\n\tgetWorldRotation: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Euler();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t}\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t}\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tif ( this.parent ) {\n\n\t\t\tcallback( this.parent );\n\n\t\t\tthis.parent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\n\n\t\t\tif ( this.parent === undefined ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.3,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'ObjectExporter'\n\t\t\t}\n\t\t};\n\n\t\t//\n\n\t\tvar geometries = {};\n\n\t\tvar parseGeometry = function ( geometry ) {\n\n\t\t\tif ( output.geometries === undefined ) {\n\n\t\t\t\toutput.geometries = [];\n\n\t\t\t}\n\n\t\t\tif ( geometries[ geometry.uuid ] === undefined ) {\n\n\t\t\t\tvar json = geometry.toJSON();\n\n\t\t\t\tdelete json.metadata;\n\n\t\t\t\tgeometries[ geometry.uuid ] = json;\n\n\t\t\t\toutput.geometries.push( json );\n\n\t\t\t}\n\n\t\t\treturn geometry.uuid;\n\n\t\t};\n\n\t\t//\n\n\t\tvar materials = {};\n\n\t\tvar parseMaterial = function ( material ) {\n\n\t\t\tif ( output.materials === undefined ) {\n\n\t\t\t\toutput.materials = [];\n\n\t\t\t}\n\n\t\t\tif ( materials[ material.uuid ] === undefined ) {\n\n\t\t\t\tvar json = material.toJSON();\n\n\t\t\t\tdelete json.metadata;\n\n\t\t\t\tmaterials[ material.uuid ] = json;\n\n\t\t\t\toutput.materials.push( json );\n\n\t\t\t}\n\n\t\t\treturn material.uuid;\n\n\t\t};\n\n\t\t//\n\n\t\tvar parseObject = function ( object ) {\n\n\t\t\tvar data = {};\n\n\t\t\tdata.uuid = object.uuid;\n\t\t\tdata.type = object.type;\n\n\t\t\tif ( object.name !== '' ) data.name = object.name;\n\t\t\tif ( JSON.stringify( object.userData ) !== '{}' ) data.userData = object.userData;\n\t\t\tif ( object.visible !== true ) data.visible = object.visible;\n\n\t\t\tif ( object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tdata.fov = object.fov;\n\t\t\t\tdata.aspect = object.aspect;\n\t\t\t\tdata.near = object.near;\n\t\t\t\tdata.far = object.far;\n\n\t\t\t} else if ( object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tdata.left = object.left;\n\t\t\t\tdata.right = object.right;\n\t\t\t\tdata.top = object.top;\n\t\t\t\tdata.bottom = object.bottom;\n\t\t\t\tdata.near = object.near;\n\t\t\t\tdata.far = object.far;\n\n\t\t\t} else if ( object instanceof THREE.AmbientLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\n\t\t\t} else if ( object instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\n\t\t\t} else if ( object instanceof THREE.PointLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\t\t\t\tdata.distance = object.distance;\n\n\t\t\t} else if ( object instanceof THREE.SpotLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\t\t\t\tdata.distance = object.distance;\n\t\t\t\tdata.angle = object.angle;\n\t\t\t\tdata.exponent = object.exponent;\n\n\t\t\t} else if ( object instanceof THREE.HemisphereLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.groundColor = object.groundColor.getHex();\n\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t}\n\n\t\t\tdata.matrix = object.matrix.toArray();\n\n\t\t\tif ( object.children.length > 0 ) {\n\n\t\t\t\tdata.children = [];\n\n\t\t\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\t\t\t\tdata.children.push( parseObject( object.children[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\toutput.object = parseObject( this );\n\n\t\treturn output;\n\n\t},\n\n\tclone: function ( object, recursive ) {\n\n\t\tif ( object === undefined ) object = new THREE.Object3D();\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tobject.name = this.name;\n\n\t\tobject.up.copy( this.up );\n\n\t\tobject.position.copy( this.position );\n\t\tobject.quaternion.copy( this.quaternion );\n\t\tobject.scale.copy( this.scale );\n\n\t\tobject.rotationAutoUpdate = this.rotationAutoUpdate;\n\n\t\tobject.matrix.copy( this.matrix );\n\t\tobject.matrixWorld.copy( this.matrixWorld );\n\n\t\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\n\t\tobject.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate;\n\n\t\tobject.visible = this.visible;\n\n\t\tobject.castShadow = this.castShadow;\n\t\tobject.receiveShadow = this.receiveShadow;\n\n\t\tobject.frustumCulled = this.frustumCulled;\n\n\t\tobject.userData = JSON.parse( JSON.stringify( this.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tvar child = this.children[ i ];\n\t\t\t\tobject.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\n\nTHREE.Object3DIdCount = 0;\n\n// File:src/core/Face3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\n\tthis.vertexNormals = normal instanceof Array ? normal : [];\n\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\n\tthis.vertexColors = color instanceof Array ? color : [];\n\n\tthis.vertexTangents = [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n};\n\nTHREE.Face3.prototype = {\n\n\tconstructor: THREE.Face3,\n\n\tclone: function () {\n\n\t\tvar face = new THREE.Face3( this.a, this.b, this.c );\n\n\t\tface.normal.copy( this.normal );\n\t\tface.color.copy( this.color );\n\n\t\tface.materialIndex = this.materialIndex;\n\n\t\tfor ( var i = 0, il = this.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tface.vertexNormals[ i ] = this.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tface.vertexColors[ i ] = this.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.vertexTangents.length; i < il; i ++ ) {\n\n\t\t\tface.vertexTangents[ i ] = this.vertexTangents[ i ].clone();\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n};\n\n// File:src/core/Face4.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\n\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' )\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\n\n};\n\n// File:src/core/BufferAttribute.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferAttribute = function ( array, itemSize ) {\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\n\tthis.needsUpdate = false;\n\n};\n\nTHREE.BufferAttribute.prototype = {\n\n\tconstructor: THREE.BufferAttribute,\n\n\tget length () {\n\n\t\treturn this.array.length;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.array.set( value );\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.BufferAttribute( new this.array.constructor( this.array ), this.itemSize );\n\n\t}\n\n};\n\n//\n\nTHREE.Int8Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint8Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint8ClampedAttribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n\n};\n\nTHREE.Int16Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint16Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Int32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Float32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Float64Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\n// File:src/core/BufferGeometry.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.attributes = {};\n\tthis.attributesKeys = [];\n\n\tthis.drawcalls = [];\n\tthis.offsets = this.drawcalls; // backwards compatibility\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n};\n\nTHREE.BufferGeometry.prototype = {\n\n\tconstructor: THREE.BufferGeometry,\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( attribute instanceof THREE.BufferAttribute === false ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.attributes[ name ] = { array: arguments[ 1 ], itemSize: arguments[ 2 ] };\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\t\tthis.attributesKeys = Object.keys( this.attributes );\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tthis.drawcalls.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tindex: indexOffset !== undefined ? indexOffset : 0\n\n\t\t} );\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToVector3Array( position.array );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcenter: function () {\n\n\t\t// TODO\n\n\t},\n\n\tfromGeometry: function ( geometry, settings ) {\n\n\t\tsettings = settings || { 'vertexColors': THREE.NoColors };\n\n\t\tvar vertices = geometry.vertices;\n\t\tvar faces = geometry.faces;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\t\tvar vertexColors = settings.vertexColors;\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexNormals = faces[ 0 ].vertexNormals.length == 3;\n\n\t\tvar positions = new Float32Array( faces.length * 3 * 3 );\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\t\tvar normals = new Float32Array( faces.length * 3 * 3 );\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\n\t\tif ( vertexColors !== THREE.NoColors ) {\n\n\t\t\tvar colors = new Float32Array( faces.length * 3 * 3 );\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\n\n\t\t}\n\n\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\tvar uvs = new Float32Array( faces.length * 3 * 2 );\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0, i2 = 0, i3 = 0; i < faces.length; i ++, i2 += 6, i3 += 9 ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar a = vertices[ face.a ];\n\t\t\tvar b = vertices[ face.b ];\n\t\t\tvar c = vertices[ face.c ];\n\n\t\t\tpositions[ i3     ] = a.x;\n\t\t\tpositions[ i3 + 1 ] = a.y;\n\t\t\tpositions[ i3 + 2 ] = a.z;\n\n\t\t\tpositions[ i3 + 3 ] = b.x;\n\t\t\tpositions[ i3 + 4 ] = b.y;\n\t\t\tpositions[ i3 + 5 ] = b.z;\n\n\t\t\tpositions[ i3 + 6 ] = c.x;\n\t\t\tpositions[ i3 + 7 ] = c.y;\n\t\t\tpositions[ i3 + 8 ] = c.z;\n\n\t\t\tif ( hasFaceVertexNormals === true ) {\n\n\t\t\t\tvar na = face.vertexNormals[ 0 ];\n\t\t\t\tvar nb = face.vertexNormals[ 1 ];\n\t\t\t\tvar nc = face.vertexNormals[ 2 ];\n\n\t\t\t\tnormals[ i3     ] = na.x;\n\t\t\t\tnormals[ i3 + 1 ] = na.y;\n\t\t\t\tnormals[ i3 + 2 ] = na.z;\n\n\t\t\t\tnormals[ i3 + 3 ] = nb.x;\n\t\t\t\tnormals[ i3 + 4 ] = nb.y;\n\t\t\t\tnormals[ i3 + 5 ] = nb.z;\n\n\t\t\t\tnormals[ i3 + 6 ] = nc.x;\n\t\t\t\tnormals[ i3 + 7 ] = nc.y;\n\t\t\t\tnormals[ i3 + 8 ] = nc.z;\n\n\t\t\t} else {\n\n\t\t\t\tvar n = face.normal;\n\n\t\t\t\tnormals[ i3     ] = n.x;\n\t\t\t\tnormals[ i3 + 1 ] = n.y;\n\t\t\t\tnormals[ i3 + 2 ] = n.z;\n\n\t\t\t\tnormals[ i3 + 3 ] = n.x;\n\t\t\t\tnormals[ i3 + 4 ] = n.y;\n\t\t\t\tnormals[ i3 + 5 ] = n.z;\n\n\t\t\t\tnormals[ i3 + 6 ] = n.x;\n\t\t\t\tnormals[ i3 + 7 ] = n.y;\n\t\t\t\tnormals[ i3 + 8 ] = n.z;\n\n\t\t\t}\n\n\t\t\tif ( vertexColors === THREE.FaceColors ) {\n\n\t\t\t\tvar fc = face.color;\n\n\t\t\t\tcolors[ i3     ] = fc.r;\n\t\t\t\tcolors[ i3 + 1 ] = fc.g;\n\t\t\t\tcolors[ i3 + 2 ] = fc.b;\n\n\t\t\t\tcolors[ i3 + 3 ] = fc.r;\n\t\t\t\tcolors[ i3 + 4 ] = fc.g;\n\t\t\t\tcolors[ i3 + 5 ] = fc.b;\n\n\t\t\t\tcolors[ i3 + 6 ] = fc.r;\n\t\t\t\tcolors[ i3 + 7 ] = fc.g;\n\t\t\t\tcolors[ i3 + 8 ] = fc.b;\n\n\t\t\t} else if ( vertexColors === THREE.VertexColors ) {\n\n\t\t\t\tvar vca = face.vertexColors[ 0 ];\n\t\t\t\tvar vcb = face.vertexColors[ 1 ];\n\t\t\t\tvar vcc = face.vertexColors[ 2 ];\n\n\t\t\t\tcolors[ i3     ] = vca.r;\n\t\t\t\tcolors[ i3 + 1 ] = vca.g;\n\t\t\t\tcolors[ i3 + 2 ] = vca.b;\n\n\t\t\t\tcolors[ i3 + 3 ] = vcb.r;\n\t\t\t\tcolors[ i3 + 4 ] = vcb.g;\n\t\t\t\tcolors[ i3 + 5 ] = vcb.b;\n\n\t\t\t\tcolors[ i3 + 6 ] = vcc.r;\n\t\t\t\tcolors[ i3 + 7 ] = vcc.g;\n\t\t\t\tcolors[ i3 + 8 ] = vcc.b;\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar uva = faceVertexUvs[ 0 ][ i ][ 0 ];\n\t\t\t\tvar uvb = faceVertexUvs[ 0 ][ i ][ 1 ];\n\t\t\t\tvar uvc = faceVertexUvs[ 0 ][ i ][ 2 ];\n\n\t\t\t\tuvs[ i2     ] = uva.x;\n\t\t\t\tuvs[ i2 + 1 ] = uva.y;\n\n\t\t\t\tuvs[ i2 + 2 ] = uvb.x;\n\t\t\t\tuvs[ i2 + 3 ] = uvb.y;\n\n\t\t\t\tuvs[ i2 + 4 ] = uvc.x;\n\t\t\t\tuvs[ i2 + 5 ] = uvc.y;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeBoundingSphere()\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tif ( this.boundingBox === null ) {\n\n\t\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\n\t\t\tif ( positions ) {\n\n\t\t\t\tvar bb = this.boundingBox;\n\t\t\t\tbb.makeEmpty();\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tbb.expandByPoint( vector );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\n\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}(),\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new THREE.Box3();\n\t\tvar vector = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\n\t\t\tif ( positions ) {\n\n\t\t\t\tbox.makeEmpty();\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tbox.expandByPoint( vector );\n\n\t\t\t\t}\n\n\t\t\t\tbox.center( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox:  sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar attributes = this.attributes;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\n\n\t\t\t\t\tnormals[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC,\n\n\t\t\tpA = new THREE.Vector3(),\n\t\t\tpB = new THREE.Vector3(),\n\t\t\tpC = new THREE.Vector3(),\n\n\t\t\tcb = new THREE.Vector3(),\n\t\t\tab = new THREE.Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( attributes.index ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\n\t\t\t\tvar offsets = ( this.offsets.length > 0 ? this.offsets : [ { start: 0, count: indices.length, index: 0 } ] );\n\n\t\t\t\tfor ( var j = 0, jl = offsets.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar start = offsets[ j ].start;\n\t\t\t\t\tvar count = offsets[ j ].count;\n\t\t\t\t\tvar index = offsets[ j ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = ( index + indices[ i     ] ) * 3;\n\t\t\t\t\t\tvB = ( index + indices[ i + 1 ] ) * 3;\n\t\t\t\t\t\tvC = ( index + indices[ i + 2 ] ) * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA     ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB     ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC     ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i     ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( this.attributes.index === undefined ||\n\t\t\t this.attributes.position === undefined ||\n\t\t\t this.attributes.normal === undefined ||\n\t\t\t this.attributes.uv === undefined ) {\n\n\t\t\tconsole.warn( 'Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar indices = this.attributes.index.array;\n\t\tvar positions = this.attributes.position.array;\n\t\tvar normals = this.attributes.normal.array;\n\t\tvar uvs = this.attributes.uv.array;\n\n\t\tvar nVertices = positions.length / 3;\n\n\t\tif ( this.attributes.tangent === undefined ) {\n\n\t\t\tthis.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tvar tangents = this.attributes.tangent.array;\n\n\t\tvar tan1 = [], tan2 = [];\n\n\t\tfor ( var k = 0; k < nVertices; k ++ ) {\n\n\t\t\ttan1[ k ] = new THREE.Vector3();\n\t\t\ttan2[ k ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar vA = new THREE.Vector3(),\n\t\t\tvB = new THREE.Vector3(),\n\t\t\tvC = new THREE.Vector3(),\n\n\t\t\tuvA = new THREE.Vector2(),\n\t\t\tuvB = new THREE.Vector2(),\n\t\t\tuvC = new THREE.Vector2(),\n\n\t\t\tx1, x2, y1, y2, z1, z2,\n\t\t\ts1, s2, t1, t2, r;\n\n\t\tvar sdir = new THREE.Vector3(), tdir = new THREE.Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tx1 = vB.x - vA.x;\n\t\t\tx2 = vC.x - vA.x;\n\n\t\t\ty1 = vB.y - vA.y;\n\t\t\ty2 = vC.y - vA.y;\n\n\t\t\tz1 = vB.z - vA.z;\n\t\t\tz2 = vC.z - vA.z;\n\n\t\t\ts1 = uvB.x - uvA.x;\n\t\t\ts2 = uvC.x - uvA.x;\n\n\t\t\tt1 = uvB.y - uvA.y;\n\t\t\tt2 = uvC.y - uvA.y;\n\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\n\n\t\t\tsdir.set(\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\n\t\t\t);\n\n\t\t\ttdir.set(\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\n\t\t\t);\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tvar i, il;\n\t\tvar j, jl;\n\t\tvar iA, iB, iC;\n\n\t\tif ( this.drawcalls.length === 0 ) {\n\n\t\t\tthis.addDrawCall( 0, indices.length, 0 );\n\n\t\t}\n\n\t\tvar drawcalls = this.drawcalls;\n\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\n\n\t\t\tvar start = drawcalls[ j ].start;\n\t\t\tvar count = drawcalls[ j ].count;\n\t\t\tvar index = drawcalls[ j ].index;\n\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\tiA = index + indices[ i ];\n\t\t\t\tiB = index + indices[ i + 1 ];\n\t\t\t\tiC = index + indices[ i + 2 ];\n\n\t\t\t\thandleTriangle( iA, iB, iC );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\n\t\tvar w, t, test;\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tt = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\ttest = tmp2.dot( tan2[ v ] );\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4     ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\n\n\t\t\tvar start = drawcalls[ j ].start;\n\t\t\tvar count = drawcalls[ j ].count;\n\t\t\tvar index = drawcalls[ j ].index;\n\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\tiA = index + indices[ i ];\n\t\t\t\tiB = index + indices[ i + 1 ];\n\t\t\t\tiC = index + indices[ i + 2 ];\n\n\t\t\t\thandleVertex( iA );\n\t\t\t\thandleVertex( iB );\n\t\t\t\thandleVertex( iC );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/*\n\t\tcomputeOffsets\n\t\tCompute the draw offset for large models by chunking the index buffer into chunks of 65k addressable vertices.\n\t\tThis method will effectively rewrite the index buffer and remap all attributes to match the new indices.\n\t\tWARNING: This method will also expand the vertex count to prevent sprawled triangles across draw offsets.\n\t\tindexBufferSize - Defaults to 65535, but allows for larger or smaller chunks.\n\t*/\n\tcomputeOffsets: function ( indexBufferSize ) {\n\n\t\tvar size = indexBufferSize;\n\t\tif ( indexBufferSize === undefined )\n\t\t\tsize = 65535; //WebGL limits type of index buffer values to 16-bit.\n\n\t\tvar s = Date.now();\n\n\t\tvar indices = this.attributes.index.array;\n\t\tvar vertices = this.attributes.position.array;\n\n\t\tvar verticesCount = ( vertices.length / 3 );\n\t\tvar facesCount = ( indices.length / 3 );\n\n\t\t/*\n\t\tconsole.log(\"Computing buffers in offsets of \"+size+\" -> indices:\"+indices.length+\" vertices:\"+vertices.length);\n\t\tconsole.log(\"Faces to process: \"+(indices.length/3));\n\t\tconsole.log(\"Reordering \"+verticesCount+\" vertices.\");\n\t\t*/\n\n\t\tvar sortedIndices = new Uint16Array( indices.length ); //16-bit buffers\n\t\tvar indexPtr = 0;\n\t\tvar vertexPtr = 0;\n\n\t\tvar offsets = [ { start:0, count:0, index:0 } ];\n\t\tvar offset = offsets[ 0 ];\n\n\t\tvar duplicatedVertices = 0;\n\t\tvar newVerticeMaps = 0;\n\t\tvar faceVertices = new Int32Array( 6 );\n\t\tvar vertexMap = new Int32Array( vertices.length );\n\t\tvar revVertexMap = new Int32Array( vertices.length );\n\t\tfor ( var j = 0; j < vertices.length; j ++ ) { vertexMap[ j ] = - 1; revVertexMap[ j ] = - 1; }\n\n\t\t/*\n\t\t\tTraverse every face and reorder vertices in the proper offsets of 65k.\n\t\t\tWe can have more than 65k entries in the index buffer per offset, but only reference 65k values.\n\t\t*/\n\t\tfor ( var findex = 0; findex < facesCount; findex ++ ) {\n\t\t\tnewVerticeMaps = 0;\n\n\t\t\tfor ( var vo = 0; vo < 3; vo ++ ) {\n\t\t\t\tvar vid = indices[ findex * 3 + vo ];\n\t\t\t\tif ( vertexMap[ vid ] == - 1 ) {\n\t\t\t\t\t//Unmapped vertice\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\n\t\t\t\t\tnewVerticeMaps ++;\n\t\t\t\t} else if ( vertexMap[ vid ] < offset.index ) {\n\t\t\t\t\t//Reused vertices from previous block (duplicate)\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\n\t\t\t\t\tduplicatedVertices ++;\n\t\t\t\t} else {\n\t\t\t\t\t//Reused vertice in the current block\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = vertexMap[ vid ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar faceMax = vertexPtr + newVerticeMaps;\n\t\t\tif ( faceMax > ( offset.index + size ) ) {\n\t\t\t\tvar new_offset = { start:indexPtr, count:0, index:vertexPtr };\n\t\t\t\toffsets.push( new_offset );\n\t\t\t\toffset = new_offset;\n\n\t\t\t\t//Re-evaluate reused vertices in light of new offset.\n\t\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\n\t\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\n\t\t\t\t\tif ( new_vid > - 1 && new_vid < offset.index )\n\t\t\t\t\t\tfaceVertices[ v + 1 ] = - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Reindex the face.\n\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\n\t\t\t\tvar vid = faceVertices[ v ];\n\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\n\n\t\t\t\tif ( new_vid === - 1 )\n\t\t\t\t\tnew_vid = vertexPtr ++;\n\n\t\t\t\tvertexMap[ vid ] = new_vid;\n\t\t\t\trevVertexMap[ new_vid ] = vid;\n\t\t\t\tsortedIndices[ indexPtr ++ ] = new_vid - offset.index; //XXX overflows at 16bit\n\t\t\t\toffset.count ++;\n\t\t\t}\n\t\t}\n\n\t\t/* Move all attribute values to map to the new computed indices , also expand the vertice stack to match our new vertexPtr. */\n\t\tthis.reorderBuffers( sortedIndices, revVertexMap, vertexPtr );\n\t\tthis.offsets = offsets;\n\n\t\t/*\n\t\tvar orderTime = Date.now();\n\t\tconsole.log(\"Reorder time: \"+(orderTime-s)+\"ms\");\n\t\tconsole.log(\"Duplicated \"+duplicatedVertices+\" vertices.\");\n\t\tconsole.log(\"Compute Buffers time: \"+(Date.now()-s)+\"ms\");\n\t\tconsole.log(\"Draw offsets: \"+offsets.length);\n\t\t*/\n\n\t\treturn offsets;\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal.array;\n\n\t\tvar x, y, z, n;\n\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\n\n\t\t\tx = normals[ i ];\n\t\t\ty = normals[ i + 1 ];\n\t\t\tz = normals[ i + 2 ];\n\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n\t\t\tnormals[ i     ] *= n;\n\t\t\tnormals[ i + 1 ] *= n;\n\t\t\tnormals[ i + 2 ] *= n;\n\n\t\t}\n\n\t},\n\n\t/*\n\t\treoderBuffers:\n\t\tReorder attributes based on a new indexBuffer and indexMap.\n\t\tindexBuffer - Uint16Array of the new ordered indices.\n\t\tindexMap - Int32Array where the position is the new vertex ID and the value the old vertex ID for each vertex.\n\t\tvertexCount - Amount of total vertices considered in this reordering (in case you want to grow the vertice stack).\n\t*/\n\treorderBuffers: function ( indexBuffer, indexMap, vertexCount ) {\n\n\t\t/* Create a copy of all attributes for reordering. */\n\t\tvar sortedAttributes = {};\n\t\tfor ( var attr in this.attributes ) {\n\t\t\tif ( attr == 'index' )\n\t\t\t\tcontinue;\n\t\t\tvar sourceArray = this.attributes[ attr ].array;\n\t\t\tsortedAttributes[ attr ] = new sourceArray.constructor( this.attributes[ attr ].itemSize * vertexCount );\n\t\t}\n\n\t\t/* Move attribute positions based on the new index map */\n\t\tfor ( var new_vid = 0; new_vid < vertexCount; new_vid ++ ) {\n\t\t\tvar vid = indexMap[ new_vid ];\n\t\t\tfor ( var attr in this.attributes ) {\n\t\t\t\tif ( attr == 'index' )\n\t\t\t\t\tcontinue;\n\t\t\t\tvar attrArray = this.attributes[ attr ].array;\n\t\t\t\tvar attrSize = this.attributes[ attr ].itemSize;\n\t\t\t\tvar sortedAttr = sortedAttributes[ attr ];\n\t\t\t\tfor ( var k = 0; k < attrSize; k ++ )\n\t\t\t\t\tsortedAttr[ new_vid * attrSize + k ] = attrArray[ vid * attrSize + k ];\n\t\t\t}\n\t\t}\n\n\t\t/* Carry the new sorted buffers locally */\n\t\tthis.attributes[ 'index' ].array = indexBuffer;\n\t\tfor ( var attr in this.attributes ) {\n\t\t\tif ( attr == 'index' )\n\t\t\t\tcontinue;\n\t\t\tthis.attributes[ attr ].array = sortedAttributes[ attr ];\n\t\t\tthis.attributes[ attr ].numItems = this.attributes[ attr ].itemSize * vertexCount;\n\t\t}\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.0,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometryExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tdata: {\n\t\t\t\tattributes: {}\n\t\t\t}\n\t\t};\n\n\t\tvar attributes = this.attributes;\n\t\tvar offsets = this.offsets;\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = [], typeArray = attribute.array;\n\n\t\t\tfor ( var i = 0, l = typeArray.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ] = typeArray[ i ];\n\n\t\t\t}\n\n\t\t\toutput.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t}\n\n\t\t}\n\n\t\tif ( offsets.length > 0 ) {\n\n\t\t\toutput.data.offsets = JSON.parse( JSON.stringify( offsets ) );\n\n\t\t}\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\toutput.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t}\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tfor ( var attr in this.attributes ) {\n\n\t\t\tvar sourceAttr = this.attributes[ attr ];\n\t\t\tgeometry.addAttribute( attr, sourceAttr.clone() );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.offsets.length; i < il; i ++ ) {\n\n\t\t\tvar offset = this.offsets[ i ];\n\n\t\t\tgeometry.offsets.push( {\n\n\t\t\t\tstart: offset.start,\n\t\t\t\tindex: offset.index,\n\t\t\t\tcount: offset.count\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\n\n// File:src/core/Geometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Geometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];  // one-to-one vertex colors, used in Points and Line\n\n\tthis.faces = [];\n\n\tthis.faceVertexUvs = [ [] ];\n\n\tthis.morphTargets = [];\n\tthis.morphColors = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.hasTangents = false;\n\n\tthis.dynamic = true; // the intermediate typed arrays will be deleted when set to false\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.elementsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.tangentsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\n\tthis.groupsNeedUpdate = false;\n\n};\n\nTHREE.Geometry.prototype = {\n\n\tconstructor: THREE.Geometry,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox instanceof THREE.Box3 ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere instanceof THREE.Sphere ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar vertices = attributes.position.array;\n\t\tvar indices = attributes.index !== undefined ? attributes.index.array : undefined;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\n\t\tfor ( var i = 0, j = 0; i < vertices.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar addFace = function ( a, b, c ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tscope.faces.push( new THREE.Face3( a, b, c, vertexNormals, vertexColors ) );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tif ( indices !== undefined ) {\n\n\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\n\n\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\toffset.addVectors( this.boundingBox.min, this.boundingBox.max );\n\t\toffset.multiplyScalar( - 0.5 );\n\n\t\tthis.applyMatrix( new THREE.Matrix4().makeTranslation( offset.x, offset.y, offset.z ) );\n\t\tthis.computeBoundingBox();\n\n\t\treturn offset;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC, vD;\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3(),\n\t\t\t\tdb = new THREE.Vector3(), dc = new THREE.Vector3(), bc = new THREE.Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.vertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\tface.vertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\tface.vertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new THREE.Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// tangents go to vertices\n\n\t\tvar f, fl, v, vl, i, il, vertexIndex,\n\t\t\tface, uv, vA, vB, vC, uvA, uvB, uvC,\n\t\t\tx1, x2, y1, y2, z1, z2,\n\t\t\ts1, s2, t1, t2, r, t, test,\n\t\t\ttan1 = [], tan2 = [],\n\t\t\tsdir = new THREE.Vector3(), tdir = new THREE.Vector3(),\n\t\t\ttmp = new THREE.Vector3(), tmp2 = new THREE.Vector3(),\n\t\t\tn = new THREE.Vector3(), w;\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\ttan1[ v ] = new THREE.Vector3();\n\t\t\ttan2[ v ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tfunction handleTriangle( context, a, b, c, ua, ub, uc ) {\n\n\t\t\tvA = context.vertices[ a ];\n\t\t\tvB = context.vertices[ b ];\n\t\t\tvC = context.vertices[ c ];\n\n\t\t\tuvA = uv[ ua ];\n\t\t\tuvB = uv[ ub ];\n\t\t\tuvC = uv[ uc ];\n\n\t\t\tx1 = vB.x - vA.x;\n\t\t\tx2 = vC.x - vA.x;\n\t\t\ty1 = vB.y - vA.y;\n\t\t\ty2 = vC.y - vA.y;\n\t\t\tz1 = vB.z - vA.z;\n\t\t\tz2 = vC.z - vA.z;\n\n\t\t\ts1 = uvB.x - uvA.x;\n\t\t\ts2 = uvC.x - uvA.x;\n\t\t\tt1 = uvB.y - uvA.y;\n\t\t\tt2 = uvC.y - uvA.y;\n\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\n\t\t\tsdir.set( ( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t\t  ( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t\t  ( t2 * z1 - t1 * z2 ) * r );\n\t\t\ttdir.set( ( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t\t  ( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t\t  ( s1 * z2 - s2 * z1 ) * r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\t\t\tuv = this.faceVertexUvs[ 0 ][ f ]; // use UV layer 0 for tangents\n\n\t\t\thandleTriangle( this, face.a, face.b, face.c, 0, 1, 2 );\n\n\t\t}\n\n\t\tvar faceIndex = [ 'a', 'b', 'c', 'd' ];\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tfor ( i = 0; i < Math.min( face.vertexNormals.length, 3 ); i ++ ) {\n\n\t\t\t\tn.copy( face.vertexNormals[ i ] );\n\n\t\t\t\tvertexIndex = face[ faceIndex[ i ] ];\n\n\t\t\t\tt = tan1[ vertexIndex ];\n\n\t\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\t\ttmp.copy( t );\n\t\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t\t// Calculate handedness\n\n\t\t\t\ttmp2.crossVectors( face.vertexNormals[ i ], t );\n\t\t\t\ttest = tmp2.dot( tan2[ vertexIndex ] );\n\t\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\t\tface.vertexTangents[ i ] = new THREE.Vector4( tmp.x, tmp.y, tmp.z, w );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.hasTangents = true;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tvar d = 0;\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\tvertexOffset = this.vertices.length,\n\t\tvertices1 = this.vertices,\n\t\tvertices2 = geometry.vertices,\n\t\tfaces1 = this.faces,\n\t\tfaces2 = geometry.faces,\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertice by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, eg. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i,il, face;\n\t\tvar indices, k, j, jl, u;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t};\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\tvar dupIndex = - 1;\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\t\t\t\tif ( indices[ n ] == indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tdupIndex = n;\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.0,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometryExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type\n\t\t};\n\n\t\tif ( this.name !== \"\" ) output.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) output[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 );\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\n\n\t\t\t/*\n\t\t\tif ( hasMaterial ) {\n\n\t\t\t\tfaces.push( face.materialIndex );\n\n\t\t\t}\n\t\t\t*/\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\toutput.data = {};\n\n\t\toutput.data.vertices = vertices;\n\t\toutput.data.normals = normals;\n\t\tif ( colors.length > 0 ) output.data.colors = colors;\n\t\tif ( uvs.length > 0 ) output.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\toutput.data.faces = faces;\n\n\t\t//\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar geometry = new THREE.Geometry();\n\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tgeometry.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\tvar faces = this.faces;\n\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tgeometry.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = this.faceVertexUvs[ i ];\n\n\t\t\tif ( geometry.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\n\nTHREE.GeometryIdCount = 0;\n\n// File:src/cameras/Camera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.Camera = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new THREE.Matrix4();\n\tthis.projectionMatrix = new THREE.Matrix4();\n\n};\n\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Camera.prototype.constructor = THREE.Camera;\n\nTHREE.Camera.prototype.getWorldDirection = function () {\n\n\tvar quaternion = new THREE.Quaternion();\n\n\treturn function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.getWorldQuaternion( quaternion );\n\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t}\n\n}();\n\nTHREE.Camera.prototype.lookAt = function () {\n\n\t// This routine does not support cameras with rotated and/or translated parent(s)\n\n\tvar m1 = new THREE.Matrix4();\n\n\treturn function ( vector ) {\n\n\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t};\n\n}();\n\nTHREE.Camera.prototype.clone = function ( camera ) {\n\n\tif ( camera === undefined ) camera = new THREE.Camera();\n\n\tTHREE.Object3D.prototype.clone.call( this, camera );\n\n\tcamera.matrixWorldInverse.copy( this.matrixWorldInverse );\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n};\n\n// File:src/cameras/CubeCamera.js\n\n/**\n * Camera for rendering cube maps\n *\t- renders scene into axis-aligned cube\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tvar fov = 90, aspect = 1;\n\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\n\n\tthis.updateCubeMap = function ( renderer, scene ) {\n\n\t\tvar renderTarget = this.renderTarget;\n\t\tvar generateMipmaps = renderTarget.generateMipmaps;\n\n\t\trenderTarget.generateMipmaps = false;\n\n\t\trenderTarget.activeCubeFace = 0;\n\t\trenderer.render( scene, cameraPX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 1;\n\t\trenderer.render( scene, cameraNX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 2;\n\t\trenderer.render( scene, cameraPY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 3;\n\t\trenderer.render( scene, cameraNY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 4;\n\t\trenderer.render( scene, cameraPZ, renderTarget );\n\n\t\trenderTarget.generateMipmaps = generateMipmaps;\n\n\t\trenderTarget.activeCubeFace = 5;\n\t\trenderer.render( scene, cameraNZ, renderTarget );\n\n\t};\n\n};\n\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\n\n// File:src/cameras/OrthographicCamera.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\nTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\n\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\n\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\tvar cx = ( this.right + this.left ) / 2;\n\tvar cy = ( this.top + this.bottom ) / 2;\n\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\n\n};\n\nTHREE.OrthographicCamera.prototype.clone = function () {\n\n\tvar camera = new THREE.OrthographicCamera();\n\n\tTHREE.Camera.prototype.clone.call( this, camera );\n\n\tcamera.zoom = this.zoom;\n\n\tcamera.left = this.left;\n\tcamera.right = this.right;\n\tcamera.top = this.top;\n\tcamera.bottom = this.bottom;\n\n\tcamera.near = this.near;\n\tcamera.far = this.far;\n\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n};\n\n// File:src/cameras/PerspectiveCamera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.zoom = 1;\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\nTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\n\n\n/**\n * Uses Focal Length (in mm) to estimate and set FOV\n * 35mm (fullframe) camera is used if frame size is not specified;\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\n */\n\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\n\n\tif ( frameHeight === undefined ) frameHeight = 24;\n\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\n\tthis.updateProjectionMatrix();\n\n}\n\n\n/**\n * Sets an offset in a larger frustum. This is useful for multi-window or\n * multi-monitor/multi-machine setups.\n *\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n * the monitors are in grid like this\n *\n *   +---+---+---+\n *   | A | B | C |\n *   +---+---+---+\n *   | D | E | F |\n *   +---+---+---+\n *\n * then for each monitor you would call it like this\n *\n *   var w = 1920;\n *   var h = 1080;\n *   var fullWidth = w * 3;\n *   var fullHeight = h * 2;\n *\n *   --A--\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n *   --B--\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n *   --C--\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n *   --D--\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n *   --E--\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n *   --F--\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n *\n *   Note there is no reason monitors have to be the same size or in a grid.\n */\n\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\tthis.fullWidth = fullWidth;\n\tthis.fullHeight = fullHeight;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.updateProjectionMatrix();\n\n};\n\n\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\n\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\n\n\tif ( this.fullWidth ) {\n\n\t\tvar aspect = this.fullWidth / this.fullHeight;\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\n\t\tvar bottom = - top;\n\t\tvar left = aspect * bottom;\n\t\tvar right = aspect * top;\n\t\tvar width = Math.abs( right - left );\n\t\tvar height = Math.abs( top - bottom );\n\n\t\tthis.projectionMatrix.makeFrustum(\n\t\t\tleft + this.x * width / this.fullWidth,\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\n\t\t\ttop - this.y * height / this.fullHeight,\n\t\t\tthis.near,\n\t\t\tthis.far\n\t\t);\n\n\t} else {\n\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\n\n\t}\n\n};\n\nTHREE.PerspectiveCamera.prototype.clone = function () {\n\n\tvar camera = new THREE.PerspectiveCamera();\n\n\tTHREE.Camera.prototype.clone.call( this, camera );\n\n\tcamera.zoom = this.zoom;\n\n\tcamera.fov = this.fov;\n\tcamera.aspect = this.aspect;\n\tcamera.near = this.near;\n\tcamera.far = this.far;\n\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n\n};\n\n// File:src/lights/Light.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Light = function ( color ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Light';\n\t\n\tthis.color = new THREE.Color( color );\n\n};\n\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Light.prototype.constructor = THREE.Light;\n\nTHREE.Light.prototype.clone = function ( light ) {\n\n\tif ( light === undefined ) light = new THREE.Light();\n\n\tTHREE.Object3D.prototype.clone.call( this, light );\n\n\tlight.color.copy( this.color );\n\n\treturn light;\n\n};\n\n// File:src/lights/AmbientLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AmbientLight = function ( color ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'AmbientLight';\n\n};\n\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\n\nTHREE.AmbientLight.prototype.clone = function () {\n\n\tvar light = new THREE.AmbientLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\treturn light;\n\n};\n\n// File:src/lights/AreaLight.js\n\n/**\n * @author MPanknin / http://www.redplant.de/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.AreaLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'AreaLight';\n\n\tthis.normal = new THREE.Vector3( 0, - 1, 0 );\n\tthis.right = new THREE.Vector3( 1, 0, 0 );\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n\tthis.width = 1.0;\n\tthis.height = 1.0;\n\n\tthis.constantAttenuation = 1.5;\n\tthis.linearAttenuation = 0.5;\n\tthis.quadraticAttenuation = 0.1;\n\n};\n\nTHREE.AreaLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.AreaLight.prototype.constructor = THREE.AreaLight;\n\n\n// File:src/lights/DirectionalLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DirectionalLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.target = new THREE.Object3D();\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n\tthis.castShadow = false;\n\tthis.onlyShadow = false;\n\n\t//\n\n\tthis.shadowCameraNear = 50;\n\tthis.shadowCameraFar = 5000;\n\n\tthis.shadowCameraLeft = - 500;\n\tthis.shadowCameraRight = 500;\n\tthis.shadowCameraTop = 500;\n\tthis.shadowCameraBottom = - 500;\n\n\tthis.shadowCameraVisible = false;\n\n\tthis.shadowBias = 0;\n\tthis.shadowDarkness = 0.5;\n\n\tthis.shadowMapWidth = 512;\n\tthis.shadowMapHeight = 512;\n\n\t//\n\n\tthis.shadowCascade = false;\n\n\tthis.shadowCascadeOffset = new THREE.Vector3( 0, 0, - 1000 );\n\tthis.shadowCascadeCount = 2;\n\n\tthis.shadowCascadeBias = [ 0, 0, 0 ];\n\tthis.shadowCascadeWidth = [ 512, 512, 512 ];\n\tthis.shadowCascadeHeight = [ 512, 512, 512 ];\n\n\tthis.shadowCascadeNearZ = [ - 1.000, 0.990, 0.998 ];\n\tthis.shadowCascadeFarZ  = [  0.990, 0.998, 1.000 ];\n\n\tthis.shadowCascadeArray = [];\n\n\t//\n\n\tthis.shadowMap = null;\n\tthis.shadowMapSize = null;\n\tthis.shadowCamera = null;\n\tthis.shadowMatrix = null;\n\n};\n\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\n\nTHREE.DirectionalLight.prototype.clone = function () {\n\n\tvar light = new THREE.DirectionalLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.target = this.target.clone();\n\n\tlight.intensity = this.intensity;\n\n\tlight.castShadow = this.castShadow;\n\tlight.onlyShadow = this.onlyShadow;\n\n\t//\n\n\tlight.shadowCameraNear = this.shadowCameraNear;\n\tlight.shadowCameraFar = this.shadowCameraFar;\n\n\tlight.shadowCameraLeft = this.shadowCameraLeft;\n\tlight.shadowCameraRight = this.shadowCameraRight;\n\tlight.shadowCameraTop = this.shadowCameraTop;\n\tlight.shadowCameraBottom = this.shadowCameraBottom;\n\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\n\n\tlight.shadowBias = this.shadowBias;\n\tlight.shadowDarkness = this.shadowDarkness;\n\n\tlight.shadowMapWidth = this.shadowMapWidth;\n\tlight.shadowMapHeight = this.shadowMapHeight;\n\n\t//\n\n\tlight.shadowCascade = this.shadowCascade;\n\n\tlight.shadowCascadeOffset.copy( this.shadowCascadeOffset );\n\tlight.shadowCascadeCount = this.shadowCascadeCount;\n\n\tlight.shadowCascadeBias = this.shadowCascadeBias.slice( 0 );\n\tlight.shadowCascadeWidth = this.shadowCascadeWidth.slice( 0 );\n\tlight.shadowCascadeHeight = this.shadowCascadeHeight.slice( 0 );\n\n\tlight.shadowCascadeNearZ = this.shadowCascadeNearZ.slice( 0 );\n\tlight.shadowCascadeFarZ  = this.shadowCascadeFarZ.slice( 0 );\n\n\treturn light;\n\n};\n\n// File:src/lights/HemisphereLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\n\n\tTHREE.Light.call( this, skyColor );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.position.set( 0, 100, 0 );\n\n\tthis.groundColor = new THREE.Color( groundColor );\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n};\n\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\n\nTHREE.HemisphereLight.prototype.clone = function () {\n\n\tvar light = new THREE.HemisphereLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.groundColor.copy( this.groundColor );\n\tlight.intensity = this.intensity;\n\n\treturn light;\n\n};\n\n// File:src/lights/PointLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PointLight = function ( color, intensity, distance ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'PointLight';\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\n};\n\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.PointLight.prototype.constructor = THREE.PointLight;\n\nTHREE.PointLight.prototype.clone = function () {\n\n\tvar light = new THREE.PointLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.intensity = this.intensity;\n\tlight.distance = this.distance;\n\n\treturn light;\n\n};\n\n// File:src/lights/SpotLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.target = new THREE.Object3D();\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\n\n\tthis.castShadow = false;\n\tthis.onlyShadow = false;\n\n\t//\n\n\tthis.shadowCameraNear = 50;\n\tthis.shadowCameraFar = 5000;\n\tthis.shadowCameraFov = 50;\n\n\tthis.shadowCameraVisible = false;\n\n\tthis.shadowBias = 0;\n\tthis.shadowDarkness = 0.5;\n\n\tthis.shadowMapWidth = 512;\n\tthis.shadowMapHeight = 512;\n\n\t//\n\n\tthis.shadowMap = null;\n\tthis.shadowMapSize = null;\n\tthis.shadowCamera = null;\n\tthis.shadowMatrix = null;\n\n};\n\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\n\nTHREE.SpotLight.prototype.clone = function () {\n\n\tvar light = new THREE.SpotLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.target = this.target.clone();\n\n\tlight.intensity = this.intensity;\n\tlight.distance = this.distance;\n\tlight.angle = this.angle;\n\tlight.exponent = this.exponent;\n\n\tlight.castShadow = this.castShadow;\n\tlight.onlyShadow = this.onlyShadow;\n\n\t//\n\n\tlight.shadowCameraNear = this.shadowCameraNear;\n\tlight.shadowCameraFar = this.shadowCameraFar;\n\tlight.shadowCameraFov = this.shadowCameraFov;\n\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\n\n\tlight.shadowBias = this.shadowBias;\n\tlight.shadowDarkness = this.shadowDarkness;\n\n\tlight.shadowMapWidth = this.shadowMapWidth;\n\tlight.shadowMapHeight = this.shadowMapHeight;\n\n\treturn light;\n\n};\n\n// File:src/loaders/Cache.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Cache = function () {\n\n\tthis.files = {};\n\n};\n\nTHREE.Cache.prototype = {\n\n\tconstructor: THREE.Cache,\n\n\tadd: function ( key, file ) {\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {}\n\n\t}\n\n};\n\n// File:src/loaders/Loader.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Loader = function ( showStatus ) {\n\n\tthis.showStatus = showStatus;\n\tthis.statusDomElement = showStatus ? THREE.Loader.prototype.addStatusElement() : null;\n\n\tthis.imageLoader = new THREE.ImageLoader();\n\n\tthis.onLoadStart = function () {};\n\tthis.onLoadProgress = function () {};\n\tthis.onLoadComplete = function () {};\n\n};\n\nTHREE.Loader.prototype = {\n\n\tconstructor: THREE.Loader,\n\n\tcrossOrigin: undefined,\n\n\taddStatusElement: function () {\n\n\t\tvar e = document.createElement( 'div' );\n\n\t\te.style.position = 'absolute';\n\t\te.style.right = '0px';\n\t\te.style.top = '0px';\n\t\te.style.fontSize = '0.8em';\n\t\te.style.textAlign = 'left';\n\t\te.style.background = 'rgba(0,0,0,0.25)';\n\t\te.style.color = '#fff';\n\t\te.style.width = '120px';\n\t\te.style.padding = '0.5em 0.5em 0.5em 0.5em';\n\t\te.style.zIndex = 1000;\n\n\t\te.innerHTML = 'Loading ...';\n\n\t\treturn e;\n\n\t},\n\n\tupdateProgress: function ( progress ) {\n\n\t\tvar message = 'Loaded ';\n\n\t\tif ( progress.total ) {\n\n\t\t\tmessage += ( 100 * progress.loaded / progress.total ).toFixed( 0 ) + '%';\n\n\n\t\t} else {\n\n\t\t\tmessage += ( progress.loaded / 1024 ).toFixed( 2 ) + ' KB';\n\n\t\t}\n\n\t\tthis.statusDomElement.innerHTML = message;\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar parts = url.split( '/' );\n\n\t\tif ( parts.length === 1 ) return './';\n\n\t\tparts.pop();\n\n\t\treturn parts.join( '/' ) + '/';\n\n\t},\n\n\tinitMaterials: function ( materials, texturePath ) {\n\n\t\tvar array = [];\n\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath );\n\n\t\t}\n\n\t\treturn array;\n\n\t},\n\n\tneedsTangents: function ( materials ) {\n\n\t\tfor ( var i = 0, il = materials.length; i < il; i ++ ) {\n\n\t\t\tvar m = materials[ i ];\n\n\t\t\tif ( m instanceof THREE.ShaderMaterial ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcreateMaterial: function ( m, texturePath ) {\n\n\t\tvar scope = this;\n\n\t\tfunction nearest_pow2( n ) {\n\n\t\t\tvar l = Math.log( n ) / Math.LN2;\n\t\t\treturn Math.pow( 2, Math.round(  l ) );\n\n\t\t}\n\n\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\n\n\t\t\tvar fullPath = texturePath + sourceFile;\n\n\t\t\tvar texture;\n\n\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\n\n\t\t\tif ( loader !== null ) {\n\n\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t} else {\n\n\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t\tloader = scope.imageLoader;\n\t\t\t\tloader.crossOrigin = scope.crossOrigin;\n\t\t\t\tloader.load( fullPath, function ( image ) {\n\n\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\n\t\t\t\t\t\t THREE.Math.isPowerOfTwo( image.height ) === false ) {\n\n\t\t\t\t\t\tvar width = nearest_pow2( image.width );\n\t\t\t\t\t\tvar height = nearest_pow2( image.height );\n\n\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\t\t\ttexture.image = canvas;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture.image = image;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\ttexture.sourceFile = sourceFile;\n\n\t\t\tif ( repeat ) {\n\n\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\n\n\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\n\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\n\n\t\t\t}\n\n\t\t\tif ( offset ) {\n\n\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\n\n\t\t\t}\n\n\t\t\tif ( wrap ) {\n\n\t\t\t\tvar wrapMap = {\n\t\t\t\t\t'repeat': THREE.RepeatWrapping,\n\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\n\t\t\t\t}\n\n\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\n\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\n\n\t\t\t}\n\n\t\t\tif ( anisotropy ) {\n\n\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t}\n\n\t\t\twhere[ name ] = texture;\n\n\t\t}\n\n\t\tfunction rgb2hex( rgb ) {\n\n\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\n\n\t\t}\n\n\t\t// defaults\n\n\t\tvar mtype = 'MeshLambertMaterial';\n\t\tvar mpars = { color: 0xeeeeee, opacity: 1.0, map: null, lightMap: null, normalMap: null, bumpMap: null, wireframe: false };\n\n\t\t// parameters from model file\n\n\t\tif ( m.shading ) {\n\n\t\t\tvar shading = m.shading.toLowerCase();\n\n\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\n\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\n\n\t\t}\n\n\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\n\n\t\t\tmpars.blending = THREE[ m.blending ];\n\n\t\t}\n\n\t\tif ( m.transparent !== undefined || m.opacity < 1.0 ) {\n\n\t\t\tmpars.transparent = m.transparent;\n\n\t\t}\n\n\t\tif ( m.depthTest !== undefined ) {\n\n\t\t\tmpars.depthTest = m.depthTest;\n\n\t\t}\n\n\t\tif ( m.depthWrite !== undefined ) {\n\n\t\t\tmpars.depthWrite = m.depthWrite;\n\n\t\t}\n\n\t\tif ( m.visible !== undefined ) {\n\n\t\t\tmpars.visible = m.visible;\n\n\t\t}\n\n\t\tif ( m.flipSided !== undefined ) {\n\n\t\t\tmpars.side = THREE.BackSide;\n\n\t\t}\n\n\t\tif ( m.doubleSided !== undefined ) {\n\n\t\t\tmpars.side = THREE.DoubleSide;\n\n\t\t}\n\n\t\tif ( m.wireframe !== undefined ) {\n\n\t\t\tmpars.wireframe = m.wireframe;\n\n\t\t}\n\n\t\tif ( m.vertexColors !== undefined ) {\n\n\t\t\tif ( m.vertexColors === 'face' ) {\n\n\t\t\t\tmpars.vertexColors = THREE.FaceColors;\n\n\t\t\t} else if ( m.vertexColors ) {\n\n\t\t\t\tmpars.vertexColors = THREE.VertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// colors\n\n\t\tif ( m.colorDiffuse ) {\n\n\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\n\n\t\t} else if ( m.DbgColor ) {\n\n\t\t\tmpars.color = m.DbgColor;\n\n\t\t}\n\n\t\tif ( m.colorSpecular ) {\n\n\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\n\n\t\t}\n\n\t\tif ( m.colorAmbient ) {\n\n\t\t\tmpars.ambient = rgb2hex( m.colorAmbient );\n\n\t\t}\n\n\t\tif ( m.colorEmissive ) {\n\n\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\n\n\t\t}\n\n\t\t// modifiers\n\n\t\tif ( m.transparency ) {\n\n\t\t\tmpars.opacity = m.transparency;\n\n\t\t}\n\n\t\tif ( m.specularCoef ) {\n\n\t\t\tmpars.shininess = m.specularCoef;\n\n\t\t}\n\n\t\t// textures\n\n\t\tif ( m.mapDiffuse && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapLight && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapBump && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapNormal && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapSpecular && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapAlpha && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( m.mapBumpScale ) {\n\n\t\t\tmpars.bumpScale = m.mapBumpScale;\n\n\t\t}\n\n\t\tif ( m.mapNormalFactor ) {\n\n\t\t\tmpars.normalScale = new THREE.Vector2( m.mapNormalFactor, m.mapNormalFactor );\n\n\t\t}\n\n\t\tvar material = new THREE[ mtype ]( mpars );\n\n\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\n\n\t\treturn material;\n\n\t}\n\n};\n\nTHREE.Loader.Handlers = {\n\n\thandlers: [],\n\n\tadd: function ( regex, loader ) {\n\n\t\tthis.handlers.push( regex, loader );\n\n\t},\n\n\tget: function ( file ) {\n\n\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = this.handlers[ i ];\n\t\t\tvar loader  = this.handlers[ i + 1 ];\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n};\n\n// File:src/loaders/XHRLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.XHRLoader = function ( manager ) {\n\n\tthis.cache = new THREE.Cache();\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.XHRLoader.prototype = {\n\n\tconstructor: THREE.XHRLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar cached = scope.cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tif ( onLoad ) onLoad( cached );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.open( 'GET', url, true );\n\n\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\tscope.cache.add( url, this.response );\n\n\t\t\tif ( onLoad ) onLoad( this.response );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\tif ( onProgress !== undefined ) {\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tonProgress( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onError !== undefined ) {\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tonError( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\n\t\trequest.send( null );\n\n\t\tscope.manager.itemStart( url );\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n};\n\n// File:src/loaders/ImageLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ImageLoader = function ( manager ) {\n\n\tthis.cache = new THREE.Cache();\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ImageLoader.prototype = {\n\n\tconstructor: THREE.ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar cached = scope.cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tonLoad( cached );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar image = document.createElement( 'img' );\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\timage.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tscope.cache.add( url, this );\n\n\t\t\t\tonLoad( this );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onProgress !== undefined ) {\n\n\t\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tonProgress( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onError !== undefined ) {\n\n\t\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tonError( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\timage.src = url;\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n}\n\n// File:src/loaders/JSONLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.JSONLoader = function ( showStatus ) {\n\n\tTHREE.Loader.call( this, showStatus );\n\n\tthis.withCredentials = false;\n\n};\n\nTHREE.JSONLoader.prototype = Object.create( THREE.Loader.prototype );\nTHREE.JSONLoader.prototype.constructor = THREE.JSONLoader;\n\nTHREE.JSONLoader.prototype.load = function ( url, callback, texturePath ) {\n\n\tvar scope = this;\n\n\t// todo: unify load API to for easier SceneLoader use\n\n\ttexturePath = texturePath && ( typeof texturePath === 'string' ) ? texturePath : this.extractUrlBase( url );\n\n\tthis.onLoadStart();\n\tthis.loadAjaxJSON( this, url, callback, texturePath );\n\n};\n\nTHREE.JSONLoader.prototype.loadAjaxJSON = function ( context, url, callback, texturePath, callbackProgress ) {\n\n\tvar xhr = new XMLHttpRequest();\n\n\tvar length = 0;\n\n\txhr.onreadystatechange = function () {\n\n\t\tif ( xhr.readyState === xhr.DONE ) {\n\n\t\t\tif ( xhr.status === 200 || xhr.status === 0 ) {\n\n\t\t\t\tif ( xhr.responseText ) {\n\n\t\t\t\t\tvar json = JSON.parse( xhr.responseText );\n\n\t\t\t\t\tif ( json.metadata !== undefined && json.metadata.type === 'scene' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be a Scene. Use THREE.SceneLoader instead.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = context.parse( json, texturePath );\n\t\t\t\t\tcallback( result.geometry, result.materials );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be unreachable or the file is empty.' );\n\n\t\t\t\t}\n\n\t\t\t\t// in context of more complex asset initialization\n\t\t\t\t// do not block on single failed file\n\t\t\t\t// maybe should go even one more level up\n\n\t\t\t\tcontext.onLoadComplete();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.JSONLoader: Couldn\\'t load \"' + url + '\" (' + xhr.status + ')' );\n\n\t\t\t}\n\n\t\t} else if ( xhr.readyState === xhr.LOADING ) {\n\n\t\t\tif ( callbackProgress ) {\n\n\t\t\t\tif ( length === 0 ) {\n\n\t\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\n\n\t\t\t\t}\n\n\t\t\t\tcallbackProgress( { total: length, loaded: xhr.responseText.length } );\n\n\t\t\t}\n\n\t\t} else if ( xhr.readyState === xhr.HEADERS_RECEIVED ) {\n\n\t\t\tif ( callbackProgress !== undefined ) {\n\n\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\txhr.open( 'GET', url, true );\n\txhr.withCredentials = this.withCredentials;\n\txhr.send( null );\n\n};\n\nTHREE.JSONLoader.prototype.parse = function ( json, texturePath ) {\n\n\tvar scope = this,\n\tgeometry = new THREE.Geometry(),\n\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\n\n\tparseModel( scale );\n\n\tparseSkin();\n\tparseMorphing( scale );\n\n\tgeometry.computeFaceNormals();\n\tgeometry.computeBoundingSphere();\n\n\tfunction parseModel( scale ) {\n\n\t\tfunction isBitSet( value, position ) {\n\n\t\t\treturn value & ( 1 << position );\n\n\t\t}\n\n\t\tvar i, j, fi,\n\n\t\toffset, zLength,\n\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\n\n\t\ttype,\n\t\tisQuad,\n\t\thasMaterial,\n\t\thasFaceVertexUv,\n\t\thasFaceNormal, hasFaceVertexNormal,\n\t\thasFaceColor, hasFaceVertexColor,\n\n\t\tvertex, face, faceA, faceB, color, hex, normal,\n\n\t\tuvLayer, uv, u, v,\n\n\t\tfaces = json.faces,\n\t\tvertices = json.vertices,\n\t\tnormals = json.normals,\n\t\tcolors = json.colors,\n\n\t\tnUvLayers = 0;\n\n\t\tif ( json.uvs !== undefined ) {\n\n\t\t\t// disregard empty arrays\n\n\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\n\n\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t}\n\n\t\toffset = 0;\n\t\tzLength = vertices.length;\n\n\t\twhile ( offset < zLength ) {\n\n\t\t\tvertex = new THREE.Vector3();\n\n\t\t\tvertex.x = vertices[ offset ++ ] * scale;\n\t\t\tvertex.y = vertices[ offset ++ ] * scale;\n\t\t\tvertex.z = vertices[ offset ++ ] * scale;\n\n\t\t\tgeometry.vertices.push( vertex );\n\n\t\t}\n\n\t\toffset = 0;\n\t\tzLength = faces.length;\n\n\t\twhile ( offset < zLength ) {\n\n\t\t\ttype = faces[ offset ++ ];\n\n\n\t\t\tisQuad              = isBitSet( type, 0 );\n\t\t\thasMaterial         = isBitSet( type, 1 );\n\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\n\t\t\thasFaceNormal       = isBitSet( type, 4 );\n\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\n\t\t\thasFaceColor\t     = isBitSet( type, 6 );\n\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\n\n\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\n\n\t\t\tif ( isQuad ) {\n\n\t\t\t\tfaceA = new THREE.Face3();\n\t\t\t\tfaceA.a = faces[ offset ];\n\t\t\t\tfaceA.b = faces[ offset + 1 ];\n\t\t\t\tfaceA.c = faces[ offset + 3 ];\n\n\t\t\t\tfaceB = new THREE.Face3();\n\t\t\t\tfaceB.a = faces[ offset + 1 ];\n\t\t\t\tfaceB.b = faces[ offset + 2 ];\n\t\t\t\tfaceB.c = faces[ offset + 3 ];\n\n\t\t\t\toffset += 4;\n\n\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\tfaceA.materialIndex = materialIndex;\n\t\t\t\t\tfaceB.materialIndex = materialIndex;\n\n\t\t\t\t}\n\n\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = []\n\n\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\n\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\tfaceA.normal.set(\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t);\n\n\t\t\t\t\tfaceB.normal.copy( faceA.normal );\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\tfaceA.color.setHex( hex );\n\t\t\t\t\tfaceB.color.setHex( hex );\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faces.push( faceA );\n\t\t\t\tgeometry.faces.push( faceB );\n\n\t\t\t} else {\n\n\t\t\t\tface = new THREE.Face3();\n\t\t\t\tface.a = faces[ offset ++ ];\n\t\t\t\tface.b = faces[ offset ++ ];\n\t\t\t\tface.c = faces[ offset ++ ];\n\n\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\t}\n\n\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\n\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\tface.normal.set(\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tface.vertexNormals.push( normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faces.push( face );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction parseSkin() {\n\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\n\n\t\tif ( json.skinWeights ) {\n\n\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\tvar x =                               json.skinWeights[ i     ];\n\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\n\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\n\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\n\n\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.skinIndices ) {\n\n\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\tvar a =                               json.skinIndices[ i     ];\n\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\n\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\n\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\n\n\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.bones = json.bones;\n\n\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\n\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\n\n\t\t}\n\n\n\t\t// could change this to json.animations[0] or remove completely\n\n\t\tgeometry.animation = json.animation;\n\t\tgeometry.animations = json.animations;\n\n\t};\n\n\tfunction parseMorphing( scale ) {\n\n\t\tif ( json.morphTargets !== undefined ) {\n\n\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\n\n\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tgeometry.morphTargets[ i ] = {};\n\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\n\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\n\n\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\n\t\t\t\tsrcVertices = json.morphTargets [ i ].vertices;\n\n\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\n\n\t\t\t\t\tvar vertex = new THREE.Vector3();\n\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\n\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\n\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\n\n\t\t\t\t\tdstVertices.push( vertex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.morphColors !== undefined ) {\n\n\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\n\n\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\n\n\t\t\t\tgeometry.morphColors[ i ] = {};\n\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\n\t\t\t\tgeometry.morphColors[ i ].colors = [];\n\n\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\n\t\t\t\tsrcColors = json.morphColors [ i ].colors;\n\n\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\n\n\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\n\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\n\t\t\t\t\tdstColors.push( color );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tif ( json.materials === undefined || json.materials.length === 0 ) {\n\n\t\treturn { geometry: geometry };\n\n\t} else {\n\n\t\tvar materials = this.initMaterials( json.materials, texturePath );\n\n\t\tif ( this.needsTangents( materials ) ) {\n\n\t\t\tgeometry.computeTangents();\n\n\t\t}\n\n\t\treturn { geometry: geometry, materials: materials };\n\n\t}\n\n};\n\n// File:src/loaders/LoadingManager.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar loaded = 0, total = 0;\n\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\ttotal ++;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\tloaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, loaded, total );\n\n\t\t}\n\n\t\tif ( loaded === total && scope.onLoad !== undefined ) {\n\n\t\t\tscope.onLoad();\n\n\t\t}\n\n\t};\n\n};\n\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\n\n// File:src/loaders/BufferGeometryLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometryLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.BufferGeometryLoader.prototype = {\n\n\tconstructor: THREE.BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tvar attributes = json.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\n\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\n\n\t\t}\n\n\t\tvar offsets = json.offsets;\n\n\t\tif ( offsets !== undefined ) {\n\n\t\t\tgeometry.offsets = JSON.parse( JSON.stringify( offsets ) );\n\n\t\t}\n\n\t\tvar boundingSphere = json.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tvar center = new THREE.Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n};\n\n// File:src/loaders/MaterialLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MaterialLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.MaterialLoader.prototype = {\n\n\tconstructor: THREE.MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar material = new THREE[ json.type ];\n\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.ambient !== undefined ) material.ambient.setHex( json.ambient );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\n\t\tif ( json.materials !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\n\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n};\n\n// File:src/loaders/ObjectLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ObjectLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ObjectLoader.prototype = {\n\n\tconstructor: THREE.ObjectLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometries = this.parseGeometries( json.geometries );\n\t\tvar materials = this.parseMaterials( json.materials );\n\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\treturn object;\n\n\t},\n\n\tparseGeometries: function ( json ) {\n\n\t\tvar geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.PlaneGeometry(\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q,\n\t\t\t\t\t\t\tdata.heightScale\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data.data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data ).geometry;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json ) {\n\n\t\tvar materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar loader = new THREE.MaterialLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\t\t\t\tvar material = loader.parse( data );\n\n\t\t\t\tmaterial.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) material.name = data.name;\n\n\t\t\t\tmaterials[ data.uuid ] = material;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseObject: function () {\n\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\treturn function ( data, geometries, materials ) {\n\n\t\t\tvar object;\n\n\t\t\tswitch ( data.type ) {\n\n\t\t\t\tcase 'Scene':\n\n\t\t\t\t\tobject = new THREE.Scene();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientLight':\n\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DirectionalLight':\n\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Mesh':\n\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( geometry === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Line':\n\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( geometry === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Line( geometry, material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Sprite':\n\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Sprite( material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Group':\n\n\t\t\t\t\tobject = new THREE.Group();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tobject = new THREE.Object3D();\n\n\t\t\t}\n\n\t\t\tobject.uuid = data.uuid;\n\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\n\t\t\tif ( data.matrix !== undefined ) {\n\n\t\t\t\tmatrix.fromArray( data.matrix );\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\t} else {\n\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t\t}\n\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\n\t\t\tif ( data.children !== undefined ) {\n\n\t\t\t\tfor ( var child in data.children ) {\n\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn object;\n\n\t\t}\n\n\t}()\n\n};\n\n// File:src/loaders/TextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.TextureLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.TextureLoader.prototype = {\n\n\tconstructor: THREE.TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.ImageLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( image ) {\n\n\t\t\tvar texture = new THREE.Texture( image );\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n};\n\n// File:src/loaders/BinaryTextureLoader.js\n\n/**\n * @author Nikos M. / https://github.com/foo123/\n *\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n */\n\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function () {\n\n\t// override in sub classes\n\tthis._parser = null;\n\n};\n\nTHREE.BinaryTextureLoader.prototype = {\n\n\tconstructor: THREE.BinaryTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new THREE.DataTexture( );\n\n\t\tvar loader = new THREE.XHRLoader();\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar texData = scope._parser( buffer );\n\n\t\t\tif ( !texData ) return;\n\n\t\t\tif ( undefined !== texData.image ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( undefined !== texData.data ){\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\n\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\n\n\t\t\tif ( undefined !== texData.format ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\t\t\tif ( undefined !== texData.type ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( undefined !== texData.mipmaps ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\n\t\t\t}\n\n\t\t\tif ( 1 === texData.mipmapCount ) {\n\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/loaders/CompressedTextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n */\n\nTHREE.CompressedTextureLoader = function () {\n\n\t// override in sub classes\n\tthis._parser = null;\n\n};\n\n\nTHREE.CompressedTextureLoader.prototype = {\n\n\tconstructor: THREE.CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar images = [];\n\n\t\tvar texture = new THREE.CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tvar loader = new THREE.XHRLoader();\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tif ( url instanceof Array ) {\n\n\t\t\tvar loaded = 0;\n\n\t\t\tvar loadTexture = function ( i ) {\n\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\t\timages[ i ] = {\n\t\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t\t};\n\n\t\t\t\t\tloaded += 1;\n\n\t\t\t\t\tif ( loaded === 6 ) {\n\n \t\t\t\t\t\tif (texDatas.mipmapCount == 1)\n \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t};\n\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\n\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/materials/Material.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Material = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.side = THREE.FrontSide;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blending = THREE.NormalBlending;\n\n\tthis.blendSrc = THREE.SrcAlphaFactor;\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\n\tthis.blendEquation = THREE.AddEquation;\n\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.alphaTest = 0;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis.needsUpdate = true;\n\n};\n\nTHREE.Material.prototype = {\n\n\tconstructor: THREE.Material,\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( key in this ) {\n\n\t\t\t\tvar currentValue = this[ key ];\n\n\t\t\t\tif ( currentValue instanceof THREE.Color ) {\n\n\t\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\n\n\t\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t\t} else if ( key == 'overdraw' ) {\n\n\t\t\t\t\t// ensure overdraw is backwards-compatable with legacy boolean type\n\t\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type\n\t\t};\n\n\t\tif ( this.name !== \"\" ) output.name = this.name;\n\n\t\tif ( this instanceof THREE.MeshBasicMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\toutput.ambient = this.ambient.getHex();\n\t\t\toutput.emissive = this.emissive.getHex();\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\toutput.ambient = this.ambient.getHex();\n\t\t\toutput.emissive = this.emissive.getHex();\n\t\t\toutput.specular = this.specular.getHex();\n\t\t\toutput.shininess = this.shininess;\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\tif ( this.shading !== THREE.FlatShading ) output.shading = this.shading;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.ShaderMaterial ) {\n\n\t\t\toutput.uniforms = this.uniforms;\n\t\t\toutput.vertexShader = this.vertexShader;\n\t\t\toutput.fragmentShader = this.fragmentShader;\n\n\t\t} else if ( this instanceof THREE.SpriteMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\n\t\t}\n\n\t\tif ( this.opacity < 1 ) output.opacity = this.opacity;\n\t\tif ( this.transparent !== false ) output.transparent = this.transparent;\n\t\tif ( this.wireframe !== false ) output.wireframe = this.wireframe;\n\n\t\treturn output;\n\n\t},\n\n\tclone: function ( material ) {\n\n\t\tif ( material === undefined ) material = new THREE.Material();\n\n\t\tmaterial.name = this.name;\n\n\t\tmaterial.side = this.side;\n\n\t\tmaterial.opacity = this.opacity;\n\t\tmaterial.transparent = this.transparent;\n\n\t\tmaterial.blending = this.blending;\n\n\t\tmaterial.blendSrc = this.blendSrc;\n\t\tmaterial.blendDst = this.blendDst;\n\t\tmaterial.blendEquation = this.blendEquation;\n\n\t\tmaterial.depthTest = this.depthTest;\n\t\tmaterial.depthWrite = this.depthWrite;\n\n\t\tmaterial.polygonOffset = this.polygonOffset;\n\t\tmaterial.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tmaterial.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tmaterial.alphaTest = this.alphaTest;\n\n\t\tmaterial.overdraw = this.overdraw;\n\n\t\tmaterial.visible = this.visible;\n\n\t\treturn material;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\n\nTHREE.MaterialIdCount = 0;\n\n// File:src/materials/LineBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\",\n *\n *  vertexColors: <bool>\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.LineBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\n\nTHREE.LineBasicMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.LineBasicMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.linewidth = this.linewidth;\n\tmaterial.linecap = this.linecap;\n\tmaterial.linejoin = this.linejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/materials/LineDashedMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>,\n *\n *  vertexColors: <bool>\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.LineDashedMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.vertexColors = false;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\n\nTHREE.LineDashedMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.LineDashedMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.linewidth = this.linewidth;\n\n\tmaterial.scale = this.scale;\n\tmaterial.dashSize = this.dashSize;\n\tmaterial.gapSize = this.gapSize;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.MeshBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\n\nTHREE.MeshBasicMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshBasicMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshLambertMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  ambient: <hex>,\n *  emissive: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.MeshLambertMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\tthis.ambient = new THREE.Color( 0xffffff );\n\tthis.emissive = new THREE.Color( 0x000000 );\n\n\tthis.wrapAround = false;\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\n\nTHREE.MeshLambertMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshLambertMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.ambient.copy( this.ambient );\n\tmaterial.emissive.copy( this.emissive );\n\n\tmaterial.wrapAround = this.wrapAround;\n\tmaterial.wrapRGB.copy( this.wrapRGB );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshPhongMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  ambient: <hex>,\n *  emissive: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.MeshPhongMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\tthis.ambient = new THREE.Color( 0xffffff );\n\tthis.emissive = new THREE.Color( 0x000000 );\n\tthis.specular = new THREE.Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.metal = false;\n\n\tthis.wrapAround = false;\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\n\nTHREE.MeshPhongMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshPhongMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.ambient.copy( this.ambient );\n\tmaterial.emissive.copy( this.emissive );\n\tmaterial.specular.copy( this.specular );\n\tmaterial.shininess = this.shininess;\n\n\tmaterial.metal = this.metal;\n\n\tmaterial.wrapAround = this.wrapAround;\n\tmaterial.wrapRGB.copy( this.wrapRGB );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.bumpMap = this.bumpMap;\n\tmaterial.bumpScale = this.bumpScale;\n\n\tmaterial.normalMap = this.normalMap;\n\tmaterial.normalScale.copy( this.normalScale );\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshDepthMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshDepthMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.morphTargets = false;\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\n\nTHREE.MeshDepthMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshDepthMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshNormalMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  shading: THREE.FlatShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshNormalMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this, parameters );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.shading = THREE.FlatShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\n\nTHREE.MeshNormalMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshNormalMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshFaceMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MeshFaceMaterial = function ( materials ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.type = 'MeshFaceMaterial';\n\t\n\tthis.materials = materials instanceof Array ? materials : [];\n\n};\n\nTHREE.MeshFaceMaterial.prototype = {\n\n\tconstructor: THREE.MeshFaceMaterial,\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tmaterials: []\n\t\t};\n\n\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\n\n\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar material = new THREE.MeshFaceMaterial();\n\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\n\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n};\n\n// File:src/materials/PointCloudMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  vertexColors: <bool>,\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.PointCloudMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'PointCloudMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.PointCloudMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.PointCloudMaterial.prototype.constructor = THREE.PointCloudMaterial;\n\nTHREE.PointCloudMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.PointCloudMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.map = this.map;\n\n\tmaterial.size = this.size;\n\tmaterial.sizeAttenuation = this.sizeAttenuation;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// backwards compatibility\n\nTHREE.ParticleBasicMaterial = function ( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.' );\n\treturn new THREE.PointCloudMaterial( parameters );\n\n};\n\nTHREE.ParticleSystemMaterial = function ( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.' );\n\treturn new THREE.PointCloudMaterial( parameters );\n\n};\n\n// File:src/materials/ShaderMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.ShaderMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\tthis.attributes = null;\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\n\tthis.lights = false; // set to use scene lights\n\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\n\nTHREE.ShaderMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.ShaderMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.fragmentShader = this.fragmentShader;\n\tmaterial.vertexShader = this.vertexShader;\n\n\tmaterial.uniforms = THREE.UniformsUtils.clone( this.uniforms );\n\n\tmaterial.attributes = this.attributes;\n\tmaterial.defines = this.defines;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.lights = this.lights;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/RawShaderMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.RawShaderMaterial = function ( parameters ) {\n\n\tTHREE.ShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n};\n\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\n\nTHREE.RawShaderMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.RawShaderMaterial();\n\n\tTHREE.ShaderMaterial.prototype.clone.call( this, material );\n\n\treturn material;\n\n};\n\n// File:src/materials/SpriteMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *\tuvOffset: new THREE.Vector2(),\n *\tuvScale: new THREE.Vector2(),\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.SpriteMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.map = null;\n\n\tthis.rotation = 0;\n\n\tthis.fog = false;\n\n\t// set parameters\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\n\nTHREE.SpriteMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.SpriteMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.map = this.map;\n\n\tmaterial.rotation = this.rotation;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/textures/Texture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\n\n\tthis.offset = new THREE.Vector2( 0, 0 );\n\tthis.repeat = new THREE.Vector2( 1, 1 );\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\tthis._needsUpdate = false;\n\tthis.onUpdate = null;\n\n};\n\nTHREE.Texture.DEFAULT_IMAGE = undefined;\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\n\nTHREE.Texture.prototype = {\n\n\tconstructor: THREE.Texture,\n\n\tget needsUpdate () {\n\n\t\treturn this._needsUpdate;\n\n\t},\n\n\tset needsUpdate ( value ) {\n\n\t\tif ( value === true ) this.update();\n\n\t\tthis._needsUpdate = value;\n\n\t},\n\n\tclone: function ( texture ) {\n\n\t\tif ( texture === undefined ) texture = new THREE.Texture();\n\n\t\ttexture.image = this.image;\n\t\ttexture.mipmaps = this.mipmaps.slice( 0 );\n\n\t\ttexture.mapping = this.mapping;\n\n\t\ttexture.wrapS = this.wrapS;\n\t\ttexture.wrapT = this.wrapT;\n\n\t\ttexture.magFilter = this.magFilter;\n\t\ttexture.minFilter = this.minFilter;\n\n\t\ttexture.anisotropy = this.anisotropy;\n\n\t\ttexture.format = this.format;\n\t\ttexture.type = this.type;\n\n\t\ttexture.offset.copy( this.offset );\n\t\ttexture.repeat.copy( this.repeat );\n\n\t\ttexture.generateMipmaps = this.generateMipmaps;\n\t\ttexture.premultiplyAlpha = this.premultiplyAlpha;\n\t\ttexture.flipY = this.flipY;\n\t\ttexture.unpackAlignment = this.unpackAlignment;\n\n\t\treturn texture;\n\n\t},\n\n\tupdate: function () {\n\n\t\tthis.dispatchEvent( { type: 'update' } );\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\n\nTHREE.TextureIdCount = 0;\n\n// File:src/textures/CubeTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\n\t\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.images = images;\n\n};\n\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\n\nTHREE.CubeTexture.clone = function ( texture ) {\n\n\tif ( texture === undefined ) texture = new THREE.CubeTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\ttexture.images = this.images;\n\n\treturn texture;\n\n};\n\n// File:src/textures/CompressedTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n};\n\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\n\nTHREE.CompressedTexture.prototype.clone = function () {\n\n\tvar texture = new THREE.CompressedTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\treturn texture;\n\n};\n\n// File:src/textures/DataTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { data: data, width: width, height: height };\n\n};\n\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\n\nTHREE.DataTexture.prototype.clone = function () {\n\n\tvar texture = new THREE.DataTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\treturn texture;\n\n};\n\n// File:src/textures/VideoTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.generateMipmaps = false;\n\n\tvar scope = this;\n\n\tvar update = function () {\n\n\t\trequestAnimationFrame( update );\n\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\n\n\t\t\tscope.needsUpdate = true;\n\n\t\t}\n\n\t};\n\n\tupdate();\n\n};\n\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\n\n// File:src/objects/Group.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Group = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Group';\n\n};\n\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Group.prototype.constructor = THREE.Group;\n\n// File:src/objects/PointCloud.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.PointCloud = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'PointCloud';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.PointCloudMaterial( { color: Math.random() * 0xffffff } );\n\n};\n\nTHREE.PointCloud.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.PointCloud.prototype.constructor = THREE.PointCloud;\n\nTHREE.PointCloud.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar object = this;\n\t\tvar geometry = object.geometry;\n\t\tvar threshold = raycaster.params.PointCloud.threshold;\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tvar position = new THREE.Vector3();\n\n\t\tvar testPoint = function ( point, index ) {\n\n\t\t\tvar rayPointDistance = ray.distanceToPoint( point );\n\n\t\t\tif ( rayPointDistance < localThreshold ) {\n\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\n\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tdistanceToRay: rayPointDistance,\n\t\t\t\t\tpoint: intersectPoint.clone(),\n\t\t\t\t\tindex: index,\n\t\t\t\t\tface: null,\n\t\t\t\t\tobject: object\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t};\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tvar offset = {\n\t\t\t\t\t\tstart: 0,\n\t\t\t\t\t\tcount: indices.length,\n\t\t\t\t\t\tindex: 0\n\t\t\t\t\t};\n\n\t\t\t\t\toffsets = [ offset ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar a = index + indices[ i ];\n\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\n\n\t\t\t\t\t\ttestPoint( position, a );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar pointCount = positions.length / 3;\n\n\t\t\t\tfor ( var i = 0; i < pointCount; i ++ ) {\n\n\t\t\t\t\tposition.set(\n\t\t\t\t\t\tpositions[ 3 * i ],\n\t\t\t\t\t\tpositions[ 3 * i + 1 ],\n\t\t\t\t\t\tpositions[ 3 * i + 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t\ttestPoint( position, i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar vertices = this.geometry.vertices;\n\n\t\t\tfor ( var i = 0; i < vertices.length; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.PointCloud.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.PointCloud( this.geometry, this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// Backwards compatibility\n\nTHREE.ParticleSystem = function ( geometry, material ) {\n\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.PointCloud.' );\n\treturn new THREE.PointCloud( geometry, material );\n\n};\n\n// File:src/objects/Line.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Line = function ( geometry, material, mode ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.mode = ( mode !== undefined ) ? mode : THREE.LineStrip;\n\n};\n\nTHREE.LineStrip = 0;\nTHREE.LinePieces = 1;\n\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Line.prototype.constructor = THREE.Line;\n\nTHREE.Line.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\tvar sphere = new THREE.Sphere();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar precision = raycaster.linePrecision;\n\t\tvar precisionSq = precision * precision;\n\n\t\tvar geometry = this.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tsphere.copy( geometry.boundingSphere );\n\t\tsphere.applyMatrix4( this.matrixWorld );\n\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tvar vStart = new THREE.Vector3();\n\t\tvar vEnd = new THREE.Vector3();\n\t\tvar interSegment = new THREE.Vector3();\n\t\tvar interRay = new THREE.Vector3();\n\t\tvar step = this.mode === THREE.LineStrip ? 1 : 2;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar attributes = geometry.attributes;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar positions = attributes.position.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0; oi < offsets.length; oi++){\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start; i < start + count - 1; i += step ) {\n\n\t\t\t\t\t\tvar a = index + indices[ i ];\n\t\t\t\t\t\tvar b = index + indices[ i + 1 ];\n\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3 - 1; i += step ) {\n\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar nbVertices = vertices.length;\n\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.Line.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Line( this.geometry, this.material, this.mode );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// File:src/objects/Mesh.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nTHREE.Mesh = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Mesh';\n\t\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.updateMorphTargets();\n\n};\n\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Mesh.prototype.constructor = THREE.Mesh;\n\nTHREE.Mesh.prototype.updateMorphTargets = function () {\n\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\n\n\t\tthis.morphTargetBase = - 1;\n\t\tthis.morphTargetForcedOrder = [];\n\t\tthis.morphTargetInfluences = [];\n\t\tthis.morphTargetDictionary = {};\n\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\n\n\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\n\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\n\n\t\treturn this.morphTargetDictionary[ name ];\n\n\t}\n\n\tconsole.log( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\n\n\treturn 0;\n\n};\n\n\nTHREE.Mesh.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\tvar sphere = new THREE.Sphere();\n\n\tvar vA = new THREE.Vector3();\n\tvar vB = new THREE.Vector3();\n\tvar vC = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\tsphere.copy( geometry.boundingSphere );\n\t\tsphere.applyMatrix4( this.matrixWorld );\n\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check boundingBox before continuing\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false )  {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar material = this.material;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\tvar attributes = geometry.attributes;\n\n\t\t\tvar a, b, c;\n\t\t\tvar precision = raycaster.precision;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar positions = attributes.position.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = index + indices[ i ];\n\t\t\t\t\t\tb = index + indices[ i + 1 ];\n\t\t\t\t\t\tc = index + indices[ i + 2 ];\n\n\t\t\t\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\t\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tfor ( var i = 0, j = 0, il = positions.length; i < il; i += 3, j += 9 ) {\n\n\t\t\t\t\ta = i;\n\t\t\t\t\tb = i + 1;\n\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\tvA.fromArray( positions, j );\n\t\t\t\t\tvB.fromArray( positions, j + 3 );\n\t\t\t\t\tvC.fromArray( positions, j + 6 );\n\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\tvar isFaceMaterial = this.material instanceof THREE.MeshFaceMaterial;\n\t\t\tvar objectMaterials = isFaceMaterial === true ? this.material.materials : null;\n\n\t\t\tvar a, b, c, d;\n\t\t\tvar precision = raycaster.precision;\n\n\t\t\tvar vertices = geometry.vertices;\n\n\t\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = geometry.faces[ f ];\n\n\t\t\t\tvar material = isFaceMaterial === true ? objectMaterials[ face.materialIndex ] : this.material;\n\n\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\ta = vertices[ face.a ];\n\t\t\t\tb = vertices[ face.b ];\n\t\t\t\tc = vertices[ face.c ];\n\n\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\tvA.x += ( targets[ face.a ].x - a.x ) * influence;\n\t\t\t\t\t\tvA.y += ( targets[ face.a ].y - a.y ) * influence;\n\t\t\t\t\t\tvA.z += ( targets[ face.a ].z - a.z ) * influence;\n\n\t\t\t\t\t\tvB.x += ( targets[ face.b ].x - b.x ) * influence;\n\t\t\t\t\t\tvB.y += ( targets[ face.b ].y - b.y ) * influence;\n\t\t\t\t\t\tvB.z += ( targets[ face.b ].z - b.z ) * influence;\n\n\t\t\t\t\t\tvC.x += ( targets[ face.c ].x - c.x ) * influence;\n\t\t\t\t\t\tvC.y += ( targets[ face.c ].y - c.y ) * influence;\n\t\t\t\t\t\tvC.z += ( targets[ face.c ].z - c.z ) * influence;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvA.add( a );\n\t\t\t\t\tvB.add( b );\n\t\t\t\t\tvC.add( c );\n\n\t\t\t\t\ta = vA;\n\t\t\t\t\tb = vB;\n\t\t\t\t\tc = vC;\n\n\t\t\t\t}\n\n\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( c, b, a, true );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( a, b, c, material.side !== THREE.DoubleSide );\n\n\t\t\t\t}\n\n\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\tface: face,\n\t\t\t\t\tfaceIndex: f,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.Mesh.prototype.clone = function ( object, recursive ) {\n\n\tif ( object === undefined ) object = new THREE.Mesh( this.geometry, this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object, recursive );\n\n\treturn object;\n\n};\n\n// File:src/objects/Bone.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.Bone = function ( belongsToSkin ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.skin = belongsToSkin;\n\n};\n\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Bone.prototype.constructor = THREE.Bone;\n\n\n// File:src/objects/Skeleton.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\n\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\n\n\tthis.identityMatrix = new THREE.Matrix4();\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\n\t// create a bone texture or an array of floats\n\n\tif ( this.useVertexTexture ) {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones  (8 * 8  / 4)\n\t\t//       16x16 pixel texture max   64 bones (16 * 16 / 4)\n\t\t//       32x32 pixel texture max  256 bones (32 * 32 / 4)\n\t\t//       64x64 pixel texture max 1024 bones (64 * 64 / 4)\n\n\t\tvar size;\n\n\t\tif ( this.bones.length > 256 )\n\t\t\tsize = 64;\n\t\telse if ( this.bones.length > 64 )\n\t\t\tsize = 32;\n\t\telse if ( this.bones.length > 16 )\n\t\t\tsize = 16;\n\t\telse\n\t\t\tsize = 8;\n\n\t\tthis.boneTextureWidth = size;\n\t\tthis.boneTextureHeight = size;\n\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\n\t\tthis.boneTexture.minFilter = THREE.NearestFilter;\n\t\tthis.boneTexture.magFilter = THREE.NearestFilter;\n\t\tthis.boneTexture.generateMipmaps = false;\n\t\tthis.boneTexture.flipY = false;\n\n\t} else {\n\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\n\n\t}\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.calculateInverses = function () {\n\n\tthis.boneInverses = [];\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tvar inverse = new THREE.Matrix4();\n\n\t\tif ( this.bones[ b ] ) {\n\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\n\n\t\t}\n\n\t\tthis.boneInverses.push( inverse );\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.pose = function () {\n\n\tvar bone;\n\n\t// recover the bind-time world matrices\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tbone = this.bones[ b ];\n\n\t\tif ( bone ) {\n\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\n\n\t\t}\n\n\t}\n\n\t// compute the local matrices, positions, rotations and scales\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tbone = this.bones[ b ];\n\n\t\tif ( bone ) {\n\n\t\t\tif ( bone.parent ) {\n\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t}\n\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.update = ( function () {\n\n\tvar offsetMatrix = new THREE.Matrix4();\n\t\n\treturn function () {\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\n\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\n\n\t\t}\n\n\t\tif ( this.useVertexTexture ) {\n\n\t\t\tthis.boneTexture.needsUpdate = true;\n\n\t\t}\n\t\t\n\t};\n\n} )();\n\n\n// File:src/objects/SkinnedMesh.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = \"attached\";\n\tthis.bindMatrix = new THREE.Matrix4();\n\tthis.bindMatrixInverse = new THREE.Matrix4();\n\n\t// init bones\n\n\t// TODO: remove bone creation as there is no reason (other than\n\t// convenience) for THREE.SkinnedMesh to do this.\n\n\tvar bones = [];\n\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\n\n\t\tvar bone, gbone, p, q, s;\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tp = gbone.pos;\n\t\t\tq = gbone.rotq;\n\t\t\ts = gbone.scl;\n\n\t\t\tbone = new THREE.Bone( this );\n\t\t\tbones.push( bone );\n\n\t\t\tbone.name = gbone.name;\n\t\t\tbone.position.set( p[ 0 ], p[ 1 ], p[ 2 ] );\n\t\t\tbone.quaternion.set( q[ 0 ], q[ 1 ], q[ 2 ], q[ 3 ] );\n\n\t\t\tif ( s !== undefined ) {\n\n\t\t\t\tbone.scale.set( s[ 0 ], s[ 1 ], s[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tbone.scale.set( 1, 1, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tif ( gbone.parent !== - 1 ) {\n\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.add( bones[ b ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.normalizeSkinWeights();\n\n\tthis.updateMatrixWorld( true );\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ) );\n\n};\n\n\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\n\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\n\n\tthis.skeleton = skeleton;\n\n\tif ( bindMatrix === undefined ) {\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tbindMatrix = this.matrixWorld;\n\n\t}\n\n\tthis.bindMatrix.copy( bindMatrix );\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n};\n\nTHREE.SkinnedMesh.prototype.pose = function () {\n\n\tthis.skeleton.pose();\n\n};\n\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\n\n\tif ( this.geometry instanceof THREE.Geometry ) {\n\n\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\n\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\n\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tsw.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\n\n\t}\n\n};\n\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\n\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\n\n\tif ( this.bindMode === \"attached\" ) {\n\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t} else if ( this.bindMode === \"detached\" ) {\n\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t} else {\n\n\t\tconsole.warn( 'THREE.SkinnedMesh unreckognized bindMode: ' + this.bindMode );\n\n\t}\n\n};\n\nTHREE.SkinnedMesh.prototype.clone = function( object ) {\n\n\tif ( object === undefined ) {\n\n\t\tobject = new THREE.SkinnedMesh( this.geometry, this.material, this.useVertexTexture );\n\n\t}\n\n\tTHREE.Mesh.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n\n// File:src/objects/MorphAnimMesh.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MorphAnimMesh = function ( geometry, material ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.type = 'MorphAnimMesh';\n\n\t// API\n\n\tthis.duration = 1000; // milliseconds\n\tthis.mirroredLoop = false;\n\tthis.time = 0;\n\n\t// internals\n\n\tthis.lastKeyframe = 0;\n\tthis.currentKeyframe = 0;\n\n\tthis.direction = 1;\n\tthis.directionBackwards = false;\n\n\tthis.setFrameRange( 0, this.geometry.morphTargets.length - 1 );\n\n};\n\nTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh;\n\nTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\n\n\tthis.startKeyframe = start;\n\tthis.endKeyframe = end;\n\n\tthis.length = this.endKeyframe - this.startKeyframe + 1;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\n\n\tthis.direction = 1;\n\tthis.directionBackwards = false;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\n\n\tthis.direction = - 1;\n\tthis.directionBackwards = true;\n\n};\n\nTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\n\n\tvar geometry = this.geometry;\n\n\tif ( ! geometry.animations ) geometry.animations = {};\n\n\tvar firstAnimation, animations = geometry.animations;\n\n\tvar pattern = /([a-z]+)_?(\\d+)/;\n\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\n\n\t\tvar morph = geometry.morphTargets[ i ];\n\t\tvar parts = morph.name.match( pattern );\n\n\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\tvar label = parts[ 1 ];\n\t\t\tvar num = parts[ 2 ];\n\n\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\n\n\t\t\tvar animation = animations[ label ];\n\n\t\t\tif ( i < animation.start ) animation.start = i;\n\t\t\tif ( i > animation.end ) animation.end = i;\n\n\t\t\tif ( ! firstAnimation ) firstAnimation = label;\n\n\t\t}\n\n\t}\n\n\tgeometry.firstAnimation = firstAnimation;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\n\n\tif ( ! this.geometry.animations ) this.geometry.animations = {};\n\n\tthis.geometry.animations[ label ] = { start: start, end: end };\n\n};\n\nTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\n\n\tvar animation = this.geometry.animations[ label ];\n\n\tif ( animation ) {\n\n\t\tthis.setFrameRange( animation.start, animation.end );\n\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\n\t\tthis.time = 0;\n\n\t} else {\n\n\t\tconsole.warn( 'animation[' + label + '] undefined' );\n\n\t}\n\n};\n\nTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\n\n\tvar frameTime = this.duration / this.length;\n\n\tthis.time += this.direction * delta;\n\n\tif ( this.mirroredLoop ) {\n\n\t\tif ( this.time > this.duration || this.time < 0 ) {\n\n\t\t\tthis.direction *= - 1;\n\n\t\t\tif ( this.time > this.duration ) {\n\n\t\t\t\tthis.time = this.duration;\n\t\t\t\tthis.directionBackwards = true;\n\n\t\t\t}\n\n\t\t\tif ( this.time < 0 ) {\n\n\t\t\t\tthis.time = 0;\n\t\t\t\tthis.directionBackwards = false;\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\tthis.time = this.time % this.duration;\n\n\t\tif ( this.time < 0 ) this.time += this.duration;\n\n\t}\n\n\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\n\n\tif ( keyframe !== this.currentKeyframe ) {\n\n\t\tthis.morphTargetInfluences[ this.lastKeyframe ] = 0;\n\t\tthis.morphTargetInfluences[ this.currentKeyframe ] = 1;\n\n\t\tthis.morphTargetInfluences[ keyframe ] = 0;\n\n\t\tthis.lastKeyframe = this.currentKeyframe;\n\t\tthis.currentKeyframe = keyframe;\n\n\t}\n\n\tvar mix = ( this.time % frameTime ) / frameTime;\n\n\tif ( this.directionBackwards ) {\n\n\t\tmix = 1 - mix;\n\n\t}\n\n\tthis.morphTargetInfluences[ this.currentKeyframe ] = mix;\n\tthis.morphTargetInfluences[ this.lastKeyframe ] = 1 - mix;\n\n};\n\nTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\n\n\tvar influences = this.morphTargetInfluences;\n\n\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\n\n\t\tinfluences[ i ] = 0;\n\n\t}\n\n\tif ( a > -1 ) influences[ a ] = 1 - t;\n\tif ( b > -1 ) influences[ b ] = t;\n\n};\n\nTHREE.MorphAnimMesh.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.MorphAnimMesh( this.geometry, this.material );\n\n\tobject.duration = this.duration;\n\tobject.mirroredLoop = this.mirroredLoop;\n\tobject.time = this.time;\n\n\tobject.lastKeyframe = this.lastKeyframe;\n\tobject.currentKeyframe = this.currentKeyframe;\n\n\tobject.direction = this.direction;\n\tobject.directionBackwards = this.directionBackwards;\n\n\tTHREE.Mesh.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// File:src/objects/LOD.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LOD = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.objects = [];\n\n};\n\n\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.LOD.prototype.constructor = THREE.LOD;\n\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\n\n\tif ( distance === undefined ) distance = 0;\n\n\tdistance = Math.abs( distance );\n\n\tfor ( var l = 0; l < this.objects.length; l ++ ) {\n\n\t\tif ( distance < this.objects[ l ].distance ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tthis.objects.splice( l, 0, { distance: distance, object: object } );\n\tthis.add( object );\n\n};\n\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\n\n\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\n\n\t\tif ( distance < this.objects[ i ].distance ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn this.objects[ i - 1 ].object;\n\n};\n\nTHREE.LOD.prototype.raycast = ( function () {\n\n\tvar matrixPosition = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\n\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t};\n\n}() );\n\nTHREE.LOD.prototype.update = function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\n\treturn function ( camera ) {\n\n\t\tif ( this.objects.length > 1 ) {\n\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = v1.distanceTo( v2 );\n\n\t\t\tthis.objects[ 0 ].object.visible = true;\n\n\t\t\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= this.objects[ i ].distance ) {\n\n\t\t\t\t\tthis.objects[ i - 1 ].object.visible = false;\n\t\t\t\t\tthis.objects[ i     ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tthis.objects[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}();\n\nTHREE.LOD.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.LOD();\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\tfor ( var i = 0, l = this.objects.length; i < l; i ++ ) {\n\t\tvar x = this.objects[ i ].object.clone();\n\t\tx.visible = i === 0;\n\t\tobject.addLevel( x, this.objects[ i ].distance );\n\t}\n\n\treturn object;\n\n};\n\n// File:src/objects/Sprite.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Sprite = ( function () {\n\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\treturn function ( material ) {\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.type = 'Sprite';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\n\n\t};\n\n} )();\n\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Sprite.prototype.constructor = THREE.Sprite;\n\nTHREE.Sprite.prototype.raycast = ( function () {\n\n\tvar matrixPosition = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tvar distance = raycaster.ray.distanceToPoint( matrixPosition );\n\n\t\tif ( distance > this.scale.x ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: this.position,\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t};\n\n}() );\n\nTHREE.Sprite.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Sprite( this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// Backwards compatibility\n\nTHREE.Particle = THREE.Sprite;\n\n// File:src/objects/LensFlare.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.lensFlares = [];\n\n\tthis.positionScreen = new THREE.Vector3();\n\tthis.customUpdateCallback = undefined;\n\n\tif( texture !== undefined ) {\n\n\t\tthis.add( texture, size, distance, blending, color );\n\n\t}\n\n};\n\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\n\n\n/*\n * Add: adds another flare\n */\n\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\n\n\tif ( size === undefined ) size = - 1;\n\tif ( distance === undefined ) distance = 0;\n\tif ( opacity === undefined ) opacity = 1;\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\n\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\n\n\tthis.lensFlares.push( {\n\t\ttexture: texture, \t\t\t// THREE.Texture\n\t\tsize: size, \t\t\t\t// size in pixels (-1 = use texture.width)\n\t\tdistance: distance, \t\t// distance (0-1) from light source (0=at light source)\n\t\tx: 0, y: 0, z: 0,\t\t\t// screen position (-1 => 1) z = 0 is ontop z = 1 is back\n\t\tscale: 1, \t\t\t\t\t// scale\n\t\trotation: 1, \t\t\t\t// rotation\n\t\topacity: opacity,\t\t\t// opacity\n\t\tcolor: color,\t\t\t\t// color\n\t\tblending: blending\t\t\t// blending\n\t} );\n\n};\n\n/*\n * Update lens flares update positions on all flares based on the screen position\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\n */\n\nTHREE.LensFlare.prototype.updateLensFlares = function () {\n\n\tvar f, fl = this.lensFlares.length;\n\tvar flare;\n\tvar vecX = - this.positionScreen.x * 2;\n\tvar vecY = - this.positionScreen.y * 2;\n\n\tfor( f = 0; f < fl; f ++ ) {\n\n\t\tflare = this.lensFlares[ f ];\n\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\n\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\n\n\t}\n\n};\n\n\n// File:src/scenes/Scene.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Scene = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n};\n\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Scene.prototype.constructor = THREE.Scene;\n\nTHREE.Scene.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Scene();\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\tif ( this.fog !== null ) object.fog = this.fog.clone();\n\tif ( this.overrideMaterial !== null ) object.overrideMaterial = this.overrideMaterial.clone();\n\n\tobject.autoUpdate = this.autoUpdate;\n\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\n\n\treturn object;\n\n};\n\n// File:src/scenes/Fog.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Fog = function ( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n};\n\nTHREE.Fog.prototype.clone = function () {\n\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\n\n};\n\n// File:src/scenes/FogExp2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.FogExp2 = function ( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n};\n\nTHREE.FogExp2.prototype.clone = function () {\n\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\n\n};\n\n// File:src/renderers/shaders/ShaderChunk.js\n\nTHREE.ShaderChunk = {};\n\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\ntransformedNormal = normalize( transformedNormal );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\tfloat dotProduct = dot( transformedNormal, dirVector );\\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\t#ifdef WRAP_AROUND\\n\\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\\n\\n\t#endif\\n\\n}\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\tfloat lDistance = 1.0;\\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\t\tlVector = normalize( lVector );\\n\\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\\n\\n\t\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/default_vertex.glsl\n\nTHREE.ShaderChunk[ 'default_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#elif defined( USE_MORPHTARGETS )\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\\n\\n#else\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\\n\\n#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\t#ifdef USE_MORPHNORMALS\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\\n\\n\t#else\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lightmap_pars_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"vec3 normal = normalize( vNormal );\\nvec3 viewPosition = normalize( vViewPosition );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tvec3 pointDiffuse = vec3( 0.0 );\\n\tvec3 pointSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\\n\\n\t\t\t\t// specular\\n\\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tvec3 spotDiffuse = vec3( 0.0 );\\n\tvec3 spotSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t\t#else\\n\\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t\t#endif\\n\\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\\n\\n\t\t\t\t\t// specular\\n\\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tvec3 dirDiffuse = vec3( 0.0 );\\n\tvec3 dirSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\t\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, dirVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\\n\\n\t\t// specular\\n\\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t/*\\n\t\t// fresnel term from skin shader\\n\t\tconst float F0 = 0.128;\\n\\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\\n\t\tfloat exponential = pow( base, 5.0 );\\n\\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\\n\t\t*/\\n\\n\t\t/*\\n\t\t// fresnel term from fresnel shader\\n\t\tconst float mFresnelBias = 0.08;\\n\t\tconst float mFresnelScale = 0.3;\\n\t\tconst float mFresnelPower = 5.0;\\n\\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\\n\t\t*/\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tvec3 hemiDiffuse = vec3( 0.0 );\\n\tvec3 hemiSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\themiDiffuse += diffuse * hemiColor;\\n\\n\t\t// specular (sky light)\\n\\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\\n\\n\t\t// specular (ground light)\\n\\n\t\tvec3 lVectorGround = -lVector;\\n\\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\\n\\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\\n\\n\t}\\n\\n#endif\\n\\nvec3 totalDiffuse = vec3( 0.0 );\\nvec3 totalSpecular = vec3( 0.0 );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\ttotalDiffuse += dirDiffuse;\\n\ttotalSpecular += dirSpecular;\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\ttotalDiffuse += hemiDiffuse;\\n\ttotalSpecular += hemiSpecular;\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\ttotalDiffuse += pointDiffuse;\\n\ttotalSpecular += pointSpecular;\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\ttotalDiffuse += spotDiffuse;\\n\ttotalSpecular += spotSpecular;\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\\n\\n#else\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tvec3 morphedNormal = vec3( 0.0 );\\n\\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n\tmorphedNormal += normal;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\tuniform sampler2D lightMap;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\ttexelColor.xyz *= texelColor.xyz;\\n\\n\t#endif\\n\\n\tgl_FragColor = gl_FragColor * texelColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'lightmap_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tvColor = color * color;\\n\\n\t#else\\n\\n\t\tvColor = color;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\t#ifdef USE_MORPHTARGETS\\n\\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\n\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"#ifdef GAMMA_OUTPUT\\n\\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambient;\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\n\\nuniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'map_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\\n\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t#else\\n\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t#endif\\n\\n\t#else\\n\\n\t\tvec3 reflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t\t\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tenvColor.xyz *= envColor.xyz;\\n\\n\t#endif\\n\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\t\tgl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tconst float LOG2 = 1.442695;\\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec3 objectNormal = skinnedNormal.xyz;\\n\\n#elif defined( USE_MORPHNORMALS )\\n\\n\tvec3 objectNormal = morphedNormal;\\n\\n#else\\n\\n\tvec3 objectNormal = normal;\\n\\n#endif\\n\\n#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\nvarying vec3 vNormal;\";\n\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_vertex.glsl\n\nTHREE.ShaderChunk[ 'map_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\tvec3 morphed = vec3( 0.0 );\\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n\tmorphed += position;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\\n\tworldNormal = normalize( worldNormal );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t#else\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\tint inFrustumCount = 0;\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\t\t\t// don't shadow pixels outside of light frustum\\n\t\t\t\t// use just first frustum (for cascades)\\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\\n\\n\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\tinFrustumCount += int( inFrustum );\\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\\n\\n\t\t#else\\n\\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\t#endif\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#else\\n\\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t}\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\tshadowColor *= shadowColor;\\n\\n\t#endif\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\n\nTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#elif defined( USE_MORPHTARGETS )\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\t#extension GL_EXT_frag_depth : enable\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/UniformsUtils.js\n\n/**\n * Uniform Utilities\n */\n\nTHREE.UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( parameter_src instanceof Array ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\n// File:src/renderers/shaders/UniformsLib.js\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nTHREE.UniformsLib = {\n\n\tcommon: {\n\n\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\n\n\t\t\"map\" : { type: \"t\", value: null },\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\n\t\t\"lightMap\" : { type: \"t\", value: null },\n\t\t\"specularMap\" : { type: \"t\", value: null },\n\t\t\"alphaMap\" : { type: \"t\", value: null },\n\n\t\t\"envMap\" : { type: \"t\", value: null },\n\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\n\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\n\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 },\n\n\t\t\"morphTargetInfluences\" : { type: \"f\", value: 0 }\n\n\t},\n\n\tbump: {\n\n\t\t\"bumpMap\" : { type: \"t\", value: null },\n\t\t\"bumpScale\" : { type: \"f\", value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\t\"normalMap\" : { type: \"t\", value: null },\n\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\n\t},\n\n\tfog : {\n\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\n\n\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\n\n\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\n\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\n\n\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\n\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\n\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\n\n\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\n\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\n\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\n\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\n\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] }\n\n\t},\n\n\tparticle: {\n\n\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\n\t\t\"size\" : { type: \"f\", value: 1.0 },\n\t\t\"scale\" : { type: \"f\", value: 1.0 },\n\t\t\"map\" : { type: \"t\", value: null },\n\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\n\n\t},\n\n\tshadowmap: {\n\n\t\t\"shadowMap\": { type: \"tv\", value: [] },\n\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\n\n\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\n\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\n\n\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\n\n\t}\n\n};\n\n// File:src/renderers/shaders/ShaderLib.js\n\n/**\n * Webgl Shader Library for three.js\n *\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\n\nTHREE.ShaderLib = {\n\n\t'basic': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\n\t\t\t\"\t#ifdef USE_ENVMAP\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'lambert': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\n\n\t\t\t{\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"#define LAMBERT\",\n\n\t\t\t\"varying vec3 vLightFront;\",\n\n\t\t\t\"#ifdef DOUBLE_SIDED\",\n\n\t\t\t\"\tvarying vec3 vLightBack;\",\n\n\t\t\t\"#endif\",\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"varying vec3 vLightFront;\",\n\n\t\t\t\"#ifdef DOUBLE_SIDED\",\n\n\t\t\t\"\tvarying vec3 vLightBack;\",\n\n\t\t\t\"#endif\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\n\n\t\t\t\t\t//\"float isFront = float( gl_FrontFacing );\",\n\t\t\t\t\t//\"gl_FragColor.xyz *= isFront * vLightFront + ( 1.0 - isFront ) * vLightBack;\",\n\n\t\t\t\"\t\tif ( gl_FrontFacing )\",\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightFront;\",\n\t\t\t\"\t\telse\",\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightBack;\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tgl_FragColor.xyz *= vLightFront;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'phong': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"bump\" ],\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\n\n\t\t\t{\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 },\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"#define PHONG\",\n\n\t\t\t\"varying vec3 vViewPosition;\",\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"\tvViewPosition = -mvPosition.xyz;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"#define PHONG\",\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"uniform vec3 ambient;\",\n\t\t\t\"uniform vec3 emissive;\",\n\t\t\t\"uniform vec3 specular;\",\n\t\t\t\"uniform float shininess;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'particle_basic': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"particle\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"uniform float size;\",\n\t\t\t\"uniform float scale;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\n\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\n\t\t\t\"\t#else\",\n\t\t\t\"\t\tgl_PointSize = size;\",\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 psColor;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( psColor, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'dashed': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\n\t\t\t{\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"uniform float scale;\",\n\t\t\t\"attribute float lineDistance;\",\n\n\t\t\t\"varying float vLineDistance;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\n\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"uniform float dashSize;\",\n\t\t\t\"uniform float totalSize;\",\n\n\t\t\t\"varying float vLineDistance;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\n\n\t\t\t\"\t\tdiscard;\",\n\n\t\t\t\"\t}\",\n\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'depth': {\n\n\t\tuniforms: {\n\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float mNear;\",\n\t\t\t\"uniform float mFar;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\n\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'normal': {\n\n\t\tuniforms: {\n\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float opacity;\",\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\t'cube': {\n\n\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform samplerCube tCube;\",\n\t\t\t\"uniform float tFlip;\",\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\t'equirect': {\n\n\t\tuniforms: { \"tEquirect\": { type: \"t\", value: null },\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform sampler2D tEquirect;\",\n\t\t\t\"uniform float tFlip;\",\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\n\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\n\t\t\t\t\"vec2 sampleUV;\",\n\t\t\t\t\"sampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);\",\n\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;\", // reciprocal( 2 PI ) + 0.5\n\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* Depth encoding into RGBA texture\n\t *\n\t * based on SpiderGL shadow map example\n\t * http://spidergl.org/example.php?id=6\n\t *\n\t * originally from\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\n\t *\n\t * see also\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\n\t */\n\n\t'depthRGBA': {\n\n\t\tuniforms: {},\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\n\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\n\t\t\t\"\treturn res;\",\n\n\t\t\t\"}\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\n\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t}\n\n};\n\n// File:src/renderers/WebGLRenderer.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nTHREE.WebGLRenderer = function ( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\n\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\tpixelRatio = 1,\n\n\t_precision = parameters.precision !== undefined ? parameters.precision : 'highp',\n\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t_logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false,\n\n\t_clearColor = new THREE.Color( 0x000000 ),\n\t_clearAlpha = 0;\n\n\tvar lights = [];\n\n\tvar _webglObjects = {};\n\tvar _webglObjectsImmediate = [];\n\n\tvar opaqueObjects = [];\n\tvar transparentObjects = [];\n\n\tvar sprites = [];\n\tvar lensFlares = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// physically based shading\n\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// shadow map\n\n\tthis.shadowMapEnabled = false;\n\tthis.shadowMapType = THREE.PCFShadowMap;\n\tthis.shadowMapCullFace = THREE.CullFaceFront;\n\tthis.shadowMapDebug = false;\n\tthis.shadowMapCascade = false;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// flags\n\n\tthis.autoScaleCubemaps = true;\n\n\t// info\n\n\tthis.info = {\n\n\t\tmemory: {\n\n\t\t\tprograms: 0,\n\t\t\tgeometries: 0,\n\t\t\ttextures: 0\n\n\t\t},\n\n\t\trender: {\n\n\t\t\tcalls: 0,\n\t\t\tvertices: 0,\n\t\t\tfaces: 0,\n\t\t\tpoints: 0\n\n\t\t}\n\n\t};\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t_programs = [],\n\n\t// internal state cache\n\n\t_currentProgram = null,\n\t_currentFramebuffer = null,\n\t_currentMaterialId = - 1,\n\t_currentGeometryProgram = '',\n\t_currentCamera = null,\n\n\t_usedTextureUnits = 0,\n\n\t// GL state cache\n\n\t_oldDoubleSided = - 1,\n\t_oldFlipSided = - 1,\n\n\t_oldBlending = - 1,\n\n\t_oldBlendEquation = - 1,\n\t_oldBlendSrc = - 1,\n\t_oldBlendDst = - 1,\n\n\t_oldDepthTest = - 1,\n\t_oldDepthWrite = - 1,\n\n\t_oldPolygonOffset = null,\n\t_oldPolygonOffsetFactor = null,\n\t_oldPolygonOffsetUnits = null,\n\n\t_oldLineWidth = null,\n\n\t_viewportX = 0,\n\t_viewportY = 0,\n\t_viewportWidth = _canvas.width,\n\t_viewportHeight = _canvas.height,\n\t_currentWidth = 0,\n\t_currentHeight = 0,\n\n\t_newAttributes = new Uint8Array( 16 ),\n\t_enabledAttributes = new Uint8Array( 16 ),\n\n\t// frustum\n\n\t_frustum = new THREE.Frustum(),\n\n\t // camera matrices cache\n\n\t_projScreenMatrix = new THREE.Matrix4(),\n\t_projScreenMatrixPS = new THREE.Matrix4(),\n\n\t_vector3 = new THREE.Vector3(),\n\n\t// light arrays cache\n\n\t_direction = new THREE.Vector3(),\n\n\t_lightsNeedUpdate = true,\n\n\t_lights = {\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: { length: 0, colors:[], positions: [] },\n\t\tpoint: { length: 0, colors: [], positions: [], distances: [] },\n\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [] },\n\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\n\n\t};\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar attributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\n\t\t};\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl') !== null ) {\n\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\n\n\t\t\t} else {\n\n\t\t\t\tthrow 'Error creating WebGL context.';\n\n\t\t\t}\n\n\t\t}\n\n\t\t_canvas.addEventListener( 'webglcontextlost', function ( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tresetGLState();\n\t\t\tsetDefaultGLState();\n\n\t\t\t_webglObjects = {};\n\n\t\t}, false);\n\n\t} catch ( error ) {\n\n\t\tconsole.error( error );\n\n\t}\n\n\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\treturn {\n\t\t\t\t'rangeMin': 1,\n\t\t\t\t'rangeMax': 1,\n\t\t\t\t'precision': 1\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\tvar extensions = new THREE.WebGLExtensions( _gl );\n\n\textensions.get( 'OES_texture_float' );\n\textensions.get( 'OES_texture_float_linear' );\n\textensions.get( 'OES_standard_derivatives' );\n\n\tif ( _logarithmicDepthBuffer ) {\n\n\t\textensions.get( 'EXT_frag_depth' );\n\n\t}\n\n\t//\n\n\tvar setDefaultGLState = function () {\n\n\t\t_gl.clearColor( 0, 0, 0, 1 );\n\t\t_gl.clearDepth( 1 );\n\t\t_gl.clearStencil( 0 );\n\n\t\t_gl.enable( _gl.DEPTH_TEST );\n\t\t_gl.depthFunc( _gl.LEQUAL );\n\n\t\t_gl.frontFace( _gl.CCW );\n\t\t_gl.cullFace( _gl.BACK );\n\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t_gl.enable( _gl.BLEND );\n\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tvar resetGLState = function () {\n\n\t\t_currentProgram = null;\n\t\t_currentCamera = null;\n\n\t\t_oldBlending = - 1;\n\t\t_oldDepthTest = - 1;\n\t\t_oldDepthWrite = - 1;\n\t\t_oldDoubleSided = - 1;\n\t\t_oldFlipSided = - 1;\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\n\t\t_lightsNeedUpdate = true;\n\n\t\tfor ( var i = 0; i < _enabledAttributes.length; i ++ ) {\n\n\t\t\t_enabledAttributes[ i ] = 0;\n\n\t\t}\n\n\t};\n\n\tsetDefaultGLState();\n\n\tthis.context = _gl;\n\n\t// GPU capabilities\n\n\tvar _maxTextures = _gl.getParameter( _gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar _maxVertexTextures = _gl.getParameter( _gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar _maxTextureSize = _gl.getParameter( _gl.MAX_TEXTURE_SIZE );\n\tvar _maxCubemapSize = _gl.getParameter( _gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar _supportsVertexTextures = _maxVertexTextures > 0;\n\tvar _supportsBoneTextures = _supportsVertexTextures && extensions.get( 'OES_texture_float' );\n\n\t//\n\n\tvar _vertexShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.HIGH_FLOAT );\n\tvar _vertexShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.MEDIUM_FLOAT );\n\tvar _vertexShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.LOW_FLOAT );\n\n\tvar _fragmentShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.HIGH_FLOAT );\n\tvar _fragmentShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.MEDIUM_FLOAT );\n\tvar _fragmentShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.LOW_FLOAT );\n\n\tvar getCompressedTextureFormats = ( function () {\n\n\t\tvar array;\n\n\t\treturn function () {\n\n\t\t\tif ( array !== undefined ) {\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tarray = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) || extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\n\n\t\t\t\tvar formats = _gl.getParameter( _gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ){\n\n\t\t\t\t\tarray.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t} )();\n\n\t// clamp precision to maximum available\n\n\tvar highpAvailable = _vertexShaderPrecisionHighpFloat.precision > 0 && _fragmentShaderPrecisionHighpFloat.precision > 0;\n\tvar mediumpAvailable = _vertexShaderPrecisionMediumpFloat.precision > 0 && _fragmentShaderPrecisionMediumpFloat.precision > 0;\n\n\tif ( _precision === 'highp' && ! highpAvailable ) {\n\n\t\tif ( mediumpAvailable ) {\n\n\t\t\t_precision = 'mediump';\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp not supported, using mediump.' );\n\n\t\t} else {\n\n\t\t\t_precision = 'lowp';\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp and mediump not supported, using lowp.' );\n\n\t\t}\n\n\t}\n\n\tif ( _precision === 'mediump' && ! mediumpAvailable ) {\n\n\t\t_precision = 'lowp';\n\t\tconsole.warn( 'THREE.WebGLRenderer: mediump not supported, using lowp.' );\n\n\t}\n\n\t// Plugins\n\n\tvar shadowMapPlugin = new THREE.ShadowMapPlugin( this, lights, _webglObjects, _webglObjectsImmediate );\n\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\n\n\t};\n\n\tthis.supportsVertexTextures = function () {\n\n\t\treturn _supportsVertexTextures;\n\n\t};\n\n\tthis.supportsFloatTextures = function () {\n\n\t\treturn extensions.get( 'OES_texture_float' );\n\n\t};\n\n\tthis.supportsStandardDerivatives = function () {\n\n\t\treturn extensions.get( 'OES_standard_derivatives' );\n\n\t};\n\n\tthis.supportsCompressedTextureS3TC = function () {\n\n\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t};\n\n\tthis.supportsCompressedTexturePVRTC = function () {\n\n\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t};\n\n\tthis.supportsBlendMinMax = function () {\n\n\t\treturn extensions.get( 'EXT_blend_minmax' );\n\n\t};\n\n\tthis.getMaxAnisotropy = ( function () {\n\n\t\tvar value;\n\n\t\treturn function () {\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\treturn value;\n\n\t\t\t}\n\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tvalue = extension !== null ? _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT ) : 0;\n\n\t\t\treturn value;\n\n\t\t}\n\n\t} )();\n\n\tthis.getPrecision = function () {\n\n\t\treturn _precision;\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tpixelRatio = value;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_canvas.width = width * pixelRatio;\n\t\t_canvas.height = height * pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewportX = x * pixelRatio;\n\t\t_viewportY = y * pixelRatio;\n\n\t\t_viewportWidth = width * pixelRatio;\n\t\t_viewportHeight = height * pixelRatio;\n\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t_gl.scissor(\n\t\t\tx * pixelRatio,\n\t\t\ty * pixelRatio,\n\t\t\twidth * pixelRatio,\n\t\t\theight * pixelRatio\n\t\t);\n\n\t};\n\n\tthis.enableScissorTest = function ( enable ) {\n\n\t\tenable ? _gl.enable( _gl.SCISSOR_TEST ) : _gl.disable( _gl.SCISSOR_TEST );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.setClearAlpha = function ( alpha ) {\n\n\t\t_clearAlpha = alpha;\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t// Reset\n\n\tthis.resetGLState = resetGLState;\n\n\t// Buffer allocation\n\n\tfunction createParticleBuffers ( geometry ) {\n\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\tfunction createLineBuffers ( geometry ) {\n\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\n\t\tgeometry.__webglLineDistanceBuffer = _gl.createBuffer();\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\tfunction createMeshBuffers ( geometryGroup ) {\n\n\t\tgeometryGroup.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglNormalBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglTangentBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglColorBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglUVBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglUV2Buffer = _gl.createBuffer();\n\n\t\tgeometryGroup.__webglSkinIndicesBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglSkinWeightsBuffer = _gl.createBuffer();\n\n\t\tgeometryGroup.__webglFaceBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglLineBuffer = _gl.createBuffer();\n\n\t\tvar numMorphTargets = geometryGroup.numMorphTargets;\n\n\t\tif ( numMorphTargets ) {\n\n\t\t\tgeometryGroup.__webglMorphTargetsBuffers = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__webglMorphTargetsBuffers.push( _gl.createBuffer() );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar numMorphNormals = geometryGroup.numMorphNormals;\n\n\t\tif ( numMorphNormals ) {\n\n\t\t\tgeometryGroup.__webglMorphNormalsBuffers = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__webglMorphNormalsBuffers.push( _gl.createBuffer() );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\t// Events\n\n\tvar onObjectRemoved = function ( event ) {\n\n\t\tvar object = event.target;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tchild.removeEventListener( 'remove', onObjectRemoved );\n\n\t\t\tremoveObject( child );\n\n\t\t} );\n\n\t};\n\n\tvar onGeometryDispose = function ( event ) {\n\n\t\tvar geometry = event.target;\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdeallocateGeometry( geometry );\n\n\t};\n\n\tvar onTextureDispose = function ( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\t_this.info.memory.textures --;\n\n\n\t};\n\n\tvar onRenderTargetDispose = function ( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\t_this.info.memory.textures --;\n\n\t};\n\n\tvar onMaterialDispose = function ( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t};\n\n\t// Buffer deallocation\n\n\tvar deleteBuffers = function ( geometry ) {\n\n\t\tvar buffers = [\n\t\t\t'__webglVertexBuffer',\n\t\t\t'__webglNormalBuffer',\n\t\t\t'__webglTangentBuffer',\n\t\t\t'__webglColorBuffer',\n\t\t\t'__webglUVBuffer',\n\t\t\t'__webglUV2Buffer',\n\n\t\t\t'__webglSkinIndicesBuffer',\n\t\t\t'__webglSkinWeightsBuffer',\n\n\t\t\t'__webglFaceBuffer',\n\t\t\t'__webglLineBuffer',\n\n\t\t\t'__webglLineDistanceBuffer'\n\t\t];\n\n\t\tfor ( var i = 0, l = buffers.length; i < l; i ++ ) {\n\n\t\t\tvar name = buffers[ i ];\n\n\t\t\tif ( geometry[ name ] !== undefined ) {\n\n\t\t\t\t_gl.deleteBuffer( geometry[ name ] );\n\n\t\t\t\tdelete geometry[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// custom attributes\n\n\t\tif ( geometry.__webglCustomAttributesList !== undefined ) {\n\n\t\t\tfor ( var name in geometry.__webglCustomAttributesList ) {\n\n\t\t\t\t_gl.deleteBuffer( geometry.__webglCustomAttributesList[ name ].buffer );\n\n\t\t\t}\n\n\t\t\tdelete geometry.__webglCustomAttributesList;\n\n\t\t}\n\n\t\t_this.info.memory.geometries --;\n\n\t};\n\n\tvar deallocateGeometry = function ( geometry ) {\n\n\t\tdelete geometry.__webglInit;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tfor ( var name in geometry.attributes ) {\n\n\t\t\t\tvar attribute = geometry.attributes[ name ];\n\n\t\t\t\tif ( attribute.buffer !== undefined ) {\n\n\t\t\t\t\t_gl.deleteBuffer( attribute.buffer );\n\n\t\t\t\t\tdelete attribute.buffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_this.info.memory.geometries --;\n\n\t\t} else {\n\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\tif ( geometryGroupsList !== undefined ) {\n\n\t\t\t\tfor ( var i = 0, l = geometryGroupsList.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\n\t\t\t\t\tif ( geometryGroup.numMorphTargets !== undefined ) {\n\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphTargetsBuffers[ m ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphTargetsBuffers;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometryGroup.numMorphNormals !== undefined ) {\n\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphNormalsBuffers[ m ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphNormalsBuffers;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdeleteBuffers( geometryGroup );\n\n\t\t\t\t}\n\n\t\t\t\tdelete geometryGroups[ geometry.id ];\n\n\t\t\t} else {\n\n\t\t\t\tdeleteBuffers( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// TOFIX: Workaround for deleted geometry being currently bound\n\n\t\t_currentGeometryProgram = '';\n\n\t};\n\n\tvar deallocateTexture = function ( texture ) {\n\n\t\tif ( texture.image && texture.image.__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( texture.image.__webglTextureCube );\n\n\t\t\tdelete texture.image.__webglTextureCube;\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( texture.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( texture.__webglTexture );\n\n\t\t\tdelete texture.__webglTexture;\n\t\t\tdelete texture.__webglInit;\n\n\t\t}\n\n\t};\n\n\tvar deallocateRenderTarget = function ( renderTarget ) {\n\n\t\tif ( ! renderTarget || renderTarget.__webglTexture === undefined ) return;\n\n\t\t_gl.deleteTexture( renderTarget.__webglTexture );\n\n\t\tdelete renderTarget.__webglTexture;\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer[ i ] );\n\t\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer );\n\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer );\n\n\t\t}\n\n\t\tdelete renderTarget.__webglFramebuffer;\n\t\tdelete renderTarget.__webglRenderbuffer;\n\n\t};\n\n\tvar deallocateMaterial = function ( material ) {\n\n\t\tvar program = material.program.program;\n\n\t\tif ( program === undefined ) return;\n\n\t\tmaterial.program = undefined;\n\n\t\t// only deallocate GL program if this was the last use of shared program\n\t\t// assumed there is only single copy of any program in the _programs list\n\t\t// (that's how it's constructed)\n\n\t\tvar i, il, programInfo;\n\t\tvar deleteProgram = false;\n\n\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\n\n\t\t\tprogramInfo = _programs[ i ];\n\n\t\t\tif ( programInfo.program === program ) {\n\n\t\t\t\tprogramInfo.usedTimes --;\n\n\t\t\t\tif ( programInfo.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteProgram = true;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( deleteProgram === true ) {\n\n\t\t\t// avoid using array.splice, this is costlier than creating new array from scratch\n\n\t\t\tvar newPrograms = [];\n\n\t\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\n\n\t\t\t\tprogramInfo = _programs[ i ];\n\n\t\t\t\tif ( programInfo.program !== program ) {\n\n\t\t\t\t\tnewPrograms.push( programInfo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_programs = newPrograms;\n\n\t\t\t_gl.deleteProgram( program );\n\n\t\t\t_this.info.memory.programs --;\n\n\t\t}\n\n\t};\n\n\t// Buffer initialization\n\n\tfunction initCustomAttributes ( object ) {\n\n\t\tvar geometry = object.geometry;\n\t\tvar material = object.material;\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tif ( material.attributes ) {\n\n\t\t\tif ( geometry.__webglCustomAttributesList === undefined ) {\n\n\t\t\t\tgeometry.__webglCustomAttributesList = [];\n\n\t\t\t}\n\n\t\t\tfor ( var name in material.attributes ) {\n\n\t\t\t\tvar attribute = material.attributes[ name ];\n\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\n\n\t\t\t\t\tattribute.__webglInitialized = true;\n\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\n\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\n\n\t\t\t\t\tattribute.size = size;\n\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\n\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.__webglCustomAttributesList.push( attribute );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction initParticleBuffers ( geometry, object ) {\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\n\n\t\tgeometry.__sortArray = [];\n\n\t\tgeometry.__webglParticleCount = nvertices;\n\n\t\tinitCustomAttributes( object );\n\n\t};\n\n\tfunction initLineBuffers ( geometry, object ) {\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__lineDistanceArray = new Float32Array( nvertices * 1 );\n\n\t\tgeometry.__webglLineCount = nvertices;\n\n\t\tinitCustomAttributes( object );\n\n\t};\n\n\tfunction initMeshBuffers ( geometryGroup, object ) {\n\n\t\tvar geometry = object.geometry,\n\t\t\tfaces3 = geometryGroup.faces3,\n\n\t\t\tnvertices = faces3.length * 3,\n\t\t\tntris     = faces3.length * 1,\n\t\t\tnlines    = faces3.length * 3,\n\n\t\t\tmaterial = getBufferMaterial( object, geometryGroup );\n\n\t\tgeometryGroup.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__normalArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__colorArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__uvArray = new Float32Array( nvertices * 2 );\n\n\t\tif ( geometry.faceVertexUvs.length > 1 ) {\n\n\t\t\tgeometryGroup.__uv2Array = new Float32Array( nvertices * 2 );\n\n\t\t}\n\n\t\tif ( geometry.hasTangents ) {\n\n\t\t\tgeometryGroup.__tangentArray = new Float32Array( nvertices * 4 );\n\n\t\t}\n\n\t\tif ( object.geometry.skinWeights.length && object.geometry.skinIndices.length ) {\n\n\t\t\tgeometryGroup.__skinIndexArray = new Float32Array( nvertices * 4 );\n\t\t\tgeometryGroup.__skinWeightArray = new Float32Array( nvertices * 4 );\n\n\t\t}\n\n\t\tvar UintArray = extensions.get( 'OES_element_index_uint' ) !== null && ntris > 21845 ? Uint32Array : Uint16Array; // 65535 / 3\n\n\t\tgeometryGroup.__typeArray = UintArray;\n\t\tgeometryGroup.__faceArray = new UintArray( ntris * 3 );\n\t\tgeometryGroup.__lineArray = new UintArray( nlines * 2 );\n\n\t\tvar numMorphTargets = geometryGroup.numMorphTargets;\n\n\t\tif ( numMorphTargets ) {\n\n\t\t\tgeometryGroup.__morphTargetsArrays = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__morphTargetsArrays.push( new Float32Array( nvertices * 3 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar numMorphNormals = geometryGroup.numMorphNormals;\n\n\t\tif ( numMorphNormals ) {\n\n\t\t\tgeometryGroup.__morphNormalsArrays = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__morphNormalsArrays.push( new Float32Array( nvertices * 3 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometryGroup.__webglFaceCount = ntris * 3;\n\t\tgeometryGroup.__webglLineCount = nlines * 2;\n\n\n\t\t// custom attributes\n\n\t\tif ( material.attributes ) {\n\n\t\t\tif ( geometryGroup.__webglCustomAttributesList === undefined ) {\n\n\t\t\t\tgeometryGroup.__webglCustomAttributesList = [];\n\n\t\t\t}\n\n\t\t\tfor ( var name in material.attributes ) {\n\n\t\t\t\t// Do a shallow copy of the attribute object so different geometryGroup chunks use different\n\t\t\t\t// attribute buffers which are correctly indexed in the setMeshBuffers function\n\n\t\t\t\tvar originalAttribute = material.attributes[ name ];\n\n\t\t\t\tvar attribute = {};\n\n\t\t\t\tfor ( var property in originalAttribute ) {\n\n\t\t\t\t\tattribute[ property ] = originalAttribute[ property ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\n\n\t\t\t\t\tattribute.__webglInitialized = true;\n\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\n\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\n\n\t\t\t\t\tattribute.size = size;\n\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\n\n\t\t\t\t\toriginalAttribute.needsUpdate = true;\n\t\t\t\t\tattribute.__original = originalAttribute;\n\n\t\t\t\t}\n\n\t\t\t\tgeometryGroup.__webglCustomAttributesList.push( attribute );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometryGroup.__inittedArrays = true;\n\n\t};\n\n\tfunction getBufferMaterial( object, geometryGroup ) {\n\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\n\t\t\t ? object.material.materials[ geometryGroup.materialIndex ]\n\t\t\t : object.material;\n\n\t};\n\n\tfunction materialNeedsSmoothNormals ( material ) {\n\n\t\treturn material && material.shading !== undefined && material.shading === THREE.SmoothShading;\n\n\t};\n\n\t// Buffer setting\n\n\tfunction setParticleBuffers ( geometry, hint, object ) {\n\n\t\tvar v, c, vertex, offset, index, color,\n\n\t\tvertices = geometry.vertices,\n\t\tvl = vertices.length,\n\n\t\tcolors = geometry.colors,\n\t\tcl = colors.length,\n\n\t\tvertexArray = geometry.__vertexArray,\n\t\tcolorArray = geometry.__colorArray,\n\n\t\tsortArray = geometry.__sortArray,\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyElements = geometry.elementsNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\n\t\ti, il,\n\t\ta, ca, cal, value,\n\t\tcustomAttribute;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\tvertex = vertices[ v ];\n\n\t\t\t\toffset = v * 3;\n\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\n\n\t\t\t\tcolor = colors[ c ];\n\n\t\t\t\toffset = c * 3;\n\n\t\t\t\tcolorArray[ offset ]     = color.r;\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( customAttribute.needsUpdate && ( customAttribute.boundTo === undefined ||  customAttribute.boundTo === 'vertices' ) ) {\n\n\t\t\t\t\tcal = customAttribute.value.length;\n\n\t\t\t\t\toffset = 0;\n\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\n\t\t\t\t\t\t\toffset += 2;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]      = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\n\n\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t\tcustomAttribute.needsUpdate = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setLineBuffers ( geometry, hint ) {\n\n\t\tvar v, c, d, vertex, offset, color,\n\n\t\tvertices = geometry.vertices,\n\t\tcolors = geometry.colors,\n\t\tlineDistances = geometry.lineDistances,\n\n\t\tvl = vertices.length,\n\t\tcl = colors.length,\n\t\tdl = lineDistances.length,\n\n\t\tvertexArray = geometry.__vertexArray,\n\t\tcolorArray = geometry.__colorArray,\n\t\tlineDistanceArray = geometry.__lineDistanceArray,\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\t\tdirtyLineDistances = geometry.lineDistancesNeedUpdate,\n\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\n\n\t\ti, il,\n\t\ta, ca, cal, value,\n\t\tcustomAttribute;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\tvertex = vertices[ v ];\n\n\t\t\t\toffset = v * 3;\n\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\n\n\t\t\t\tcolor = colors[ c ];\n\n\t\t\t\toffset = c * 3;\n\n\t\t\t\tcolorArray[ offset ]     = color.r;\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyLineDistances ) {\n\n\t\t\tfor ( d = 0; d < dl; d ++ ) {\n\n\t\t\t\tlineDistanceArray[ d ] = lineDistances[ d ];\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglLineDistanceBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, lineDistanceArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( customAttribute.needsUpdate && ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) ) {\n\n\t\t\t\t\toffset = 0;\n\n\t\t\t\t\tcal = customAttribute.value.length;\n\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\n\t\t\t\t\t\t\toffset += 2;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]    = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\n\n\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t\t\tcustomAttribute.needsUpdate = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setMeshBuffers( geometryGroup, object, hint, dispose, material ) {\n\n\t\tif ( ! geometryGroup.__inittedArrays ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar needsSmoothNormals = materialNeedsSmoothNormals( material );\n\n\t\tvar f, fl, fi, face,\n\t\tvertexNormals, faceNormal, normal,\n\t\tvertexColors, faceColor,\n\t\tvertexTangents,\n\t\tuv, uv2, v1, v2, v3, v4, t1, t2, t3, t4, n1, n2, n3, n4,\n\t\tc1, c2, c3,\n\t\tsw1, sw2, sw3, sw4,\n\t\tsi1, si2, si3, si4,\n\t\tsa1, sa2, sa3, sa4,\n\t\tsb1, sb2, sb3, sb4,\n\t\tm, ml, i, il,\n\t\tvn, uvi, uv2i,\n\t\tvk, vkl, vka,\n\t\tnka, chf, faceVertexNormals,\n\t\ta,\n\n\t\tvertexIndex = 0,\n\n\t\toffset = 0,\n\t\toffset_uv = 0,\n\t\toffset_uv2 = 0,\n\t\toffset_face = 0,\n\t\toffset_normal = 0,\n\t\toffset_tangent = 0,\n\t\toffset_line = 0,\n\t\toffset_color = 0,\n\t\toffset_skin = 0,\n\t\toffset_morphTarget = 0,\n\t\toffset_custom = 0,\n\t\toffset_customSrc = 0,\n\n\t\tvalue,\n\n\t\tvertexArray = geometryGroup.__vertexArray,\n\t\tuvArray = geometryGroup.__uvArray,\n\t\tuv2Array = geometryGroup.__uv2Array,\n\t\tnormalArray = geometryGroup.__normalArray,\n\t\ttangentArray = geometryGroup.__tangentArray,\n\t\tcolorArray = geometryGroup.__colorArray,\n\n\t\tskinIndexArray = geometryGroup.__skinIndexArray,\n\t\tskinWeightArray = geometryGroup.__skinWeightArray,\n\n\t\tmorphTargetsArrays = geometryGroup.__morphTargetsArrays,\n\t\tmorphNormalsArrays = geometryGroup.__morphNormalsArrays,\n\n\t\tcustomAttributes = geometryGroup.__webglCustomAttributesList,\n\t\tcustomAttribute,\n\n\t\tfaceArray = geometryGroup.__faceArray,\n\t\tlineArray = geometryGroup.__lineArray,\n\n\t\tgeometry = object.geometry, // this is shared for all chunks\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyElements = geometry.elementsNeedUpdate,\n\t\tdirtyUvs = geometry.uvsNeedUpdate,\n\t\tdirtyNormals = geometry.normalsNeedUpdate,\n\t\tdirtyTangents = geometry.tangentsNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\t\tdirtyMorphTargets = geometry.morphTargetsNeedUpdate,\n\n\t\tvertices = geometry.vertices,\n\t\tchunk_faces3 = geometryGroup.faces3,\n\t\tobj_faces = geometry.faces,\n\n\t\tobj_uvs  = geometry.faceVertexUvs[ 0 ],\n\t\tobj_uvs2 = geometry.faceVertexUvs[ 1 ],\n\n\t\tobj_colors = geometry.colors,\n\n\t\tobj_skinIndices = geometry.skinIndices,\n\t\tobj_skinWeights = geometry.skinWeights,\n\n\t\tmorphTargets = geometry.morphTargets,\n\t\tmorphNormals = geometry.morphNormals;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tv1 = vertices[ face.a ];\n\t\t\t\tv2 = vertices[ face.b ];\n\t\t\t\tv3 = vertices[ face.c ];\n\n\t\t\t\tvertexArray[ offset ]     = v1.x;\n\t\t\t\tvertexArray[ offset + 1 ] = v1.y;\n\t\t\t\tvertexArray[ offset + 2 ] = v1.z;\n\n\t\t\t\tvertexArray[ offset + 3 ] = v2.x;\n\t\t\t\tvertexArray[ offset + 4 ] = v2.y;\n\t\t\t\tvertexArray[ offset + 5 ] = v2.z;\n\n\t\t\t\tvertexArray[ offset + 6 ] = v3.x;\n\t\t\t\tvertexArray[ offset + 7 ] = v3.y;\n\t\t\t\tvertexArray[ offset + 8 ] = v3.z;\n\n\t\t\t\toffset += 9;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyMorphTargets ) {\n\n\t\t\tfor ( vk = 0, vkl = morphTargets.length; vk < vkl; vk ++ ) {\n\n\t\t\t\toffset_morphTarget = 0;\n\n\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\tchf = chunk_faces3[ f ];\n\t\t\t\t\tface = obj_faces[ chf ];\n\n\t\t\t\t\t// morph positions\n\n\t\t\t\t\tv1 = morphTargets[ vk ].vertices[ face.a ];\n\t\t\t\t\tv2 = morphTargets[ vk ].vertices[ face.b ];\n\t\t\t\t\tv3 = morphTargets[ vk ].vertices[ face.c ];\n\n\t\t\t\t\tvka = morphTargetsArrays[ vk ];\n\n\t\t\t\t\tvka[ offset_morphTarget ]     = v1.x;\n\t\t\t\t\tvka[ offset_morphTarget + 1 ] = v1.y;\n\t\t\t\t\tvka[ offset_morphTarget + 2 ] = v1.z;\n\n\t\t\t\t\tvka[ offset_morphTarget + 3 ] = v2.x;\n\t\t\t\t\tvka[ offset_morphTarget + 4 ] = v2.y;\n\t\t\t\t\tvka[ offset_morphTarget + 5 ] = v2.z;\n\n\t\t\t\t\tvka[ offset_morphTarget + 6 ] = v3.x;\n\t\t\t\t\tvka[ offset_morphTarget + 7 ] = v3.y;\n\t\t\t\t\tvka[ offset_morphTarget + 8 ] = v3.z;\n\n\t\t\t\t\t// morph normals\n\n\t\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t\tif ( needsSmoothNormals ) {\n\n\t\t\t\t\t\t\tfaceVertexNormals = morphNormals[ vk ].vertexNormals[ chf ];\n\n\t\t\t\t\t\t\tn1 = faceVertexNormals.a;\n\t\t\t\t\t\t\tn2 = faceVertexNormals.b;\n\t\t\t\t\t\t\tn3 = faceVertexNormals.c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tn1 = morphNormals[ vk ].faceNormals[ chf ];\n\t\t\t\t\t\t\tn2 = n1;\n\t\t\t\t\t\t\tn3 = n1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnka = morphNormalsArrays[ vk ];\n\n\t\t\t\t\t\tnka[ offset_morphTarget ]     = n1.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 1 ] = n1.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 2 ] = n1.z;\n\n\t\t\t\t\t\tnka[ offset_morphTarget + 3 ] = n2.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 4 ] = n2.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 5 ] = n2.z;\n\n\t\t\t\t\t\tnka[ offset_morphTarget + 6 ] = n3.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 7 ] = n3.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 8 ] = n3.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//\n\n\t\t\t\t\toffset_morphTarget += 9;\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ vk ] );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphTargetsArrays[ vk ], hint );\n\n\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ vk ] );\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphNormalsArrays[ vk ], hint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( obj_skinWeights.length ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t// weights\n\n\t\t\t\tsw1 = obj_skinWeights[ face.a ];\n\t\t\t\tsw2 = obj_skinWeights[ face.b ];\n\t\t\t\tsw3 = obj_skinWeights[ face.c ];\n\n\t\t\t\tskinWeightArray[ offset_skin ]     = sw1.x;\n\t\t\t\tskinWeightArray[ offset_skin + 1 ] = sw1.y;\n\t\t\t\tskinWeightArray[ offset_skin + 2 ] = sw1.z;\n\t\t\t\tskinWeightArray[ offset_skin + 3 ] = sw1.w;\n\n\t\t\t\tskinWeightArray[ offset_skin + 4 ] = sw2.x;\n\t\t\t\tskinWeightArray[ offset_skin + 5 ] = sw2.y;\n\t\t\t\tskinWeightArray[ offset_skin + 6 ] = sw2.z;\n\t\t\t\tskinWeightArray[ offset_skin + 7 ] = sw2.w;\n\n\t\t\t\tskinWeightArray[ offset_skin + 8 ]  = sw3.x;\n\t\t\t\tskinWeightArray[ offset_skin + 9 ]  = sw3.y;\n\t\t\t\tskinWeightArray[ offset_skin + 10 ] = sw3.z;\n\t\t\t\tskinWeightArray[ offset_skin + 11 ] = sw3.w;\n\n\t\t\t\t// indices\n\n\t\t\t\tsi1 = obj_skinIndices[ face.a ];\n\t\t\t\tsi2 = obj_skinIndices[ face.b ];\n\t\t\t\tsi3 = obj_skinIndices[ face.c ];\n\n\t\t\t\tskinIndexArray[ offset_skin ]     = si1.x;\n\t\t\t\tskinIndexArray[ offset_skin + 1 ] = si1.y;\n\t\t\t\tskinIndexArray[ offset_skin + 2 ] = si1.z;\n\t\t\t\tskinIndexArray[ offset_skin + 3 ] = si1.w;\n\n\t\t\t\tskinIndexArray[ offset_skin + 4 ] = si2.x;\n\t\t\t\tskinIndexArray[ offset_skin + 5 ] = si2.y;\n\t\t\t\tskinIndexArray[ offset_skin + 6 ] = si2.z;\n\t\t\t\tskinIndexArray[ offset_skin + 7 ] = si2.w;\n\n\t\t\t\tskinIndexArray[ offset_skin + 8 ]  = si3.x;\n\t\t\t\tskinIndexArray[ offset_skin + 9 ]  = si3.y;\n\t\t\t\tskinIndexArray[ offset_skin + 10 ] = si3.z;\n\t\t\t\tskinIndexArray[ offset_skin + 11 ] = si3.w;\n\n\t\t\t\toffset_skin += 12;\n\n\t\t\t}\n\n\t\t\tif ( offset_skin > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinIndexArray, hint );\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinWeightArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexColors = face.vertexColors;\n\t\t\t\tfaceColor = face.color;\n\n\t\t\t\tif ( vertexColors.length === 3 && material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\tc1 = vertexColors[ 0 ];\n\t\t\t\t\tc2 = vertexColors[ 1 ];\n\t\t\t\t\tc3 = vertexColors[ 2 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tc1 = faceColor;\n\t\t\t\t\tc2 = faceColor;\n\t\t\t\t\tc3 = faceColor;\n\n\t\t\t\t}\n\n\t\t\t\tcolorArray[ offset_color ]     = c1.r;\n\t\t\t\tcolorArray[ offset_color + 1 ] = c1.g;\n\t\t\t\tcolorArray[ offset_color + 2 ] = c1.b;\n\n\t\t\t\tcolorArray[ offset_color + 3 ] = c2.r;\n\t\t\t\tcolorArray[ offset_color + 4 ] = c2.g;\n\t\t\t\tcolorArray[ offset_color + 5 ] = c2.b;\n\n\t\t\t\tcolorArray[ offset_color + 6 ] = c3.r;\n\t\t\t\tcolorArray[ offset_color + 7 ] = c3.g;\n\t\t\t\tcolorArray[ offset_color + 8 ] = c3.b;\n\n\t\t\t\toffset_color += 9;\n\n\t\t\t}\n\n\t\t\tif ( offset_color > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyTangents && geometry.hasTangents ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexTangents = face.vertexTangents;\n\n\t\t\t\tt1 = vertexTangents[ 0 ];\n\t\t\t\tt2 = vertexTangents[ 1 ];\n\t\t\t\tt3 = vertexTangents[ 2 ];\n\n\t\t\t\ttangentArray[ offset_tangent ]     = t1.x;\n\t\t\t\ttangentArray[ offset_tangent + 1 ] = t1.y;\n\t\t\t\ttangentArray[ offset_tangent + 2 ] = t1.z;\n\t\t\t\ttangentArray[ offset_tangent + 3 ] = t1.w;\n\n\t\t\t\ttangentArray[ offset_tangent + 4 ] = t2.x;\n\t\t\t\ttangentArray[ offset_tangent + 5 ] = t2.y;\n\t\t\t\ttangentArray[ offset_tangent + 6 ] = t2.z;\n\t\t\t\ttangentArray[ offset_tangent + 7 ] = t2.w;\n\n\t\t\t\ttangentArray[ offset_tangent + 8 ]  = t3.x;\n\t\t\t\ttangentArray[ offset_tangent + 9 ]  = t3.y;\n\t\t\t\ttangentArray[ offset_tangent + 10 ] = t3.z;\n\t\t\t\ttangentArray[ offset_tangent + 11 ] = t3.w;\n\n\t\t\t\toffset_tangent += 12;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, tangentArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyNormals ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexNormals = face.vertexNormals;\n\t\t\t\tfaceNormal = face.normal;\n\n\t\t\t\tif ( vertexNormals.length === 3 && needsSmoothNormals ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tvn = vertexNormals[ i ];\n\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = vn.x;\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = vn.y;\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = vn.z;\n\n\t\t\t\t\t\toffset_normal += 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = faceNormal.x;\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = faceNormal.y;\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = faceNormal.z;\n\n\t\t\t\t\t\toffset_normal += 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, normalArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyUvs && obj_uvs ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfi = chunk_faces3[ f ];\n\n\t\t\t\tuv = obj_uvs[ fi ];\n\n\t\t\t\tif ( uv === undefined ) continue;\n\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tuvi = uv[ i ];\n\n\t\t\t\t\tuvArray[ offset_uv ]     = uvi.x;\n\t\t\t\t\tuvArray[ offset_uv + 1 ] = uvi.y;\n\n\t\t\t\t\toffset_uv += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( offset_uv > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uvArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyUvs && obj_uvs2 ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfi = chunk_faces3[ f ];\n\n\t\t\t\tuv2 = obj_uvs2[ fi ];\n\n\t\t\t\tif ( uv2 === undefined ) continue;\n\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tuv2i = uv2[ i ];\n\n\t\t\t\t\tuv2Array[ offset_uv2 ]     = uv2i.x;\n\t\t\t\t\tuv2Array[ offset_uv2 + 1 ] = uv2i.y;\n\n\t\t\t\t\toffset_uv2 += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( offset_uv2 > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uv2Array, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyElements ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfaceArray[ offset_face ]   = vertexIndex;\n\t\t\t\tfaceArray[ offset_face + 1 ] = vertexIndex + 1;\n\t\t\t\tfaceArray[ offset_face + 2 ] = vertexIndex + 2;\n\n\t\t\t\toffset_face += 3;\n\n\t\t\t\tlineArray[ offset_line ]     = vertexIndex;\n\t\t\t\tlineArray[ offset_line + 1 ] = vertexIndex + 1;\n\n\t\t\t\tlineArray[ offset_line + 2 ] = vertexIndex;\n\t\t\t\tlineArray[ offset_line + 3 ] = vertexIndex + 2;\n\n\t\t\t\tlineArray[ offset_line + 4 ] = vertexIndex + 1;\n\t\t\t\tlineArray[ offset_line + 5 ] = vertexIndex + 2;\n\n\t\t\t\toffset_line += 6;\n\n\t\t\t\tvertexIndex += 3;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, faceArray, hint );\n\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, lineArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( ! customAttribute.__original.needsUpdate ) continue;\n\n\t\t\t\toffset_custom = 0;\n\t\t\t\toffset_customSrc = 0;\n\n\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\toffset_custom += 3;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = value;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = value;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = value;\n\n\t\t\t\t\t\t\toffset_custom += 3;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\n\n\t\t\t\t\t\t\toffset_custom += 6;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\n\n\t\t\t\t\t\t\toffset_custom += 6;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\tvar pp;\n\n\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\tpp = [ 'r', 'g', 'b' ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpp = [ 'x', 'y', 'z' ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value[ 0 ];\n\t\t\t\t\t\t\tv2 = value[ 1 ];\n\t\t\t\t\t\t\tv3 = value[ 2 ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value[ 0 ];\n\t\t\t\t\t\t\tv2 = value[ 1 ];\n\t\t\t\t\t\t\tv3 = value[ 2 ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dispose ) {\n\n\t\t\tdelete geometryGroup.__inittedArrays;\n\t\t\tdelete geometryGroup.__colorArray;\n\t\t\tdelete geometryGroup.__normalArray;\n\t\t\tdelete geometryGroup.__tangentArray;\n\t\t\tdelete geometryGroup.__uvArray;\n\t\t\tdelete geometryGroup.__uv2Array;\n\t\t\tdelete geometryGroup.__faceArray;\n\t\t\tdelete geometryGroup.__vertexArray;\n\t\t\tdelete geometryGroup.__lineArray;\n\t\t\tdelete geometryGroup.__skinIndexArray;\n\t\t\tdelete geometryGroup.__skinWeightArray;\n\n\t\t}\n\n\t};\n\n\t// Buffer rendering\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tinitAttributes();\n\n\t\tif ( object.hasPositions && ! object.__webglVertexBuffer ) object.__webglVertexBuffer = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! object.__webglNormalBuffer ) object.__webglNormalBuffer = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! object.__webglUvBuffer ) object.__webglUvBuffer = _gl.createBuffer();\n\t\tif ( object.hasColors && ! object.__webglColorBuffer ) object.__webglColorBuffer = _gl.createBuffer();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.position );\n\t\t\t_gl.vertexAttribPointer( program.attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglNormalBuffer );\n\n\t\t\tif ( material.shading === THREE.FlatShading ) {\n\n\t\t\t\tvar nx, ny, nz,\n\t\t\t\t\tnax, nbx, ncx, nay, nby, ncy, naz, nbz, ncz,\n\t\t\t\t\tnormalArray,\n\t\t\t\t\ti, il = object.count * 3;\n\n\t\t\t\tfor ( i = 0; i < il; i += 9 ) {\n\n\t\t\t\t\tnormalArray = object.normalArray;\n\n\t\t\t\t\tnax  = normalArray[ i ];\n\t\t\t\t\tnay  = normalArray[ i + 1 ];\n\t\t\t\t\tnaz  = normalArray[ i + 2 ];\n\n\t\t\t\t\tnbx  = normalArray[ i + 3 ];\n\t\t\t\t\tnby  = normalArray[ i + 4 ];\n\t\t\t\t\tnbz  = normalArray[ i + 5 ];\n\n\t\t\t\t\tncx  = normalArray[ i + 6 ];\n\t\t\t\t\tncy  = normalArray[ i + 7 ];\n\t\t\t\t\tncz  = normalArray[ i + 8 ];\n\n\t\t\t\t\tnx = ( nax + nbx + ncx ) / 3;\n\t\t\t\t\tny = ( nay + nby + ncy ) / 3;\n\t\t\t\t\tnz = ( naz + nbz + ncz ) / 3;\n\n\t\t\t\t\tnormalArray[ i ]   = nx;\n\t\t\t\t\tnormalArray[ i + 1 ] = ny;\n\t\t\t\t\tnormalArray[ i + 2 ] = nz;\n\n\t\t\t\t\tnormalArray[ i + 3 ] = nx;\n\t\t\t\t\tnormalArray[ i + 4 ] = ny;\n\t\t\t\t\tnormalArray[ i + 5 ] = nz;\n\n\t\t\t\t\tnormalArray[ i + 6 ] = nx;\n\t\t\t\t\tnormalArray[ i + 7 ] = ny;\n\t\t\t\t\tnormalArray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.normal );\n\t\t\t_gl.vertexAttribPointer( program.attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglUvBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.uv );\n\t\t\t_gl.vertexAttribPointer( program.attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.color );\n\t\t\t_gl.vertexAttribPointer( program.attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.attributes;\n\t\tvar programAttributesKeys = program.attributesKeys;\n\n\t\tfor ( var i = 0, l = programAttributesKeys.length; i < l; i ++ ) {\n\n\t\t\tvar key = programAttributesKeys[ i ];\n\t\t\tvar programAttribute = programAttributes[ key ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ key ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryAttribute.buffer );\n\n\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tif ( material.defaultAttributeValues[ key ].length === 2 ) {\n\n\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, material.defaultAttributeValues[ key ] );\n\n\t\t\t\t\t} else if ( material.defaultAttributeValues[ key ].length === 3 ) {\n\n\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, material.defaultAttributeValues[ key ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tthis.renderBufferDirect = function ( camera, lights, fog, material, geometry, object ) {\n\n\t\tif ( material.visible === false ) return;\n\n\t\tupdateObject( object );\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\tvar updateBuffers = false,\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\n\t\t\tgeometryProgram = 'direct_' + geometry.id + '_' + program.id + '_' + wireframeBit;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tinitAttributes();\n\n\t\t}\n\n\t\t// render mesh\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tvar mode = material.wireframe === true ? _gl.LINES : _gl.TRIANGLES;\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed triangles\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 );\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\n\t\t\t\t\t_this.info.render.faces += index.array.length / 3;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tupdateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed triangles\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\n\t\t\t\t\t\t_this.info.render.faces += offsets[ i ].count / 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed triangles\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes[ 'position' ];\n\n\t\t\t\t// render non-indexed triangles\n\n\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t_this.info.render.vertices += position.array.length / 3;\n\t\t\t\t_this.info.render.faces += position.array.length / 9;\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t// render particles\n\n\t\t\tvar mode = _gl.POINTS;\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed points\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0);\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.points += index.array.length;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed points\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.points += offsets[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed points\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.points += position.array.length / 3;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t_gl.drawArrays( mode, offsets[ i ].index, offsets[ i ].count );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.points += offsets[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\n\n\t\t\tsetLineWidth( material.linewidth );\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed lines\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 ); // 2 bytes per Uint16Array\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed lines\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size ); // 2 bytes per Uint16Array\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed lines\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += position.array.length / 3;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t_gl.drawArrays( mode, offsets[ i ].index, offsets[ i ].count );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.renderBuffer = function ( camera, lights, fog, material, geometryGroup, object ) {\n\n\t\tif ( material.visible === false ) return;\n\n\t\tupdateObject( object );\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\tvar attributes = program.attributes;\n\n\t\tvar updateBuffers = false,\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\n\t\t\tgeometryProgram = geometryGroup.id + '_' + program.id + '_' + wireframeBit;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tinitAttributes();\n\n\t\t}\n\n\t\t// vertices\n\n\t\tif ( ! material.morphTargets && attributes.position >= 0 ) {\n\n\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\t\tenableAttribute( attributes.position );\n\t\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( object.morphTargetBase ) {\n\n\t\t\t\tsetupMorphTargets( material, geometryGroup, object );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif ( updateBuffers ) {\n\n\t\t\t// custom attributes\n\n\t\t\t// Use the per-geometryGroup custom attribute arrays which are setup in initMeshBuffers\n\n\t\t\tif ( geometryGroup.__webglCustomAttributesList ) {\n\n\t\t\t\tfor ( var i = 0, il = geometryGroup.__webglCustomAttributesList.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar attribute = geometryGroup.__webglCustomAttributesList[ i ];\n\n\t\t\t\t\tif ( attributes[ attribute.buffer.belongsToAttribute ] >= 0 ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, attribute.buffer );\n\t\t\t\t\t\tenableAttribute( attributes[ attribute.buffer.belongsToAttribute ] );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ attribute.buffer.belongsToAttribute ], attribute.size, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// colors\n\n\t\t\tif ( attributes.color >= 0 ) {\n\n\t\t\t\tif ( object.geometry.colors.length > 0 || object.geometry.faces.length > 0 ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\n\t\t\t\t\tenableAttribute( attributes.color );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib3fv( attributes.color, material.defaultAttributeValues.color );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( attributes.normal >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\n\t\t\t\tenableAttribute( attributes.normal );\n\t\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// tangents\n\n\t\t\tif ( attributes.tangent >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\n\t\t\t\tenableAttribute( attributes.tangent );\n\t\t\t\t_gl.vertexAttribPointer( attributes.tangent, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( attributes.uv >= 0 ) {\n\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 0 ] ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\n\t\t\t\t\tenableAttribute( attributes.uv );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv, material.defaultAttributeValues.uv );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( attributes.uv2 >= 0 ) {\n\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 1 ] ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\n\t\t\t\t\tenableAttribute( attributes.uv2 );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv2, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv2, material.defaultAttributeValues.uv2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.skinning &&\n\t\t\t\t attributes.skinIndex >= 0 && attributes.skinWeight >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\n\t\t\t\tenableAttribute( attributes.skinIndex );\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinIndex, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\n\t\t\t\tenableAttribute( attributes.skinWeight );\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinWeight, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// line distances\n\n\t\t\tif ( attributes.lineDistance >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglLineDistanceBuffer );\n\t\t\t\tenableAttribute( attributes.lineDistance );\n\t\t\t\t_gl.vertexAttribPointer( attributes.lineDistance, 1, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t\t// render mesh\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tvar type = geometryGroup.__typeArray === Uint32Array ? _gl.UNSIGNED_INT : _gl.UNSIGNED_SHORT;\n\n\t\t\t// wireframe\n\n\t\t\tif ( material.wireframe ) {\n\n\t\t\t\tsetLineWidth( material.wireframeLinewidth );\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\n\t\t\t\t_gl.drawElements( _gl.LINES, geometryGroup.__webglLineCount, type, 0 );\n\n\t\t\t// triangles\n\n\t\t\t} else {\n\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\n\t\t\t\t_gl.drawElements( _gl.TRIANGLES, geometryGroup.__webglFaceCount, type, 0 );\n\n\t\t\t}\n\n\t\t\t_this.info.render.calls ++;\n\t\t\t_this.info.render.vertices += geometryGroup.__webglFaceCount;\n\t\t\t_this.info.render.faces += geometryGroup.__webglFaceCount / 3;\n\n\t\t// render lines\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\n\n\t\t\tsetLineWidth( material.linewidth );\n\n\t\t\t_gl.drawArrays( mode, 0, geometryGroup.__webglLineCount );\n\n\t\t\t_this.info.render.calls ++;\n\n\t\t// render particles\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t_gl.drawArrays( _gl.POINTS, 0, geometryGroup.__webglParticleCount );\n\n\t\t\t_this.info.render.calls ++;\n\t\t\t_this.info.render.points += geometryGroup.__webglParticleCount;\n\n\t\t}\n\n\t};\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = _newAttributes.length; i < l; i ++ ) {\n\n\t\t\t_newAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\t_newAttributes[ attribute ] = 1;\n\n\t\tif ( _enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\t_gl.enableVertexAttribArray( attribute );\n\t\t\t_enabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = _enabledAttributes.length; i < l; i ++ ) {\n\n\t\t\tif ( _enabledAttributes[ i ] !== _newAttributes[ i ] ) {\n\n\t\t\t\t_gl.disableVertexAttribArray( i );\n\t\t\t\t_enabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupMorphTargets ( material, geometryGroup, object ) {\n\n\t\t// set base\n\n\t\tvar attributes = material.program.attributes;\n\n\t\tif ( object.morphTargetBase !== - 1 && attributes.position >= 0 ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ object.morphTargetBase ] );\n\t\t\tenableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t} else if ( attributes.position >= 0 ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\tenableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.morphTargetForcedOrder.length ) {\n\n\t\t\t// set forced order\n\n\t\t\tvar m = 0;\n\t\t\tvar order = object.morphTargetForcedOrder;\n\t\t\tvar influences = object.morphTargetInfluences;\n\n\t\t\tvar attribute;\n\n\t\t\twhile ( m < material.numSupportedMorphTargets && m < order.length ) {\n\n\t\t\t\tattribute = attributes[ 'morphTarget' + m ];\n\n\t\t\t\tif ( attribute >= 0 ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ order[ m ] ] );\n\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tattribute = attributes[ 'morphNormal' + m ];\n\n\t\t\t\tif ( attribute >= 0 && material.morphNormals ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ order[ m ] ] );\n\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ order[ m ] ];\n\n\t\t\t\tm ++;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// find the most influencing\n\n\t\t\tvar activeInfluenceIndices = [];\n\t\t\tvar influences = object.morphTargetInfluences;\n\n\t\t\tfor ( var i = 0, il = influences.length; i < il; i ++ ) {\n\n\t\t\t\tvar influence = influences[ i ];\n\n\t\t\t\tactiveInfluenceIndices.push( [ influence, i ] );\n\n\t\t\t}\n\n\t\t\tif ( activeInfluenceIndices.length > material.numSupportedMorphTargets ) {\n\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\n\t\t\t\tactiveInfluenceIndices.length = material.numSupportedMorphTargets;\n\n\t\t\t} else if ( activeInfluenceIndices.length > material.numSupportedMorphNormals ) {\n\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\n\n\t\t\t} else if ( activeInfluenceIndices.length === 0 ) {\n\n\t\t\t\tactiveInfluenceIndices.push( [ 0, 0 ] );\n\n\t\t\t}\n\n\t\t\tvar attribute;\n\n\t\t\tfor ( var m = 0, ml = material.numSupportedMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tif ( activeInfluenceIndices[ m ] ) {\n\n\t\t\t\t\tvar influenceIndex = activeInfluenceIndices[ m ][ 1 ];\n\n\t\t\t\t\tattribute = attributes[ 'morphTarget' + m ];\n\n\t\t\t\t\tif ( attribute >= 0 ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ influenceIndex ] );\n\t\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tattribute = attributes[ 'morphNormal' + m ];\n\n\t\t\t\t\tif ( attribute >= 0 && material.morphNormals ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ influenceIndex ] );\n\t\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ influenceIndex ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\t/*\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphTarget\" + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphNormal\" + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// load updated influences uniform\n\n\t\tif ( material.program.uniforms.morphTargetInfluences !== null ) {\n\n\t\t\t_gl.uniform1fv( material.program.uniforms.morphTargetInfluences, object.__webglMorphTargetInfluences );\n\n\t\t}\n\n\t}\n\n\t// Sorting\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.material.id !== b.material.id ) {\n\n\t\t\treturn a.material.id - b.material.id;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn a.z - b.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction reversePainterSortStable ( a, b ) {\n\n\t\tif ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction numericalSort ( a, b ) {\n\n\t\treturn b[ 0 ] - a[ 0 ];\n\n\t}\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( camera instanceof THREE.Camera === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar fog = scene.fog;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\t\t_lightsNeedUpdate = true;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === undefined ) camera.updateMatrixWorld();\n\n\t\t// update Skeleton objects\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\tobject.skeleton.update();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\tlights.length = 0;\n\t\topaqueObjects.length = 0;\n\t\ttransparentObjects.length = 0;\n\n\t\tsprites.length = 0;\n\t\tlensFlares.length = 0;\n\n\t\tprojectObject( scene );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\topaqueObjects.sort( painterSortStable );\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\n\n\t\t}\n\n\t\t// custom render plugins (pre pass)\n\n\t\tshadowMapPlugin.render( scene, camera );\n\n\t\t//\n\n\t\t_this.info.render.calls = 0;\n\t\t_this.info.render.vertices = 0;\n\t\t_this.info.render.faces = 0;\n\t\t_this.info.render.points = 0;\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\tif ( this.autoClear || forceClear ) {\n\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\n\n\t\t}\n\n\t\t// set matrices for immediate objects\n\n\t\tfor ( var i = 0, il = _webglObjectsImmediate.length; i < il; i ++ ) {\n\n\t\t\tvar webglObject = _webglObjectsImmediate[ i ];\n\t\t\tvar object = webglObject.object;\n\n\t\t\tif ( object.visible ) {\n\n\t\t\t\tsetupMatrices( object, camera );\n\n\t\t\t\tunrollImmediateBufferMaterial( webglObject );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar material = scene.overrideMaterial;\n\n\t\t\tthis.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\tthis.setDepthTest( material.depthTest );\n\t\t\tthis.setDepthWrite( material.depthWrite );\n\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, true, material );\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, '', camera, lights, fog, false, material );\n\n\t\t} else {\n\n\t\t\tvar material = null;\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tthis.setBlending( THREE.NoBlending );\n\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, false, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'opaque', camera, lights, fog, false, material );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'transparent', camera, lights, fog, true, material );\n\n\t\t}\n\n\t\t// custom render plugins (post pass)\n\n\t\tspritePlugin.render( scene, camera );\n\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\n\n\t\t\tupdateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tthis.setDepthTest( true );\n\t\tthis.setDepthWrite( true );\n\n\t\t// _gl.finish();\n\n\t};\n\n\tfunction projectObject( object ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object instanceof THREE.Scene || object instanceof THREE.Group ) {\n\n\t\t\t// skip\n\n\t\t} else {\n\n\t\t\tinitObject( object );\n\n\t\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t\tlights.push( object );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tsprites.push( object );\n\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\n\n\t\t\t\tlensFlares.push( object );\n\n\t\t\t} else {\n\n\t\t\t\tvar webglObjects = _webglObjects[ object.id ];\n\n\t\t\t\tif ( webglObjects && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar webglObject = webglObjects[i];\n\n\t\t\t\t\t\tunrollBufferMaterial( webglObject );\n\n\t\t\t\t\t\twebglObject.render = true;\n\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\n\n\t\t\t\t\t\t\twebglObject.z = _vector3.z;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( object.children[ i ] );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, camera, lights, fog, useBlending, overrideMaterial ) {\n\n\t\tvar material;\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar webglObject = renderList[ i ];\n\n\t\t\tvar object = webglObject.object;\n\t\t\tvar buffer = webglObject.buffer;\n\n\t\t\tsetupMatrices( object, camera );\n\n\t\t\tif ( overrideMaterial ) {\n\n\t\t\t\tmaterial = overrideMaterial;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = webglObject.material;\n\n\t\t\t\tif ( ! material ) continue;\n\n\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\n\t\t\t\t_this.setDepthTest( material.depthTest );\n\t\t\t\t_this.setDepthWrite( material.depthWrite );\n\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\t}\n\n\t\t\t_this.setMaterialFaces( material );\n\n\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t_this.renderBufferDirect( camera, lights, fog, material, buffer, object );\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBuffer( camera, lights, fog, material, buffer, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObjectsImmediate ( renderList, materialType, camera, lights, fog, useBlending, overrideMaterial ) {\n\n\t\tvar material;\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar webglObject = renderList[ i ];\n\t\t\tvar object = webglObject.object;\n\n\t\t\tif ( object.visible ) {\n\n\t\t\t\tif ( overrideMaterial ) {\n\n\t\t\t\t\tmaterial = overrideMaterial;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterial = webglObject[ materialType ];\n\n\t\t\t\t\tif ( ! material ) continue;\n\n\t\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\n\t\t\t\t\t_this.setDepthTest( material.depthTest );\n\t\t\t\t\t_this.setDepthWrite( material.depthWrite );\n\t\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\t\t}\n\n\t\t\t\t_this.renderImmediateObject( camera, lights, fog, material, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.renderImmediateObject = function ( camera, lights, fog, material, object ) {\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\t_currentGeometryProgram = '';\n\n\t\t_this.setMaterialFaces( material );\n\n\t\tif ( object.immediateRenderCallback ) {\n\n\t\t\tobject.immediateRenderCallback( program, _gl, _frustum );\n\n\t\t} else {\n\n\t\t\tobject.render( function ( object ) { _this.renderBufferImmediate( object, program, material ); } );\n\n\t\t}\n\n\t};\n\n\tfunction unrollImmediateBufferMaterial ( globject ) {\n\n\t\tvar object = globject.object,\n\t\t\tmaterial = object.material;\n\n\t\tif ( material.transparent ) {\n\n\t\t\tglobject.transparent = material;\n\t\t\tglobject.opaque = null;\n\n\t\t} else {\n\n\t\t\tglobject.opaque = material;\n\t\t\tglobject.transparent = null;\n\n\t\t}\n\n\t}\n\n\tfunction unrollBufferMaterial ( globject ) {\n\n\t\tvar object = globject.object;\n\t\tvar buffer = globject.buffer;\n\n\t\tvar geometry = object.geometry;\n\t\tvar material = object.material;\n\n\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\n\n\t\t\tvar materialIndex = geometry instanceof THREE.BufferGeometry ? 0 : buffer.materialIndex;\n\n\t\t\tmaterial = material.materials[ materialIndex ];\n\n\t\t\tglobject.material = material;\n\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\ttransparentObjects.push( globject );\n\n\t\t\t} else {\n\n\t\t\t\topaqueObjects.push( globject );\n\n\t\t\t}\n\n\t\t} else if ( material ) {\n\n\t\t\tglobject.material = material;\n\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\ttransparentObjects.push( globject );\n\n\t\t\t} else {\n\n\t\t\t\topaqueObjects.push( globject );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initObject( object ) {\n\n\t\tif ( object.__webglInit === undefined ) {\n\n\t\t\tobject.__webglInit = true;\n\t\t\tobject._modelViewMatrix = new THREE.Matrix4();\n\t\t\tobject._normalMatrix = new THREE.Matrix3();\n\n\t\t\tobject.addEventListener( 'removed', onObjectRemoved );\n\n\t\t}\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry === undefined ) {\n\n\t\t\t// ImmediateRenderObject\n\n\t\t} else if ( geometry.__webglInit === undefined ) {\n\n\t\t\tgeometry.__webglInit = true;\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t_this.info.memory.geometries ++;\n\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tinitGeometryGroups( object, geometry );\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\n\n\t\t\t\t\tcreateLineBuffers( geometry );\n\t\t\t\t\tinitLineBuffers( geometry, object );\n\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\n\t\t\t\t\tgeometry.lineDistancesNeedUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\n\n\t\t\t\t\tcreateParticleBuffers( geometry );\n\t\t\t\t\tinitParticleBuffers( geometry, object );\n\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.__webglActive === undefined) {\n\n\t\t\tobject.__webglActive = true;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\taddBuffer( _webglObjects, geometry, object );\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\t\t\tfor ( var i = 0,l = geometryGroupsList.length; i < l; i ++ ) {\n\n\t\t\t\t\t\taddBuffer( _webglObjects, geometryGroupsList[ i ], object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line || object instanceof THREE.PointCloud ) {\n\n\t\t\t\taddBuffer( _webglObjects, geometry, object );\n\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\n\n\t\t\t\taddBufferImmediate( _webglObjectsImmediate, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Geometry splitting\n\n\tvar geometryGroups = {};\n\tvar geometryGroupCounter = 0;\n\n\tfunction makeGroups( geometry, usesFaceMaterial ) {\n\n\t\tvar maxVerticesInGroup = extensions.get( 'OES_element_index_uint' ) ? 4294967296 : 65535;\n\n\t\tvar groupHash, hash_map = {};\n\n\t\tvar numMorphTargets = geometry.morphTargets.length;\n\t\tvar numMorphNormals = geometry.morphNormals.length;\n\n\t\tvar group;\n\t\tvar groups = {};\n\t\tvar groupsList = [];\n\n\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = geometry.faces[ f ];\n\t\t\tvar materialIndex = usesFaceMaterial ? face.materialIndex : 0;\n\n\t\t\tif ( ! ( materialIndex in hash_map ) ) {\n\n\t\t\t\thash_map[ materialIndex ] = { hash: materialIndex, counter: 0 };\n\n\t\t\t}\n\n\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\n\n\t\t\tif ( ! ( groupHash in groups ) ) {\n\n\t\t\t\tgroup = {\n\t\t\t\t\tid: geometryGroupCounter ++,\n\t\t\t\t\tfaces3: [],\n\t\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\t\tvertices: 0,\n\t\t\t\t\tnumMorphTargets: numMorphTargets,\n\t\t\t\t\tnumMorphNormals: numMorphNormals\n\t\t\t\t};\n\n\t\t\t\tgroups[ groupHash ] = group;\n\t\t\t\tgroupsList.push( group );\n\n\t\t\t}\n\n\t\t\tif ( groups[ groupHash ].vertices + 3 > maxVerticesInGroup ) {\n\n\t\t\t\thash_map[ materialIndex ].counter += 1;\n\t\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\n\n\t\t\t\tif ( ! ( groupHash in groups ) ) {\n\n\t\t\t\t\tgroup = {\n\t\t\t\t\t\tid: geometryGroupCounter ++,\n\t\t\t\t\t\tfaces3: [],\n\t\t\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\t\t\tvertices: 0,\n\t\t\t\t\t\tnumMorphTargets: numMorphTargets,\n\t\t\t\t\t\tnumMorphNormals: numMorphNormals\n\t\t\t\t\t};\n\n\t\t\t\t\tgroups[ groupHash ] = group;\n\t\t\t\t\tgroupsList.push( group );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgroups[ groupHash ].faces3.push( f );\n\t\t\tgroups[ groupHash ].vertices += 3;\n\n\t\t}\n\n\t\treturn groupsList;\n\n\t}\n\n\tfunction initGeometryGroups( object, geometry ) {\n\n\t\tvar material = object.material, addBuffers = false;\n\n\t\tif ( geometryGroups[ geometry.id ] === undefined || geometry.groupsNeedUpdate === true ) {\n\n\t\t\tdelete _webglObjects[ object.id ];\n\n\t\t\tgeometryGroups[ geometry.id ] = makeGroups( geometry, material instanceof THREE.MeshFaceMaterial );\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t// create separate VBOs per geometry chunk\n\n\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\n\n\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\n\t\t\t// initialise VBO on the first access\n\n\t\t\tif ( geometryGroup.__webglVertexBuffer === undefined ) {\n\n\t\t\t\tcreateMeshBuffers( geometryGroup );\n\t\t\t\tinitMeshBuffers( geometryGroup, object );\n\n\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\tgeometry.morphTargetsNeedUpdate = true;\n\t\t\t\tgeometry.elementsNeedUpdate = true;\n\t\t\t\tgeometry.uvsNeedUpdate = true;\n\t\t\t\tgeometry.normalsNeedUpdate = true;\n\t\t\t\tgeometry.tangentsNeedUpdate = true;\n\t\t\t\tgeometry.colorsNeedUpdate = true;\n\n\t\t\t\taddBuffers = true;\n\n\t\t\t} else {\n\n\t\t\t\taddBuffers = false;\n\n\t\t\t}\n\n\t\t\tif ( addBuffers || object.__webglActive === undefined ) {\n\n\t\t\t\taddBuffer( _webglObjects, geometryGroup, object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tobject.__webglActive = true;\n\n\t}\n\n\tfunction addBuffer( objlist, buffer, object ) {\n\n\t\tvar id = object.id;\n\t\tobjlist[id] = objlist[id] || [];\n\t\tobjlist[id].push(\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tobject: object,\n\t\t\t\tmaterial: null,\n\t\t\t\tz: 0\n\t\t\t}\n\t\t);\n\n\t};\n\n\tfunction addBufferImmediate( objlist, object ) {\n\n\t\tobjlist.push(\n\t\t\t{\n\t\t\t\tid: null,\n\t\t\t\tobject: object,\n\t\t\t\topaque: null,\n\t\t\t\ttransparent: null,\n\t\t\t\tz: 0\n\t\t\t}\n\t\t);\n\n\t};\n\n\t// Objects updates\n\n\tfunction updateObject( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar attributesKeys = geometry.attributesKeys;\n\n\t\t\tfor ( var i = 0, l = attributesKeys.length; i < l; i ++ ) {\n\n\t\t\t\tvar key = attributesKeys[ i ];\n\t\t\t\tvar attribute = attributes[ key ];\n\n\t\t\t\tif ( attribute.buffer === undefined ) {\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( attribute.needsUpdate === true ) {\n\n\t\t\t\t\tvar bufferType = ( key === 'index' ) ? _gl.ELEMENT_ARRAY_BUFFER : _gl.ARRAY_BUFFER;\n\n\t\t\t\t\t_gl.bindBuffer( bufferType, attribute.buffer );\n\t\t\t\t\t_gl.bufferData( bufferType, attribute.array, _gl.STATIC_DRAW );\n\n\t\t\t\t\tattribute.needsUpdate = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t// check all geometry groups\n\n\t\t\tif ( geometry.groupsNeedUpdate === true ) {\n\n\t\t\t\tinitGeometryGroups( object, geometry );\n\n\t\t\t}\n\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\t\t\t\tvar material = getBufferMaterial( object, geometryGroup );\n\n\t\t\t\tif ( geometry.groupsNeedUpdate === true ) {\n\n\t\t\t\t\tinitMeshBuffers( geometryGroup, object );\n\n\t\t\t\t}\n\n\t\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\t\tif ( geometry.verticesNeedUpdate || geometry.morphTargetsNeedUpdate || geometry.elementsNeedUpdate ||\n\t\t\t\t\t geometry.uvsNeedUpdate || geometry.normalsNeedUpdate ||\n\t\t\t\t\t geometry.colorsNeedUpdate || geometry.tangentsNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\t\tsetMeshBuffers( geometryGroup, object, _gl.DYNAMIC_DRAW, ! geometry.dynamic, material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.morphTargetsNeedUpdate = false;\n\t\t\tgeometry.elementsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.tangentsNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar material = getBufferMaterial( object, geometry );\n\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || geometry.lineDistancesNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\tsetLineBuffers( geometry, _gl.DYNAMIC_DRAW );\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\tvar material = getBufferMaterial( object, geometry );\n\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\tsetParticleBuffers( geometry, _gl.DYNAMIC_DRAW, object );\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t}\n\n\t}\n\n\t// Objects updates - custom attributes check\n\n\tfunction areCustomAttributesDirty( material ) {\n\n\t\tfor ( var name in material.attributes ) {\n\n\t\t\tif ( material.attributes[ name ].needsUpdate ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction clearCustomAttributes( material ) {\n\n\t\tfor ( var name in material.attributes ) {\n\n\t\t\tmaterial.attributes[ name ].needsUpdate = false;\n\n\t\t}\n\n\t}\n\n\t// Objects removal\n\n\tfunction removeObject( object ) {\n\n\t\tif ( object instanceof THREE.Mesh  ||\n\t\t\t object instanceof THREE.PointCloud ||\n\t\t\t object instanceof THREE.Line ) {\n\n\t\t\tdelete _webglObjects[ object.id ];\n\n\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\n\n\t\t\tremoveInstances( _webglObjectsImmediate, object );\n\n\t\t}\n\n\t\tdelete object.__webglInit;\n\t\tdelete object._modelViewMatrix;\n\t\tdelete object._normalMatrix;\n\n\t\tdelete object.__webglActive;\n\n\t}\n\n\tfunction removeInstances( objlist, object ) {\n\n\t\tfor ( var o = objlist.length - 1; o >= 0; o -- ) {\n\n\t\t\tif ( objlist[ o ].object === object ) {\n\n\t\t\t\tobjlist.splice( o, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Materials\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointCloudMaterial: 'particle_basic'\n\t};\n\n\tfunction initMaterial( material, lights, fog, object ) {\n\n\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\tif ( shaderID ) {\n\n\t\t\tvar shader = THREE.ShaderLib[ shaderID ];\n\n\t\t\tmaterial.__webglShader = {\n\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tmaterial.__webglShader = {\n\t\t\t\tuniforms: material.uniforms,\n\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t}\n\n\t\t}\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxLightCount = allocateLights( lights );\n\t\tvar maxShadows = allocateShadows( lights );\n\t\tvar maxBones = allocateBones( object );\n\n\t\tvar parameters = {\n\n\t\t\tprecision: _precision,\n\t\t\tsupportsVertexTextures: _supportsVertexTextures,\n\n\t\t\tmap: !! material.map,\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: _logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: _this.maxMorphTargets,\n\t\t\tmaxMorphNormals: _this.maxMorphNormals,\n\n\t\t\tmaxDirLights: maxLightCount.directional,\n\t\t\tmaxPointLights: maxLightCount.point,\n\t\t\tmaxSpotLights: maxLightCount.spot,\n\t\t\tmaxHemiLights: maxLightCount.hemi,\n\n\t\t\tmaxShadows: maxShadows,\n\t\t\tshadowMapEnabled: _this.shadowMapEnabled && object.receiveShadow && maxShadows > 0,\n\t\t\tshadowMapType: _this.shadowMapType,\n\t\t\tshadowMapDebug: _this.shadowMapDebug,\n\t\t\tshadowMapCascade: _this.shadowMapCascade,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tmetal: material.metal,\n\t\t\twrapAround: material.wrapAround,\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\n\t\t\tflipSided: material.side === THREE.BackSide\n\n\t\t};\n\n\t\t// Generate code\n\n\t\tvar chunks = [];\n\n\t\tif ( shaderID ) {\n\n\t\t\tchunks.push( shaderID );\n\n\t\t} else {\n\n\t\t\tchunks.push( material.fragmentShader );\n\t\t\tchunks.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tchunks.push( name );\n\t\t\t\tchunks.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var name in parameters ) {\n\n\t\t\tchunks.push( name );\n\t\t\tchunks.push( parameters[ name ] );\n\n\t\t}\n\n\t\tvar code = chunks.join();\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\n\t\tfor ( var p = 0, pl = _programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = _programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\tprogram.usedTimes ++;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new THREE.WebGLProgram( _this, code, material, parameters );\n\t\t\t_programs.push( program );\n\n\t\t\t_this.info.memory.programs = _programs.length;\n\n\t\t}\n\n\t\tmaterial.program = program;\n\n\t\tvar attributes = program.attributes;\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tvar id, base = 'morphTarget';\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tid = base + i;\n\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tvar id, base = 'morphNormal';\n\n\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tid = base + i;\n\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tmaterial.uniformsList = [];\n\n\t\tfor ( var u in material.__webglShader.uniforms ) {\n\n\t\t\tvar location = material.program.uniforms[ u ];\n\n\t\t\tif ( location ) {\n\t\t\t\tmaterial.uniformsList.push( [ material.__webglShader.uniforms[ u ], location ] );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setProgram( camera, lights, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tif ( material.program ) deallocateMaterial( material );\n\n\t\t\tinitMaterial( material, lights, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tif ( ! object.__webglMorphTargetInfluences ) {\n\n\t\t\t\tobject.__webglMorphTargetInfluences = new Float32Array( _this.maxMorphTargets );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = material.program,\n\t\t\tp_uniforms = program.uniforms,\n\t\t\tm_uniforms = material.__webglShader.uniforms;\n\n\t\tif ( program.id !== _currentProgram ) {\n\n\t\t\t_gl.useProgram( program.program );\n\t\t\t_currentProgram = program.id;\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\tif ( _currentMaterialId === -1 ) refreshLights = true;\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\t\tif ( _logarithmicDepthBuffer ) {\n\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\n\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material.envMap ) {\n\n\t\t\t\tif ( p_uniforms.cameraPosition !== null ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material.skinning ) {\n\n\t\t\t\tif ( p_uniforms.viewMatrix !== null ) {\n\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== null ) {\n\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\n\n\t\t\t}\n\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== null ) {\n\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\n\n\t\t\t}\n\n\t\t\tif ( _supportsBoneTextures && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\t\tif ( p_uniforms.boneTexture !== null ) {\n\n\t\t\t\t\tvar textureUnit = getTextureUnit();\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\n\n\t\t\t\t}\n\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== null ) {\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\n\n\t\t\t\t}\n\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== null ) {\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\n\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== null ) {\n\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material.lights ) {\n\n\t\t\t\tif ( _lightsNeedUpdate ) {\n\n\t\t\t\t\trefreshLights = true;\n\t\t\t\t\tsetupLights( lights );\n\t\t\t\t\t_lightsNeedUpdate = false;\n\t\t\t\t}\n\n\t\t\t\tif ( refreshLights ) {\n\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\n\t\t\t\t} else {\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// refresh single material specific uniforms\n\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.PointCloudMaterial ) {\n\n\t\t\t\trefreshUniformsParticle( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\t\tm_uniforms.mNear.value = camera.near;\n\t\t\t\tm_uniforms.mFar.value = camera.far;\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\n\n\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\n\n\t\t\t}\n\n\t\t\t// load common uniforms\n\n\t\t\tloadUniformsGeneric( material.uniformsList );\n\n\t\t}\n\n\t\tloadUniformsMatrices( p_uniforms, object );\n\n\t\tif ( p_uniforms.modelMatrix !== null ) {\n\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon ( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.diffuse.value.copyGammaToLinear( material.color );\n\n\t\t} else {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\n\t\t}\n\n\t\tuniforms.map.value = material.map;\n\t\tuniforms.lightMap.value = material.lightMap;\n\t\tuniforms.specularMap.value = material.specularMap;\n\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t//  1. color map\n\t\t//  2. specular map\n\t\t//  3. normal map\n\t\t//  4. bump map\n\t\t//  5. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tvar offset = uvScaleMap.offset;\n\t\t\tvar repeat = uvScaleMap.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t\tuniforms.envMap.value = material.envMap;\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\t//uniforms.reflectivity.value = material.reflectivity * material.reflectivity;\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\n\t\t} else {\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\n\t\t}\n\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t}\n\n\tfunction refreshUniformsLine ( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash ( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsParticle ( uniforms, material ) {\n\n\t\tuniforms.psColor.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size;\n\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\n\n\t\tuniforms.map.value = material.map;\n\n\t}\n\n\tfunction refreshUniformsFog ( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong ( uniforms, material ) {\n\n\t\tuniforms.shininess.value = material.shininess;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\n\t\t\tuniforms.specular.value.copyGammaToLinear( material.specular );\n\n\t\t} else {\n\n\t\t\tuniforms.ambient.value = material.ambient;\n\t\t\tuniforms.emissive.value = material.emissive;\n\t\t\tuniforms.specular.value = material.specular;\n\n\t\t}\n\n\t\tif ( material.wrapAround ) {\n\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert ( uniforms, material ) {\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\n\n\t\t} else {\n\n\t\t\tuniforms.ambient.value = material.ambient;\n\t\t\tuniforms.emissive.value = material.emissive;\n\n\t\t}\n\n\t\tif ( material.wrapAround ) {\n\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLights ( uniforms, lights ) {\n\n\t\tuniforms.ambientLightColor.value = lights.ambient;\n\n\t\tuniforms.directionalLightColor.value = lights.directional.colors;\n\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\n\n\t\tuniforms.pointLightColor.value = lights.point.colors;\n\t\tuniforms.pointLightPosition.value = lights.point.positions;\n\t\tuniforms.pointLightDistance.value = lights.point.distances;\n\n\t\tuniforms.spotLightColor.value = lights.spot.colors;\n\t\tuniforms.spotLightPosition.value = lights.spot.positions;\n\t\tuniforms.spotLightDistance.value = lights.spot.distances;\n\t\tuniforms.spotLightDirection.value = lights.spot.directions;\n\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\n\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\n\n\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\n\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\n\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, boolean ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = boolean;\n\n\t\tuniforms.directionalLightColor.needsUpdate = boolean;\n\t\tuniforms.directionalLightDirection.needsUpdate = boolean;\n\n\t\tuniforms.pointLightColor.needsUpdate = boolean;\n\t\tuniforms.pointLightPosition.needsUpdate = boolean;\n\t\tuniforms.pointLightDistance.needsUpdate = boolean;\n\n\t\tuniforms.spotLightColor.needsUpdate = boolean;\n\t\tuniforms.spotLightPosition.needsUpdate = boolean;\n\t\tuniforms.spotLightDistance.needsUpdate = boolean;\n\t\tuniforms.spotLightDirection.needsUpdate = boolean;\n\t\tuniforms.spotLightAngleCos.needsUpdate = boolean;\n\t\tuniforms.spotLightExponent.needsUpdate = boolean;\n\n\t\tuniforms.hemisphereLightSkyColor.needsUpdate = boolean;\n\t\tuniforms.hemisphereLightGroundColor.needsUpdate = boolean;\n\t\tuniforms.hemisphereLightDirection.needsUpdate = boolean;\n\n\t}\n\n\tfunction refreshUniformsShadow ( uniforms, lights ) {\n\n\t\tif ( uniforms.shadowMatrix ) {\n\n\t\t\tvar j = 0;\n\n\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\t\tvar light = lights[ i ];\n\n\t\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) ) {\n\n\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\n\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\n\n\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\n\n\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\n\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\n\n\t\t\t\t\tj ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Uniforms (load to GPU)\n\n\tfunction loadUniformsMatrices ( uniforms, object ) {\n\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object._modelViewMatrix.elements );\n\n\t\tif ( uniforms.normalMatrix ) {\n\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object._normalMatrix.elements );\n\n\t\t}\n\n\t}\n\n\tfunction getTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= _maxTextures ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + _maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction loadUniformsGeneric ( uniforms ) {\n\n\t\tvar texture, textureUnit, offset;\n\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\n\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\n\n\t\t\t// needsUpdate property is not added to all uniforms.\n\t\t\tif ( uniform.needsUpdate === false ) continue;\n\n\t\t\tvar type = uniform.type;\n\t\t\tvar value = uniform.value;\n\t\t\tvar location = uniforms[ j ][ 1 ];\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase '1i':\n\t\t\t\t\t_gl.uniform1i( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1f':\n\t\t\t\t\t_gl.uniform1f( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2f':\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3f':\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '4f':\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1iv':\n\t\t\t\t\t_gl.uniform1iv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3iv':\n\t\t\t\t\t_gl.uniform3iv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1fv':\n\t\t\t\t\t_gl.uniform1fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2fv':\n\t\t\t\t\t_gl.uniform2fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3fv':\n\t\t\t\t\t_gl.uniform3fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '4fv':\n\t\t\t\t\t_gl.uniform4fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Matrix3fv':\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Matrix4fv':\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\t//\n\n\t\t\t\tcase 'i':\n\n\t\t\t\t\t// single integer\n\t\t\t\t\t_gl.uniform1i( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'f':\n\n\t\t\t\t\t// single float\n\t\t\t\t\t_gl.uniform1f( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v2':\n\n\t\t\t\t\t// single THREE.Vector2\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v3':\n\n\t\t\t\t\t// single THREE.Vector3\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v4':\n\n\t\t\t\t\t// single THREE.Vector4\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'c':\n\n\t\t\t\t\t// single THREE.Color\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'iv1':\n\n\t\t\t\t\t// flat array of integers (JS or typed array)\n\t\t\t\t\t_gl.uniform1iv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'iv':\n\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\n\t\t\t\t\t_gl.uniform3iv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'fv1':\n\n\t\t\t\t\t// flat array of floats (JS or typed array)\n\t\t\t\t\t_gl.uniform1fv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'fv':\n\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\n\t\t\t\t\t_gl.uniform3fv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v2v':\n\n\t\t\t\t\t// array of THREE.Vector2\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 2;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v3v':\n\n\t\t\t\t\t// array of THREE.Vector3\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 3;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v4v':\n\n\t\t\t\t\t// array of THREE.Vector4\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 4;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\n\t\t\t\t\t\tuniform._array[ offset + 3 ] = value[ i ].w;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm3':\n\n\t\t\t\t\t// single THREE.Matrix3\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm3v':\n\n\t\t\t\t\t// array of THREE.Matrix3\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm4':\n\n\t\t\t\t\t// single THREE.Matrix4\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm4v':\n\n\t\t\t\t\t// array of THREE.Matrix4\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 't':\n\n\t\t\t\t\t// single THREE.Texture (2d or cube)\n\n\t\t\t\t\ttexture = value;\n\t\t\t\t\ttextureUnit = getTextureUnit();\n\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\n\n\t\t\t\t\tif ( ! texture ) continue;\n\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\n\t\t\t\t\t   ( texture.image instanceof Array && texture.image.length === 6 ) ) { // CompressedTexture can have Array in image :/\n\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\n\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tv':\n\n\t\t\t\t\t// array of THREE.Texture (2d)\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\n\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\ttexture = uniform.value[ i ];\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\n\n\t\t\t\t\t\tif ( ! texture ) continue;\n\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupMatrices ( object, camera ) {\n\n\t\tobject._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject._normalMatrix.getNormalMatrix( object._modelViewMatrix );\n\n\t}\n\n\t//\n\n\tfunction setColorGamma( array, offset, color, intensitySq ) {\n\n\t\tarray[ offset ]     = color.r * color.r * intensitySq;\n\t\tarray[ offset + 1 ] = color.g * color.g * intensitySq;\n\t\tarray[ offset + 2 ] = color.b * color.b * intensitySq;\n\n\t}\n\n\tfunction setColorLinear( array, offset, color, intensity ) {\n\n\t\tarray[ offset ]     = color.r * intensity;\n\t\tarray[ offset + 1 ] = color.g * intensity;\n\t\tarray[ offset + 2 ] = color.b * intensity;\n\n\t}\n\n\tfunction setupLights ( lights ) {\n\n\t\tvar l, ll, light, n,\n\t\tr = 0, g = 0, b = 0,\n\t\tcolor, skyColor, groundColor,\n\t\tintensity,  intensitySq,\n\t\tposition,\n\t\tdistance,\n\n\t\tzlights = _lights,\n\n\t\tdirColors = zlights.directional.colors,\n\t\tdirPositions = zlights.directional.positions,\n\n\t\tpointColors = zlights.point.colors,\n\t\tpointPositions = zlights.point.positions,\n\t\tpointDistances = zlights.point.distances,\n\n\t\tspotColors = zlights.spot.colors,\n\t\tspotPositions = zlights.spot.positions,\n\t\tspotDistances = zlights.spot.distances,\n\t\tspotDirections = zlights.spot.directions,\n\t\tspotAnglesCos = zlights.spot.anglesCos,\n\t\tspotExponents = zlights.spot.exponents,\n\n\t\themiSkyColors = zlights.hemi.skyColors,\n\t\themiGroundColors = zlights.hemi.groundColors,\n\t\themiPositions = zlights.hemi.positions,\n\n\t\tdirLength = 0,\n\t\tpointLength = 0,\n\t\tspotLength = 0,\n\t\themiLength = 0,\n\n\t\tdirCount = 0,\n\t\tpointCount = 0,\n\t\tspotCount = 0,\n\t\themiCount = 0,\n\n\t\tdirOffset = 0,\n\t\tpointOffset = 0,\n\t\tspotOffset = 0,\n\t\themiOffset = 0;\n\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tlight = lights[ l ];\n\n\t\t\tif ( light.onlyShadow ) continue;\n\n\t\t\tcolor = light.color;\n\t\t\tintensity = light.intensity;\n\t\t\tdistance = light.distance;\n\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tr += color.r * color.r;\n\t\t\t\t\tg += color.g * color.g;\n\t\t\t\t\tb += color.b * color.b;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tr += color.r;\n\t\t\t\t\tg += color.g;\n\t\t\t\t\tb += color.b;\n\n\t\t\t\t}\n\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tdirCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t_direction.sub( _vector3 );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\tdirOffset = dirLength * 3;\n\n\t\t\t\tdirPositions[ dirOffset ]     = _direction.x;\n\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\n\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( dirColors, dirOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\tdirLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\tpointCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tpointOffset = pointLength * 3;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( pointColors, pointOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tpointPositions[ pointOffset ]     = _vector3.x;\n\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\n\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\n\n\t\t\t\tpointDistances[ pointLength ] = distance;\n\n\t\t\t\tpointLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\n\n\t\t\t\tspotCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tspotOffset = spotLength * 3;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( spotColors, spotOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tspotPositions[ spotOffset ]     = _direction.x;\n\t\t\t\tspotPositions[ spotOffset + 1 ] = _direction.y;\n\t\t\t\tspotPositions[ spotOffset + 2 ] = _direction.z;\n\n\t\t\t\tspotDistances[ spotLength ] = distance;\n\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t_direction.sub( _vector3 );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\tspotDirections[ spotOffset ]     = _direction.x;\n\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\n\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\n\n\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\n\t\t\t\tspotExponents[ spotLength ] = light.exponent;\n\n\t\t\t\tspotLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\n\n\t\t\t\themiCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\themiOffset = hemiLength * 3;\n\n\t\t\t\themiPositions[ hemiOffset ]     = _direction.x;\n\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\n\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\n\n\t\t\t\tskyColor = light.color;\n\t\t\t\tgroundColor = light.groundColor;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tintensitySq = intensity * intensity;\n\n\t\t\t\t\tsetColorGamma( hemiSkyColors, hemiOffset, skyColor, intensitySq );\n\t\t\t\t\tsetColorGamma( hemiGroundColors, hemiOffset, groundColor, intensitySq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\n\t\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\n\n\t\t\t\t}\n\n\t\t\t\themiLength += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// null eventual remains from removed lights\n\t\t// (this is to avoid if in shader)\n\n\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\n\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\n\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\n\n\t\tzlights.directional.length = dirLength;\n\t\tzlights.point.length = pointLength;\n\t\tzlights.spot.length = spotLength;\n\t\tzlights.hemi.length = hemiLength;\n\n\t\tzlights.ambient[ 0 ] = r;\n\t\tzlights.ambient[ 1 ] = g;\n\t\tzlights.ambient[ 2 ] = b;\n\n\t}\n\n\t// GL state setting\n\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\tif ( cullFace === THREE.CullFaceNone ) {\n\n\t\t\t_gl.disable( _gl.CULL_FACE );\n\n\t\t} else {\n\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\n\n\t\t\t\t_gl.frontFace( _gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.frontFace( _gl.CCW );\n\n\t\t\t}\n\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\n\n\t\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\n\n\t\t\t\t_gl.cullFace( _gl.FRONT );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\n\n\t\t\t}\n\n\t\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t}\n\n\t};\n\n\tthis.setMaterialFaces = function ( material ) {\n\n\t\tvar doubleSided = material.side === THREE.DoubleSide;\n\t\tvar flipSided = material.side === THREE.BackSide;\n\n\t\tif ( _oldDoubleSided !== doubleSided ) {\n\n\t\t\tif ( doubleSided ) {\n\n\t\t\t\t_gl.disable( _gl.CULL_FACE );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t\t}\n\n\t\t\t_oldDoubleSided = doubleSided;\n\n\t\t}\n\n\t\tif ( _oldFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\t_gl.frontFace( _gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.frontFace( _gl.CCW );\n\n\t\t\t}\n\n\t\t\t_oldFlipSided = flipSided;\n\n\t\t}\n\n\t};\n\n\tthis.setDepthTest = function ( depthTest ) {\n\n\t\tif ( _oldDepthTest !== depthTest ) {\n\n\t\t\tif ( depthTest ) {\n\n\t\t\t\t_gl.enable( _gl.DEPTH_TEST );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.disable( _gl.DEPTH_TEST );\n\n\t\t\t}\n\n\t\t\t_oldDepthTest = depthTest;\n\n\t\t}\n\n\t};\n\n\tthis.setDepthWrite = function ( depthWrite ) {\n\n\t\tif ( _oldDepthWrite !== depthWrite ) {\n\n\t\t\t_gl.depthMask( depthWrite );\n\t\t\t_oldDepthWrite = depthWrite;\n\n\t\t}\n\n\t};\n\n\tfunction setLineWidth ( width ) {\n\n\t\twidth *= pixelRatio;\n\n\t\tif ( width !== _oldLineWidth ) {\n\n\t\t\t_gl.lineWidth( width );\n\n\t\t\t_oldLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset ( polygonoffset, factor, units ) {\n\n\t\tif ( _oldPolygonOffset !== polygonoffset ) {\n\n\t\t\tif ( polygonoffset ) {\n\n\t\t\t\t_gl.enable( _gl.POLYGON_OFFSET_FILL );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.disable( _gl.POLYGON_OFFSET_FILL );\n\n\t\t\t}\n\n\t\t\t_oldPolygonOffset = polygonoffset;\n\n\t\t}\n\n\t\tif ( polygonoffset && ( _oldPolygonOffsetFactor !== factor || _oldPolygonOffsetUnits !== units ) ) {\n\n\t\t\t_gl.polygonOffset( factor, units );\n\n\t\t\t_oldPolygonOffsetFactor = factor;\n\t\t\t_oldPolygonOffsetUnits = units;\n\n\t\t}\n\n\t}\n\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst ) {\n\n\t\tif ( blending !== _oldBlending ) {\n\n\t\t\tif ( blending === THREE.NoBlending ) {\n\n\t\t\t\t_gl.disable( _gl.BLEND );\n\n\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE );\n\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\n\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\n\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.SRC_COLOR );\n\n\t\t\t} else if ( blending === THREE.CustomBlending ) {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquationSeparate( _gl.FUNC_ADD, _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFuncSeparate( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t}\n\n\t\t\t_oldBlending = blending;\n\n\t\t}\n\n\t\tif ( blending === THREE.CustomBlending ) {\n\n\t\t\tif ( blendEquation !== _oldBlendEquation ) {\n\n\t\t\t\t_gl.blendEquation( paramThreeToGL( blendEquation ) );\n\n\t\t\t\t_oldBlendEquation = blendEquation;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== _oldBlendSrc || blendDst !== _oldBlendDst ) {\n\n\t\t\t\t_gl.blendFunc( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ) );\n\n\t\t\t\t_oldBlendSrc = blendSrc;\n\t\t\t\t_oldBlendDst = blendDst;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_oldBlendEquation = null;\n\t\t\t_oldBlendSrc = null;\n\t\t\t_oldBlendDst = null;\n\n\t\t}\n\n\t};\n\n\t// Textures\n\n\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\n\n\t\tvar extension;\n\n\t\tif ( isImagePowerOfTwo ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( ' + texture.sourceFile + ' )' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( ' + texture.sourceFile + ' )' );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension && texture.type !== THREE.FloatType ) {\n\n\t\t\tif ( texture.anisotropy > 1 || texture.__oldAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\n\t\t\t\ttexture.__oldAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.uploadTexture = function ( texture ) {\n\n\t\tif ( texture.__webglInit === undefined ) {\n\n\t\t\ttexture.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttexture.__webglTexture = _gl.createTexture();\n\n\t\t\t_this.info.memory.textures ++;\n\n\t\t}\n\n\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\ttexture.image = clampToMaxSize( texture.image, _maxTextureSize );\n\n\t\tvar image = texture.image,\n\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\n\t\tglFormat = paramThreeToGL( texture.format ),\n\t\tglType = paramThreeToGL( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture instanceof THREE.DataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t}\n\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\n\n\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else { // regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\ttexture.needsUpdate = false;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate();\n\n\t};\n\n\tthis.setTexture = function ( texture, slot ) {\n\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\n\t\tif ( texture.needsUpdate ) {\n\n\t\t\t_this.uploadTexture( texture );\n\n\t\t} else {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\n\n\t\t}\n\n\t};\n\n\tfunction clampToMaxSize ( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer:', image, 'is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height + '.' );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction setCubeTexture ( texture, slot ) {\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.needsUpdate ) {\n\n\t\t\t\tif ( ! texture.image.__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttexture.image.__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\t_this.info.memory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], _maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\n\n\t\t\t\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\n\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = false;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate();\n\n\t\t\t} else {\n\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setCubeTextureDynamic ( texture, slot ) {\n\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.__webglTexture );\n\n\t}\n\n\t// Render targets\n\n\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, renderTarget.__webglTexture, 0 );\n\n\t}\n\n\tfunction setupRenderBuffer ( renderbuffer, renderTarget  ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t/* For some reason this is not working. Defaulting to RGBA4.\n\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\t\t*/\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t}\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\n\t\tif ( renderTarget && renderTarget.__webglFramebuffer === undefined ) {\n\n\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\n\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\n\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\t\trenderTarget.__webglTexture = _gl.createTexture();\n\n\t\t\t_this.info.memory.textures ++;\n\n\t\t\t// Setup texture, create render and frame buffers\n\n\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\n\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\n\t\t\t\tglType = paramThreeToGL( renderTarget.type );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTarget.__webglFramebuffer = [];\n\t\t\t\trenderTarget.__webglRenderbuffer = [];\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\trenderTarget.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\t\t\t\t\trenderTarget.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t} else {\n\n\t\t\t\trenderTarget.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\n\n\t\t\t\t\trenderTarget.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderTarget.__webglRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\n\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\n\n\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer, renderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\t\t}\n\n\t\t\t// Release everything\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t\t}\n\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t\t}\n\n\t\tvar framebuffer, width, height, vx, vy;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer[ renderTarget.activeCubeFace ];\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer;\n\n\t\t\t}\n\n\t\t\twidth = renderTarget.width;\n\t\t\theight = renderTarget.height;\n\n\t\t\tvx = 0;\n\t\t\tvy = 0;\n\n\t\t} else {\n\n\t\t\tframebuffer = null;\n\n\t\t\twidth = _viewportWidth;\n\t\t\theight = _viewportHeight;\n\n\t\t\tvx = _viewportX;\n\t\t\tvy = _viewportY;\n\n\t\t}\n\n\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_gl.viewport( vx, vy, width, height );\n\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\t_currentWidth = width;\n\t\t_currentHeight = height;\n\n\t};\n\n\tfunction updateRenderTargetMipmap ( renderTarget ) {\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback ( f ) {\n\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t// Map three.js constants to WebGL constants\n\n\tfunction paramThreeToGL ( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\n\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\n\t\tif ( p === THREE.IntType ) return _gl.INT;\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\n\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\n\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t}\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\t// Allocations\n\n\tfunction allocateBones ( object ) {\n\n\t\tif ( _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader\n\t\t\t//   to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = _gl.getParameter( _gl.MAX_VERTEX_UNIFORM_VECTORS );\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = nVertexMatrices;\n\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\n\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\n\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction allocateLights( lights ) {\n\n\t\tvar dirLights = 0;\n\t\tvar pointLights = 0;\n\t\tvar spotLights = 0;\n\t\tvar hemiLights = 0;\n\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = lights[ l ];\n\n\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\n\n\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\n\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\n\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\n\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\n\n\t\t}\n\n\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\n\n\t}\n\n\tfunction allocateShadows( lights ) {\n\n\t\tvar maxShadows = 0;\n\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = lights[ l ];\n\n\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\n\t\t\tif ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) maxShadows ++;\n\n\t\t}\n\n\t\treturn maxShadows;\n\n\t}\n\n\t// DEPRECATED\n\n\tthis.initMaterial = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t};\n\n\tthis.addPrePlugin = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t};\n\n\tthis.addPostPlugin = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t};\n\n\tthis.updateShadowMap = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t};\n\n};\n\n// File:src/renderers/WebGLRenderTarget.js\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\toptions = options || {};\n\n\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\n\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\n\n\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\n\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\n\n\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\n\n\tthis.offset = new THREE.Vector2( 0, 0 );\n\tthis.repeat = new THREE.Vector2( 1, 1 );\n\n\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\n\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\n\tthis.generateMipmaps = true;\n\n\tthis.shareDepthFrom = null;\n\n};\n\nTHREE.WebGLRenderTarget.prototype = {\n\n\tconstructor: THREE.WebGLRenderTarget,\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar tmp = new THREE.WebGLRenderTarget( this.width, this.height );\n\n\t\ttmp.wrapS = this.wrapS;\n\t\ttmp.wrapT = this.wrapT;\n\n\t\ttmp.magFilter = this.magFilter;\n\t\ttmp.minFilter = this.minFilter;\n\n\t\ttmp.anisotropy = this.anisotropy;\n\n\t\ttmp.offset.copy( this.offset );\n\t\ttmp.repeat.copy( this.repeat );\n\n\t\ttmp.format = this.format;\n\t\ttmp.type = this.type;\n\n\t\ttmp.depthBuffer = this.depthBuffer;\n\t\ttmp.stencilBuffer = this.stencilBuffer;\n\n\t\ttmp.generateMipmaps = this.generateMipmaps;\n\n\t\ttmp.shareDepthFrom = this.shareDepthFrom;\n\n\t\treturn tmp;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\n\n// File:src/renderers/WebGLRenderTargetCube.js\n\n/**\n * @author alteredq / http://alteredqualia.com\n */\n\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\n\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\n\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n\n};\n\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\n\n// File:src/renderers/webgl/WebGLExtensions.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLExtensions = function ( gl ) {\n\n\tvar extensions = {};\n\n\tthis.get = function ( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tvar extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/WebGLProgram.js\n\nTHREE.WebGLProgram = ( function () {\n\n\tvar programIdCount = 0;\n\n\tvar generateDefines = function ( defines ) {\n\n\t\tvar value, chunk, chunks = [];\n\n\t\tfor ( var d in defines ) {\n\n\t\t\tvalue = defines[ d ];\n\t\t\tif ( value === false ) continue;\n\n\t\t\tchunk = '#define ' + d + ' ' + value;\n\t\t\tchunks.push( chunk );\n\n\t\t}\n\n\t\treturn chunks.join( '\\n' );\n\n\t};\n\n\tvar cacheUniformLocations = function ( gl, program, identifiers ) {\n\n\t\tvar uniforms = {};\n\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\n\n\t\t\tvar id = identifiers[ i ];\n\t\t\tuniforms[ id ] = gl.getUniformLocation( program, id );\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t};\n\n\tvar cacheAttributeLocations = function ( gl, program, identifiers ) {\n\n\t\tvar attributes = {};\n\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\n\n\t\t\tvar id = identifiers[ i ];\n\t\t\tattributes[ id ] = gl.getAttribLocation( program, id );\n\n\t\t}\n\n\t\treturn attributes;\n\n\t};\n\n\treturn function ( renderer, code, material, parameters ) {\n\n\t\tvar _this = renderer;\n\t\tvar _gl = _this.context;\n\n\t\tvar defines = material.defines;\n\t\tvar uniforms = material.__webglShader.uniforms;\n\t\tvar attributes = material.attributes;\n\n\t\tvar vertexShader = material.__webglShader.vertexShader;\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\n\n\t\tvar index0AttributeName = material.index0AttributeName;\n\n\t\tif ( index0AttributeName === undefined && parameters.morphTargets === true ) {\n\n\t\t\t// programs with morphTargets displace position out of attribute 0\n\n\t\t\tindex0AttributeName = 'position';\n\n\t\t}\n\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t\t}\n\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\t\tif ( parameters.envMap ) {\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase THREE.CubeReflectionMapping:\n\t\t\t\tcase THREE.CubeRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.SphericalReflectionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase THREE.CubeRefractionMapping:\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.combine ) {\n\n\t\t\t\tcase THREE.MultiplyOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.MixOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.AddOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.log( 'building new program ' );\n\n\t\t//\n\n\t\tvar customDefines = generateDefines( defines );\n\n\t\t//\n\n\t\tvar program = _gl.createProgram();\n\n\t\tvar prefix_vertex, prefix_fragment;\n\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\n\n\t\t\tprefix_vertex = '';\n\t\t\tprefix_fragment = '';\n\n\t\t} else {\n\n\t\t\tprefix_vertex = [\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t\t_this.gammaInput ? '#define GAMMA_INPUT' : '',\n\t\t\t\t_this.gammaOutput ? '#define GAMMA_OUTPUT' : '',\n\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\n\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\n\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\t\tparameters.morphNormals ? '#define USE_MORPHNORMALS' : '',\n\t\t\t\tparameters.wrapAround ? '#define WRAP_AROUND' : '',\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\n\t\t\t\tparameters.shadowMapCascade ? '#define SHADOWMAP_CASCADE' : '',\n\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\t//_this._glExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\n\t\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t\t'attribute vec3 position;',\n\t\t\t\t'attribute vec3 normal;',\n\t\t\t\t'attribute vec2 uv;',\n\t\t\t\t'attribute vec2 uv2;',\n\n\t\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t\t'\tattribute vec3 color;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t\t'\t#else',\n\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t\t'\t#endif',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t''\n\n\t\t\t].join( '\\n' );\n\n\t\t\tprefix_fragment = [\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\t( parameters.bumpMap || parameters.normalMap ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\n\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\n\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest: '',\n\n\t\t\t\t_this.gammaInput ? '#define GAMMA_INPUT' : '',\n\t\t\t\t_this.gammaOutput ? '#define GAMMA_OUTPUT' : '',\n\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.metal ? '#define METAL' : '',\n\t\t\t\tparameters.wrapAround ? '#define WRAP_AROUND' : '',\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\n\t\t\t\tparameters.shadowMapCascade ? '#define SHADOWMAP_CASCADE' : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\t//_this._glExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t\t''\n\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\tvar glVertexShader = new THREE.WebGLShader( _gl, _gl.VERTEX_SHADER, prefix_vertex + vertexShader );\n\t\tvar glFragmentShader = new THREE.WebGLShader( _gl, _gl.FRAGMENT_SHADER, prefix_fragment + fragmentShader );\n\n\t\t_gl.attachShader( program, glVertexShader );\n\t\t_gl.attachShader( program, glFragmentShader );\n\n\t\tif ( index0AttributeName !== undefined ) {\n\n\t\t\t// Force a particular attribute to index 0.\n\t\t\t// because potentially expensive emulation is done by browser if attribute 0 is disabled.\n\t\t\t// And, color, for example is often automatically bound to index 0 so disabling it\n\n\t\t\t_gl.bindAttribLocation( program, 0, index0AttributeName );\n\n\t\t}\n\n\t\t_gl.linkProgram( program );\n\n\t\tif ( _gl.getProgramParameter( program, _gl.LINK_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: Could not initialise shader.' );\n\t\t\tconsole.error( 'gl.VALIDATE_STATUS', _gl.getProgramParameter( program, _gl.VALIDATE_STATUS ) );\n\t\t\tconsole.error( 'gl.getError()', _gl.getError() );\n\n\t\t}\n\n\t\tif ( _gl.getProgramInfoLog( program ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', _gl.getProgramInfoLog( program ) );\n\t\t\t// console.warn( _gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t\t\t// console.warn( _gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\t\t}\n\n\t\t// clean up\n\n\t\t_gl.deleteShader( glVertexShader );\n\t\t_gl.deleteShader( glFragmentShader );\n\n\t\t// cache uniform locations\n\n\t\tvar identifiers = [\n\n\t\t\t'viewMatrix',\n\t\t\t'modelViewMatrix',\n\t\t\t'projectionMatrix',\n\t\t\t'normalMatrix',\n\t\t\t'modelMatrix',\n\t\t\t'cameraPosition',\n\t\t\t'morphTargetInfluences',\n\t\t\t'bindMatrix',\n\t\t\t'bindMatrixInverse'\n\n\t\t];\n\n\t\tif ( parameters.useVertexTexture ) {\n\n\t\t\tidentifiers.push( 'boneTexture' );\n\t\t\tidentifiers.push( 'boneTextureWidth' );\n\t\t\tidentifiers.push( 'boneTextureHeight' );\n\n\t\t} else {\n\n\t\t\tidentifiers.push( 'boneGlobalMatrices' );\n\n\t\t}\n\n\t\tif ( parameters.logarithmicDepthBuffer ) {\n\n\t\t\tidentifiers.push('logDepthBufFC');\n\n\t\t}\n\n\n\t\tfor ( var u in uniforms ) {\n\n\t\t\tidentifiers.push( u );\n\n\t\t}\n\n\t\tthis.uniforms = cacheUniformLocations( _gl, program, identifiers );\n\n\t\t// cache attributes locations\n\n\t\tidentifiers = [\n\n\t\t\t'position',\n\t\t\t'normal',\n\t\t\t'uv',\n\t\t\t'uv2',\n\t\t\t'tangent',\n\t\t\t'color',\n\t\t\t'skinIndex',\n\t\t\t'skinWeight',\n\t\t\t'lineDistance'\n\n\t\t];\n\n\t\tfor ( var i = 0; i < parameters.maxMorphTargets; i ++ ) {\n\n\t\t\tidentifiers.push( 'morphTarget' + i );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameters.maxMorphNormals; i ++ ) {\n\n\t\t\tidentifiers.push( 'morphNormal' + i );\n\n\t\t}\n\n\t\tfor ( var a in attributes ) {\n\n\t\t\tidentifiers.push( a );\n\n\t\t}\n\n\t\tthis.attributes = cacheAttributeLocations( _gl, program, identifiers );\n\t\tthis.attributesKeys = Object.keys( this.attributes );\n\n\t\t//\n\n\t\tthis.id = programIdCount ++;\n\t\tthis.code = code;\n\t\tthis.usedTimes = 1;\n\t\tthis.program = program;\n\t\tthis.vertexShader = glVertexShader;\n\t\tthis.fragmentShader = glFragmentShader;\n\n\t\treturn this;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/WebGLShader.js\n\nTHREE.WebGLShader = ( function () {\n\n\tvar addLineNumbers = function ( string ) {\n\n\t\tvar lines = string.split( '\\n' );\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t\t}\n\n\t\treturn lines.join( '\\n' );\n\n\t};\n\n\treturn function ( gl, type, string ) {\n\n\t\tvar shader = gl.createShader( type ); \n\n\t\tgl.shaderSource( shader, string );\n\t\tgl.compileShader( shader );\n\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t\t}\n\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', gl.getShaderInfoLog( shader ) );\n\t\t\tconsole.warn( addLineNumbers( string ) );\n\n\t\t}\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\treturn shader;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\n\n\tvar gl = renderer.context;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\tvar hasVertexTexture;\n\n\tvar tempTexture, occlusionTexture;\n\n\tvar init = function () {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t-1, -1,  0, 0,\n\t\t\t 1, -1,  1, 0,\n\t\t\t 1,  1,  1, 1,\n\t\t\t-1,  1,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\t// buffers\n\n\t\tvertexBuffer     = gl.createBuffer();\n\t\telementBuffer    = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t// textures\n\n\t\ttempTexture      = gl.createTexture();\n\t\tocclusionTexture = gl.createTexture();\n\n\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\n\n\t\tvar shader;\n\n\t\tif ( hasVertexTexture ) {\n\n\t\t\tshader = {\n\n\t\t\t\tvertexShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\n\t\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\n\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\n\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" ),\n\n\t\t\t\tfragmentShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t// pink square\n\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\n\n\t\t\t\t\t\t// restore\n\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t\t// flare\n\n\t\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" )\n\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tshader = {\n\n\t\t\t\tvertexShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" ),\n\n\t\t\t\tfragmentShader: [\n\n\t\t\t\t\t\"precision mediump float;\",\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\t\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t// pink square\n\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\n\n\t\t\t\t\t\t// restore\n\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t\t// flare\n\n\t\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\n\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" )\n\n\t\t\t};\n\n\t\t}\n\n\t\tprogram = createProgram( shader );\n\n\t\tattributes = {\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\n\t\t}\n\n\t\tuniforms = {\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\n\t\t};\n\n\t};\n\n\t/*\n\t * Render lens flares\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t *         reads these back and calculates occlusion.\n\t */\n\n\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\n\n\t\tif ( flares.length === 0 ) return;\n\n\t\tvar tempPosition = new THREE.Vector3();\n\n\t\tvar invAspect = viewportHeight / viewportWidth,\n\t\t\thalfViewportWidth = viewportWidth * 0.5,\n\t\t\thalfViewportHeight = viewportHeight * 0.5;\n\n\t\tvar size = 16 / viewportHeight,\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\n\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tgl.enableVertexAttribArray( attributes.vertex );\n\t\tgl.enableVertexAttribArray( attributes.uv );\n\n\t\t// loop through all lens flares to update their occlusion and positions\n\t\t// setup gl and common used attribs/unforms\n\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.depthMask( false );\n\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\tsize = 16 / viewportHeight;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t// calc object screen position\n\n\t\t\tvar flare = flares[ i ];\n\t\t\t\n\t\t\ttempPosition.set( flare.matrixWorld.elements[12], flare.matrixWorld.elements[13], flare.matrixWorld.elements[14] );\n\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\n\n\t\t\t// setup arrays for gl programs\n\n\t\t\tscreenPosition.copy( tempPosition )\n\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\n\n\t\t\t// screen cull\n\n\t\t\tif ( hasVertexTexture || (\n\t\t\t\tscreenPositionPixels.x > 0 &&\n\t\t\t\tscreenPositionPixels.x < viewportWidth &&\n\t\t\t\tscreenPositionPixels.y > 0 &&\n\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\n\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\tgl.disable( gl.BLEND );\n\t\t\t\tgl.enable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\n\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\tgl.disable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// update object positions\n\n\t\t\t\tflare.positionScreen.copy( screenPosition )\n\n\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t}\n\n\t\t\t\t// render flares\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\tgl.enable( gl.BLEND );\n\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\n\n\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\trenderer.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\n\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tgl.enable( gl.CULL_FACE );\n\t\tgl.enable( gl.DEPTH_TEST );\n\t\tgl.depthMask( true );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram ( shader ) {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\n\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\tgl.compileShader( fragmentShader );\n\t\tgl.compileShader( vertexShader );\n\n\t\tgl.attachShader( program, fragmentShader );\n\t\tgl.attachShader( program, vertexShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n};\n\n// File:src/renderers/webgl/plugins/ShadowMapPlugin.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ShadowMapPlugin = function ( _renderer, _lights, _webglObjects, _webglObjectsImmediate ) {\n\n\tvar _gl = _renderer.context;\n\n\tvar _depthMaterial, _depthMaterialMorph, _depthMaterialSkin, _depthMaterialMorphSkin,\n\n\t_frustum = new THREE.Frustum(),\n\t_projScreenMatrix = new THREE.Matrix4(),\n\n\t_min = new THREE.Vector3(),\n\t_max = new THREE.Vector3(),\n\n\t_matrixPosition = new THREE.Vector3(),\n\t\n\t_renderList = [];\n\n\t// init\n\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\n\n\t_depthMaterial = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader\n\t } );\n\n\t_depthMaterialMorph = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tmorphTargets: true\n\t} );\n\n\t_depthMaterialSkin = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tskinning: true\n\t} );\n\n\t_depthMaterialMorphSkin = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tmorphTargets: true,\n\t\tskinning: true\n\t} );\n\n\t_depthMaterial._shadowPass = true;\n\t_depthMaterialMorph._shadowPass = true;\n\t_depthMaterialSkin._shadowPass = true;\n\t_depthMaterialMorphSkin._shadowPass = true;\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( _renderer.shadowMapEnabled === false ) return;\n\n\t\tvar i, il, j, jl, n,\n\n\t\tshadowMap, shadowMatrix, shadowCamera,\n\t\tprogram, buffer, material,\n\t\twebglObject, object, light,\n\n\t\tlights = [],\n\t\tk = 0,\n\n\t\tfog = null;\n\n\t\t// set GL state for depth map\n\n\t\t_gl.clearColor( 1, 1, 1, 1 );\n\t\t_gl.disable( _gl.BLEND );\n\n\t\t_gl.enable( _gl.CULL_FACE );\n\t\t_gl.frontFace( _gl.CCW );\n\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\n\n\t\t\t_gl.cullFace( _gl.FRONT );\n\n\t\t} else {\n\n\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t}\n\n\t\t_renderer.setDepthTest( true );\n\n\t\t// preprocess lights\n\t\t// \t- skip lights that are not casting shadows\n\t\t//\t- create virtual lights for cascaded shadow maps\n\n\t\tfor ( i = 0, il = _lights.length; i < il; i ++ ) {\n\n\t\t\tlight = _lights[ i ];\n\n\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\tif ( ( light instanceof THREE.DirectionalLight ) && light.shadowCascade ) {\n\n\t\t\t\tfor ( n = 0; n < light.shadowCascadeCount; n ++ ) {\n\n\t\t\t\t\tvar virtualLight;\n\n\t\t\t\t\tif ( ! light.shadowCascadeArray[ n ] ) {\n\n\t\t\t\t\t\tvirtualLight = createVirtualLight( light, n );\n\t\t\t\t\t\tvirtualLight.originalCamera = camera;\n\n\t\t\t\t\t\tvar gyro = new THREE.Gyroscope();\n\t\t\t\t\t\tgyro.position.copy( light.shadowCascadeOffset );\n\n\t\t\t\t\t\tgyro.add( virtualLight );\n\t\t\t\t\t\tgyro.add( virtualLight.target );\n\n\t\t\t\t\t\tcamera.add( gyro );\n\n\t\t\t\t\t\tlight.shadowCascadeArray[ n ] = virtualLight;\n\n\t\t\t\t\t\tconsole.log( \"Created virtualLight\", virtualLight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvirtualLight = light.shadowCascadeArray[ n ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tupdateVirtualLight( light, n );\n\n\t\t\t\t\tlights[ k ] = virtualLight;\n\t\t\t\t\tk ++;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tlights[ k ] = light;\n\t\t\t\tk ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// render depth map\n\n\t\tfor ( i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tlight = lights[ i ];\n\n\t\t\tif ( ! light.shadowMap ) {\n\n\t\t\t\tvar shadowFilter = THREE.LinearFilter;\n\n\t\t\t\tif ( _renderer.shadowMapType === THREE.PCFSoftShadowMap ) {\n\n\t\t\t\t\tshadowFilter = THREE.NearestFilter;\n\n\t\t\t\t}\n\n\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\n\n\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\n\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\n\n\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\n\n\t\t\t}\n\n\t\t\tif ( ! light.shadowCamera ) {\n\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\n\n\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\n\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( \"Unsupported light type for shadow\" );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tscene.add( light.shadowCamera );\n\n\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t\t}\n\n\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\n\n\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\n\t\t\t\tscene.add( light.cameraHelper );\n\n\t\t\t}\n\n\t\t\tif ( light.isVirtual && virtualLight.originalCamera == camera ) {\n\n\t\t\t\tupdateShadowCamera( camera, light );\n\n\t\t\t}\n\n\t\t\tshadowMap = light.shadowMap;\n\t\t\tshadowMatrix = light.shadowMatrix;\n\t\t\tshadowCamera = light.shadowCamera;\n\n\t\t\t//\n\n\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\tshadowCamera.lookAt( _matrixPosition );\n\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\n\n\t\t\t//\n\n\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\n\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\n\n\t\t\t// compute shadow matrix\n\n\t\t\tshadowMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t// update camera matrices and frustum\n\n\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t// render shadow map\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// set object matrices & frustum culling\n\n\t\t\t_renderList.length = 0;\n\n\t\t\tprojectObject( scene, scene, shadowCamera );\n\n\n\t\t\t// render regular objects\n\n\t\t\tvar objectMaterial, useMorphing, useSkinning;\n\n\t\t\tfor ( j = 0, jl = _renderList.length; j < jl; j ++ ) {\n\n\t\t\t\twebglObject = _renderList[ j ];\n\n\t\t\t\tobject = webglObject.object;\n\t\t\t\tbuffer = webglObject.buffer;\n\n\t\t\t\t// culling is overriden globally for all objects\n\t\t\t\t// while rendering depth map\n\n\t\t\t\t// need to deal with MeshFaceMaterial somehow\n\t\t\t\t// in that case just use the first of material.materials for now\n\t\t\t\t// (proper solution would require to break objects by materials\n\t\t\t\t//  similarly to regular rendering and then set corresponding\n\t\t\t\t//  depth materials per each chunk instead of just once per object)\n\n\t\t\t\tobjectMaterial = getObjectMaterial( object );\n\n\t\t\t\tuseMorphing = object.geometry.morphTargets !== undefined && object.geometry.morphTargets.length > 0 && objectMaterial.morphTargets;\n\t\t\t\tuseSkinning = object instanceof THREE.SkinnedMesh && objectMaterial.skinning;\n\n\t\t\t\tif ( object.customDepthMaterial ) {\n\n\t\t\t\t\tmaterial = object.customDepthMaterial;\n\n\t\t\t\t} else if ( useSkinning ) {\n\n\t\t\t\t\tmaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\n\n\t\t\t\t} else if ( useMorphing ) {\n\n\t\t\t\t\tmaterial = _depthMaterialMorph;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterial = _depthMaterial;\n\n\t\t\t\t}\n\n\t\t\t\t_renderer.setMaterialFaces( objectMaterial );\n\n\t\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, fog, material, buffer, object );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_renderer.renderBuffer( shadowCamera, _lights, fog, material, buffer, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// set matrices and render immediate objects\n\n\t\t\tfor ( j = 0, jl = _webglObjectsImmediate.length; j < jl; j ++ ) {\n\n\t\t\t\twebglObject = _webglObjectsImmediate[ j ];\n\t\t\t\tobject = webglObject.object;\n\n\t\t\t\tif ( object.visible && object.castShadow ) {\n\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\t\t_renderer.renderImmediateObject( shadowCamera, _lights, fog, _depthMaterial, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore GL state\n\n\t\tvar clearColor = _renderer.getClearColor(),\n\t\tclearAlpha = _renderer.getClearAlpha();\n\n\t\t_gl.clearColor( clearColor.r, clearColor.g, clearColor.b, clearAlpha );\n\t\t_gl.enable( _gl.BLEND );\n\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\n\n\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t}\n\n\t\t_renderer.resetGLState();\n\n\t};\n\n\tfunction projectObject( scene, object, shadowCamera ){\n\n\t\tif ( object.visible ) {\n\n\t\t\tvar webglObjects = _webglObjects[ object.id ];\n\n\t\t\tif ( webglObjects && object.castShadow && (object.frustumCulled === false || _frustum.intersectsObject( object ) === true) ) {\n\n\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar webglObject = webglObjects[ i ];\n\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\t\t\t\t\t_renderList.push( webglObject );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\tprojectObject( scene, object.children[ i ], shadowCamera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVirtualLight( light, cascade ) {\n\n\t\tvar virtualLight = new THREE.DirectionalLight();\n\n\t\tvirtualLight.isVirtual = true;\n\n\t\tvirtualLight.onlyShadow = true;\n\t\tvirtualLight.castShadow = true;\n\n\t\tvirtualLight.shadowCameraNear = light.shadowCameraNear;\n\t\tvirtualLight.shadowCameraFar = light.shadowCameraFar;\n\n\t\tvirtualLight.shadowCameraLeft = light.shadowCameraLeft;\n\t\tvirtualLight.shadowCameraRight = light.shadowCameraRight;\n\t\tvirtualLight.shadowCameraBottom = light.shadowCameraBottom;\n\t\tvirtualLight.shadowCameraTop = light.shadowCameraTop;\n\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\n\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\n\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\n\t\tvirtualLight.shadowMapWidth = light.shadowCascadeWidth[ cascade ];\n\t\tvirtualLight.shadowMapHeight = light.shadowCascadeHeight[ cascade ];\n\n\t\tvirtualLight.pointsWorld = [];\n\t\tvirtualLight.pointsFrustum = [];\n\n\t\tvar pointsWorld = virtualLight.pointsWorld,\n\t\t\tpointsFrustum = virtualLight.pointsFrustum;\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tpointsWorld[ i ] = new THREE.Vector3();\n\t\t\tpointsFrustum[ i ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\n\n\t\tpointsFrustum[ 0 ].set( - 1, - 1, nearZ );\n\t\tpointsFrustum[ 1 ].set(  1, - 1, nearZ );\n\t\tpointsFrustum[ 2 ].set( - 1,  1, nearZ );\n\t\tpointsFrustum[ 3 ].set(  1,  1, nearZ );\n\n\t\tpointsFrustum[ 4 ].set( - 1, - 1, farZ );\n\t\tpointsFrustum[ 5 ].set(  1, - 1, farZ );\n\t\tpointsFrustum[ 6 ].set( - 1,  1, farZ );\n\t\tpointsFrustum[ 7 ].set(  1,  1, farZ );\n\n\t\treturn virtualLight;\n\n\t}\n\n\t// Synchronize virtual light with the original light\n\n\tfunction updateVirtualLight( light, cascade ) {\n\n\t\tvar virtualLight = light.shadowCascadeArray[ cascade ];\n\n\t\tvirtualLight.position.copy( light.position );\n\t\tvirtualLight.target.position.copy( light.target.position );\n\t\tvirtualLight.lookAt( virtualLight.target );\n\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\n\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\n\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\n\n\t\tvar pointsFrustum = virtualLight.pointsFrustum;\n\n\t\tpointsFrustum[ 0 ].z = nearZ;\n\t\tpointsFrustum[ 1 ].z = nearZ;\n\t\tpointsFrustum[ 2 ].z = nearZ;\n\t\tpointsFrustum[ 3 ].z = nearZ;\n\n\t\tpointsFrustum[ 4 ].z = farZ;\n\t\tpointsFrustum[ 5 ].z = farZ;\n\t\tpointsFrustum[ 6 ].z = farZ;\n\t\tpointsFrustum[ 7 ].z = farZ;\n\n\t}\n\n\t// Fit shadow camera's ortho frustum to camera frustum\n\n\tfunction updateShadowCamera( camera, light ) {\n\n\t\tvar shadowCamera = light.shadowCamera,\n\t\t\tpointsFrustum = light.pointsFrustum,\n\t\t\tpointsWorld = light.pointsWorld;\n\n\t\t_min.set( Infinity, Infinity, Infinity );\n\t\t_max.set( - Infinity, - Infinity, - Infinity );\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar p = pointsWorld[ i ];\n\n\t\t\tp.copy( pointsFrustum[ i ] );\n\t\t\tp.unproject( camera );\n\n\t\t\tp.applyMatrix4( shadowCamera.matrixWorldInverse );\n\n\t\t\tif ( p.x < _min.x ) _min.x = p.x;\n\t\t\tif ( p.x > _max.x ) _max.x = p.x;\n\n\t\t\tif ( p.y < _min.y ) _min.y = p.y;\n\t\t\tif ( p.y > _max.y ) _max.y = p.y;\n\n\t\t\tif ( p.z < _min.z ) _min.z = p.z;\n\t\t\tif ( p.z > _max.z ) _max.z = p.z;\n\n\t\t}\n\n\t\tshadowCamera.left = _min.x;\n\t\tshadowCamera.right = _max.x;\n\t\tshadowCamera.top = _max.y;\n\t\tshadowCamera.bottom = _min.y;\n\n\t\t// can't really fit near/far\n\t\t//shadowCamera.near = _min.z;\n\t\t//shadowCamera.far = _max.z;\n\n\t\tshadowCamera.updateProjectionMatrix();\n\n\t}\n\n\t// For the moment just ignore objects that have multiple materials with different animation methods\n\t// Only the first material will be taken into account for deciding which depth material to use for shadow maps\n\n\tfunction getObjectMaterial( object ) {\n\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\n\t\t\t? object.material.materials[ 0 ]\n\t\t\t: object.material;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/plugins/SpritePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpritePlugin = function ( renderer, sprites ) {\n\n\tvar gl = renderer.context;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new THREE.Vector3();\n\tvar spriteRotation = new THREE.Quaternion();\n\tvar spriteScale = new THREE.Vector3();\n\n\tvar init = function () {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5,  0, 0,\n\t\t\t  0.5, - 0.5,  1, 0,\n\t\t\t  0.5,   0.5,  1, 1,\n\t\t\t- 0.5,   0.5,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer  = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\n\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new THREE.Texture( canvas );\n\t\ttexture.needsUpdate = true;\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tgl.enableVertexAttribArray( attributes.position );\n\t\tgl.enableVertexAttribArray( attributes.uv );\n\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite._modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite._modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\trenderer.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\trenderer.setDepthTest( material.depthTest );\n\t\t\trenderer.setDepthWrite( material.depthWrite );\n\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\n\n\t\t\t\trenderer.setTexture( material.map, 0 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setTexture( texture, 0 );\n\n\t\t\t}\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tgl.enable( gl.CULL_FACE );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram () {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\n\n\t\t\t\t'vec2 alignedPosition = position * scale;',\n\n\t\t\t\t'vec2 rotatedPosition;',\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t\t'vec4 finalPosition;',\n\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\n\n\t\t\t\t'gl_Position = finalPosition;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\n\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\n\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t\t'if ( fogType > 0 ) {',\n\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\n\t\t\t\t\t'float fogFactor = 0.0;',\n\n\t\t\t\t\t'if ( fogType == 1 ) {',\n\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\n\n\t\t\t\t\t'} else {',\n\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\n\t\t\t\t\t\t'float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t\t\t'}',\n\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\n\n\t\t\t\t'}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t};\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t};\n\n};\n\n// File:src/extras/GeometryUtils.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.GeometryUtils = {\n\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\n\t\tvar matrix;\n\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\n\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\tmatrix = geometry2.matrix;\n\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t}\n\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t},\n\n\tcenter: function ( geometry ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\treturn geometry.center();\n\n\t}\n\n};\n\n// File:src/extras/ImageUtils.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author Daosheng Mu / https://github.com/DaoshengMu/\n */\n\nTHREE.ImageUtils = {\n\n\tcrossOrigin: undefined,\n\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\n\n\t\tvar loader = new THREE.ImageLoader();\n\t\tloader.crossOrigin = this.crossOrigin;\n\n\t\tvar texture = new THREE.Texture( undefined, mapping );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t}, undefined, function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t} );\n\n\t\ttexture.sourceFile = url;\n\n\t\treturn texture;\n\n\t},\n\n\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\n\n\t\tvar images = [];\n\n\t\tvar loader = new THREE.ImageLoader();\n\t\tloader.crossOrigin = this.crossOrigin;\n\n\t\tvar texture = new THREE.CubeTexture( images, mapping );\n\n\t\t// no flipping needed for cube textures\n\n\t\ttexture.flipY = false;\n\n\t\tvar loaded = 0;\n\n\t\tvar loadTexture = function ( i ) {\n\n\t\t\tloader.load( array[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tloadCompressedTexture: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\n\n\t},\n\n\tloadCompressedTextureCube: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\n\n\t},\n\n\tgetNormalMap: function ( image, depth ) {\n\n\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\n\n\t\tvar cross = function ( a, b ) {\n\n\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\n\n\t\t}\n\n\t\tvar subtract = function ( a, b ) {\n\n\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\n\n\t\t}\n\n\t\tvar normalize = function ( a ) {\n\n\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\n\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\n\n\t\t}\n\n\t\tdepth = depth | 1;\n\n\t\tvar width = image.width;\n\t\tvar height = image.height;\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.drawImage( image, 0, 0 );\n\n\t\tvar data = context.getImageData( 0, 0, width, height ).data;\n\t\tvar imageData = context.createImageData( width, height );\n\t\tvar output = imageData.data;\n\n\t\tfor ( var x = 0; x < width; x ++ ) {\n\n\t\t\tfor ( var y = 0; y < height; y ++ ) {\n\n\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\n\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\n\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\n\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\n\n\t\t\t\tvar points = [];\n\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\n\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [  1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\n\n\t\t\t\tvar normals = [];\n\t\t\t\tvar num_points = points.length;\n\n\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\n\n\t\t\t\t\tvar v1 = points[ i ];\n\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\n\t\t\t\t\tv1 = subtract( v1, origin );\n\t\t\t\t\tv2 = subtract( v2, origin );\n\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tvar normal = [ 0, 0, 0 ];\n\n\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\n\n\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\n\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\n\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\n\n\t\t\t\t}\n\n\t\t\t\tnormal[ 0 ] /= normals.length;\n\t\t\t\tnormal[ 1 ] /= normals.length;\n\t\t\t\tnormal[ 2 ] /= normals.length;\n\n\t\t\t\tvar idx = ( y * width + x ) * 4;\n\n\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\n\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\n\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\n\t\t\t\toutput[ idx + 3 ] = 255;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\treturn canvas;\n\n\t},\n\n\tgenerateDataTexture: function ( width, height, color ) {\n\n\t\tvar size = width * height;\n\t\tvar data = new Uint8Array( 3 * size );\n\n\t\tvar r = Math.floor( color.r * 255 );\n\t\tvar g = Math.floor( color.g * 255 );\n\t\tvar b = Math.floor( color.b * 255 );\n\n\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\tdata[ i * 3 ] \t   = r;\n\t\t\tdata[ i * 3 + 1 ] = g;\n\t\t\tdata[ i * 3 + 2 ] = b;\n\n\t\t}\n\n\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/extras/SceneUtils.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SceneUtils = {\n\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\n\n\t\tvar group = new THREE.Object3D();\n\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\n\n\t\t}\n\n\t\treturn group;\n\n\t},\n\n\tdetach: function ( child, parent, scene ) {\n\n\t\tchild.applyMatrix( parent.matrixWorld );\n\t\tparent.remove( child );\n\t\tscene.add( child );\n\n\t},\n\n\tattach: function ( child, scene, parent ) {\n\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\t\tchild.applyMatrix( matrixWorldInverse );\n\n\t\tscene.remove( child );\n\t\tparent.add( child );\n\n\t}\n\n};\n\n// File:src/extras/FontUtils.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * For Text operations in three.js (See TextGeometry)\n *\n * It uses techniques used in:\n *\n * \ttypeface.js and canvastext\n * \t\tFor converting fonts and rendering with javascript\n *\t\thttp://typeface.neocracy.org\n *\n *\tTriangulation ported from AS3\n *\t\tSimple Polygon Triangulation\n *\t\thttp://actionsnippet.com/?p=1462\n *\n * \tA Method to triangulate shapes with holes\n *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\n *\n */\n\nTHREE.FontUtils = {\n\n\tfaces: {},\n\n\t// Just for now. face[weight][style]\n\n\tface: 'helvetiker',\n\tweight: 'normal',\n\tstyle: 'normal',\n\tsize: 150,\n\tdivisions: 10,\n\n\tgetFace: function () {\n\n\t\ttry {\n\n\t\t\treturn this.faces[ this.face ][ this.weight ][ this.style ];\n\n\t\t} catch (e) {\n\n\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\n\n\t\t};\n\n\t},\n\n\tloadFace: function ( data ) {\n\n\t\tvar family = data.familyName.toLowerCase();\n\n\t\tvar ThreeFont = this;\n\n\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\n\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\n\n\t\tvar face = ThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\n\n\t\treturn data;\n\n\t},\n\n\tdrawText: function ( text ) {\n\n\t\tvar characterPts = [], allPts = [];\n\n\t\t// RenderText\n\n\t\tvar i, p,\n\t\t\tface = this.getFace(),\n\t\t\tscale = this.size / face.resolution,\n\t\t\toffset = 0,\n\t\t\tchars = String( text ).split( '' ),\n\t\t\tlength = chars.length;\n\n\t\tvar fontPaths = [];\n\n\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\tvar path = new THREE.Path();\n\n\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\n\t\t\toffset += ret.offset;\n\n\t\t\tfontPaths.push( ret.path );\n\n\t\t}\n\n\t\t// get the width\n\n\t\tvar width = offset / 2;\n\t\t//\n\t\t// for ( p = 0; p < allPts.length; p++ ) {\n\t\t//\n\t\t// \tallPts[ p ].x -= width;\n\t\t//\n\t\t// }\n\n\t\t//var extract = this.extractPoints( allPts, characterPts );\n\t\t//extract.contour = allPts;\n\n\t\t//extract.paths = fontPaths;\n\t\t//extract.offset = width;\n\n\t\treturn { paths: fontPaths, offset: width };\n\n\t},\n\n\n\n\n\textractGlyphPoints: function ( c, face, scale, offset, path ) {\n\n\t\tvar pts = [];\n\n\t\tvar i, i2, divisions,\n\t\t\toutline, action, length,\n\t\t\tscaleX, scaleY,\n\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\n\t\t\tlaste,\n\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\n\n\t\tif ( ! glyph ) return;\n\n\t\tif ( glyph.o ) {\n\n\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\t\t\tlength = outline.length;\n\n\t\t\tscaleX = scale;\n\t\t\tscaleY = scale;\n\n\t\t\tfor ( i = 0; i < length; ) {\n\n\t\t\t\taction = outline[ i ++ ];\n\n\t\t\t\t//console.log( action );\n\n\t\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm':\n\n\t\t\t\t\t// Move To\n\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l':\n\n\t\t\t\t\t// Line To\n\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\n\t\t\t\t\tpath.lineTo( x,y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q':\n\n\t\t\t\t\t// QuadraticCurveTo\n\n\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\n\t\t\t\t\t  }\n\n\t\t\t\t  }\n\n\t\t\t\t  break;\n\n\t\t\t\tcase 'b':\n\n\t\t\t\t\t// Cubic Bezier Curve\n\n\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\n\n\t\treturn { offset: glyph.ha * scale, path:path };\n\t}\n\n};\n\n\nTHREE.FontUtils.generateShapes = function ( text, parameters ) {\n\n\t// Parameters \n\n\tparameters = parameters || {};\n\n\tvar size = parameters.size !== undefined ? parameters.size : 100;\n\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\n\n\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\n\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\n\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\n\n\tTHREE.FontUtils.size = size;\n\tTHREE.FontUtils.divisions = curveSegments;\n\n\tTHREE.FontUtils.face = font;\n\tTHREE.FontUtils.weight = weight;\n\tTHREE.FontUtils.style = style;\n\n\t// Get a Font data json object\n\n\tvar data = THREE.FontUtils.drawText( text );\n\n\tvar paths = data.paths;\n\tvar shapes = [];\n\n\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t}\n\n\treturn shapes;\n\n};\n\n\n/**\n * This code is a quick port of code written in C++ which was submitted to\n * flipcode.com by John W. Ratcliff  // July 22, 2000\n * See original code and more information here:\n * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\n *\n * ported to actionscript by Zevan Rosser\n * www.actionsnippet.com\n *\n * ported to javascript by Joshua Koo\n * http://www.lab4games.net/zz85/blog\n *\n */\n\n\n( function ( namespace ) {\n\n\tvar EPSILON = 0.0000000001;\n\n\t// takes in an contour array and returns\n\n\tvar process = function ( contour, indices ) {\n\n\t\tvar n = contour.length;\n\n\t\tif ( n < 3 ) return null;\n\n\t\tvar result = [],\n\t\t\tverts = [],\n\t\t\tvertIndices = [];\n\n\t\t/* we want a counter-clockwise polygon in verts */\n\n\t\tvar u, v, w;\n\n\t\tif ( area( contour ) > 0.0 ) {\n\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\n\n\t\t} else {\n\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\n\n\t\t}\n\n\t\tvar nv = n;\n\n\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\n\n\t\tvar count = 2 * nv;   /* error detection */\n\n\t\tfor ( v = nv - 1; nv > 2; ) {\n\n\t\t\t/* if we loop, it is probably a non-simple polygon */\n\n\t\t\tif ( ( count -- ) <= 0 ) {\n\n\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\n\n\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\n\t\t\t\t//return null;\n\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\n\t\t\t\tconsole.log( 'Warning, unable to triangulate polygon!' );\n\n\t\t\t\tif ( indices ) return vertIndices;\n\t\t\t\treturn result;\n\n\t\t\t}\n\n\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\n\n\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\n\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\n\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\n\n\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\n\n\t\t\t\tvar a, b, c, s, t;\n\n\t\t\t\t/* true names of the vertices */\n\n\t\t\t\ta = verts[ u ];\n\t\t\t\tb = verts[ v ];\n\t\t\t\tc = verts[ w ];\n\n\t\t\t\t/* output Triangle */\n\n\t\t\t\tresult.push( [ contour[ a ],\n\t\t\t\t\tcontour[ b ],\n\t\t\t\t\tcontour[ c ] ] );\n\n\n\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\n\n\t\t\t\t/* remove v from the remaining polygon */\n\n\t\t\t\tfor ( s = v, t = v + 1; t < nv; s++, t++ ) {\n\n\t\t\t\t\tverts[ s ] = verts[ t ];\n\n\t\t\t\t}\n\n\t\t\t\tnv --;\n\n\t\t\t\t/* reset error detection counter */\n\n\t\t\t\tcount = 2 * nv;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( indices ) return vertIndices;\n\t\treturn result;\n\n\t};\n\n\t// calculate area of the contour polygon\n\n\tvar area = function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t};\n\n\tvar snip = function ( contour, u, v, w, n, verts ) {\n\n\t\tvar p;\n\t\tvar ax, ay, bx, by;\n\t\tvar cx, cy, px, py;\n\n\t\tax = contour[ verts[ u ] ].x;\n\t\tay = contour[ verts[ u ] ].y;\n\n\t\tbx = contour[ verts[ v ] ].x;\n\t\tby = contour[ verts[ v ] ].y;\n\n\t\tcx = contour[ verts[ w ] ].x;\n\t\tcy = contour[ verts[ w ] ].y;\n\n\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\n\n\t\tvar aX, aY, bX, bY, cX, cY;\n\t\tvar apx, apy, bpx, bpy, cpx, cpy;\n\t\tvar cCROSSap, bCROSScp, aCROSSbp;\n\n\t\taX = cx - bx;  aY = cy - by;\n\t\tbX = ax - cx;  bY = ay - cy;\n\t\tcX = bx - ax;  cY = by - ay;\n\n\t\tfor ( p = 0; p < n; p ++ ) {\n\n\t\t\tpx = contour[ verts[ p ] ].x\n\t\t\tpy = contour[ verts[ p ] ].y\n\n\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\n\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\n\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\n\n\t\t\tapx = px - ax;  apy = py - ay;\n\t\t\tbpx = px - bx;  bpy = py - by;\n\t\t\tcpx = px - cx;  cpy = py - cy;\n\n\t\t\t// see if p is inside triangle abc\n\n\t\t\taCROSSbp = aX * bpy - aY * bpx;\n\t\t\tcCROSSap = cX * apy - cY * apx;\n\t\t\tbCROSScp = bX * cpy - bY * cpx;\n\n\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n\n\tnamespace.Triangulate = process;\n\tnamespace.Triangulate.area = area;\n\n\treturn namespace;\n\n} )( THREE.FontUtils );\n\n// To use the typeface.js face files, hook up the API\nself._typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\nTHREE.typeface_js = self._typeface_js;\n\n// File:src/extras/audio/Audio.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Audio = function ( listener ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.context = listener.context;\n\tthis.source = this.context.createBufferSource();\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( this.context.destination );\n\n\tthis.panner = this.context.createPanner();\n\tthis.panner.connect( this.gain );\n\n};\n\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Audio.prototype.constructor = THREE.Audio;\n\nTHREE.Audio.prototype.load = function ( file ) {\n\n\tvar scope = this;\n\n\tvar request = new XMLHttpRequest();\n\trequest.open( 'GET', file, true );\n\trequest.responseType = 'arraybuffer';\n\trequest.onload = function ( e ) {\n\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\n\n\t\t\tscope.source.buffer = buffer;\n\t\t\tscope.source.connect( scope.panner );\n\t\t\tscope.source.start( 0 );\n\n\t\t} );\n\n\t};\n\trequest.send();\n\n\treturn this;\n\n};\n\nTHREE.Audio.prototype.setLoop = function ( value ) {\n\n\tthis.source.loop = value;\n\n};\n\nTHREE.Audio.prototype.setRefDistance = function ( value ) {\n\n\tthis.panner.refDistance = value;\n\n};\n\nTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\n\n\tthis.panner.rolloffFactor = value;\n\n};\n\nTHREE.Audio.prototype.updateMatrixWorld = ( function () {\n\n\tvar position = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\n\n\t};\n\n} )();\n\n// File:src/extras/audio/AudioListener.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AudioListener = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'AudioListener';\n\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\n\n};\n\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\n\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\n\n\tvar position = new THREE.Vector3();\n\tvar quaternion = new THREE.Quaternion();\n\tvar scale = new THREE.Vector3();\n\n\tvar orientation = new THREE.Vector3();\n\tvar velocity = new THREE.Vector3();\n\n\tvar positionPrev = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tvar listener = this.context.listener;\n\t\tvar up = this.up;\n\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\n\n\t\torientation.set( 0, 0, -1 ).applyQuaternion( quaternion );\n\t\tvelocity.subVectors( position, positionPrev );\n\n\t\tlistener.setPosition( position.x, position.y, position.z );\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\n\t\tlistener.setVelocity( velocity.x, velocity.y, velocity.z );\n\n\t\tpositionPrev.copy( position );\n\n\t};\n\n} )();\n\n// File:src/extras/core/Curve.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of Curve methods\n * .getPoint(t), getTangent(t)\n * .getPointAt(u), getTagentAt(u)\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following classes subclasses THREE.Curve:\n *\n * -- 2d classes --\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.CubicBezierCurve\n * THREE.SplineCurve\n * THREE.ArcCurve\n * THREE.EllipseCurve\n *\n * -- 3d classes --\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n * THREE.CubicBezierCurve3\n * THREE.SplineCurve3\n * THREE.ClosedSplineCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nTHREE.Curve = function () {\n\n};\n\n// Virtual base class method to overwrite and implement in subclasses\n//\t- t [0 .. 1]\n\nTHREE.Curve.prototype.getPoint = function ( t ) {\n\n\tconsole.log( \"Warning, getPoint() not implemented!\" );\n\treturn null;\n\n};\n\n// Get point at relative position in curve according to arc length\n// - u [0 .. 1]\n\nTHREE.Curve.prototype.getPointAt = function ( u ) {\n\n\tvar t = this.getUtoTmapping( u );\n\treturn this.getPoint( t );\n\n};\n\n// Get sequence of points using getPoint( t )\n\nTHREE.Curve.prototype.getPoints = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = 5;\n\n\tvar d, pts = [];\n\n\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\tpts.push( this.getPoint( d / divisions ) );\n\n\t}\n\n\treturn pts;\n\n};\n\n// Get sequence of points using getPointAt( u )\n\nTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = 5;\n\n\tvar d, pts = [];\n\n\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\tpts.push( this.getPointAt( d / divisions ) );\n\n\t}\n\n\treturn pts;\n\n};\n\n// Get total curve arc length\n\nTHREE.Curve.prototype.getLength = function () {\n\n\tvar lengths = this.getLengths();\n\treturn lengths[ lengths.length - 1 ];\n\n};\n\n// Get list of cumulative segment lengths\n\nTHREE.Curve.prototype.getLengths = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = (this.__arcLengthDivisions) ? (this.__arcLengthDivisions): 200;\n\n\tif ( this.cacheArcLengths\n\t\t&& ( this.cacheArcLengths.length == divisions + 1 )\n\t\t&& ! this.needsUpdate) {\n\n\t\t//console.log( \"cached\", this.cacheArcLengths );\n\t\treturn this.cacheArcLengths;\n\n\t}\n\n\tthis.needsUpdate = false;\n\n\tvar cache = [];\n\tvar current, last = this.getPoint( 0 );\n\tvar p, sum = 0;\n\n\tcache.push( 0 );\n\n\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\tcurrent = this.getPoint ( p / divisions );\n\t\tsum += current.distanceTo( last );\n\t\tcache.push( sum );\n\t\tlast = current;\n\n\t}\n\n\tthis.cacheArcLengths = cache;\n\n\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\n\n};\n\n\nTHREE.Curve.prototype.updateArcLengths = function() {\n\tthis.needsUpdate = true;\n\tthis.getLengths();\n};\n\n// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equi distance\n\nTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\n\n\tvar arcLengths = this.getLengths();\n\n\tvar i = 0, il = arcLengths.length;\n\n\tvar targetArcLength; // The targeted u distance value to get\n\n\tif ( distance ) {\n\n\t\ttargetArcLength = distance;\n\n\t} else {\n\n\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t}\n\n\t//var time = Date.now();\n\n\t// binary search for the index with largest value smaller than target u distance\n\n\tvar low = 0, high = il - 1, comparison;\n\n\twhile ( low <= high ) {\n\n\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\tif ( comparison < 0 ) {\n\n\t\t\tlow = i + 1;\n\t\t\tcontinue;\n\n\t\t} else if ( comparison > 0 ) {\n\n\t\t\thigh = i - 1;\n\t\t\tcontinue;\n\n\t\t} else {\n\n\t\t\thigh = i;\n\t\t\tbreak;\n\n\t\t\t// DONE\n\n\t\t}\n\n\t}\n\n\ti = high;\n\n\t//console.log('b' , i, low, high, Date.now()- time);\n\n\tif ( arcLengths[ i ] == targetArcLength ) {\n\n\t\tvar t = i / ( il - 1 );\n\t\treturn t;\n\n\t}\n\n\t// we could get finer grain at lengths, or use simple interpolatation between two points\n\n\tvar lengthBefore = arcLengths[ i ];\n    var lengthAfter = arcLengths[ i + 1 ];\n\n    var segmentLength = lengthAfter - lengthBefore;\n\n    // determine where we are between the 'before' and 'after' points\n\n    var segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n    // add that fractional amount to t\n\n    var t = ( i + segmentFraction ) / ( il -1 );\n\n\treturn t;\n\n};\n\n// Returns a unit vector tangent at t\n// In case any sub curve does not implement its tangent derivation,\n// 2 points a small delta apart will be used to find its gradient\n// which seems to give a reasonable approximation\n\nTHREE.Curve.prototype.getTangent = function( t ) {\n\n\tvar delta = 0.0001;\n\tvar t1 = t - delta;\n\tvar t2 = t + delta;\n\n\t// Capping in case of danger\n\n\tif ( t1 < 0 ) t1 = 0;\n\tif ( t2 > 1 ) t2 = 1;\n\n\tvar pt1 = this.getPoint( t1 );\n\tvar pt2 = this.getPoint( t2 );\n\n\tvar vec = pt2.clone().sub(pt1);\n\treturn vec.normalize();\n\n};\n\n\nTHREE.Curve.prototype.getTangentAt = function ( u ) {\n\n\tvar t = this.getUtoTmapping( u );\n\treturn this.getTangent( t );\n\n};\n\n\n\n\n\n/**************************************************************\n *\tUtils\n **************************************************************/\n\nTHREE.Curve.Utils = {\n\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\n\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\n\n\t},\n\n\t// Puay Bing, thanks for helping with this derivative!\n\n\ttangentCubicBezier: function (t, p0, p1, p2, p3 ) {\n\n\t\treturn - 3 * p0 * (1 - t) * (1 - t)  +\n\t\t\t3 * p1 * (1 - t) * (1-t) - 6 *t *p1 * (1-t) +\n\t\t\t6 * t *  p2 * (1-t) - 3 * t * t * p2 +\n\t\t\t3 * t * t * p3;\n\n\t},\n\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\n\n\t\t// To check if my formulas are correct\n\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3  3t^2 + 1\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3  2t^2 + t\n\t\tvar h01 = - 6 * t * t + 6 * t; \t//  2t3 + 3t2\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3  t2\n\n\t\treturn h00 + h10 + h01 + h11;\n\n\t},\n\n\t// Catmull-Rom\n\n\tinterpolate: function( p0, p1, p2, p3, t ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\n\t\tvar t2 = t * t;\n\t\tvar t3 = t * t2;\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t}\n\n};\n\n\n// TODO: Transformation for Curves?\n\n/**************************************************************\n *\t3D Curves\n **************************************************************/\n\n// A Factory method for creating new curve subclasses\n\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\n\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\n\tconstructor.prototype.constructor = constructor;\n\tconstructor.prototype.getPoint = getPointFunc;\n\n\treturn constructor;\n\n};\n\n// File:src/extras/core/CurvePath.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nTHREE.CurvePath = function () {\n\n\tthis.curves = [];\n\tthis.bends = [];\n\t\n\tthis.autoClose = false; // Automatically closes the path\n};\n\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\nTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\n\nTHREE.CurvePath.prototype.add = function ( curve ) {\n\n\tthis.curves.push( curve );\n\n};\n\nTHREE.CurvePath.prototype.checkConnection = function() {\n\t// TODO\n\t// If the ending of curve is not connected to the starting\n\t// or the next curve, then, this is not a real path\n};\n\nTHREE.CurvePath.prototype.closePath = function() {\n\t// TODO Test\n\t// and verify for vector3 (needs to implement equals)\n\t// Add a line curve if start and end of lines are not connected\n\tvar startPoint = this.curves[0].getPoint(0);\n\tvar endPoint = this.curves[this.curves.length-1].getPoint(1);\n\t\n\tif (! startPoint.equals(endPoint)) {\n\t\tthis.curves.push( new THREE.LineCurve(endPoint, startPoint) );\n\t}\n\t\n};\n\n// To get accurate point with reference to\n// entire path distance at time t,\n// following has to be done:\n\n// 1. Length of each sub path have to be known\n// 2. Locate and identify type of curve\n// 3. Get t for the curve\n// 4. Return curve.getPointAt(t')\n\nTHREE.CurvePath.prototype.getPoint = function( t ) {\n\n\tvar d = t * this.getLength();\n\tvar curveLengths = this.getCurveLengths();\n\tvar i = 0, diff, curve;\n\n\t// To think about boundaries points.\n\n\twhile ( i < curveLengths.length ) {\n\n\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\tdiff = curveLengths[ i ] - d;\n\t\t\tcurve = this.curves[ i ];\n\n\t\t\tvar u = 1 - diff / curve.getLength();\n\n\t\t\treturn curve.getPointAt( u );\n\n\t\t\tbreak;\n\t\t}\n\n\t\ti ++;\n\n\t}\n\n\treturn null;\n\n\t// loop where sum != 0, sum > d , sum+1 <d\n\n};\n\n/*\nTHREE.CurvePath.prototype.getTangent = function( t ) {\n};*/\n\n\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n// getPoint() depends on getLength\n\nTHREE.CurvePath.prototype.getLength = function() {\n\n\tvar lens = this.getCurveLengths();\n\treturn lens[ lens.length - 1 ];\n\n};\n\n// Compute lengths and cache them\n// We cannot overwrite getLengths() because UtoT mapping uses it.\n\nTHREE.CurvePath.prototype.getCurveLengths = function() {\n\n\t// We use cache values if curves and cache array are same length\n\n\tif ( this.cacheLengths && this.cacheLengths.length == this.curves.length ) {\n\n\t\treturn this.cacheLengths;\n\n\t};\n\n\t// Get length of subsurve\n\t// Push sums into cached array\n\n\tvar lengths = [], sums = 0;\n\tvar i, il = this.curves.length;\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tsums += this.curves[ i ].getLength();\n\t\tlengths.push( sums );\n\n\t}\n\n\tthis.cacheLengths = lengths;\n\n\treturn lengths;\n\n};\n\n\n\n// Returns min and max coordinates\n\nTHREE.CurvePath.prototype.getBoundingBox = function () {\n\n\tvar points = this.getPoints();\n\n\tvar maxX, maxY, maxZ;\n\tvar minX, minY, minZ;\n\n\tmaxX = maxY = Number.NEGATIVE_INFINITY;\n\tminX = minY = Number.POSITIVE_INFINITY;\n\n\tvar p, i, il, sum;\n\n\tvar v3 = points[0] instanceof THREE.Vector3;\n\n\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\n\n\tfor ( i = 0, il = points.length; i < il; i ++ ) {\n\n\t\tp = points[ i ];\n\n\t\tif ( p.x > maxX ) maxX = p.x;\n\t\telse if ( p.x < minX ) minX = p.x;\n\n\t\tif ( p.y > maxY ) maxY = p.y;\n\t\telse if ( p.y < minY ) minY = p.y;\n\n\t\tif ( v3 ) {\n\n\t\t\tif ( p.z > maxZ ) maxZ = p.z;\n\t\t\telse if ( p.z < minZ ) minZ = p.z;\n\n\t\t}\n\n\t\tsum.add( p );\n\n\t}\n\n\tvar ret = {\n\n\t\tminX: minX,\n\t\tminY: minY,\n\t\tmaxX: maxX,\n\t\tmaxY: maxY\n\n\t};\n\n\tif ( v3 ) {\n\n\t\tret.maxZ = maxZ;\n\t\tret.minZ = minZ;\n\n\t}\n\n\treturn ret;\n\n};\n\n/**************************************************************\n *\tCreate Geometries Helpers\n **************************************************************/\n\n/// Generate geometry from path points (for Line or Points objects)\n\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\n\n\tvar pts = this.getPoints( divisions, true );\n\treturn this.createGeometry( pts );\n\n};\n\n// Generate geometry from equidistance sampling along the path\n\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\n\n\tvar pts = this.getSpacedPoints( divisions, true );\n\treturn this.createGeometry( pts );\n\n};\n\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\n\n\tvar geometry = new THREE.Geometry();\n\n\tfor ( var i = 0; i < points.length; i ++ ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0) );\n\n\t}\n\n\treturn geometry;\n\n};\n\n\n/**************************************************************\n *\tBend / Wrap Helper Methods\n **************************************************************/\n\n// Wrap path / Bend modifiers?\n\nTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\n\n\tthis.bends.push( bendpath );\n\n};\n\nTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\n\n\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\n\tvar i, il;\n\n\tif ( ! bends ) {\n\n\t\tbends = this.bends;\n\n\t}\n\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\n\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\n\n\t}\n\n\treturn oldPts;\n\n};\n\nTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\n\n\tvar oldPts = this.getSpacedPoints( segments );\n\n\tvar i, il;\n\n\tif ( ! bends ) {\n\n\t\tbends = this.bends;\n\n\t}\n\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\n\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\n\n\t}\n\n\treturn oldPts;\n\n};\n\n// This returns getPoints() bend/wrapped around the contour of a path.\n// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\n\nTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\n\n\tvar bounds = this.getBoundingBox();\n\n\tvar i, il, p, oldX, oldY, xNorm;\n\n\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\n\n\t\tp = oldPts[ i ];\n\n\t\toldX = p.x;\n\t\toldY = p.y;\n\n\t\txNorm = oldX / bounds.maxX;\n\n\t\t// If using actual distance, for length > path, requires line extrusions\n\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\n\n\t\txNorm = path.getUtoTmapping( xNorm, oldX );\n\n\t\t// check for out of bounds?\n\n\t\tvar pathPt = path.getPoint( xNorm );\n\t\tvar normal = path.getTangent( xNorm );\n\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\n\n\t\tp.x = pathPt.x + normal.x;\n\t\tp.y = pathPt.y + normal.y;\n\n\t}\n\n\treturn oldPts;\n\n};\n\n\n// File:src/extras/core/Gyroscope.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Gyroscope = function () {\n\n\tTHREE.Object3D.call( this );\n\n};\n\nTHREE.Gyroscope.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Gyroscope.prototype.constructor = THREE.Gyroscope;\n\nTHREE.Gyroscope.prototype.updateMatrixWorld = ( function () {\n\n\tvar translationObject = new THREE.Vector3();\n\tvar quaternionObject = new THREE.Quaternion();\n\tvar scaleObject = new THREE.Vector3();\n\n\tvar translationWorld = new THREE.Vector3();\n\tvar quaternionWorld = new THREE.Quaternion();\n\tvar scaleWorld = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tthis.matrixAutoUpdate && this.updateMatrix();\n\n\t\t// update matrixWorld\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t\tthis.matrixWorld.decompose( translationWorld, quaternionWorld, scaleWorld );\n\t\t\t\tthis.matrix.decompose( translationObject, quaternionObject, scaleObject );\n\n\t\t\t\tthis.matrixWorld.compose( translationWorld, quaternionObject, scaleWorld );\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t}\n\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t};\n\t\n}() );\n\n// File:src/extras/core/Path.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n *\n **/\n\nTHREE.Path = function ( points ) {\n\n\tTHREE.CurvePath.call(this);\n\n\tthis.actions = [];\n\n\tif ( points ) {\n\n\t\tthis.fromPoints( points );\n\n\t}\n\n};\n\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\nTHREE.Path.prototype.constructor = THREE.Path;\n\nTHREE.PathActions = {\n\n\tMOVE_TO: 'moveTo',\n\tLINE_TO: 'lineTo',\n\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\n\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\n\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-rom spline\n\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\n\tELLIPSE: 'ellipse'\n};\n\n// TODO Clean up PATH API\n\n// Create path using straight lines to connect all points\n// - vectors: array of Vector2\n\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\n\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\n\n\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\n\n\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\n\n\t};\n\n};\n\n// startPath() endPath()?\n\nTHREE.Path.prototype.moveTo = function ( x, y ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.lineTo = function ( x, y ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\n\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\n\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n//---\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\n\tArray.prototype.push.apply( npts, pts );\n\n\tvar curve = new THREE.SplineCurve( npts );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\n\n};\n\n// FUTURE: Change the API or follow canvas API?\n\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tthis.absarc(aX + x0, aY + y0, aRadius,\n\t\taStartAngle, aEndAngle, aClockwise );\n\n };\n\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\tthis.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n };\n\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tthis.absellipse(aX + x0, aY + y0, xRadius, yRadius,\n\t\taStartAngle, aEndAngle, aClockwise );\n\n };\n\n\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise );\n\tthis.curves.push( curve );\n\n\tvar lastPoint = curve.getPoint(1);\n\targs.push(lastPoint.x);\n\targs.push(lastPoint.y);\n\n\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\n\n };\n\nTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\n\n\tif ( ! divisions ) divisions = 40;\n\n\tvar points = [];\n\n\tfor ( var i = 0; i < divisions; i ++ ) {\n\n\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\n\n\t}\n\n\t// if ( closedPath ) {\n\t//\n\t// \tpoints.push( points[ 0 ] );\n\t//\n\t// }\n\n\treturn points;\n\n};\n\n/* Return an array of vectors based on contour of the path */\n\nTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\n\n\tif (this.useSpacedPoints) {\n\t\tconsole.log('tata');\n\t\treturn this.getSpacedPoints( divisions, closedPath );\n\t}\n\n\tdivisions = divisions || 12;\n\n\tvar points = [];\n\n\tvar i, il, item, action, args;\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\n\t\tlaste, j,\n\t\tt, tx, ty;\n\n\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\n\n\t\titem = this.actions[ i ];\n\n\t\taction = item.action;\n\t\targs = item.args;\n\n\t\tswitch( action ) {\n\n\t\tcase THREE.PathActions.MOVE_TO:\n\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.LINE_TO:\n\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\n\n\t\t\tcpx  = args[ 2 ];\n\t\t\tcpy  = args[ 3 ];\n\n\t\t\tcpx1 = args[ 0 ];\n\t\t\tcpy1 = args[ 1 ];\n\n\t\t\tif ( points.length > 0 ) {\n\n\t\t\t\tlaste = points[ points.length - 1 ];\n\n\t\t\t\tcpx0 = laste.x;\n\t\t\t\tcpy0 = laste.y;\n\n\t\t\t} else {\n\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\n\n\t\t\t}\n\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\n\n\t\t\t\tt = j / divisions;\n\n\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\n\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\n\n\t\t\tcpx  = args[ 4 ];\n\t\t\tcpy  = args[ 5 ];\n\n\t\t\tcpx1 = args[ 0 ];\n\t\t\tcpy1 = args[ 1 ];\n\n\t\t\tcpx2 = args[ 2 ];\n\t\t\tcpy2 = args[ 3 ];\n\n\t\t\tif ( points.length > 0 ) {\n\n\t\t\t\tlaste = points[ points.length - 1 ];\n\n\t\t\t\tcpx0 = laste.x;\n\t\t\t\tcpy0 = laste.y;\n\n\t\t\t} else {\n\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\n\n\t\t\t}\n\n\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\n\n\t\t\t\tt = j / divisions;\n\n\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.CSPLINE_THRU:\n\n\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\n\t\t\tvar spts = [ last ];\n\n\t\t\tvar n = divisions * args[ 0 ].length;\n\n\t\t\tspts = spts.concat( args[ 0 ] );\n\n\t\t\tvar spline = new THREE.SplineCurve( spts );\n\n\t\t\tfor ( j = 1; j <= n; j ++ ) {\n\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) ) ;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.ARC:\n\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\n\t\t\t\taRadius = args[ 2 ],\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\n\t\t\t\taClockwise = !! args[ 5 ];\n\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\n\t\t\tvar angle;\n\t\t\tvar tdivisions = divisions * 2;\n\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\n\n\t\t\t\tt = j / tdivisions;\n\n\t\t\t\tif ( ! aClockwise ) {\n\n\t\t\t\t\tt = 1 - t;\n\n\t\t\t\t}\n\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\n\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\n\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\t//console.log(points);\n\n\t\t  break;\n\t\t  \n\t\tcase THREE.PathActions.ELLIPSE:\n\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\n\t\t\t\txRadius = args[ 2 ],\n\t\t\t\tyRadius = args[ 3 ],\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\n\t\t\t\taClockwise = !! args[ 6 ];\n\n\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\n\t\t\tvar angle;\n\t\t\tvar tdivisions = divisions * 2;\n\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\n\n\t\t\t\tt = j / tdivisions;\n\n\t\t\t\tif ( ! aClockwise ) {\n\n\t\t\t\t\tt = 1 - t;\n\n\t\t\t\t}\n\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\n\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\n\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\t//console.log(points);\n\n\t\t  break;\n\n\t\t} // end switch\n\n\t}\n\n\n\n\t// Normalize to remove the closing point by default.\n\tvar lastPoint = points[ points.length - 1];\n\tvar EPSILON = 0.0000000001;\n\tif ( Math.abs(lastPoint.x - points[ 0 ].x) < EPSILON &&\n\t\t\t Math.abs(lastPoint.y - points[ 0 ].y) < EPSILON)\n\t\tpoints.splice( points.length - 1, 1);\n\tif ( closedPath ) {\n\n\t\tpoints.push( points[ 0 ] );\n\n\t}\n\n\treturn points;\n\n};\n\n//\n// Breaks path into shapes\n//\n//\tAssumptions (if parameter isCCW==true the opposite holds):\n//\t- solid shapes are defined clockwise (CW)\n//\t- holes are defined counterclockwise (CCW)\n//\n//\tIf parameter noHoles==true:\n//  - all subPaths are regarded as solid shapes\n//  - definition order CW/CCW has no relevance\n//\n\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\n\n\tfunction extractSubpaths( inActions ) {\n\n\t\tvar i, il, item, action, args;\n\n\t\tvar subPaths = [], lastPath = new THREE.Path();\n\n\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\n\n\t\t\titem = inActions[ i ];\n\n\t\t\targs = item.args;\n\t\t\taction = item.action;\n\n\t\t\tif ( action == THREE.PathActions.MOVE_TO ) {\n\n\t\t\t\tif ( lastPath.actions.length != 0 ) {\n\n\t\t\t\t\tsubPaths.push( lastPath );\n\t\t\t\t\tlastPath = new THREE.Path();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlastPath[ action ].apply( lastPath, args );\n\n\t\t}\n\n\t\tif ( lastPath.actions.length != 0 ) {\n\n\t\t\tsubPaths.push( lastPath );\n\n\t\t}\n\n\t\t// console.log(subPaths);\n\n\t\treturn\tsubPaths;\n\t}\n\n\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\tvar shapes = [];\n\n\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\n\n\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\tvar tmpShape = new THREE.Shape();\n\t\t\ttmpShape.actions = tmpPath.actions;\n\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\tshapes.push( tmpShape );\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\t};\n\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\t\tvar EPSILON = 0.0000000001;\n\n\t\tvar polyLen = inPolygon.length;\n\n\t\t// inPt on polygon contour => immediate success    or\n\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t//  with the horizontal line through inPt, left of inPt\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\tvar inside = false;\n\t\tfor( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\n\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\tif ( Math.abs(edgeDy) > EPSILON ) {\t\t\t// not parallel\n\t\t\t\tif ( edgeDy < 0 ) {\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\t\t\t\t}\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\tif ( inPt.y == edgeLowPt.y ) {\n\t\t\t\t\tif ( inPt.x == edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\t\t\t\t} else {\n\t\t\t\t\tvar perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\n\t\t\t\t\tif ( perpEdge == 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\t\t\t\t}\n\t\t\t} else {\t\t// parallel or colinear\n\t\t\t\tif ( inPt.y != edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t// egde lies on the same horizontal line as inPt\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t// continue;\n\t\t\t}\n\t\t}\n\n\t\treturn\tinside;\n\t}\n\n\n\tvar subPaths = extractSubpaths( this.actions );\n\tif ( subPaths.length == 0 ) return [];\n\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\tif ( subPaths.length == 1) {\n\n\t\ttmpPath = subPaths[0];\n\t\ttmpShape = new THREE.Shape();\n\t\ttmpShape.actions = tmpPath.actions;\n\t\ttmpShape.curves = tmpPath.curves;\n\t\tshapes.push( tmpShape );\n\t\treturn shapes;\n\n\t}\n\n\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t// console.log(\"Holes first\", holesFirst);\n\t\n\tvar betterShapeHoles = [];\n\tvar newShapes = [];\n\tvar newShapeHoles = [];\n\tvar mainIdx = 0;\n\tvar tmpPoints;\n\n\tnewShapes[mainIdx] = undefined;\n\tnewShapeHoles[mainIdx] = [];\n\n\tvar i, il;\n\n\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\n\n\t\ttmpPath = subPaths[ i ];\n\t\ttmpPoints = tmpPath.getPoints();\n\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\n\t\tsolid = isCCW ? ! solid : solid;\n\n\t\tif ( solid ) {\n\n\t\t\tif ( (! holesFirst ) && ( newShapes[mainIdx] ) )\tmainIdx ++;\n\n\t\t\tnewShapes[mainIdx] = { s: new THREE.Shape(), p: tmpPoints };\n\t\t\tnewShapes[mainIdx].s.actions = tmpPath.actions;\n\t\t\tnewShapes[mainIdx].s.curves = tmpPath.curves;\n\t\t\t\n\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\tnewShapeHoles[mainIdx] = [];\n\n\t\t\t//console.log('cw', i);\n\n\t\t} else {\n\n\t\t\tnewShapeHoles[mainIdx].push( { h: tmpPath, p: tmpPoints[0] } );\n\n\t\t\t//console.log('ccw', i);\n\n\t\t}\n\n\t}\n\n\t// only Holes? -> probably all Shapes with wrong orientation\n\tif ( ! newShapes[0] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\tif ( newShapes.length > 1 ) {\n\t\tvar ambigious = false;\n\t\tvar toChange = [];\n\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\t\t\tbetterShapeHoles[sIdx] = [];\n\t\t}\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\t\t\tvar sh = newShapes[sIdx];\n\t\t\tvar sho = newShapeHoles[sIdx];\n\t\t\tfor (var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\t\t\t\tvar ho = sho[hIdx];\n\t\t\t\tvar hole_unassigned = true;\n\t\t\t\tfor (var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[s2Idx].p ) ) {\n\t\t\t\t\t\tif ( sIdx != s2Idx )\t\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\tif ( hole_unassigned ) {\n\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\tbetterShapeHoles[s2Idx].push( ho );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tambigious = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( hole_unassigned ) { betterShapeHoles[sIdx].push( ho ); }\n\t\t\t}\n\t\t}\n\t\t// console.log(\"ambigious: \", ambigious);\n\t\tif ( toChange.length > 0 ) {\n\t\t\t// console.log(\"to change: \", toChange);\n\t\t\tif (! ambigious)\tnewShapeHoles = betterShapeHoles;\n\t\t}\n\t}\n\n\tvar tmpHoles, j, jl;\n\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\n\t\ttmpShape = newShapes[i].s;\n\t\tshapes.push( tmpShape );\n\t\ttmpHoles = newShapeHoles[i];\n\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\t\t\ttmpShape.holes.push( tmpHoles[j].h );\n\t\t}\n\t}\n\n\t//console.log(\"shape\", shapes);\n\n\treturn shapes;\n\n};\n\n// File:src/extras/core/Shape.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nTHREE.Shape = function () {\n\n\tTHREE.Path.apply( this, arguments );\n\tthis.holes = [];\n\n};\n\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\nTHREE.Shape.prototype.constructor = THREE.Shape;\n\n// Convenience method to return ExtrudeGeometry\n\nTHREE.Shape.prototype.extrude = function ( options ) {\n\n\tvar extruded = new THREE.ExtrudeGeometry( this, options );\n\treturn extruded;\n\n};\n\n// Convenience method to return ShapeGeometry\n\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\n\n\tvar geometry = new THREE.ShapeGeometry( this, options );\n\treturn geometry;\n\n};\n\n// Get points of holes\n\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\n\n\tvar i, il = this.holes.length, holesPts = [];\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\n\n\t}\n\n\treturn holesPts;\n\n};\n\n// Get points of holes (spaced by regular distance)\n\nTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\n\n\tvar i, il = this.holes.length, holesPts = [];\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\n\n\t}\n\n\treturn holesPts;\n\n};\n\n\n// Get points of shape and holes (keypoints based on segments parameter)\n\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\n\n\treturn {\n\n\t\tshape: this.getTransformedPoints( divisions ),\n\t\tholes: this.getPointsHoles( divisions )\n\n\t};\n\n};\n\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\n\n\tif (this.useSpacedPoints) {\n\t\treturn this.extractAllSpacedPoints(divisions);\n\t}\n\n\treturn this.extractAllPoints(divisions);\n\n};\n\n//\n// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\n//\n// \treturn {\n//\n// \t\tshape: this.transform( bend, divisions ),\n// \t\tholes: this.getPointsHoles( divisions, bend )\n//\n// \t};\n//\n// };\n\n// Get points of shape and holes (spaced by regular distance)\n\nTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\n\n\treturn {\n\n\t\tshape: this.getTransformedSpacedPoints( divisions ),\n\t\tholes: this.getSpacedPointsHoles( divisions )\n\n\t};\n\n};\n\n/**************************************************************\n *\tUtils\n **************************************************************/\n\nTHREE.Shape.Utils = {\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\n\t\t\t// inOtherPt needs to be colinear to the inSegment\n\t\t\tif ( inSegPt1.x != inSegPt2.x ) {\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\n\t\t\t\t} else {\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\n\t\t\t\t} else {\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\n\t\t\tvar EPSILON = 0.0000000001;\n\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\n\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\n\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\n\n\t\t\tif ( Math.abs(limit) > EPSILON ) {\t\t\t// not parallel\n\n\t\t\t\tvar perpSeg2;\n\t\t\t\tif ( limit > 0 ) {\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\n\t\t\t\t} else {\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\n\t\t\t\t}\n\n\t\t\t\t// i.e. to reduce rounding errors\n\t\t\t\t// intersection at endpoint of segment#1?\n\t\t\t\tif ( perpSeg2 == 0 ) {\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\n\t\t\t\t}\n\t\t\t\tif ( perpSeg2 == limit ) {\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\n\t\t\t\t\treturn  [ inSeg1Pt2 ];\n\t\t\t\t}\n\t\t\t\t// intersection at endpoint of segment#2?\n\t\t\t\tif ( perpSeg1 == 0 )\t\treturn  [ inSeg2Pt1 ];\n\t\t\t\tif ( perpSeg1 == limit )\treturn  [ inSeg2Pt2 ];\n\n\t\t\t\t// return real intersection point\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\n\n\t\t\t} else {\t\t// parallel or colinear\n\t\t\t\tif ( ( perpSeg1 != 0 ) ||\n\t\t\t\t\t ( seg2dy * seg1seg2dx != seg2dx * seg1seg2dy ) ) \t\t\treturn [];\n\n\t\t\t\t// they are collinear or degenerate\n\t\t\t\tvar seg1Pt = ( (seg1dx == 0) && (seg1dy == 0) );\t// segment1 ist just a point?\n\t\t\t\tvar seg2Pt = ( (seg2dx == 0) && (seg2dy == 0) );\t// segment2 ist just a point?\n\t\t\t\t// both segments are points\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\n\t\t\t\t\tif ( (inSeg1Pt1.x != inSeg2Pt1.x) ||\n\t\t\t\t\t\t (inSeg1Pt1.y != inSeg2Pt1.y) )\t\treturn [];   \t// they are distinct  points\n\t\t\t\t\treturn  [ inSeg1Pt1 ];                 \t\t\t\t\t// they are the same point\n\t\t\t\t}\n\t\t\t\t// segment#1  is a single point\n\t\t\t\tif ( seg1Pt ) {\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\n\t\t\t\t}\n\t\t\t\t// segment#2  is a single point\n\t\t\t\tif ( seg2Pt ) {\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\n\t\t\t\t\treturn  [ inSeg2Pt1 ];\n\t\t\t\t}\n\n\t\t\t\t// they are collinear segments, which might overlap\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\n\t\t\t\tif (seg1dx != 0) {\t\t// the segments are NOT on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\n\t\t\t\t\t}\n\t\t\t\t} else {\t\t\t\t// the segments are on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\n\t\t\t\t\tif ( seg1maxVal == seg2minVal )\t{\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg2min ];\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\n\t\t\t\t} else {\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\n\t\t\t\t\tif ( seg1minVal == seg2maxVal )\t{\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg1min ];\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\n\t\t\t// The order of legs is important\n\n\t\t\tvar EPSILON = 0.0000000001;\n\n\t\t\t// translation of all points, so that Vertex is at (0,0)\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\n\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\n\n\t\t\tif ( Math.abs(from2toAngle) > EPSILON ) {\t\t\t// angle != 180 deg.\n\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\n\n\t\t\t\tif ( from2toAngle > 0 ) {\t\t\t\t// main angle < 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\n\t\t\t\t} else {\t\t\t\t\t\t\t\t// main angle > 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\n\t\t\t\t}\n\t\t\t} else {\t\t\t\t\t\t\t\t\t\t// angle == 180 deg.\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\n\t\t\t\treturn\t( from2otherAngle > 0 );\n\t\t\t}\n\t\t}\n\n\n\t\tfunction removeHoles( contour, holes ) {\n\n\t\t\tvar shape = contour.concat(); // work on this shape\n\t\t\tvar hole;\n\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\n\t\t\t\t// Check if hole point lies within angle around shape point\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\n\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\n\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\n\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[inShapeIdx], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[inHoleIdx] );\n\t\t\t\tif (! insideAngle ) {\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\n\t\t\t\t\treturn\tfalse;\n\t\t\t\t}\n\n\t\t\t\t// Check if shape point lies within angle around hole point\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\n\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\n\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\n\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[inHoleIdx], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[inShapeIdx] );\n\t\t\t\tif (! insideAngle ) {\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\n\t\t\t\t\treturn\tfalse;\n\t\t\t\t}\n\n\t\t\t\treturn\ttrue;\n\t\t\t}\n\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\n\t\t\t\t// checks for intersections with shape edges\n\t\t\t\tvar sIdx, nextIdx, intersection;\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\n\t\t\t\t\tnextIdx = sIdx+1; nextIdx %= shape.length;\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[sIdx], shape[nextIdx], true );\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\t\t\t\t}\n\n\t\t\t\treturn\tfalse;\n\t\t\t}\n\n\t\t\tvar indepHoles = [];\n\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\n\t\t\t\t// checks for intersections with hole edges\n\t\t\t\tvar ihIdx, chkHole,\n\t\t\t\t\thIdx, nextIdx, intersection;\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\n\t\t\t\t\tchkHole = holes[indepHoles[ihIdx]];\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\n\t\t\t\t\t\tnextIdx = hIdx+1; nextIdx %= chkHole.length;\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[hIdx], chkHole[nextIdx], true );\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn\tfalse;\n\t\t\t}\n\n\t\t\tvar holeIndex, shapeIndex,\n\t\t\t\tshapePt, holePt,\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\n\t\t\t\ttmpShape1, tmpShape2,\n\t\t\t\ttmpHole1, tmpHole2;\n\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tindepHoles.push( h );\n\n\t\t\t}\n\n\t\t\tvar minShapeIndex = 0;\n\t\t\tvar counter = indepHoles.length * 2;\n\t\t\twhile ( indepHoles.length > 0 ) {\n\t\t\t\tcounter --;\n\t\t\t\tif ( counter < 0 ) {\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// search for shape-vertex and hole-vertex,\n\t\t\t\t// which can be connected without intersections\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\n\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\n\t\t\t\t\tholeIndex\t= - 1;\n\n\t\t\t\t\t// search for hole which can be reached without intersections\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\n\t\t\t\t\t\tholeIdx = indepHoles[h];\n\n\t\t\t\t\t\t// prevent multiple checks\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\n\t\t\t\t\t\tif ( failedCuts[cutKey] !== undefined )\t\t\tcontinue;\n\n\t\t\t\t\t\thole = holes[holeIdx];\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\n\t\t\t\t\t\t\tif (! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\n\n\t\t\t\t\t\t\tholeIndex = h2;\n\t\t\t\t\t\t\tindepHoles.splice(h,1);\n\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex+1 );\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex+1 );\n\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\n\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\n\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t\t\tfailedCuts[cutKey] = true;\t\t\t// remember failure\n\t\t\t\t\t}\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn shape; \t\t\t/* shape with no holes */\n\t\t}\n\n\n\t\tvar i, il, f, face,\n\t\t\tkey, index,\n\t\t\tallPointsMap = {};\n\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\n\n\t\tvar allpoints = contour.concat();\n\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tArray.prototype.push.apply( allpoints, holes[h] );\n\n\t\t}\n\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\n\n\t\t// prepare all points map\n\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\n\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\n\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\n\n\t\t\t\tconsole.log( \"Duplicate point\", key );\n\n\t\t\t}\n\n\t\t\tallPointsMap[ key ] = i;\n\n\t\t}\n\n\t\t// remove holes by cutting paths to holes and adding them to the shape\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\n\n\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\n\t\t//console.log( \"triangles\",triangles, triangles.length );\n\n\t\t// check all face vertices against all points map\n\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\n\n\t\t\tface = triangles[ i ];\n\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\n\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\n\n\t\t\t\tindex = allPointsMap[ key ];\n\n\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\tface[ f ] = index;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles.concat();\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\n\n\t},\n\n\t// Bezier Curves formulas obtained from\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\n\n\t// Quad Bezier Functions\n\n\tb2p0: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * p;\n\n\t},\n\n\tb2p1: function ( t, p ) {\n\n\t\treturn 2 * ( 1 - t ) * t * p;\n\n\t},\n\n\tb2p2: function ( t, p ) {\n\n\t\treturn t * t * p;\n\n\t},\n\n\tb2: function ( t, p0, p1, p2 ) {\n\n\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\n\n\t},\n\n\t// Cubic Bezier Functions\n\n\tb3p0: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * k * p;\n\n\t},\n\n\tb3p1: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn 3 * k * k * t * p;\n\n\t},\n\n\tb3p2: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn 3 * k * t * t * p;\n\n\t},\n\n\tb3p3: function ( t, p ) {\n\n\t\treturn t * t * t * p;\n\n\t},\n\n\tb3: function ( t, p0, p1, p2, p3 ) {\n\n\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\n\n\t}\n\n};\n\n\n// File:src/extras/curves/LineCurve.js\n\n/**************************************************************\n *\tLine\n **************************************************************/\n\nTHREE.LineCurve = function ( v1, v2 ) {\n\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\n\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\n\n\tvar point = this.v2.clone().sub(this.v1);\n\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\n\n\treturn this.getPoint( u );\n\n};\n\nTHREE.LineCurve.prototype.getTangent = function( t ) {\n\n\tvar tangent = this.v2.clone().sub(this.v1);\n\n\treturn tangent.normalize();\n\n};\n\n// File:src/extras/curves/QuadraticBezierCurve.js\n\n/**************************************************************\n *\tQuadratic Bezier curve\n **************************************************************/\n\n\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\n\n\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\n\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\n\n\treturn vector;\n\n};\n\n\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\n\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\n\n\t// returns unit vector\n\n\treturn vector.normalize();\n\n};\n\n// File:src/extras/curves/CubicBezierCurve.js\n\n/**************************************************************\n *\tCubic Bezier curve\n **************************************************************/\n\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\tthis.v3 = v3;\n\n};\n\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\n\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar tx, ty;\n\n\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\n\treturn new THREE.Vector2( tx, ty );\n\n};\n\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar tx, ty;\n\n\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\n\tvar tangent = new THREE.Vector2( tx, ty );\n\ttangent.normalize();\n\n\treturn tangent;\n\n};\n\n// File:src/extras/curves/SplineCurve.js\n\n/**************************************************************\n *\tSpline curve\n **************************************************************/\n\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\n\n\tthis.points = ( points == undefined ) ? [] : points;\n\n};\n\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\n\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\n\n\tvar points = this.points;\n\tvar point = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( point );\n\tvar weight = point - intPoint;\n\n\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ]\n\tvar point1 = points[ intPoint ]\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length -1 : intPoint + 1 ]\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length -1 : intPoint + 2 ]\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\n\treturn vector;\n\n};\n\n// File:src/extras/curves/EllipseCurve.js\n\n/**************************************************************\n *\tEllipse curve\n **************************************************************/\n\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tthis.aX = aX;\n\tthis.aY = aY;\n\n\tthis.xRadius = xRadius;\n\tthis.yRadius = yRadius;\n\n\tthis.aStartAngle = aStartAngle;\n\tthis.aEndAngle = aEndAngle;\n\n\tthis.aClockwise = aClockwise;\n\n};\n\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\n\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\n\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\n\n\tvar angle;\n\n\tif ( this.aClockwise === true ) {\n\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\n\n\t} else {\n\n\t\tangle = this.aStartAngle + t * deltaAngle;\n\n\t}\n\t\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = this.aX + this.xRadius * Math.cos( angle );\n\tvector.y = this.aY + this.yRadius * Math.sin( angle );\n\n\treturn vector;\n\n};\n\n// File:src/extras/curves/ArcCurve.js\n\n/**************************************************************\n *\tArc curve\n **************************************************************/\n\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n};\n\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\n\n// File:src/extras/curves/LineCurve3.js\n\n/**************************************************************\n *\tLine3D\n **************************************************************/\n\nTHREE.LineCurve3 = THREE.Curve.create(\n\n\tfunction ( v1, v2 ) {\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\n\t\tvector.multiplyScalar( t );\n\t\tvector.add( this.v1 );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/QuadraticBezierCurve3.js\n\n/**************************************************************\n *\tQuadratic Bezier 3D curve\n **************************************************************/\n\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\n\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/CubicBezierCurve3.js\n\n/**************************************************************\n *\tCubic Bezier 3D curve\n **************************************************************/\n\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2, v3 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/SplineCurve3.js\n\n/**************************************************************\n *\tSpline 3D curve\n **************************************************************/\n\n\nTHREE.SplineCurve3 = THREE.Curve.create(\n\n\tfunction ( points /* array of Vector3 */) {\n\n\t\tthis.points = ( points == undefined ) ? [] : points;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 1 ) * t;\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\n\t\tvar point1 = points[ intPoint ];\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/ClosedSplineCurve3.js\n\n/**************************************************************\n *\tClosed Spline 3D curve\n **************************************************************/\n\n\nTHREE.ClosedSplineCurve3 = THREE.Curve.create(\n\n\tfunction ( points /* array of Vector3 */) {\n\n\t\tthis.points = ( points == undefined ) ? [] : points;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\n\n\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\n\t\tvar point1 = points[ ( intPoint     ) % points.length ];\n\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\n\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/animation/AnimationHandler.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n */\n\nTHREE.AnimationHandler = {\n\n\tLINEAR: 0,\n\tCATMULLROM: 1,\n\tCATMULLROM_FORWARD: 2,\n\n\t//\n\n\tadd: function () { console.warn( 'THREE.AnimationHandler.add() has been deprecated.' ); },\n\tget: function () { console.warn( 'THREE.AnimationHandler.get() has been deprecated.' ); },\n\tremove: function () { console.warn( 'THREE.AnimationHandler.remove() has been deprecated.' ); },\n\n\t//\n\n\tanimations: [],\n\n\tinit: function ( data ) {\n\n\t\tif ( data.initialized === true ) return data;\n\n\t\t// loop through all keys\n\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t// remove minus times\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\n\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\n\n\t\t\t\t}\n\n\t\t\t\t// create quaternions\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\n\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// prepare morph target keys\n\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\n\n\t\t\t\t// get all used\n\n\t\t\t\tvar usedMorphTargets = {};\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\n\n\n\t\t\t\t// set all used on all frames\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tvar influences = {};\n\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\n\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\n\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// remove all keys that are on the same time\n\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\n\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\n\t\t\t\t\tk --;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// set index\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdata.initialized = true;\n\n\t\treturn data;\n\n\t},\n\n\tparse: function ( root ) {\n\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\n\n\t\t\thierarchy.push( root );\n\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\n\n\t\t};\n\n\t\t// setup hierarchy\n\n\t\tvar hierarchy = [];\n\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\n\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\n\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tparseRecurseHierarchy( root, hierarchy );\n\n\t\t}\n\n\t\treturn hierarchy;\n\n\t},\n\n\tplay: function ( animation ) {\n\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\n\n\t\t\tthis.animations.push( animation );\n\n\t\t}\n\n\t},\n\n\tstop: function ( animation ) {\n\n\t\tvar index = this.animations.indexOf( animation );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.animations.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( deltaTimeMS ) {\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].resetBlendWeights( );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/extras/animation/Animation.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Animation = function ( root, data ) {\n\n\tthis.root = root;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\n\n\tthis.currentTime = 0;\n\tthis.timeScale = 1;\n\n\tthis.isPlaying = false;\n\tthis.loop = true;\n\tthis.weight = 0;\n\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\n\n};\n\n\nTHREE.Animation.prototype.keyTypes = [ \"pos\", \"rot\", \"scl\" ];\n\n\nTHREE.Animation.prototype.play = function ( startTime, weight ) {\n\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\tthis.weight = weight !== undefined ? weight: 1;\n\n\tthis.isPlaying = true;\n\n\tthis.reset();\n\n\tTHREE.AnimationHandler.play( this );\n\n};\n\n\nTHREE.Animation.prototype.stop = function() {\n\n\tthis.isPlaying = false;\n\n\tTHREE.AnimationHandler.stop( this );\n\n};\n\nTHREE.Animation.prototype.reset = function () {\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\n\t\tif ( object.animationCache === undefined ) {\n\n\t\t\tobject.animationCache = {\n\t\t\t\tanimations: {},\n\t\t\t\tblending: {\n\t\t\t\t\tpositionWeight: 0.0,\n\t\t\t\t\tquaternionWeight: 0.0,\n\t\t\t\t\tscaleWeight: 0.0\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif ( object.animationCache.animations[this.data.name] === undefined ) {\n\n\t\t\tobject.animationCache.animations[this.data.name] = {};\n\t\t\tobject.animationCache.animations[this.data.name].prevKey = { pos: 0, rot: 0, scl: 0 };\n\t\t\tobject.animationCache.animations[this.data.name].nextKey = { pos: 0, rot: 0, scl: 0 };\n\t\t\tobject.animationCache.animations[this.data.name].originalMatrix = object.matrix;\n\n\t\t}\n\n\t\tvar animationCache = object.animationCache.animations[this.data.name];\n\n\t\t// Get keys to match our current time\n\n\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\tvar type = this.keyTypes[ t ];\n\n\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\tprevKey = nextKey;\n\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t}\n\n\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Animation.prototype.resetBlendWeights = function () {\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\n\t\tif ( object.animationCache !== undefined ) {\n\n\t\t\tobject.animationCache.blending.positionWeight = 0.0;\n\t\t\tobject.animationCache.blending.quaternionWeight = 0.0;\n\t\t\tobject.animationCache.blending.scaleWeight = 0.0;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Animation.prototype.update = (function(){\n\n\tvar points = [];\n\tvar target = new THREE.Vector3();\n\tvar newVector = new THREE.Vector3();\n\tvar newQuat = new THREE.Quaternion();\n\n\t// Catmull-Rom spline\n\n\tvar interpolateCatmullRom = function ( points, scale ) {\n\n\t\tvar c = [], v3 = [],\n\t\tpoint, intPoint, weight, w2, w3,\n\t\tpa, pb, pc, pd;\n\n\t\tpoint = ( points.length - 1 ) * scale;\n\t\tintPoint = Math.floor( point );\n\t\tweight = point - intPoint;\n\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\tc[ 1 ] = intPoint;\n\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\n\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\n\n\t\tpa = points[ c[ 0 ] ];\n\t\tpb = points[ c[ 1 ] ];\n\t\tpc = points[ c[ 2 ] ];\n\t\tpd = points[ c[ 3 ] ];\n\n\t\tw2 = weight * weight;\n\t\tw3 = weight * w2;\n\n\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\n\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\n\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\n\n\t\treturn v3;\n\n\t};\n\n\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t};\n\n\treturn function ( delta ) {\n\n\t\tif ( this.isPlaying === false ) return;\n\n\t\tthis.currentTime += delta * this.timeScale;\n\n\t\tif ( this.weight === 0 )\n\t\t\treturn;\n\n\t\t//\n\n\t\tvar duration = this.data.length;\n\n\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\n\n\t\t\tif ( this.loop ) {\n\n\t\t\t\tthis.currentTime %= duration;\n\n\t\t\t\tif ( this.currentTime < 0 )\n\t\t\t\t\tthis.currentTime += duration;\n\n\t\t\t\tthis.reset();\n\n\t\t\t} else {\n\n\t\t\t\tthis.stop();\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\t\tvar object = this.hierarchy[ h ];\n\t\t\tvar animationCache = object.animationCache.animations[this.data.name];\n\t\t\tvar blending = object.animationCache.blending;\n\n\t\t\t// loop through pos/rot/scl\n\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\t\t// get keys\n\n\t\t\t\tvar type    = this.keyTypes[ t ];\n\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\n\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\n\n\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\n\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\n\n\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t\t\t}\n\n\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\n\n\t\t\t\tvar prevXYZ = prevKey[ type ];\n\t\t\t\tvar nextXYZ = nextKey[ type ];\n\n\t\t\t\tif ( scale < 0 ) scale = 0;\n\t\t\t\tif ( scale > 1 ) scale = 1;\n\n\t\t\t\t// interpolate\n\n\t\t\t\tif ( type === \"pos\" ) {\n\n\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\n\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\t\t// blend\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\n\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\n\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\n\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\n\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\n\n\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\n\n\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t\t// blend\n\n\t\t\t\t\t\tvar vector = object.position;\n\t\t\t\t\t\t\n\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\n\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\n\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\n\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\n\n\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\n\t\t\t\t\t\t\ttarget.sub( vector );\n\t\t\t\t\t\t\ttarget.y = 0;\n\t\t\t\t\t\t\ttarget.normalize();\n\n\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\n\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( type === \"rot\" ) {\n\n\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\n\n\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\n\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\n\n\t\t\t\t\t\tobject.quaternion.copy(newQuat);\n\t\t\t\t\t\tblending.quaternionWeight = this.weight;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\n\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\n\t\t\t\t\t\tblending.quaternionWeight += this.weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( type === \"scl\" ) {\n\n\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\n\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\n\t\t\t\t\tblending.scaleWeight += this.weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n})();\n\n\n\n\n\n// Get next key with\n\nTHREE.Animation.prototype.getNextKeyWith = function ( type, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\n\n\t} else {\n\n\t\tkey = key % keys.length;\n\n\t}\n\n\tfor ( ; key < keys.length; key ++ ) {\n\n\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn this.data.hierarchy[ h ].keys[ 0 ];\n\n};\n\n// Get previous key with\n\nTHREE.Animation.prototype.getPrevKeyWith = function ( type, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\tkey = key > 0 ? key : 0;\n\n\t} else {\n\n\t\tkey = key >= 0 ? key : key + keys.length;\n\n\t}\n\n\n\tfor ( ; key >= 0; key -- ) {\n\n\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\n\n};\n\n// File:src/extras/animation/KeyFrameAnimation.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author khang duong\n * @author erik kitson\n */\n\nTHREE.KeyFrameAnimation = function ( data ) {\n\n\tthis.root = data.node;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\n\tthis.currentTime = 0;\n\tthis.timeScale = 0.001;\n\tthis.isPlaying = false;\n\tthis.isPaused = true;\n\tthis.loop = true;\n\n\t// initialize to first keyframes\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar keys = this.data.hierarchy[h].keys,\n\t\t\tsids = this.data.hierarchy[h].sids,\n\t\t\tobj = this.hierarchy[h];\n\n\t\tif ( keys.length && sids ) {\n\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\n\n\t\t\t\tvar sid = sids[ s ],\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\n\n\t\t\t\tif ( next ) {\n\n\t\t\t\t\tnext.apply( sid );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobj.matrixAutoUpdate = false;\n\t\t\tthis.data.hierarchy[h].node.updateMatrix();\n\t\t\tobj.matrixWorldNeedsUpdate = true;\n\n\t\t}\n\n\t}\n\n};\n\n\nTHREE.KeyFrameAnimation.prototype.play = function ( startTime ) {\n\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\n\tif ( this.isPlaying === false ) {\n\n\t\tthis.isPlaying = true;\n\n\t\t// reset key cache\n\n\t\tvar h, hl = this.hierarchy.length,\n\t\t\tobject,\n\t\t\tnode;\n\n\t\tfor ( h = 0; h < hl; h ++ ) {\n\n\t\t\tobject = this.hierarchy[ h ];\n\t\t\tnode = this.data.hierarchy[ h ];\n\n\t\t\tif ( node.animationCache === undefined ) {\n\n\t\t\t\tnode.animationCache = {};\n\t\t\t\tnode.animationCache.prevKey = null;\n\t\t\t\tnode.animationCache.nextKey = null;\n\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\n\n\t\t\t}\n\n\t\t\tvar keys = this.data.hierarchy[h].keys;\n\n\t\t\tif (keys.length) {\n\n\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\n\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\n\n\t\t\t\tthis.startTime = Math.min( keys[0].time, this.startTime );\n\t\t\t\tthis.endTime = Math.max( keys[keys.length - 1].time, this.endTime );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.update( 0 );\n\n\t}\n\n\tthis.isPaused = false;\n\n\tTHREE.AnimationHandler.play( this );\n\n};\n\n\nTHREE.KeyFrameAnimation.prototype.stop = function() {\n\n\tthis.isPlaying = false;\n\tthis.isPaused  = false;\n\n\tTHREE.AnimationHandler.stop( this );\n\n\t// reset JIT matrix and remove cache\n\n\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\n\t\t\n\t\tvar obj = this.hierarchy[ h ];\n\t\tvar node = this.data.hierarchy[ h ];\n\n\t\tif ( node.animationCache !== undefined ) {\n\n\t\t\tvar original = node.animationCache.originalMatrix;\n\n\t\t\toriginal.copy( obj.matrix );\n\t\t\tobj.matrix = original;\n\n\t\t\tdelete node.animationCache;\n\n\t\t}\n\n\t}\n\n};\n\n\n// Update\n\nTHREE.KeyFrameAnimation.prototype.update = function ( delta ) {\n\n\tif ( this.isPlaying === false ) return;\n\n\tthis.currentTime += delta * this.timeScale;\n\n\t//\n\n\tvar duration = this.data.length;\n\n\tif ( this.loop === true && this.currentTime > duration ) {\n\n\t\tthis.currentTime %= duration;\n\n\t}\n\n\tthis.currentTime = Math.min( this.currentTime, duration );\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\t\tvar node = this.data.hierarchy[ h ];\n\n\t\tvar keys = node.keys,\n\t\t\tanimationCache = node.animationCache;\n\n\n\t\tif ( keys.length ) {\n\n\t\t\tvar prevKey = animationCache.prevKey;\n\t\t\tvar nextKey = animationCache.nextKey;\n\n\t\t\tif ( nextKey.time <= this.currentTime ) {\n\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tanimationCache.prevKey = prevKey;\n\t\t\t\tanimationCache.nextKey = nextKey;\n\n\t\t\t}\n\n\t\t\tif ( nextKey.time >= this.currentTime ) {\n\n\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\n\n\t\t\t} else {\n\n\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\n\n\t\t\t}\n\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\n\t\t\tobject.matrixWorldNeedsUpdate = true;\n\n\t\t}\n\n\t}\n\n};\n\n// Get next key with\n\nTHREE.KeyFrameAnimation.prototype.getNextKeyWith = function( sid, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\tkey = key % keys.length;\n\n\tfor ( ; key < keys.length; key ++ ) {\n\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn keys[ 0 ];\n\n};\n\n// Get previous key with\n\nTHREE.KeyFrameAnimation.prototype.getPrevKeyWith = function( sid, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\tkey = key >= 0 ? key : key + keys.length;\n\n\tfor ( ; key >= 0; key -- ) {\n\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn keys[ keys.length - 1 ];\n\n};\n\n// File:src/extras/animation/MorphAnimation.js\n\n/**\n * @author mrdoob / http://mrdoob.com\n * @author willy-vvu / http://willy-vvu.github.io\n */\n\nTHREE.MorphAnimation = function ( mesh ) {\n\n\tthis.mesh = mesh;\n\tthis.frames = mesh.morphTargetInfluences.length;\n\tthis.currentTime = 0;\n\tthis.duration = 1000;\n\tthis.loop = true;\n\tthis.lastFrame = 0;\n\tthis.currentFrame = 0;\n\n\tthis.isPlaying = false;\n\n};\n\nTHREE.MorphAnimation.prototype = {\n\n\tconstructor: THREE.MorphAnimation,\n\n\tplay: function () {\n\n\t\tthis.isPlaying = true;\n\n\t},\n\n\tpause: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tupdate: function ( delta ) {\n\n\t\tif ( this.isPlaying === false ) return;\n\n\t\tthis.currentTime += delta;\n\n\t\tif ( this.loop === true && this.currentTime > this.duration ) {\n\n\t\t\tthis.currentTime %= this.duration;\n\n\t\t}\n\n\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\n\n\t\tvar interpolation = this.duration / this.frames;\n\t\tvar frame = Math.floor( this.currentTime / interpolation );\n\n\t\tif ( frame != this.currentFrame ) {\n\n\t\t\tthis.mesh.morphTargetInfluences[ this.lastFrame ] = 0;\n\t\t\tthis.mesh.morphTargetInfluences[ this.currentFrame ] = 1;\n\t\t\tthis.mesh.morphTargetInfluences[ frame ] = 0;\n\n\t\t\tthis.lastFrame = this.currentFrame;\n\t\t\tthis.currentFrame = frame;\n\n\t\t}\n\n\t\tthis.mesh.morphTargetInfluences[ frame ] = ( this.currentTime % interpolation ) / interpolation;\n\t\tthis.mesh.morphTargetInfluences[ this.lastFrame ] = 1 - this.mesh.morphTargetInfluences[ frame ];\n\n\t}\n\n};\n\n// File:src/extras/geometries/BoxGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\n */\n\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.widthSegments = widthSegments || 1;\n\tthis.heightSegments = heightSegments || 1;\n\tthis.depthSegments = depthSegments || 1;\n\n\tvar scope = this;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\tvar depth_half = depth / 2;\n\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\n\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\n\n\t\tvar w, ix, iy,\n\t\tgridX = scope.widthSegments,\n\t\tgridY = scope.heightSegments,\n\t\twidth_half = width / 2,\n\t\theight_half = height / 2,\n\t\toffset = scope.vertices.length;\n\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\n\n\t\t\tw = 'z';\n\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\n\n\t\t\tw = 'y';\n\t\t\tgridY = scope.depthSegments;\n\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\n\n\t\t\tw = 'x';\n\t\t\tgridX = scope.depthSegments;\n\n\t\t}\n\n\t\tvar gridX1 = gridX + 1,\n\t\tgridY1 = gridY + 1,\n\t\tsegment_width = width / gridX,\n\t\tsegment_height = height / gridY,\n\t\tnormal = new THREE.Vector3();\n\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar vector = new THREE.Vector3();\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\n\t\t\t\tvector[ w ] = depth;\n\n\t\t\t\tscope.vertices.push( vector );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = ix + gridX1 * iy;\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\n\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\n\t\t\t\tface.normal.copy( normal );\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\n\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\tscope.faces.push( face );\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\n\t\t\t\tface.normal.copy( normal );\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\n\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\tscope.faces.push( face );\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.mergeVertices();\n\n};\n\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\n\n// File:src/extras/geometries/CircleGeometry.js\n\n/**\n * @author hughes\n */\n\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 50;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tvar i, uvs = [],\n\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\n\n\tthis.vertices.push(center);\n\tuvs.push( centerUV );\n\n\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\tvar vertex = new THREE.Vector3();\n\t\tvar segment = thetaStart + i / segments * thetaLength;\n\n\t\tvertex.x = radius * Math.cos( segment );\n\t\tvertex.y = radius * Math.sin( segment );\n\n\t\tthis.vertices.push( vertex );\n\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\n\n\t}\n\n\tvar n = new THREE.Vector3( 0, 0, 1 );\n\n\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\n\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\n\n// File:src/extras/geometries/CubeGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nTHREE.CubeGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tconsole.warn( 'THREE.CubeGeometry has been renamed to THREE.BoxGeometry.' );\n\treturn new THREE.BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments );\n\n };\n\n// File:src/extras/geometries/CylinderGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n\theight = height !== undefined ? height : 100;\n\n\tradialSegments = radialSegments || 8;\n\theightSegments = heightSegments || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\n\n\tvar heightHalf = height / 2;\n\n\tvar x, y, vertices = [], uvs = [];\n\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\tvar verticesRow = [];\n\t\tvar uvsRow = [];\n\n\t\tvar v = y / heightSegments;\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\n\t\t\tvertex.y = - v * height + heightHalf;\n\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tverticesRow.push( this.vertices.length - 1 );\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\n\n\t\t}\n\n\t\tvertices.push( verticesRow );\n\t\tuvs.push( uvsRow );\n\n\t}\n\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\n\tvar na, nb;\n\n\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\tif ( radiusTop !== 0 ) {\n\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\n\n\t\t} else {\n\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\n\n\t\t}\n\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\n\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x ];\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\n\n\t\t\tvar n1 = na.clone();\n\t\t\tvar n2 = na.clone();\n\t\t\tvar n3 = nb.clone();\n\t\t\tvar n4 = nb.clone();\n\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\n\n\t\t}\n\n\t}\n\n\t// top cap\n\n\tif ( openEnded === false && radiusTop > 0 ) {\n\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ 0 ][ x ];\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\n\t\t\tvar v3 = this.vertices.length - 1;\n\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\n\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t}\n\n\t}\n\n\t// bottom cap\n\n\tif ( openEnded === false && radiusBottom > 0 ) {\n\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\n\t\t\tvar v2 = vertices[ heightSegments ][ x ];\n\t\t\tvar v3 = this.vertices.length - 1;\n\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\n\n\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\n\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\n\n// File:src/extras/geometries/ExtrudeGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segements of extrude spline too\n *  amount: <int>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\n *\n *  material: <int> // material index for front and back faces\n *  extrudeMaterial: <int> // material index for extrusion and beveled faces\n *  uvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\n\n\tif ( typeof( shapes ) === \"undefined\" ) {\n\t\tshapes = [];\n\t\treturn;\n\t}\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tshapes = shapes instanceof Array ? shapes : [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n\t// can't really use automatic vertex normals\n\t// as then front and back sides get smoothed too\n\t// should do separate smoothing just for sides\n\n\t//this.computeVertexNormals();\n\n\t//console.log( \"took\", ( Date.now() - startTime ) );\n\n};\n\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\n\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\tvar sl = shapes.length;\n\n\tfor ( var s = 0; s < sl; s ++ ) {\n\t\tvar shape = shapes[ s ];\n\t\tthis.addShape( shape, options );\n\t}\n};\n\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\n\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar steps = options.steps !== undefined ? options.steps : 1;\n\n\tvar extrudePath = options.extrudePath;\n\tvar extrudePts, extrudeByPath = false;\n\n\tvar material = options.material;\n\tvar extrudeMaterial = options.extrudeMaterial;\n\n\t// Use default WorldUVGenerator if no UV generators are specified.\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\n\n\tvar splineTube, binormal, normal, position2;\n\tif ( extrudePath ) {\n\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\textrudeByPath = true;\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t// SETUP TNB variables\n\n\t\t// Reuse TNB from TubeGeomtry for now.\n\t\t// TODO1 - have a .isClosed in spline?\n\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames(extrudePath, steps, false);\n\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\tbinormal = new THREE.Vector3();\n\t\tnormal = new THREE.Vector3();\n\t\tposition2 = new THREE.Vector3();\n\n\t}\n\n\t// Safeguards if bevels are not enabled\n\n\tif ( ! bevelEnabled ) {\n\n\t\tbevelSegments = 0;\n\t\tbevelThickness = 0;\n\t\tbevelSize = 0;\n\n\t}\n\n\t// Variables initalization\n\n\tvar ahole, h, hl; // looping of holes\n\tvar scope = this;\n\tvar bevelPoints = [];\n\n\tvar shapesOffset = this.vertices.length;\n\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices ) ;\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\n\n\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\n\n\t}\n\n\n\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\n\n\t/* Vertices */\n\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\tvertices = vertices.concat( ahole );\n\n\t}\n\n\n\tfunction scalePt2 ( pt, vec, size ) {\n\n\t\tif ( ! vec ) console.log( \"die\" );\n\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t}\n\n\tvar b, bs, t, z,\n\t\tvert, vlen = vertices.length,\n\t\tface, flen = faces.length,\n\t\tcont, clen = contour.length;\n\n\n\t// Find directions for point movement\n\n\tvar RAD_TO_DEGREES = 180 / Math.PI;\n\n\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\tvar EPSILON = 0.0000000001;\n\t\t\n\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t//   shiftet by 1 unit (length of normalized vector) to the left\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t//\n\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\t\t\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\n\n\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\n\t\t\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\t\t\n\t\t// check for colinear edges\n\t\tvar colinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\t\t\n\t\tif ( Math.abs( colinear0 ) > EPSILON ) {\t\t// not colinear\n\t\t\t\n\t\t\t// length of vectors for normalizing\n\t\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\t\t\t\n\t\t\t// shift adjacent points by unit vectors to the left\n\t\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\t\t\t\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\t\n\t\t\t// scaling factor for v_prev to intersection point\n\t\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\t\n\t\t\t// vector from inPt to intersection point\n\t\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\t\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t//  but prevent crazy spikes\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y )\n\t\t\tif ( v_trans_lensq <= 2 ) {\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\n\t\t\t} else {\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\t\t\t}\n\t\t\t\n\t\t} else {\t\t// handle special case of colinear edges\n\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\n\t\t\tif ( v_prev_x > EPSILON ) {\n\t\t\t\tif ( v_next_x > EPSILON ) { direction_eq = true; }\n\t\t\t} else {\n\t\t\t\tif ( v_prev_x < - EPSILON ) {\n\t\t\t\t\tif ( v_next_x < - EPSILON ) { direction_eq = true; }\n\t\t\t\t} else {\n\t\t\t\t\tif ( Math.sign(v_prev_y) == Math.sign(v_next_y) ) { direction_eq = true; }\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( direction_eq ) {\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\tv_trans_y =  v_prev_x;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\t\t\t} else {\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\t\t\t}\n\n\t\t}\n\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t}\n\n\n\tvar contourMovements = [];\n\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\tif ( j === il ) j = 0;\n\t\tif ( k === il ) k = 0;\n\n\t\t//  (j)---(i)---(k)\n\t\t// console.log('i,j,k', i, j , k)\n\n\t\tvar pt_i = contour[ i ];\n\t\tvar pt_j = contour[ j ];\n\t\tvar pt_k = contour[ k ];\n\n\t\tcontourMovements[ i ]= getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t}\n\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\toneHoleMovements = [];\n\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\toneHoleMovements[ i ]= getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t}\n\n\t\tholesMovements.push( oneHoleMovements );\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t}\n\n\n\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\n\t\t//z = bevelThickness * t;\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI/2 ) ) ; // curved\n\t\t//bs = bevelSize * t ; // linear\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tbs = bevelSize;\n\n\t// Back facing vertices\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\tif ( ! extrudeByPath ) {\n\n\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t} else {\n\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\tnormal.copy( splineTube.normals[0] ).multiplyScalar(vert.x);\n\t\t\tbinormal.copy( splineTube.binormals[0] ).multiplyScalar(vert.y);\n\n\t\t\tposition2.copy( extrudePts[0] ).add(normal).add(binormal);\n\n\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t}\n\n\t}\n\n\t// Add stepped vertices...\n\t// Including front facing vertices\n\n\tvar s;\n\n\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[s] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[s] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[s] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Add bevel segments planes\n\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\n\t\tbs = bevelSize * Math.sin ( t * Math.PI/2 ) ;\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/* Faces */\n\n\t// Top and bottom faces\n\n\tbuildLidFaces();\n\n\t// Sides faces\n\n\tbuildSideFaces();\n\n\n\t/////  Internal functions\n\n\tfunction buildLidFaces() {\n\n\t\tif ( bevelEnabled ) {\n\n\t\t\tvar layer = 0 ; // steps + 1\n\t\t\tvar offset = vlen * layer;\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ]+ offset, face[ 1 ]+ offset, face[ 0 ] + offset );\n\n\t\t\t}\n\n\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\toffset = vlen * layer;\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t}\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// Create faces for the z-sides of the shape\n\n\tfunction buildSideFaces() {\n\n\t\tvar layeroffset = 0;\n\t\tsidewalls( contour, layeroffset );\n\t\tlayeroffset += contour.length;\n\n\t\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t//, true\n\t\t\tlayeroffset += ahole.length;\n\n\t\t}\n\n\t}\n\n\tfunction sidewalls( contour, layeroffset ) {\n\n\t\tvar j, k;\n\t\ti = contour.length;\n\n\t\twhile ( --i >= 0 ) {\n\n\t\t\tj = i;\n\t\t\tk = i - 1;\n\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\n\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\n\tfunction v( x, y, z ) {\n\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\n\n\t}\n\n\tfunction f3( a, b, c ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\n\t\t// normal, color, material\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\n\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\n\n \t\tscope.faceVertexUvs[ 0 ].push( uvs );\n\n\t}\n\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\t\td += shapesOffset;\n\n \t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, extrudeMaterial ) );\n \t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, extrudeMaterial ) );\n\n \t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\n\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\n\n\t}\n\n};\n\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\n\t\treturn [\n\t\t\tnew THREE.Vector2( a.x, a.y ),\n\t\t\tnew THREE.Vector2( b.x, b.y ),\n\t\t\tnew THREE.Vector2( c.x, c.y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\t\tvar d = vertices[ indexD ];\n\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\n\t\t\t];\n\t\t} else {\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\n\t\t\t];\n\t\t}\n\t}\n};\n\n// File:src/extras/geometries/ShapeGeometry.js\n\n/**\n * @author jonobr1 / http://jonobr1.com\n *\n * Creates a one-sided polygonal geometry from a path shape. Similar to\n * ExtrudeGeometry.\n *\n * parameters = {\n *\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\n *\n *\tmaterial: <int> // material index for front and back faces\n *\tuvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ShapeGeometry = function ( shapes, options ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( shapes instanceof Array === false ) shapes = [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\n\n/**\n * Add an array of shapes to THREE.ShapeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tthis.addShape( shapes[ i ], options );\n\n\t}\n\n\treturn this;\n\n};\n\n/**\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tif ( options === undefined ) options = {};\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar material = options.material;\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\n\n\t//\n\n\tvar i, l, hole, s;\n\n\tvar shapesOffset = this.vertices.length;\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\n\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\t\thole = holes[ i ];\n\n\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\n\n\t\t\t\tholes[ i ] = hole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false;\n\n\t}\n\n\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\n\n\t// Vertices\n\n\tvar contour = vertices;\n\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\thole = holes[ i ];\n\t\tvertices = vertices.concat( hole );\n\n\t}\n\n\t//\n\n\tvar vert, vlen = vertices.length;\n\tvar face, flen = faces.length;\n\tvar cont, clen = contour.length;\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = vertices[ i ];\n\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\n\n\t}\n\n\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\tface = faces[ i ];\n\n\t\tvar a = face[ 0 ] + shapesOffset;\n\t\tvar b = face[ 1 ] + shapesOffset;\n\t\tvar c = face[ 2 ] + shapesOffset;\n\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\n\n\t}\n\n};\n\n// File:src/extras/geometries/LatheGeometry.js\n\n/**\n * @author astrodud / http://astrodud.isgreat.org/\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://exocortex.com\n */\n\n// points - to create a closed torus, one must use a set of points \n//    like so: [ a, b, c, d, a ], see first is the same as last.\n// segments - the number of circumference segments to create\n// phiStart - the starting radian\n// phiLength - the radian (0 to 2*PI) range of the lathed section\n//    2*pi is a closed lathe, less than 2PI is a portion.\n\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = segments || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || 2 * Math.PI;\n\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\n\tvar inverseSegments = 1.0 / segments;\n\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\n\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tvar c = Math.cos( phi ),\n\t\t\ts = Math.sin( phi );\n\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\n\n\t\t\tvar pt = points[ j ];\n\n\t\t\tvar vertex = new THREE.Vector3();\n\n\t\t\tvertex.x = c * pt.x - s * pt.y;\n\t\t\tvertex.y = s * pt.x + c * pt.y;\n\t\t\tvertex.z = pt.z;\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t}\n\n\t}\n\n\tvar np = points.length;\n\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\n\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\n\n\t\t\tvar base = j + np * i;\n\t\t\tvar a = base;\n\t\t\tvar b = base + np;\n\t\t\tvar c = base + 1 + np;\n\t\t\tvar d = base + 1;\n\n\t\t\tvar u0 = i * inverseSegments;\n\t\t\tvar v0 = j * inversePointLength;\n\t\t\tvar u1 = u0 + inverseSegments;\n\t\t\tvar v1 = v0 + inversePointLength;\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\n\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\n\t\t\t\tnew THREE.Vector2( u0, v1 )\n\n\t\t\t] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\n\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\n\t\t\t\tnew THREE.Vector2( u0, v1 )\n\n\t\t\t] );\n\n\n\t\t}\n\n\t}\n\n\tthis.mergeVertices();\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\n\n// File:src/extras/geometries/PlaneGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tconsole.info( 'THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint.' );\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\n};\n\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\n\n// File:src/extras/geometries/PlaneBufferGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = widthSegments || 1;\n\tvar gridY = heightSegments || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\n\n\tvar offset = 0;\n\tvar offset2 = 0;\n\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices[ offset     ] = x;\n\t\t\tvertices[ offset + 1 ] = - y;\n\n\t\t\tnormals[ offset + 2 ] = 1;\n\n\t\t\tuvs[ offset2     ] = ix / gridX;\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\n\n\t\t\toffset += 3;\n\t\t\toffset2 += 2;\n\n\t\t}\n\n\t}\n\n\toffset = 0;\n\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\n\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\tindices[ offset     ] = a;\n\t\t\tindices[ offset + 1 ] = b;\n\t\t\tindices[ offset + 2 ] = d;\n\n\t\t\tindices[ offset + 3 ] = b;\n\t\t\tindices[ offset + 4 ] = c;\n\t\t\tindices[ offset + 5 ] = d;\n\n\t\t\toffset += 6;\n\n\t\t}\n\n\t}\n\n\tthis.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n};\n\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\n\n// File:src/extras/geometries/RingGeometry.js\n\n/**\n * @author Kaleb Murphy\n */\n\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 0;\n\touterRadius = outerRadius || 50;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\n\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) { // concentric circles inside ring\n\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) { // number of segments per circle\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tthis.vertices.push( vertex );\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\n\t\t}\n\n\t\tradius += radiusStep;\n\n\t}\n\n\tvar n = new THREE.Vector3( 0, 0, 1 );\n\n\tfor ( i = 0; i < phiSegments; i ++ ) { // concentric circles inside ring\n\n\t\tvar thetaSegment = i * (thetaSegments + 1);\n\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) { // number of segments per circle\n\n\t\t\tvar segment = o + thetaSegment;\n\n\t\t\tvar v1 = segment;\n\t\t\tvar v2 = segment + thetaSegments + 1;\n\t\t\tvar v3 = segment + thetaSegments + 2;\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\n\n\t\t\tv1 = segment;\n\t\t\tv2 = segment + thetaSegments + 2;\n\t\t\tv3 = segment + 1;\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\n\n\n// File:src/extras/geometries/SphereGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength \n\t};\n\n\tradius = radius || 50;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar x, y, vertices = [], uvs = [];\n\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\tvar verticesRow = [];\n\t\tvar uvsRow = [];\n\n\t\tfor ( x = 0; x <= widthSegments; x ++ ) {\n\n\t\t\tvar u = x / widthSegments;\n\t\t\tvar v = y / heightSegments;\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tverticesRow.push( this.vertices.length - 1 );\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\n\n\t\t}\n\n\t\tvertices.push( verticesRow );\n\t\tuvs.push( uvsRow );\n\n\t}\n\n\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\tfor ( x = 0; x < widthSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\n\t\t\tvar v2 = vertices[ y ][ x ];\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\n\n\t\t\tvar n1 = this.vertices[ v1 ].clone().normalize();\n\t\t\tvar n2 = this.vertices[ v2 ].clone().normalize();\n\t\t\tvar n3 = this.vertices[ v3 ].clone().normalize();\n\t\t\tvar n4 = this.vertices[ v4 ].clone().normalize();\n\n\t\t\tvar uv1 = uvs[ y ][ x + 1 ].clone();\n\t\t\tvar uv2 = uvs[ y ][ x ].clone();\n\t\t\tvar uv3 = uvs[ y + 1 ][ x ].clone();\n\t\t\tvar uv4 = uvs[ y + 1 ][ x + 1 ].clone();\n\n\t\t\tif ( Math.abs( this.vertices[ v1 ].y ) === radius ) {\n\n\t\t\t\tuv1.x = ( uv1.x + uv2.x ) / 2;\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v3, v4, [ n1, n3, n4 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv3, uv4 ] );\n\n\t\t\t} else if ( Math.abs( this.vertices[ v3 ].y ) === radius ) {\n\n\t\t\t\tuv3.x = ( uv3.x + uv4.x ) / 2;\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\n\n\t\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\n\n// File:src/extras/geometries/TextGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * For creating 3D text geometry in three.js\n *\n * Text = 3D Text\n *\n * parameters = {\n *  size: \t\t\t<float>, \t// size of the text\n *  height: \t\t<float>, \t// thickness to extrude text\n *  curveSegments: \t<int>,\t\t// number of points on the curves\n *\n *  font: \t\t\t<string>,\t\t// font name\n *  weight: \t\t<string>,\t\t// font weight (normal, bold)\n *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\n *\n *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\n *  bevelThickness: <float>, \t\t// how deep into text bevel goes\n *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\n *  }\n *\n */\n\n/*\tUsage Examples\n\n\t// TextGeometry wrapper\n\n\tvar text3d = new TextGeometry( text, options );\n\n\t// Complete manner\n\n\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\n\tvar text3d = new ExtrudeGeometry( textShapes, options );\n\n*/\n\n\nTHREE.TextGeometry = function ( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\n\n\tthis.type = 'TextGeometry';\n\n};\n\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\n\n// File:src/extras/geometries/TorusGeometry.js\n\n/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\n */\n\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = radialSegments || 8;\n\ttubularSegments = tubularSegments || 6;\n\tarc = arc || Math.PI * 2;\n\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\n\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar u = i / tubularSegments * arc;\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\n\n\t\t}\n\n\t}\n\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\n\t\t\tthis.faces.push( face );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\n\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\n\t\t\tthis.faces.push( face );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\n\n// File:src/extras/geometries/TorusKnotGeometry.js\n\n/**\n * @author oosmoxiecode\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\n */\n\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tp: p,\n\t\tq: q,\n\t\theightScale: heightScale\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = radialSegments || 64;\n\ttubularSegments = tubularSegments || 8;\n\tp = p || 2;\n\tq = q || 3;\n\theightScale = heightScale || 1;\n\t\n\tvar grid = new Array( radialSegments );\n\tvar tang = new THREE.Vector3();\n\tvar n = new THREE.Vector3();\n\tvar bitan = new THREE.Vector3();\n\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\n\n\t\tgrid[ i ] = new Array( tubularSegments );\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\n\t\ttang.subVectors( p2, p1 );\n\t\tn.addVectors( p2, p1 );\n\n\t\tbitan.crossVectors( tang, n );\n\t\tn.crossVectors( bitan, tang );\n\t\tbitan.normalize();\n\t\tn.normalize();\n\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\n\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\n\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\tvar pos = new THREE.Vector3();\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\n\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\n\n\t\t}\n\n\t}\n\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\n\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\n\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\n\n\t\t\tvar a = grid[ i ][ j ];\n\t\t\tvar b = grid[ ip ][ j ];\n\t\t\tvar c = grid[ ip ][ jp ];\n\t\t\tvar d = grid[ i ][ jp ];\n\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\n\n\t\tvar cu = Math.cos( u );\n\t\tvar su = Math.sin( u );\n\t\tvar quOverP = in_q / in_p * u;\n\t\tvar cs = Math.cos( quOverP );\n\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\n\n\t\treturn new THREE.Vector3( tx, ty, tz );\n\n\t}\n\n};\n\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\n\n// File:src/extras/geometries/TubeGeometry.js\n\n/**\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n * @author jonobr1 / https://github.com/jonobr1\n *\n * Modified from the TorusKnotGeometry by @oosmoxiecode\n *\n * Creates a tube which extrudes along a 3d spline\n *\n * Uses parallel transport frames as described in\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n */\n\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\tsegments: segments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\tsegments = segments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\n\n\tvar grid = [];\n\n\tvar scope = this,\n\n\t\ttangent,\n\t\tnormal,\n\t\tbinormal,\n\n\t\tnumpoints = segments + 1,\n\n\t\tx, y, z,\n\t\ttx, ty, tz,\n\t\tu, v, r,\n\n\t\tcx, cy,\n\t\tpos, pos2 = new THREE.Vector3(),\n\t\ti, j,\n\t\tip, jp,\n\t\ta, b, c, d,\n\t\tuva, uvb, uvc, uvd;\n\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\n\t\ttangents = frames.tangents,\n\t\tnormals = frames.normals,\n\t\tbinormals = frames.binormals;\n\n\t// proxy internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\tfunction vert( x, y, z ) {\n\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\n\n\t}\n\n\t// consruct the grid\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tgrid[ i ] = [];\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\tpos = path.getPointAt( u );\n\n\t\ttangent = tangents[ i ];\n\t\tnormal = normals[ i ];\n\t\tbinormal = binormals[ i ];\n\n\t\tr = radius * taper( u );\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tv = j / radialSegments * 2 * Math.PI;\n\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\n\t\t\tcy = r * Math.sin( v );\n\n\t\t\tpos2.copy( pos );\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\n\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\n\n\t\t}\n\t}\n\n\n\t// construct the mesh\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tip = ( closed ) ? (i + 1) % segments : i + 1;\n\t\t\tjp = (j + 1) % radialSegments;\n\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\n\t\t\tb = grid[ ip ][ j ];\n\t\t\tc = grid[ ip ][ jp ];\n\t\t\td = grid[ i ][ jp ];\n\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\n\nTHREE.TubeGeometry.NoTaper = function ( u ) {\n\n\treturn 1;\n\n};\n\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\n\n\treturn Math.sin( Math.PI * u );\n\n};\n\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\n\n\tvar\ttangent = new THREE.Vector3(),\n\t\tnormal = new THREE.Vector3(),\n\t\tbinormal = new THREE.Vector3(),\n\n\t\ttangents = [],\n\t\tnormals = [],\n\t\tbinormals = [],\n\n\t\tvec = new THREE.Vector3(),\n\t\tmat = new THREE.Matrix4(),\n\n\t\tnumpoints = segments + 1,\n\t\ttheta,\n\t\tepsilon = 0.0001,\n\t\tsmallest,\n\n\t\ttx, ty, tz,\n\t\ti, u, v;\n\n\n\t// expose internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\t// compute the tangent vectors for each segment on the path\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\ttangents[ i ] = path.getTangentAt( u );\n\t\ttangents[ i ].normalize();\n\n\t}\n\n\tinitialNormal3();\n\n\t/*\n\tfunction initialNormal1(lastBinormal) {\n\t\t// fixed start binormal. Has dangers of 0 vectors\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\t}\n\n\tfunction initialNormal2() {\n\n\t\t// This uses the Frenet-Serret formula for deriving binormal\n\t\tvar t2 = path.getTangentAt( epsilon );\n\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\n\t}\n\t*/\n\n\tfunction initialNormal3() {\n\t\t// select an initial normal vector perpenicular to the first tangent vector,\n\t\t// and in the direction of the smallest tangent xyz component\n\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tsmallest = Number.MAX_VALUE;\n\t\ttx = Math.abs( tangents[ 0 ].x );\n\t\tty = Math.abs( tangents[ 0 ].y );\n\t\ttz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= smallest ) {\n\t\t\tsmallest = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\t\t}\n\n\t\tif ( ty <= smallest ) {\n\t\t\tsmallest = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\t\t}\n\n\t\tif ( tz <= smallest ) {\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\t}\n\n\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\n\n\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\tnormals[ i ] = normals[ i-1 ].clone();\n\n\t\tbinormals[ i ] = binormals[ i-1 ].clone();\n\n\t\tvec.crossVectors( tangents[ i-1 ], tangents[ i ] );\n\n\t\tif ( vec.length() > epsilon ) {\n\n\t\t\tvec.normalize();\n\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i-1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t}\n\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t}\n\n\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\tif ( closed ) {\n\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints-1 ] ), - 1, 1 ) );\n\t\ttheta /= ( numpoints - 1 );\n\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints-1 ] ) ) > 0 ) {\n\n\t\t\ttheta = - theta;\n\n\t\t}\n\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\t\t// twist a little...\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t}\n};\n\n// File:src/extras/geometries/PolyhedronGeometry.js\n\n/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\tvar that = this;\n\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\n\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n\t}\n\n\tvar midpoints = [], p = this.vertices;\n\n\tvar faces = [];\n\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\n\n\t\tvar v1 = p[ indices[ i     ] ];\n\t\tvar v2 = p[ indices[ i + 1 ] ];\n\t\tvar v3 = p[ indices[ i + 2 ] ];\n\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\n\t}\n\n\tvar centroid = new THREE.Vector3();\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tsubdivide( faces[ i ], detail );\n\n\t}\n\n\n\t// Handle case when face straddles the seam\n\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\n\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\tvar x0 = uvs[ 0 ].x;\n\t\tvar x1 = uvs[ 1 ].x;\n\t\tvar x2 = uvs[ 2 ].x;\n\n\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\n\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\n\n\t\tif ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\n\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\n\n\t\t}\n\n\t}\n\n\n\t// Apply radius\n\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\tthis.vertices[ i ].multiplyScalar( radius );\n\n\t}\n\n\n\t// Merge vertices\n\n\tthis.mergeVertices();\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n\n\t// Project vector onto sphere's surface\n\n\tfunction prepare( vector ) {\n\n\t\tvar vertex = vector.normalize().clone();\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\n\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\n\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\n\n\t\treturn vertex;\n\n\t}\n\n\n\t// Approximate a curved face with recursively sub-divided triangles.\n\n\tfunction make( v1, v2, v3 ) {\n\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\t\tthat.faces.push( face );\n\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\n\n\t\tvar azi = azimuth( centroid );\n\n\t\tthat.faceVertexUvs[ 0 ].push( [\n\t\t\tcorrectUV( v1.uv, v1, azi ),\n\t\t\tcorrectUV( v2.uv, v2, azi ),\n\t\t\tcorrectUV( v3.uv, v3, azi )\n\t\t] );\n\n\t}\n\n\n\t// Analytically subdivide a face to the required detail level.\n\n\tfunction subdivide( face, detail ) {\n\n\t\tvar cols = Math.pow(2, detail);\n\t\tvar cells = Math.pow(4, detail);\n\t\tvar a = prepare( that.vertices[ face.a ] );\n\t\tvar b = prepare( that.vertices[ face.b ] );\n\t\tvar c = prepare( that.vertices[ face.c ] );\n\t\tvar v = [];\n\n\t\t// Construct all of the vertices for this subdivision.\n\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\n\t\t\tvar rows = cols - i;\n\n\t\t\tfor ( var j = 0; j <= rows; j ++) {\n\n\t\t\t\tif ( j == 0 && i == cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Construct all of the faces.\n\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\n\n\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 == 0 ) {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1],\n\t\t\t\t\t\tv[ i + 1 ][ k ],\n\t\t\t\t\t\tv[ i ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1 ],\n\t\t\t\t\t\tv[ i + 1][ k + 1],\n\t\t\t\t\t\tv[ i + 1 ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n\n\t// Texture fixing helper. Spheres have some odd behaviours.\n\n\tfunction correctUV( uv, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\n\t\treturn uv.clone();\n\n\t}\n\n\n};\n\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\n\n// File:src/extras/geometries/DodecahedronGeometry.js\n\n/**\n * @author Abe Pazos / https://hamoid.com\n */\n\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tvar r = 1 / t;\n\n\tvar vertices = [\n\n\t\t// (1, 1, 1)\n\t\t-1, -1, -1,    -1, -1,  1,\n\t\t-1,  1, -1,    -1,  1,  1,\n\t\t 1, -1, -1,     1, -1,  1,\n\t\t 1,  1, -1,     1,  1,  1,\n\n\t\t// (0, 1/, )\n\t\t 0, -r, -t,     0, -r,  t,\n\t\t 0,  r, -t,     0,  r,  t,\n\n\t\t// (1/, , 0)\n\t\t-r, -t,  0,    -r,  t,  0,\n\t\t r, -t,  0,     r,  t,  0,\n\n\t\t// (, 0, 1/)\n\t\t-t,  0, -r,     t,  0, -r,\n\t\t-t,  0,  r,     t,  0,  r\n\t];\n\n\tvar indices = [\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n};\n\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\n\n// File:src/extras/geometries/IcosahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tvar vertices = [\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\n\t];\n\n\tvar indices = [\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n};\n\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\n\n// File:src/extras/geometries/OctahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.OctahedronGeometry = function ( radius, detail ) {\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tvar vertices = [\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\n\t];\n\n\tvar indices = [\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n};\n\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\n\n// File:src/extras/geometries/TetrahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\n\n\tvar vertices = [\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\n\t];\n\n\tvar indices = [\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n};\n\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\n\n// File:src/extras/geometries/ParametricGeometry.js\n\n/**\n * @author zz85 / https://github.com/zz85\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n *\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\n *\n */\n\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tvar verts = this.vertices;\n\tvar faces = this.faces;\n\tvar uvs = this.faceVertexUvs[ 0 ];\n\n\tvar i, il, j, p;\n\tvar u, v;\n\n\tvar stackCount = stacks + 1;\n\tvar sliceCount = slices + 1;\n\n\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\tv = i / stacks;\n\n\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\tu = j / slices;\n\n\t\t\tp = func( u, v );\n\t\t\tverts.push( p );\n\n\t\t}\n\t}\n\n\tvar a, b, c, d;\n\tvar uva, uvb, uvc, uvd;\n\n\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\ta = i * sliceCount + j;\n\t\t\tb = i * sliceCount + j + 1;\n\t\t\tc = (i + 1) * sliceCount + j + 1;\n\t\t\td = (i + 1) * sliceCount + j;\n\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\n\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\n\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\n\t}\n\n\t// console.log(this);\n\n\t// magic bullet\n\t// var diff = this.mergeVertices();\n\t// console.log('removed ', diff, ' vertices by merging');\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\n\n// File:src/extras/helpers/AxisHelper.js\n\n/**\n * @author sroucheray / http://sroucheray.org/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AxisHelper = function ( size ) {\n\n\tsize = size || 1;\n\n\tvar vertices = new Float32Array( [\n\t\t0, 0, 0,  size, 0, 0,\n\t\t0, 0, 0,  0, size, 0,\n\t\t0, 0, 0,  0, 0, size\n\t] );\n\n\tvar colors = new Float32Array( [\n\t\t1, 0, 0,  1, 0.6, 0,\n\t\t0, 1, 0,  0.6, 1, 0,\n\t\t0, 0, 1,  0, 0.6, 1\n\t] );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n};\n\nTHREE.AxisHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\n\n// File:src/extras/helpers/ArrowHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://exocortex.com\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nTHREE.ArrowHelper = ( function () {\n\n\tvar lineGeometry = new THREE.Geometry();\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\n\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\tconeGeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\n\n\treturn function ( dir, origin, length, color, headLength, headWidth ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tif ( color === undefined ) color = 0xffff00;\n\t\tif ( length === undefined ) length = 1;\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n}() );\n\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\n\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\n\n\tvar axis = new THREE.Vector3();\n\tvar radians;\n\n\treturn function ( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tradians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, length - headLength, 1 );\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.set( color );\n\tthis.cone.material.color.set( color );\n\n};\n\n// File:src/extras/helpers/BoxHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BoxHelper = function ( object ) {\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( 72 ), 3 ) );\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ), THREE.LinePieces );\n\n\tif ( object !== undefined ) {\n\n\t\tthis.update( object );\n\n\t}\n\n};\n\nTHREE.BoxHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\n\nTHREE.BoxHelper.prototype.update = function ( object ) {\n\n\tvar geometry = object.geometry;\n\n\tif ( geometry.boundingBox === null ) {\n\n\t\tgeometry.computeBoundingBox();\n\n\t}\n\n\tvar min = geometry.boundingBox.min;\n\tvar max = geometry.boundingBox.max;\n\n\t/*\n\t  5____4\n\t1/___0/|\n\t| 6__|_7\n\t2/___3/\n\n\t0: max.x, max.y, max.z\n\t1: min.x, max.y, max.z\n\t2: min.x, min.y, max.z\n\t3: max.x, min.y, max.z\n\t4: max.x, max.y, min.z\n\t5: min.x, max.y, min.z\n\t6: min.x, min.y, min.z\n\t7: max.x, min.y, min.z\n\t*/\n\n\tvar vertices = this.geometry.attributes.position.array;\n\n\tvertices[  0 ] = max.x; vertices[  1 ] = max.y; vertices[  2 ] = max.z;\n\tvertices[  3 ] = min.x; vertices[  4 ] = max.y; vertices[  5 ] = max.z;\n\n\tvertices[  6 ] = min.x; vertices[  7 ] = max.y; vertices[  8 ] = max.z;\n\tvertices[  9 ] = min.x; vertices[ 10 ] = min.y; vertices[ 11 ] = max.z;\n\n\tvertices[ 12 ] = min.x; vertices[ 13 ] = min.y; vertices[ 14 ] = max.z;\n\tvertices[ 15 ] = max.x; vertices[ 16 ] = min.y; vertices[ 17 ] = max.z;\n\n\tvertices[ 18 ] = max.x; vertices[ 19 ] = min.y; vertices[ 20 ] = max.z;\n\tvertices[ 21 ] = max.x; vertices[ 22 ] = max.y; vertices[ 23 ] = max.z;\n\n\t//\n\n\tvertices[ 24 ] = max.x; vertices[ 25 ] = max.y; vertices[ 26 ] = min.z;\n\tvertices[ 27 ] = min.x; vertices[ 28 ] = max.y; vertices[ 29 ] = min.z;\n\n\tvertices[ 30 ] = min.x; vertices[ 31 ] = max.y; vertices[ 32 ] = min.z;\n\tvertices[ 33 ] = min.x; vertices[ 34 ] = min.y; vertices[ 35 ] = min.z;\n\n\tvertices[ 36 ] = min.x; vertices[ 37 ] = min.y; vertices[ 38 ] = min.z;\n\tvertices[ 39 ] = max.x; vertices[ 40 ] = min.y; vertices[ 41 ] = min.z;\n\n\tvertices[ 42 ] = max.x; vertices[ 43 ] = min.y; vertices[ 44 ] = min.z;\n\tvertices[ 45 ] = max.x; vertices[ 46 ] = max.y; vertices[ 47 ] = min.z;\n\n\t//\n\n\tvertices[ 48 ] = max.x; vertices[ 49 ] = max.y; vertices[ 50 ] = max.z;\n\tvertices[ 51 ] = max.x; vertices[ 52 ] = max.y; vertices[ 53 ] = min.z;\n\n\tvertices[ 54 ] = min.x; vertices[ 55 ] = max.y; vertices[ 56 ] = max.z;\n\tvertices[ 57 ] = min.x; vertices[ 58 ] = max.y; vertices[ 59 ] = min.z;\n\n\tvertices[ 60 ] = min.x; vertices[ 61 ] = min.y; vertices[ 62 ] = max.z;\n\tvertices[ 63 ] = min.x; vertices[ 64 ] = min.y; vertices[ 65 ] = min.z;\n\n\tvertices[ 66 ] = max.x; vertices[ 67 ] = min.y; vertices[ 68 ] = max.z;\n\tvertices[ 69 ] = max.x; vertices[ 70 ] = min.y; vertices[ 71 ] = min.z;\n\n\tthis.geometry.attributes.position.needsUpdate = true;\n\n\tthis.geometry.computeBoundingSphere();\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\n// File:src/extras/helpers/BoundingBoxHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\n// a helper to show the world-axis-aligned bounding box for an object\n\nTHREE.BoundingBoxHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\n\n\tthis.object = object;\n\n\tthis.box = new THREE.Box3();\n\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\n\n};\n\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\n\nTHREE.BoundingBoxHelper.prototype.update = function () {\n\n\tthis.box.setFromObject( this.object );\n\n\tthis.box.size( this.scale );\n\n\tthis.box.center( this.position );\n\n};\n\n// File:src/extras/helpers/CameraHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n */\n\nTHREE.CameraHelper = function ( camera ) {\n\n\tvar geometry = new THREE.Geometry();\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\n\n\tvar pointMap = {};\n\n\t// colors\n\n\tvar hexFrustum = 0xffaa00;\n\tvar hexCone = 0xff0000;\n\tvar hexUp = 0x00aaff;\n\tvar hexTarget = 0xffffff;\n\tvar hexCross = 0x333333;\n\n\t// near\n\n\taddLine( \"n1\", \"n2\", hexFrustum );\n\taddLine( \"n2\", \"n4\", hexFrustum );\n\taddLine( \"n4\", \"n3\", hexFrustum );\n\taddLine( \"n3\", \"n1\", hexFrustum );\n\n\t// far\n\n\taddLine( \"f1\", \"f2\", hexFrustum );\n\taddLine( \"f2\", \"f4\", hexFrustum );\n\taddLine( \"f4\", \"f3\", hexFrustum );\n\taddLine( \"f3\", \"f1\", hexFrustum );\n\n\t// sides\n\n\taddLine( \"n1\", \"f1\", hexFrustum );\n\taddLine( \"n2\", \"f2\", hexFrustum );\n\taddLine( \"n3\", \"f3\", hexFrustum );\n\taddLine( \"n4\", \"f4\", hexFrustum );\n\n\t// cone\n\n\taddLine( \"p\", \"n1\", hexCone );\n\taddLine( \"p\", \"n2\", hexCone );\n\taddLine( \"p\", \"n3\", hexCone );\n\taddLine( \"p\", \"n4\", hexCone );\n\n\t// up\n\n\taddLine( \"u1\", \"u2\", hexUp );\n\taddLine( \"u2\", \"u3\", hexUp );\n\taddLine( \"u3\", \"u1\", hexUp );\n\n\t// target\n\n\taddLine( \"c\", \"t\", hexTarget );\n\taddLine( \"p\", \"c\", hexCross );\n\n\t// cross\n\n\taddLine( \"cn1\", \"cn2\", hexCross );\n\taddLine( \"cn3\", \"cn4\", hexCross );\n\n\taddLine( \"cf1\", \"cf2\", hexCross );\n\taddLine( \"cf3\", \"cf4\", hexCross );\n\n\tfunction addLine( a, b, hex ) {\n\n\t\taddPoint( a, hex );\n\t\taddPoint( b, hex );\n\n\t}\n\n\tfunction addPoint( id, hex ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\n\n\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\tpointMap[ id ] = [];\n\n\t\t}\n\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n\tthis.camera = camera;\n\tthis.matrix = camera.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.pointMap = pointMap;\n\n\tthis.update();\n\n};\n\nTHREE.CameraHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\n\nTHREE.CameraHelper.prototype.update = function () {\n\n\tvar geometry, pointMap;\n\t\n\tvar vector = new THREE.Vector3();\n\tvar camera = new THREE.Camera();\n\n\tvar setPoint = function ( point, x, y, z ) {\n\n\t\tvector.set( x, y, z ).unproject( camera );\n\n\t\tvar points = pointMap[ point ];\n\n\t\tif ( points !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\treturn function () {\n\n\t\tgeometry = this.geometry;\n\t\tpointMap = this.pointMap;\n\n\t\tvar w = 1, h = 1;\n\n\t\t// we need just camera projection matrix\n\t\t// world matrix must be identity\n\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\n\t\t// center / target\n\n\t\tsetPoint( \"c\", 0, 0, - 1 );\n\t\tsetPoint( \"t\", 0, 0,  1 );\n\n\t\t// near\n\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( \"f1\", - w, - h, 1 );\n\t\tsetPoint( \"f2\",   w, - h, 1 );\n\t\tsetPoint( \"f3\", - w,   h, 1 );\n\t\tsetPoint( \"f4\",   w,   h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\n\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\n\n\t\tgeometry.verticesNeedUpdate = true;\n\n\t};\n\n}();\n\n// File:src/extras/helpers/DirectionalLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.DirectionalLightHelper = function ( light, size ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tsize = size || 1;\n\n\tvar geometry = new THREE.Geometry();\n\tgeometry.vertices.push(\n\t\tnew THREE.Vector3( - size,   size, 0 ),\n\t\tnew THREE.Vector3(   size,   size, 0 ),\n\t\tnew THREE.Vector3(   size, - size, 0 ),\n\t\tnew THREE.Vector3( - size, - size, 0 ),\n\t\tnew THREE.Vector3( - size,   size, 0 )\n\t);\n\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tthis.lightPlane = new THREE.Line( geometry, material );\n\tthis.add( this.lightPlane );\n\n\tgeometry = new THREE.Geometry();\n\tgeometry.vertices.push(\n\t\tnew THREE.Vector3(),\n\t\tnew THREE.Vector3()\n\t);\n\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tthis.targetLine = new THREE.Line( geometry, material );\n\tthis.add( this.targetLine );\n\n\tthis.update();\n\n};\n\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\n\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\n\n\tthis.lightPlane.geometry.dispose();\n\tthis.lightPlane.material.dispose();\n\tthis.targetLine.geometry.dispose();\n\tthis.targetLine.material.dispose();\n};\n\nTHREE.DirectionalLightHelper.prototype.update = function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\tvar v3 = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\tv3.subVectors( v2, v1 );\n\n\t\tthis.lightPlane.lookAt( v3 );\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\n\n\t};\n\n}();\n\n// File:src/extras/helpers/EdgesHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.EdgesHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tvar edge = [ 0, 0 ], hash = {};\n\tvar sortFunction = function ( a, b ) { return a - b };\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\tvar geometry = new THREE.BufferGeometry();\n\n\tvar geometry2 = object.geometry.clone();\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tvar vertices = geometry2.vertices;\n\tvar faces = geometry2.faces;\n\tvar numEdges = 0;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge.sort( sortFunction );\n\n\t\t\tvar key = edge.toString();\n\n\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\n\t\t\t\tnumEdges ++;\n\n\t\t\t} else {\n\n\t\t\t\thash[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\tvar index = 0;\n\n\tfor ( var key in hash ) {\n\n\t\tvar h = hash[ key ];\n\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) < 0.9999 ) { // hardwired const OK\n\n\t\t\tvar vertex = vertices[ h.vert1 ];\n\t\t\tcoords[ index ++ ] = vertex.x;\n\t\t\tcoords[ index ++ ] = vertex.y;\n\t\t\tcoords[ index ++ ] = vertex.z;\n\n\t\t\tvertex = vertices[ h.vert2 ];\n\t\t\tcoords[ index ++ ] = vertex.x;\n\t\t\tcoords[ index ++ ] = vertex.y;\n\t\t\tcoords[ index ++ ] = vertex.z;\n\n\t\t}\n\n\t}\n\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.EdgesHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\n\n// File:src/extras/helpers/FaceNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar faces = this.object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.normalMatrix = new THREE.Matrix3();\n\n\tthis.update();\n\n};\n\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\n\nTHREE.FaceNormalsHelper.prototype.update = function () {\n\n\tvar vertices = this.geometry.vertices;\n\n\tvar object = this.object;\n\tvar objectVertices = object.geometry.vertices;\n\tvar objectFaces = object.geometry.faces;\n\tvar objectWorldMatrix = object.matrixWorld;\n\n\tobject.updateMatrixWorld( true );\n\n\tthis.normalMatrix.getNormalMatrix( objectWorldMatrix );\n\n\tfor ( var i = 0, i2 = 0, l = objectFaces.length; i < l; i ++, i2 += 2 ) {\n\n\t\tvar face = objectFaces[ i ];\n\n\t\tvertices[ i2 ].copy( objectVertices[ face.a ] )\n\t\t\t.add( objectVertices[ face.b ] )\n\t\t\t.add( objectVertices[ face.c ] )\n\t\t\t.divideScalar( 3 )\n\t\t\t.applyMatrix4( objectWorldMatrix );\n\n\t\tvertices[ i2 + 1 ].copy( face.normal )\n\t\t\t.applyMatrix3( this.normalMatrix )\n\t\t\t.normalize()\n\t\t\t.multiplyScalar( this.size )\n\t\t\t.add( vertices[ i2 ] );\n\n\t}\n\n\tthis.geometry.verticesNeedUpdate = true;\n\n\treturn this;\n\n};\n\n\n// File:src/extras/helpers/GridHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.GridHelper = function ( size, step ) {\n\n\tvar geometry = new THREE.Geometry();\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tthis.color1 = new THREE.Color( 0x444444 );\n\tthis.color2 = new THREE.Color( 0x888888 );\n\n\tfor ( var i = - size; i <= size; i += step ) {\n\n\t\tgeometry.vertices.push(\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\n\t\t);\n\n\t\tvar color = i === 0 ? this.color1 : this.color2;\n\n\t\tgeometry.colors.push( color, color, color, color );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n};\n\nTHREE.GridHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\n\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\n\n\tthis.color1.set( colorCenterLine );\n\tthis.color2.set( colorGrid );\n\n\tthis.geometry.colorsNeedUpdate = true;\n\n}\n\n// File:src/extras/helpers/HemisphereLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.HemisphereLightHelper = function ( light, sphereSize, arrowLength, domeSize ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\n\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\n\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\n\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\n\n\t}\n\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\n\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\n\tthis.add( this.lightSphere );\n\n\tthis.update();\n\n};\n\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\n\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\n\tthis.lightSphere.geometry.dispose();\n\tthis.lightSphere.material.dispose();\n};\n\nTHREE.HemisphereLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\n\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\n\n\t}\n\n}();\n\n// File:src/extras/helpers/PointLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PointLightHelper = function ( light, sphereSize ) {\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.matrix = this.light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\t/*\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tvar d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n};\n\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\n\nTHREE.PointLightHelper.prototype.dispose = function () {\n\n\tthis.geometry.dispose();\n\tthis.material.dispose();\n};\n\nTHREE.PointLightHelper.prototype.update = function () {\n\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t/*\n\tvar d = this.light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.visible = true;\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\t*/\n\n};\n\n// File:src/extras/helpers/SkeletonHelper.js\n\n/**\n * @author Sean Griffin / http://twitter.com/sgrif\n * @author Michael Guerrero / http://realitymeltdown.com\n * @author mrdoob / http://mrdoob.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkeletonHelper = function ( object ) {\n\n\tthis.bones = this.getBoneList( object );\n\n\tvar geometry = new THREE.Geometry();\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\n\n\t\t}\n\n\t}\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n\tthis.root = object;\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\n\nTHREE.SkeletonHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\n\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\n\n\tvar boneList = [];\n\n\tif ( object instanceof THREE.Bone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n};\n\nTHREE.SkeletonHelper.prototype.update = function () {\n\n\tvar geometry = this.geometry;\n\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\n\n\tvar boneMatrix = new THREE.Matrix4();\n\n\tvar j = 0;\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tj += 2;\n\n\t\t}\n\n\t}\n\n\tgeometry.verticesNeedUpdate = true;\n\n\tgeometry.computeBoundingSphere();\n\n};\n\n// File:src/extras/helpers/SpotLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.SpotLightHelper = function ( light ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\n\n\tgeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\n\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\n\n\tthis.cone = new THREE.Mesh( geometry, material );\n\tthis.add( this.cone );\n\n\tthis.update();\n\n};\n\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\n\nTHREE.SpotLightHelper.prototype.dispose = function () {\n\tthis.cone.geometry.dispose();\n\tthis.cone.material.dispose();\n};\n\nTHREE.SpotLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\tvar vector2 = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\n\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t};\n\n}();\n\n// File:src/extras/helpers/VertexNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar vertices = object.geometry.vertices;\n\n\tvar faces = object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.normalMatrix = new THREE.Matrix3();\n\n\tthis.update();\n\n};\n\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\n\nTHREE.VertexNormalsHelper.prototype.update = ( function ( object ) {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function( object ) {\n\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tthis.normalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\tvar vertices = this.geometry.vertices;\n\n\t\tvar verts = this.object.geometry.vertices;\n\n\t\tvar faces = this.object.geometry.faces;\n\n\t\tvar worldMatrix = this.object.matrixWorld;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\n\t\t\t\tvar vertex = verts[ vertexId ];\n\n\t\t\t\tvar normal = face.vertexNormals[ j ];\n\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\n\n\t\t\t\tv1.copy( normal ).applyMatrix3( this.normalMatrix ).normalize().multiplyScalar( this.size );\n\n\t\t\t\tv1.add( vertices[ idx ] );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tvertices[ idx ].copy( v1 );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry.verticesNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n}());\n\n// File:src/extras/helpers/VertexTangentsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.VertexTangentsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0x0000ff;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar vertices = object.geometry.vertices;\n\n\tvar faces = object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\nTHREE.VertexTangentsHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.VertexTangentsHelper.prototype.constructor = THREE.VertexTangentsHelper;\n\nTHREE.VertexTangentsHelper.prototype.update = ( function ( object ) {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function( object ) {\n\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tvar vertices = this.geometry.vertices;\n\n\t\tvar verts = this.object.geometry.vertices;\n\n\t\tvar faces = this.object.geometry.faces;\n\n\t\tvar worldMatrix = this.object.matrixWorld;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\n\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\n\t\t\t\tvar vertex = verts[ vertexId ];\n\n\t\t\t\tvar tangent = face.vertexTangents[ j ];\n\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\n\n\t\t\t\tv1.copy( tangent ).transformDirection( worldMatrix ).multiplyScalar( this.size );\n\n\t\t\t\tv1.add( vertices[ idx ] );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tvertices[ idx ].copy( v1 );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry.verticesNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n}());\n\n// File:src/extras/helpers/WireframeHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.WireframeHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tvar edge = [ 0, 0 ], hash = {};\n\tvar sortFunction = function ( a, b ) { return a - b };\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\tvar geometry = new THREE.BufferGeometry();\n\n\tif ( object.geometry instanceof THREE.Geometry ) {\n\n\t\tvar vertices = object.geometry.vertices;\n\t\tvar faces = object.geometry.faces;\n\t\tvar numEdges = 0;\n\n\t\t// allocate maximal size\n\t\tvar edges = new Uint32Array( 6 * faces.length );\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\tvar key = edge.toString();\n\n\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j] ];\n\n\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t} else if ( object.geometry instanceof THREE.BufferGeometry ) {\n\n\t\tif ( object.geometry.attributes.index !== undefined ) { // Indexed BufferGeometry\n\n\t\t\tvar vertices = object.geometry.attributes.position.array;\n\t\t\tvar indices = object.geometry.attributes.index.array;\n\t\t\tvar drawcalls = object.geometry.drawcalls;\n\t\t\tvar numEdges = 0;\n\n\t\t\tif ( drawcalls.length === 0 ) {\n\n\t\t\t\tdrawcalls = [ { count : indices.length, index : 0, start : 0 } ];\n\n\t\t\t}\n\n\t\t\t// allocate maximal size\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\n\n\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\n\n\t\t\t\tvar start = drawcalls[ o ].start;\n\t\t\t\tvar count = drawcalls[ o ].count;\n\t\t\t\tvar index = drawcalls[ o ].index;\n\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tedge[ 0 ] = index + indices[ i + j ];\n\t\t\t\t\t\tedge[ 1 ] = index + indices[ i + ( j + 1 ) % 3 ];\n\t\t\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\t\t\tvar key = edge.toString();\n\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\t\tvar index2 = 3 * edges[ 2 * i + j];\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index2 ];\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index2 + 1 ];\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index2 + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t} else { // non-indexed BufferGeometry\n\n\t\t\tvar vertices = object.geometry.attributes.position.array;\n\t\t\tvar numEdges = vertices.length / 3;\n\t\t\tvar numTris = numEdges / 3;\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tvar index = 18 * i + 6 * j;\n\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\n\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.WireframeHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\n\n// File:src/extras/objects/ImmediateRenderObject.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ImmediateRenderObject = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.render = function ( renderCallback ) {};\n\n};\n\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\n\n// File:src/extras/objects/MorphBlendMesh.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MorphBlendMesh = function( geometry, material ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.animationsMap = {};\n\tthis.animationsList = [];\n\n\t// prepare default animation\n\t// (all frames played together in 1 second)\n\n\tvar numFrames = this.geometry.morphTargets.length;\n\n\tvar name = \"__default\";\n\n\tvar startFrame = 0;\n\tvar endFrame = numFrames - 1;\n\n\tvar fps = numFrames / 1;\n\n\tthis.createAnimation( name, startFrame, endFrame, fps );\n\tthis.setAnimationWeight( name, 1 );\n\n};\n\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\n\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\n\n\tvar animation = {\n\n\t\tstartFrame: start,\n\t\tendFrame: end,\n\n\t\tlength: end - start + 1,\n\n\t\tfps: fps,\n\t\tduration: ( end - start ) / fps,\n\n\t\tlastFrame: 0,\n\t\tcurrentFrame: 0,\n\n\t\tactive: false,\n\n\t\ttime: 0,\n\t\tdirection: 1,\n\t\tweight: 1,\n\n\t\tdirectionBackwards: false,\n\t\tmirroredLoop: false\n\n\t};\n\n\tthis.animationsMap[ name ] = animation;\n\tthis.animationsList.push( animation );\n\n};\n\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\n\n\tvar pattern = /([a-z]+)_?(\\d+)/;\n\n\tvar firstAnimation, frameRanges = {};\n\n\tvar geometry = this.geometry;\n\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\n\n\t\tvar morph = geometry.morphTargets[ i ];\n\t\tvar chunks = morph.name.match( pattern );\n\n\t\tif ( chunks && chunks.length > 1 ) {\n\n\t\t\tvar name = chunks[ 1 ];\n\t\t\tvar num = chunks[ 2 ];\n\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\n\n\t\t\tvar range = frameRanges[ name ];\n\n\t\t\tif ( i < range.start ) range.start = i;\n\t\t\tif ( i > range.end ) range.end = i;\n\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\n\n\t\t}\n\n\t}\n\n\tfor ( var name in frameRanges ) {\n\n\t\tvar range = frameRanges[ name ];\n\t\tthis.createAnimation( name, range.start, range.end, fps );\n\n\t}\n\n\tthis.firstAnimation = firstAnimation;\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = 1;\n\t\tanimation.directionBackwards = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = - 1;\n\t\tanimation.directionBackwards = true;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.fps = fps;\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.duration = duration;\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.weight = weight;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = time;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\n\n\tvar time = 0;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\ttime = animation.time;\n\n\t}\n\n\treturn time;\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\n\n\tvar duration = - 1;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tduration = animation.duration;\n\n\t}\n\n\treturn duration;\n\n};\n\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = 0;\n\t\tanimation.active = true;\n\n\t} else {\n\n\t\tconsole.warn( \"animation[\" + name + \"] undefined\" );\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.active = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\n\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\n\n\t\tvar animation = this.animationsList[ i ];\n\n\t\tif ( ! animation.active ) continue;\n\n\t\tvar frameTime = animation.duration / animation.length;\n\n\t\tanimation.time += animation.direction * delta;\n\n\t\tif ( animation.mirroredLoop ) {\n\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\n\n\t\t\t\tanimation.direction *= - 1;\n\n\t\t\t\tif ( animation.time > animation.duration ) {\n\n\t\t\t\t\tanimation.time = animation.duration;\n\t\t\t\t\tanimation.directionBackwards = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( animation.time < 0 ) {\n\n\t\t\t\t\tanimation.time = 0;\n\t\t\t\t\tanimation.directionBackwards = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tanimation.time = animation.time % animation.duration;\n\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\n\n\t\t}\n\n\t\tvar keyframe = animation.startFrame + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\n\t\tvar weight = animation.weight;\n\n\t\tif ( keyframe !== animation.currentFrame ) {\n\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\n\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\n\n\t\t\tanimation.lastFrame = animation.currentFrame;\n\t\t\tanimation.currentFrame = keyframe;\n\n\t\t}\n\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\n\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\n\n\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\n\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\n\n\t}\n\n};\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };\n\nvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nvar THREE = _interopRequire(require(\"three\"));\n\nvar EventEmitter = _interopRequire(require(\"eventemitter3\"));\n\nvar Target = _interopRequire(require(\"./Target\"));\n\nvar Game = (function (EventEmitter) {\n\tfunction Game() {\n\t\tvar config = arguments[0] === undefined ? {} : arguments[0];\n\n\t\t_classCallCheck(this, Game);\n\n\t\tthis.numTargets = config.numTargets || 1;\n\t\tthis.duration = config.duration || 30 * 1000;\n\t\tthis.geometry = config.geometry;\n\n\t\t// DOM\n\t\tthis.el = document.querySelector(config.el);\n\t\tif (!this.el) {\n\t\t\tthrow new Error(\"element with selector \\\"\" + config.el + \"\\\" not found\");\n\t\t}\n\n\t\tthis.targets = [];\n\t\tthis.raycaster = new THREE.Raycaster();\n\t\tthis.mouse = new THREE.Vector2();\n\t\tthis.scene = new THREE.Scene();\n\n\t\tthis.init();\n\t\tthis.animate();\n\t}\n\n\t_inherits(Game, EventEmitter);\n\n\t_prototypeProperties(Game, null, {\n\t\twidth: {\n\t\t\tvalue: function width() {\n\t\t\t\treturn this.el.getBoundingClientRect().width;\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\theight: {\n\t\t\tvalue: function height() {\n\t\t\t\treturn this.el.getBoundingClientRect().height;\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\taspect: {\n\t\t\tvalue: function aspect() {\n\t\t\t\treturn this.width() / this.height();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinit: {\n\t\t\tvalue: function init() {\n\t\t\t\tthis.initCamera();\n\t\t\t\tthis.initRenderer();\n\t\t\t\tthis.initScene();\n\t\t\t\tthis.initTargets();\n\t\t\t\tthis.initEvents();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinitScene: {\n\t\t\tvalue: function initScene() {\n\t\t\t\tvar geometry = new THREE.PlaneGeometry(500, 500, 32);\n\t\t\t\tvar material = new THREE.MeshBasicMaterial({\n\t\t\t\t\tcolor: 16776960,\n\t\t\t\t\tside: THREE.DoubleSide\n\t\t\t\t});\n\t\t\t\tvar plane = this.plane = new THREE.Mesh(geometry, material);\n\t\t\t\tthis.scene.add(plane);\n\t\t\t\tconsole.log(\"plane\", plane);\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinitCamera: {\n\t\t\tvalue: function initCamera() {\n\t\t\t\tvar camera = this.camera = new THREE.PerspectiveCamera(70, this.aspect(), 1, 10000);\n\t\t\t\tcamera.position.set(0, 300, 500);\n\t\t\t\tthis.radius = 600;\n\t\t\t\tthis.theta = 0;\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinitRenderer: {\n\t\t\tvalue: function initRenderer() {\n\t\t\t\tvar renderer = this.renderer = new THREE.WebGLRenderer();\n\t\t\t\trenderer.setClearColor(15790320);\n\t\t\t\trenderer.setPixelRatio(window.devicePixelRatio);\n\t\t\t\trenderer.setSize(this.width(), this.height());\n\t\t\t\tthis.el.appendChild(renderer.domElement);\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinitEvents: {\n\t\t\tvalue: function initEvents() {\n\t\t\t\tthis.el.addEventListener(\"mousedown\", this.onMouseDown.bind(this), false);\n\t\t\t\tthis.el.addEventListener(\"touchstart\", this.onTouchStart.bind(this), false);\n\t\t\t\tthis.on(\"hit\", this.onHit.bind(this), false);\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinitTargets: {\n\t\t\tvalue: function initTargets() {\n\t\t\t\tfor (var i = this.numTargets; i--;) {\n\t\t\t\t\tthis.spawnTarget();\n\t\t\t\t}\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tspawnTarget: {\n\t\t\tvalue: function spawnTarget() {\n\t\t\t\tvar target = new Target();\n\t\t\t\tvar object = target.object;\n\t\t\t\tthis.scene.add(object);\n\t\t\t\tthis.targets.push(target);\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tstart: {\n\t\t\tvalue: function start() {\n\t\t\t\tthis.startTime = Date.now();\n\t\t\t\tthis.animate();\n\t\t\t\tthis.emit(\"started\", this);\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tsetSize: {\n\t\t\tvalue: function setSize() {\n\t\t\t\tthis.camera.aspect = this.aspect();\n\t\t\t\tthis.camera.updateProjectionMatrix();\n\t\t\t\tthis.renderer.setSize(this.width(), this.height());\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tonTouchStart: {\n\t\t\tvalue: function onTouchStart(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.clientX = e.touches[0].offsetX;\n\t\t\t\te.clientY = e.touches[0].offsetY;\n\t\t\t\tthis.onMouseDown(e);\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tonMouseDown: {\n\t\t\tvalue: function onMouseDown(e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// set the mouse position to the click location\n\t\t\t\tthis.mouse.x = e.offsetX / this.width() * 2 - 1;\n\t\t\t\tthis.mouse.y = -(e.offsetY / this.height()) * 2 + 1;\n\n\t\t\t\t// get everything in a straight line from the camera\n\t\t\t\tthis.raycaster.setFromCamera(this.mouse, this.camera);\n\n\t\t\t\t// get all the objects that intersect\n\t\t\t\tvar hits = this.raycaster.intersectObjects(this.objects);\n\t\t\t\tif (hits.length) {\n\t\t\t\t\tthis.emit(\"hit\", hits[0]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.emit(\"miss\");\n\t\t\t\t}\n\t\t\t\tthis.emit(\"fire\");\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tobjects: {\n\t\t\tget: function () {\n\t\t\t\treturn this.targets.map(function (t) {\n\t\t\t\t\treturn t.object;\n\t\t\t\t});\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t},\n\t\tonHit: {\n\t\t\tvalue: function onHit(hit) {\n\t\t\t\tvar object = hit.object;\n\t\t\t\tthis.scene.remove(object);\n\t\t\t\tfor (var i = this.targets.length; i--;) {\n\t\t\t\t\tif (this.targets[i].object == object) {\n\t\t\t\t\t\tthis.targets.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.spawnTarget();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tanimate: {\n\t\t\tvalue: function animate() {\n\t\t\t\trequestAnimationFrame(this.animate.bind(this));\n\t\t\t\tthis.update();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tupdate: {\n\t\t\tvalue: function update() {\n\t\t\t\tthis.updateCamera();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tupdateCamera: {\n\t\t\tvalue: function updateCamera() {\n\t\t\t\t/*let thetaRads = THREE.Math.degToRad(this.theta)\n    this.camera.position.x = this.radius * Math.sin(thetaRads)\n    this.camera.position.y = this.radius * Math.sin(thetaRads)\n    this.camera.position.z = this.radius * Math.cos(thetaRads)*/\n\t\t\t\tthis.camera.lookAt(this.plane.position);\n\t\t\t\tthis.renderer.render(this.scene, this.camera);\n\t\t\t\tthis.theta += 0.1;\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t}\n\t});\n\n\treturn Game;\n})(EventEmitter);\n\nmodule.exports = Game;\n\n},{\"./Target\":7,\"eventemitter3\":1,\"three\":4}],6:[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nvar Stats = _interopRequire(require(\"stats-js\"));\n\nvar m = _interopRequire(require(\"mithril\"));\n\nvar PlayerStats = (function () {\n\tfunction PlayerStats(config) {\n\t\t_classCallCheck(this, PlayerStats);\n\n\t\tif (!config.game) {\n\t\t\tthrow new Error(\"\\\"game\\\" parameter required\");\n\t\t}\n\n\t\tthis.el = document.querySelector(\"#stats\");\n\n\t\tthis.game = config.game;\n\t\tthis.hitTimes = [0];\n\t\tthis.numHit = 0;\n\t\tthis.numMiss = 0;\n\t\tthis.timeStarted = Date.now();\n\t\tthis.timeLastHit = Date.now();\n\n\t\tthis.init();\n\t\tthis.animate();\n\t}\n\n\t_prototypeProperties(PlayerStats, null, {\n\t\tinit: {\n\t\t\tvalue: function init() {\n\t\t\t\tthis.initFPS();\n\t\t\t\tthis.initView();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinitFPS: {\n\t\t\tvalue: function initFPS() {\n\t\t\t\tvar fps = this.fps = new Stats();\n\t\t\t\tfps.domElement.style.position = \"absolute\";\n\t\t\t\tfps.domElement.style.top = \"0px\";\n\t\t\t\tthis.game.el.appendChild(fps.domElement);\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tinitView: {\n\t\t\tvalue: function initView() {\n\t\t\t\tthis.render();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\trender: {\n\t\t\tvalue: function render() {\n\t\t\t\tm.render(this.el, this.view());\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tview: {\n\t\t\tvalue: function view() {\n\t\t\t\tvar avgResponseTime = Math.floor(this.avgResponseTime);\n\t\t\t\tvar accuracy = this.accuracy || 1;\n\t\t\t\taccuracy = Math.floor(accuracy * 100);\n\t\t\t\treturn [m(\".stat\", [m(\"h3\", \"Accuracy\"), m(\"strong\", \"\" + accuracy + \"%\")]), m(\".stat\", [m(\"h3\", \"Hits\"), m(\"strong\", this.numHit)]), m(\".stat\", [m(\"h3\", \"Misses\"), m(\"strong\", this.numMiss)]), m(\".stat\", [m(\"h3\", \"Avg. Response Time\"), m(\"strong\", \"\" + avgResponseTime + \"ms\")])];\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\taddHit: {\n\t\t\tvalue: function addHit() {\n\t\t\t\tvar now = Date.now();\n\t\t\t\tvar elapsed = now - this.timeLastHit;\n\t\t\t\tthis.timeLastHit = now;\n\t\t\t\tthis.hitTimes.push(elapsed);\n\t\t\t\tthis.numHit++;\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\taddMiss: {\n\t\t\tvalue: function addMiss() {\n\t\t\t\tthis.numMiss++;\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\tanimate: {\n\t\t\tvalue: function animate() {\n\t\t\t\trequestAnimationFrame(this.animate.bind(this));\n\t\t\t\tthis.fps.update();\n\t\t\t},\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t},\n\t\twidth: {\n\t\t\tget: function () {\n\t\t\t\treturn this.el.getBoundingClientRect().width;\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t},\n\t\theight: {\n\t\t\tget: function () {\n\t\t\t\treturn this.el.getBoundingClientRect().height;\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t},\n\t\taspect: {\n\t\t\tget: function () {\n\t\t\t\treturn this.width() / this.height();\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t},\n\t\ttotalTime: {\n\t\t\tget: function () {\n\t\t\t\tconsole.log(this.hitTimes);\n\t\t\t\treturn this.hitTimes.reduce(function (a, b) {\n\t\t\t\t\treturn a + b;\n\t\t\t\t});\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t},\n\t\tavgResponseTime: {\n\t\t\tget: function () {\n\t\t\t\tconsole.log(this.totalTime);\n\t\t\t\treturn this.totalTime / this.hitTimes.length;\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t},\n\t\ttotalShots: {\n\t\t\tget: function () {\n\t\t\t\treturn this.numHit + this.numMiss;\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t},\n\t\taccuracy: {\n\t\t\tget: function () {\n\t\t\t\treturn this.numHit / this.totalShots;\n\t\t\t},\n\t\t\tconfigurable: true\n\t\t}\n\t});\n\n\treturn PlayerStats;\n})();\n\nmodule.exports = PlayerStats;\n\n},{\"mithril\":2,\"stats-js\":3}],7:[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nvar THREE = _interopRequire(require(\"three\"));\n\nvar EventEmitter = _interopRequire(require(\"eventemitter3\"));\n\nfunction randomizeObjScale(object) {\n\tobject.scale.x = Math.random() * 2 + 1;\n\tobject.scale.y = Math.random() * 2 + 1;\n\tobject.scale.z = Math.random() * 2 + 1;\n}\n\nfunction randomizeObjRotation(object) {\n\tobject.rotation.x = Math.random() * 2 * Math.PI;\n\tobject.rotation.y = Math.random() * 2 * Math.PI;\n\tobject.rotation.z = Math.random() * 2 * Math.PI;\n}\n\nfunction randomizeObjPosition(object) {\n\tobject.position.x = Math.random() * 800 - 400;\n\tobject.position.y = Math.random() * 800 - 400;\n\tobject.position.z = Math.random() * 800 - 400;\n}\n\nfunction randomizeObj(object) {\n\trandomizeObjScale(object);\n\trandomizeObjRotation(object);\n\trandomizeObjPosition(object);\n}\n\nvar Target = (function (EventEmitter) {\n\tfunction Target() {\n\t\tvar config = arguments[0] === undefined ? {} : arguments[0];\n\n\t\t_classCallCheck(this, Target);\n\n\t\tthis.material = new THREE.MeshBasicMaterial({\n\t\t\tcolor: config.color || Math.random() * 16777215,\n\t\t\topacity: config.opacity || 0.5,\n\t\t\ttransparent: true\n\t\t});\n\t\tthis.geometry = config.geometry || new THREE.BoxGeometry(100, 100, 100);\n\t\tthis.object = new THREE.Mesh(this.geometry, this.material);\n\t\trandomizeObj(this.object);\n\t}\n\n\t_inherits(Target, EventEmitter);\n\n\treturn Target;\n})(EventEmitter);\n\nmodule.exports = Target;\n\n},{\"eventemitter3\":1,\"three\":4}],8:[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar Game = _interopRequire(require(\"./Game\"));\n\nvar PlayerStats = _interopRequire(require(\"./PlayerStats\"));\n\nconsole.log(Game, PlayerStats);\n\nfunction makeAudio(src) {\n\tvar audio = document.createElement(\"audio\");\n\tvar source = document.createElement(\"source\");\n\tsource.src = src;\n\taudio.appendChild(source);\n\treturn audio;\n}\n\n// hitsounds\n//let hsHeadshot = makeAudio('headshot.mp3')\nvar hsBodyshot = makeAudio(\"hit.mp3\");\nvar hsTeammate = makeAudio(\"hitteammate.mp3\");\n\nwindow.onload = function () {\n\tvar game = new Game({\n\t\tel: \"#game\"\n\t});\n\tvar stats = new PlayerStats({\n\t\tel: \"#stats\",\n\t\tgame: game\n\t});\n\tgame.on(\"hit\", function (object) {\n\t\thsBodyshot.play();\n\t\tstats.addHit();\n\t\tconsole.log(\"hit\", object);\n\t\tconsole.log(\"Average response time: \" + stats.avgResponseTime + \"ms\");\n\t\tconsole.log(\"Hits: \" + stats.numHit + \", Misses: \" + stats.numMiss);\n\t\tconsole.log(\"Accuracy: \" + stats.accuracy * 100 + \"%\");\n\t});\n\tgame.on(\"miss\", function () {\n\t\thsTeammate.play();\n\t\tstats.addMiss();\n\t\tconsole.log(\"miss\");\n\t});\n\tgame.on(\"fire\", function () {\n\t\tstats.render();\n\t});\n\twindow.addEventListener(\"resize\", game.setSize.bind(game), false);\n};\n\n},{\"./Game\":5,\"./PlayerStats\":6}]},{},[8])"],"sourceRoot":"/source/"}