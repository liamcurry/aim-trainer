{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length",1,"module","Stats","l","Date","now","m","g","Infinity","h","p","q","document","createElement","id","addEventListener","b","preventDefault","style","cssText","appendChild","innerHTML","c","children","j","d","k","display","REVISION","domElement","setMode","begin","end","Math","min","max","textContent","firstChild","height","round","update","this",2,"THREE","undefined","sign","x","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","NoShading","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","MultiplyOperation","MixOperation","AddOperation","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","Projector","console","error","projectVector","vector","camera","warn","project","unprojectVector","unproject","pickingRay","CanvasRenderer","clear","render","setClearColor","setSize","Color","color","arguments","setRGB","set","prototype","constructor","value","copy","setHex","setStyle","hex","floor","setHSL","hue2rgb","test","exec","parseInt","ColorKeywords","copyGammaToLinear","copyLinearToGamma","sqrt","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","toString","slice","getHSL","optionalTarget","hue","saturation","hsl","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","fromArray","array","toArray","clone","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Quaternion","y","z","w","_x","_y","_z","_w",{"end":{"file":"?","comments_before":[],"nlb":false,"endpos":17428,"pos":17427,"col":5,"line":670,"value":"x","type":"name"},"start":{"file":"?","comments_before":[],"nlb":false,"endpos":17428,"pos":17427,"col":5,"line":670,"value":"x","type":"name"},"name":"x"},"onChangeCallback","quaternion","setFromEuler","euler","Euler","c1","cos","c2","c3","s1","sin","s2","s3","order","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","v1","EPS","vFrom","vTo","Vector3","dot","abs","crossVectors","normalize","inverse","conjugate","v","lengthSq","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVector3","applyQuaternion","slerp","qb","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","offset","onChange","callback","qa","qm","Vector2","setX","setY","setComponent","index","getComponent","addVectors","sub","subVectors","divide","divideScalar","scalar","invScalar","clamp","clampScalar","minVal","maxVal","ceil","roundToZero","negate","distanceTo","distanceToSquared","dx","dy","setLength","oldLength","fromAttribute","attribute","itemSize","setZ","multiplyVectors","applyEuler","applyAxisAngle","applyMatrix3","applyMatrix4","applyProjection","qx","qy","qz","qw","ix","iy","iz","iw","matrix","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","transformDirection","lengthManhattan","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","theta","dz","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","setFromMatrixPosition","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","setFromMatrixColumn","sx","sy","sz","me","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","PI","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","atan2","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","start","line","center","result","distanceSq","distance","at","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","startEnd_startP","closestPointToPoint","Box2","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","box","empty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","isIntersectionBox","clampPoint","distanceToPoint","clampedPoint","intersect","union","translate","Box3","setFromObject","object","scope","updateMatrixWorld","traverse","node","geometry","Geometry","vertices","BufferGeometry","attributes","positions","getBoundingSphere","Sphere","radius","Matrix3","Float32Array","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","multiplyVector3Array","applyToVector3Array","determinant","throwOnInvertible","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","extractPosition","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","setRotationFromQuaternion","x2","y2","z2","wx","wy","wz","lookAt","eye","target","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","multiplyVector4","rotateAxis","crossVector","getPosition","setPosition","rotateX","rotateY","rotateZ","rotateByAxis","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","position","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","ymax","degToRad","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","b1","invDet","isIntersectionSphere","sphere","intersectSphere","tca","d2","radius2","thc","t0","t1","isIntersectionPlane","plane","distToPoint","denominator","distanceToPlane","constant","intersectPlane","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","optionalCenter","maxRadiusSq","intersectsSphere","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","computeBoundingSphere","negRadius","intersectsBox","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","v2","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","isIntersectionLine","startSign","endSign","intersectLine","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","generateUUID","chars","split","uuid","Array","rnd","random","join","clampBottom","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degreeToRadiansFactor","degrees","radToDeg","radianToDegreesFactor","radians","isPowerOfTwo","Spline","interpolate","t2","t3","intPoint","weight","w2","w3","pa","pb","pc","pd","v3","initFromArray","getPoint","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","push","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","Clock","autoStart","startTime","oldTime","elapsedTime","running","self","performance","stop","getElapsedTime","getDelta","newTime","EventDispatcher","apply","hasEventListener","removeEventListener","dispatchEvent","type","listener","_listeners","listeners","indexOf","listenerArray","splice","event","Raycaster","params","Sprite","Mesh","PointCloud","threshold","LOD","Line","descSort","intersectObject","raycaster","intersects","recursive","raycast","precision","linePrecision","setFromCamera","PerspectiveCamera","OrthographicCamera","sort","intersectObjects","objects","log","Object3D","Object","defineProperty","Object3DIdCount","name","parent","DefaultUp","rotation","onRotationChange","onQuaternionChange","defineProperties","enumerable","rotationAutoUpdate","matrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","userData","eulerOrder","useQuaternion","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","rotateOnAxis","q1","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getChildByName","getObjectByName","getObjectById","getObjectByProperty","child","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","updateMatrix","force","toJSON","output","metadata","version","generator","geometries","parseGeometry","json","materials","parseMaterial","material","parseObject","data","JSON","stringify","AmbientLight","DirectionalLight","intensity","PointLight","SpotLight","exponent","HemisphereLight","groundColor","parse","Face3","materialIndex","vertexNormals","vertexColors","vertexTangents","face","Face4","BufferAttribute","needsUpdate","copyAt","index1","index2","setXY","setXYZ","setXYZW","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","GeometryIdCount","attributesKeys","drawcalls","offsets","boundingBox","addAttribute","keys","getAttribute","addDrawCall","count","indexOffset","fromGeometry","settings","faces","faceVertexUvs","hasFaceVertexUv","hasFaceVertexNormals","normals","colors","uvs","i3","na","nb","nc","fc","vca","vcb","vcc","uva","uvb","uvc","computeBoundingBox","bb","isNaN","computeFaceNormals","computeVertexNormals","vA","vB","vC","pA","pB","pC","cb","ab","indices","jl","normalizeNormals","computeTangents","handleTriangle","uvA","uvB","uvC","x1","y1","z1","sdir","tdir","tan1","tan2","handleVertex","n2","tmp2","tangents","uv","nVertices","tangent","iA","iB","iC","computeOffsets","indexBufferSize","facesCount","sortedIndices","Uint16Array","indexPtr","vertexPtr","duplicatedVertices","newVerticeMaps","faceVertices","Int32Array","vertexMap","revVertexMap","findex","vo","vid","faceMax","new_offset","new_vid","reorderBuffers","merge","key","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","indexBuffer","indexMap","vertexCount","sortedAttributes","attr","sourceArray","attrArray","attrSize","sortedAttr","numItems","typeArray","sourceAttr","dispose","morphTargets","morphColors","morphNormals","skinWeights","skinIndices","lineDistances","hasTangents","dynamic","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","tangentsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","fromBufferGeometry","tempNormals","tempUVs","addFace","fl","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","faceNormal","dstNormalsFace","dstNormalsVertex","context","ua","ub","uc","vertexIndex","faceIndex","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","uvs2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precisionPoints","pow","faceIndicesToRemove","dupIndex","idx","setBit","enabled","getNormalIndex","hash","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","parameters","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","kl","Camera","matrixWorldInverse","create","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLRenderTargetCube","format","magFilter","minFilter","updateCubeMap","renderer","scene","generateMipmaps","activeCubeFace","zoom","updateProjectionMatrix","cx","cy","setLens","focalLength","frameHeight","atan","setViewOffset","fullWidth","fullHeight","width","Light","light","AreaLight","constantAttenuation","linearAttenuation","quadraticAttenuation","onlyShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowCascade","shadowCascadeOffset","shadowCascadeCount","shadowCascadeBias","shadowCascadeWidth","shadowCascadeHeight","shadowCascadeNearZ","shadowCascadeFarZ","shadowCascadeArray","shadowMap","shadowMapSize","shadowCamera","shadowMatrix","skyColor","shadowCameraFov","Cache","files","file","get","Loader","showStatus","statusDomElement","addStatusElement","imageLoader","ImageLoader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","fontSize","textAlign","background","padding","zIndex","updateProgress","progress","message","loaded","toFixed","extractUrlBase","url","parts","pop","initMaterials","texturePath","createMaterial","needsTangents","ShaderMaterial","nearest_pow2","LN2","create_texture","where","sourceFile","repeat","wrap","anisotropy","texture","fullPath","loader","Handlers","load","Texture","image","canvas","getContext","drawImage","wrapS","wrapT","wrapMap","mirror","rgb2hex","rgb","mtype","mpars","opacity","map","lightMap","normalMap","bumpMap","wireframe","shading","toLowerCase","blending","transparent","depthTest","depthWrite","flipSided","side","doubleSided","colorDiffuse","DbgColor","colorSpecular","specular","colorAmbient","ambient","colorEmissive","emissive","transparency","specularCoef","shininess","mapDiffuse","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapLight","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapBump","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormal","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecular","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapAlpha","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","mapBumpScale","bumpScale","mapNormalFactor","normalScale","DbgName","handlers","regex","XHRLoader","manager","cache","DefaultLoadingManager","onLoad","onProgress","onError","cached","request","XMLHttpRequest","open","response","itemEnd","responseType","send","itemStart","setResponseType","setCrossOrigin","src","JSONLoader","withCredentials","loadAjaxJSON","callbackProgress","xhr","onreadystatechange","readyState","DONE","status","responseText","LOADING","getResponseHeader","HEADERS_RECEIVED","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","bones","animation","animations","parseMorphing","dstVertices","srcVertices","cl","dstColors","srcColors","LoadingManager","BufferGeometryLoader","text","typedArray","MaterialLoader","uniforms","vertexShader","fragmentShader","ObjectLoader","parseGeometries","parseMaterials","geometryLoader","bufferGeometryLoader","PlaneGeometry","widthSegments","heightSegments","BoxGeometry","depth","depthSegments","CircleGeometry","segments","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","IcosahedronGeometry","detail","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","heightScale","Scene","Group","TextureLoader","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","buffer","texData","mipmaps","mipmapCount","CompressedTextureLoader","images","CompressedTexture","loadTexture","texDatas","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","alphaTest","overdraw","setValues","values","newValue","currentValue","Number","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshNormalMaterial","MeshDepthMaterial","SpriteMaterial","LineBasicMaterial","linewidth","linecap","linejoin","fog","LineDashedMaterial","dashSize","gapSize","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","wrapAround","wrapRGB","metal","MeshFaceMaterial","PointCloudMaterial","sizeAttenuation","ParticleBasicMaterial","ParticleSystemMaterial","defines","lights","defaultAttributeValues","uv2","index0AttributeName","UniformsUtils","RawShaderMaterial","mapping","TextureIdCount","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","_needsUpdate","onUpdate","CubeTexture","VideoTexture","video","requestAnimationFrame","HAVE_ENOUGH_DATA","inverseMatrix","localThreshold","testPoint","rayPointDistance","intersectPoint","distanceToRay","oi","ol","pointCount","ParticleSystem","mode","LineStrip","LinePieces","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","nbVertices","updateMorphTargets","morphTargetBase","morphTargetForcedOrder","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","intersectionPoint","isFaceMaterial","objectMaterials","morphInfluences","tl","influence","targets","Bone","belongsToSkin","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","bone","offsetMatrix","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","bind","skeleton","sw","MorphAnimMesh","duration","mirroredLoop","time","lastKeyframe","currentKeyframe","directionBackwards","setFrameRange","startKeyframe","endKeyframe","setDirectionForward","setDirectionBackward","parseAnimations","firstAnimation","pattern","morph","match","label","setAnimationLabel","playAnimation","fps","updateAnimation","frameTime","keyframe","mix","interpolateTargets","influences","addLevel","getObjectForDistance","matrixPosition","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","common","diffuse","offsetRepeat","flipEnvMap","bump","normalmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","directionalLightDirection","directionalLightColor","hemisphereLightDirection","hemisphereLightSkyColor","hemisphereLightGroundColor","pointLightColor","pointLightPosition","pointLightDistance","spotLightColor","spotLightPosition","spotLightDirection","spotLightDistance","spotLightAngleCos","spotLightExponent","particle","psColor","shadowmap","ShaderLib","basic","lambert","phong","particle_basic","dashed","totalSize","mNear","mFar","cube","tCube","tFlip","equirect","tEquirect","depthRGBA","WebGLRenderer","createParticleBuffers","__webglVertexBuffer","_gl","createBuffer","__webglColorBuffer","_this","info","memory","createLineBuffers","__webglLineDistanceBuffer","createMeshBuffers","geometryGroup","__webglNormalBuffer","__webglTangentBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","numMorphTargets","__webglMorphTargetsBuffers","numMorphNormals","__webglMorphNormalsBuffers","initCustomAttributes","nvertices","__webglCustomAttributesList","__webglInitialized","createUniqueBuffers","belongsToAttribute","initParticleBuffers","__vertexArray","__colorArray","__sortArray","__webglParticleCount","initLineBuffers","__lineDistanceArray","__webglLineCount","initMeshBuffers","faces3","ntris","nlines","getBufferMaterial","__normalArray","__uvArray","__uv2Array","__tangentArray","__skinIndexArray","__skinWeightArray","UintArray","extensions","Uint32Array","__typeArray","__faceArray","__lineArray","__morphTargetsArrays","__morphNormalsArrays","__webglFaceCount","originalAttribute","property","__original","__inittedArrays","materialNeedsSmoothNormals","setParticleBuffers","hint","ca","cal","customAttribute","vertexArray","colorArray","dirtyVertices","dirtyColors","customAttributes","bindBuffer","ARRAY_BUFFER","bufferData","boundTo","setLineBuffers","dl","lineDistanceArray","dirtyLineDistances","setMeshBuffers","faceColor","n1","n3","sw1","sw2","sw3","si1","si2","si3","vn","uvi","uv2i","vk","vkl","vka","nka","chf","needsSmoothNormals","offset_uv","offset_uv2","offset_face","offset_normal","offset_tangent","offset_line","offset_color","offset_skin","offset_morphTarget","offset_custom","offset_customSrc","uvArray","uv2Array","normalArray","tangentArray","skinIndexArray","skinWeightArray","morphTargetsArrays","morphNormalsArrays","faceArray","lineArray","dirtyElements","dirtyUvs","dirtyNormals","dirtyTangents","dirtyMorphTargets","morphTargetsNeedUpdate","chunk_faces3","obj_faces","obj_uvs","obj_uvs2","obj_skinIndices","obj_skinWeights","ELEMENT_ARRAY_BUFFER","pp","setupVertexAttributes","program","startIndex","geometryAttributes","programAttributes","programAttributesKeys","programAttribute","geometryAttribute","enableAttribute","vertexAttribPointer","FLOAT","vertexAttrib2fv","vertexAttrib3fv","disableUnusedAttributes","initAttributes","_newAttributes","_enabledAttributes","enableVertexAttribArray","disableVertexAttribArray","setupMorphTargets","numSupportedMorphTargets","__webglMorphTargetInfluences","activeInfluenceIndices","numericalSort","numSupportedMorphNormals","influenceIndex","uniform1fv","painterSortStable","reversePainterSortStable","projectObject","initObject","sprites","webglObjects","_webglObjects","_frustum","webglObject","unrollBufferMaterial","sortObjects","_vector3","_projScreenMatrix","renderObjects","renderList","useBlending","setupMatrices","setBlending","setDepthTest","setDepthWrite","setPolygonOffset","setMaterialFaces","renderBufferDirect","renderBuffer","renderObjectsImmediate","materialType","renderImmediateObject","unrollImmediateBufferMaterial","globject","opaque","transparentObjects","opaqueObjects","__webglInit","_modelViewMatrix","_normalMatrix","onObjectRemoved","onGeometryDispose","initGeometryGroups","__webglActive","addBuffer","geometryGroupsList","geometryGroups","ImmediateRenderObject","immediateRenderCallback","addBufferImmediate","_webglObjectsImmediate","makeGroups","usesFaceMaterial","groupHash","group","maxVerticesInGroup","hash_map","groups","groupsList","counter","geometryGroupCounter","addBuffers","objlist","updateObject","bufferType","STATIC_DRAW","customAttributesDirty","areCustomAttributesDirty","DYNAMIC_DRAW","clearCustomAttributes","removeObject","removeInstances","initMaterial","onMaterialDispose","shaderID","shaderIDs","shader","__webglShader","maxLightCount","allocateLights","maxShadows","allocateShadows","maxBones","allocateBones","_precision","supportsVertexTextures","_supportsVertexTextures","envMapMode","useFog","fogExp","logarithmicDepthBuffer","_logarithmicDepthBuffer","_supportsBoneTextures","maxMorphTargets","maxMorphNormals","maxDirLights","directional","maxPointLights","maxSpotLights","spot","maxHemiLights","hemi","shadowMapEnabled","shadowMapType","shadowMapDebug","shadowMapCascade","code","pl","_programs","programInfo","usedTimes","WebGLProgram","programs","base","uniformsList","location","setProgram","_usedTextureUnits","deallocateMaterial","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","_currentProgram","useProgram","_currentMaterialId","_currentCamera","uniformMatrix4fv","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","refreshUniformsFog","_lightsNeedUpdate","setupLights","refreshUniformsLights","_lights","markUniformsLightsNeedsUpdate","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsParticle","refreshUniformsPhong","refreshUniformsLambert","_shadowPass","refreshUniformsShadow","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","gammaInput","uvScaleMap","_canvas","distances","directions","anglesCos","exponents","skyColors","groundColors","boolean","modelViewMatrix","uniformMatrix3fv","_maxTextures","uniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform2fv","uniform3fv","uniform4fv","_array","setCubeTexture","setCubeTextureDynamic","setColorGamma","intensitySq","setColorLinear","ll","zlights","dirColors","dirPositions","pointColors","pointPositions","pointDistances","spotColors","spotPositions","spotDistances","spotDirections","spotAnglesCos","spotExponents","hemiSkyColors","hemiGroundColors","hemiPositions","dirLength","pointLength","spotLength","hemiLength","dirCount","spotCount","hemiCount","dirOffset","pointOffset","spotOffset","hemiOffset","_direction","setLineWidth","pixelRatio","_oldLineWidth","lineWidth","polygonoffset","factor","units","_oldPolygonOffset","enable","POLYGON_OFFSET_FILL","disable","_oldPolygonOffsetFactor","_oldPolygonOffsetUnits","setTextureParameters","textureType","isImagePowerOfTwo","extension","texParameteri","TEXTURE_WRAP_S","paramThreeToGL","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__oldAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","clampToMaxSize","maxSize","slot","__webglTextureCube","onTextureDispose","createTexture","textures","activeTexture","TEXTURE0","bindTexture","TEXTURE_CUBE_MAP","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isDataTexture","cubeImage","autoScaleCubemaps","_maxCubemapSize","glFormat","glType","mipmap","getCompressedTextureFormats","compressedTexImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","texImage2D","generateMipmap","__webglTexture","setupFrameBuffer","framebuffer","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setupRenderBuffer","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","updateRenderTargetMipmap","TEXTURE_2D","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","MIN_EXT","MAX_EXT","nVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","nVertexMatrices","dirLights","pointLights","spotLights","hemiLights","_context","_alpha","_depth","_stencil","stencil","_antialias","antialias","_premultipliedAlpha","premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_clearColor","_clearAlpha","autoClear","autoClearColor","autoClearDepth","autoClearStencil","gammaOutput","shadowMapCullFace","calls","_currentFramebuffer","_currentGeometryProgram","_oldDoubleSided","_oldFlipSided","_oldBlending","_oldBlendEquation","_oldBlendSrc","_oldBlendDst","_oldDepthTest","_oldDepthWrite","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_currentWidth","_currentHeight","Uint8Array","resetGLState","setDefaultGLState","getShaderPrecisionFormat","rangeMin","rangeMax","WebGLExtensions","clearColor","clearDepth","clearStencil","DEPTH_TEST","depthFunc","LEQUAL","frontFace","CCW","cullFace","BACK","CULL_FACE","BLEND","blendFunc","viewport","MAX_TEXTURE_IMAGE_UNITS","_maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","_maxTextureSize","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","_vertexShaderPrecisionHighpFloat","VERTEX_SHADER","HIGH_FLOAT","_vertexShaderPrecisionMediumpFloat","MEDIUM_FLOAT","_fragmentShaderPrecisionHighpFloat","LOW_FLOAT","FRAGMENT_SHADER","_fragmentShaderPrecisionMediumpFloat","formats","COMPRESSED_TEXTURE_FORMATS","highpAvailable","mediumpAvailable","shadowMapPlugin","ShadowMapPlugin","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","forceContextLoss","loseContext","supportsFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","updateStyle","setViewport","setScissor","scissor","enableScissorTest","SCISSOR_TEST","getClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","setRenderTarget","deallocateGeometry","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","deleteBuffers","buffers","deleteBuffer","deleteTexture","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglRenderbuffer","deleteProgram","newPrograms","renderBufferImmediate","hasPositions","hasNormals","hasUvs","__webglUvBuffer","hasColors","positionArray","nx","ny","nz","nax","nbx","ncx","nay","nby","ncy","naz","nbz","ncz","drawArrays","TRIANGLES","updateBuffers","wireframeBit","geometryProgram","LINES","drawElements","POINTS","LINE_STRIP","skinIndex","skinWeight","lineDistance","forceClear","setFaceCulling","frontFaceDirection","CW","FRONT","FRONT_AND_BACK","depthMask","blendEquationSeparate","blendFuncSeparate","uploadTexture","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isCube","isTargetPowerOfTwo","createFramebuffer","createRenderbuffer","shareDepthFrom","vx","vy","addPrePlugin","addPostPlugin","updateShadowMap","WebGLRenderTarget","options","gl","getExtension","programIdCount","generateDefines","chunk","cacheUniformLocations","identifiers","getUniformLocation","cacheAttributeLocations","getAttribLocation","shadowMapTypeDefine","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefix_vertex","prefix_fragment","customDefines","createProgram","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","VALIDATE_STATUS","getError","getProgramInfoLog","deleteShader","addLineNumbers","string","lines","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","flares","prefix","vertexBuffer","elementBuffer","hasVertexTexture","tempTexture","occlusionTexture","init","renderType","occlusionMap","screenPosition","viewportWidth","viewportHeight","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","TEXTURE1","copyTexImage2D","sprite","_renderer","_renderList","createVirtualLight","cascade","virtualLight","isVirtual","pointsWorld","pointsFrustum","nearZ","farZ","updateVirtualLight","updateShadowCamera","_min","_max","getObjectMaterial","_depthMaterial","_depthMaterialMorph","_depthMaterialSkin","_depthMaterialMorphSkin","_matrixPosition","depthShader","depthUniforms","originalCamera","gyro","Gyroscope","shadowFilter","pars","cameraHelper","CameraHelper","objectMaterial","useMorphing","useSkinning","customDepthMaterial","clearAlpha","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","GeometryUtils","geometry1","geometry2","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","getNormalMap","subtract","getImageData","imageData","createImageData","ly","uy","lx","ux","num_points","putImageData","generateDataTexture","SceneUtils","createMultiMaterialObject","detach","attach","FontUtils","divisions","getFace","loadFace","family","familyName","ThreeFont","cssFontWeight","cssFontStyle","drawText","resolution","String","fontPaths","path","Path","ret","extractGlyphPoints","paths","outline","action","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","pts","glyph","glyphs","_cachedOutline","moveTo","lineTo","quadraticCurveTo","Shape","Utils","bezierCurveTo","b3","ha","generateShapes","curveSegments","font","shapes","toShapes","namespace","EPSILON","process","contour","verts","vertIndices","nv","snip","px","py","aX","aY","bX","bY","cX","cY","apx","apy","bpx","bpy","cCROSSap","bCROSScp","aCROSSbp","Triangulate","_typeface_js","typeface_js","Audio","source","createBufferSource","gain","createGain","connect","destination","panner","createPanner","onload","decodeAudioData","setLoop","loop","setRefDistance","refDistance","setRolloffFactor","rolloffFactor","AudioListener","window","AudioContext","webkitAudioContext","orientation","velocity","positionPrev","setOrientation","setVelocity","Curve","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","vec","getTangentAt","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h00","h10","h01","h11","getPointFunc","CurvePath","curves","bends","autoClose","curve","checkConnection","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","maxX","maxY","maxZ","minX","minY","minZ","NEGATIVE_INFINITY","POSITIVE_INFINITY","createPointsGeometry","createGeometry","createSpacedPointsGeometry","addWrapPath","bendpath","getTransformedPoints","oldPts","getWrapPoints","getTransformedSpacedPoints","oldX","oldY","xNorm","bounds","pathPt","translationObject","quaternionObject","scaleObject","translationWorld","quaternionWorld","scaleWorld","actions","fromPoints","PathActions","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","BEZIER_CURVE_TO","CSPLINE_THRU","ARC","ELLIPSE","vectors","vlen","args","lastargs","x0","y0","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","EllipseCurve","lastPoint","closedPath","useSpacedPoints","item","spts","concat","spline","deltaAngle","tdivisions","isCCW","noHoles","extractSubpaths","inActions","subPaths","lastPath","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","isClockWise","tmpPoints","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambigious","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","hole","tmpHoles","holes","extrude","extruded","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","getSpacedPointsHoles","extractAllPoints","shape","extractPoints","extractAllSpacedPoints","triangulateShape","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","removeHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","nextIdx","intersection","intersectsHoleEdge","ihIdx","chkHole","indepHoles","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","hl","minShapeIndex","h2","allPointsMap","allpoints","shapeWithoutHoles","triangles","b2p0","b2p1","b2p2","b3p0","b3p1","b3p2","b3p3","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","ClosedSplineCurve3","AnimationHandler","CATMULLROM","CATMULLROM_FORWARD","initialized","hierarchy","rot","quat","usedMorphTargets","morphTargetName","morphTargetsInfluences","root","parseRecurseHierarchy","play","deltaTimeMS","resetBlendWeights","Animation","currentTime","timeScale","isPlaying","interpolationType","keyTypes","reset","animationCache","positionWeight","quaternionWeight","scaleWeight","prevKey","nextKey","originalMatrix","getNextKeyWith","newVector","newQuat","interpolateCatmullRom","prevXYZ","nextXYZ","proportionalWeight","getPrevKeyWith","currentPoint","forwardPoint","KeyFrameAnimation","isPaused","sids","obj","sid","next","endTime","original","hasTarget","MorphAnimation","frames","lastFrame","currentFrame","pause","interpolation","frame","buildPlane","udir","vdir","gridX","gridY","width_half","height_half","gridX1","gridY1","segment_width","segment_height","uvd","depth_half","centerUV","segment","CubeGeometry","heightHalf","verticesRow","uvsRow","tanTheta","v4","n4","uv1","uv3","uv4","addShapeList","addShape","scalePt2","pt","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","colinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","buildLidFaces","bevelEnabled","layer","flen","f3","steps","bevelSegments","buildSideFaces","layeroffset","sidewalls","ahole","slen1","slen2","f4","shapesOffset","uvgen","generateTopUV","extrudeMaterial","generateSideWallUV","extrudePts","splineTube","binormal","position2","amount","bevelThickness","bevelSize","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","TubeGeometry","FrenetFrames","shapePoints","reverse","bs","vert","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","indexA","indexB","indexC","indexD","LatheGeometry","inversePointLength","inverseSegments","phi","np","u0","u1","PlaneBufferGeometry","offset2","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegment","TextGeometry","textShapes","getPos","in_q","in_p","cu","su","quOverP","cs","tz","grid","tang","bitan","ip","jp","closed","taper","NoTaper","numpoints","pos2","SinusoidalTaper","initialNormal3","smallest","MAX_VALUE","mat","PolyhedronGeometry","prepare","that","azimuth","inclination","make","centroid","azi","correctUV","subdivide","cols","aj","bj","rows","DodecahedronGeometry","OctahedronGeometry","TetrahedronGeometry","ParametricGeometry","func","slices","stacks","sliceCount","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","dir","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","addLine","addPoint","pointMap","hexFrustum","hexCone","hexUp","hexTarget","hexCross","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","edge","sortFunction","numEdges","vert1","vert2","face1","face2","FaceNormalsHelper","objectVertices","objectFaces","objectWorldMatrix","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","worldMatrix","vertexId","VertexTangentsHelper","WireframeHelper","edges","numTris","MorphBlendMesh","animationsMap","animationsList","numFrames","startFrame","endFrame","createAnimation","setAnimationWeight","active","autoCreateAnimations","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","stopAnimation",3,"createTarget","spawnTarget","innerWidth","innerHeight","numTargets","mouse","container","body","devicePixelRatio","stats","onDocumentMouseDown","onDocumentTouchStart","onWindowResize","animate","clientX","touches","clientY","onHit","numHits","numMisses","elapsed","lastHitTime","hitTimes","reduce","_interopRequire","__esModule","stats-js","three"],"mappings":"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","file":"index.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement(\"div\");f.id=\"stats\";f.addEventListener(\"mousedown\",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText=\"width:80px;opacity:0.9;cursor:pointer\";var a=document.createElement(\"div\");a.id=\"fps\";a.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#002\";f.appendChild(a);var i=document.createElement(\"div\");i.id=\"fpsText\";i.style.cssText=\"color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";\ni.innerHTML=\"FPS\";a.appendChild(i);var c=document.createElement(\"div\");c.id=\"fpsGraph\";c.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0ff\";for(a.appendChild(c);74>c.children.length;){var j=document.createElement(\"span\");j.style.cssText=\"width:1px;height:30px;float:left;background-color:#113\";c.appendChild(j)}var d=document.createElement(\"div\");d.id=\"ms\";d.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#020;display:none\";f.appendChild(d);var k=document.createElement(\"div\");\nk.id=\"msText\";k.style.cssText=\"color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";k.innerHTML=\"MS\";d.appendChild(k);var e=document.createElement(\"div\");e.id=\"msGraph\";e.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0f0\";for(d.appendChild(e);74>e.children.length;)j=document.createElement(\"span\"),j.style.cssText=\"width:1px;height:30px;float:left;background-color:#131\",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=\n\"block\";d.style.display=\"none\";break;case 1:a.style.display=\"none\",d.style.display=\"block\"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+\" MS (\"+n+\"-\"+o+\")\";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+\"px\";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+\" FPS (\"+p+\"-\"+q+\")\",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=\na+\"px\",m=b,r=0);return b},update:function(){l=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n},{}],2:[function(require,module,exports){\n// File:src/Three.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar THREE = { REVISION: '70' };\n\n// browserify support\n\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = THREE;\n\n}\n\n// polyfills\n\nif ( Math.sign === undefined ) {\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : 0;\n\n\t};\n\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\n\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n// GL STATE CONSTANTS\n\nTHREE.CullFaceNone = 0;\nTHREE.CullFaceBack = 1;\nTHREE.CullFaceFront = 2;\nTHREE.CullFaceFrontBack = 3;\n\nTHREE.FrontFaceDirectionCW = 0;\nTHREE.FrontFaceDirectionCCW = 1;\n\n// SHADOWING TYPES\n\nTHREE.BasicShadowMap = 0;\nTHREE.PCFShadowMap = 1;\nTHREE.PCFSoftShadowMap = 2;\n\n// MATERIAL CONSTANTS\n\n// side\n\nTHREE.FrontSide = 0;\nTHREE.BackSide = 1;\nTHREE.DoubleSide = 2;\n\n// shading\n\nTHREE.NoShading = 0;\nTHREE.FlatShading = 1;\nTHREE.SmoothShading = 2;\n\n// colors\n\nTHREE.NoColors = 0;\nTHREE.FaceColors = 1;\nTHREE.VertexColors = 2;\n\n// blending modes\n\nTHREE.NoBlending = 0;\nTHREE.NormalBlending = 1;\nTHREE.AdditiveBlending = 2;\nTHREE.SubtractiveBlending = 3;\nTHREE.MultiplyBlending = 4;\nTHREE.CustomBlending = 5;\n\n// custom blending equations\n// (numbers start from 100 not to clash with other\n//  mappings to OpenGL constants defined in Texture.js)\n\nTHREE.AddEquation = 100;\nTHREE.SubtractEquation = 101;\nTHREE.ReverseSubtractEquation = 102;\nTHREE.MinEquation = 103;\nTHREE.MaxEquation = 104;\n\n// custom blending destination factors\n\nTHREE.ZeroFactor = 200;\nTHREE.OneFactor = 201;\nTHREE.SrcColorFactor = 202;\nTHREE.OneMinusSrcColorFactor = 203;\nTHREE.SrcAlphaFactor = 204;\nTHREE.OneMinusSrcAlphaFactor = 205;\nTHREE.DstAlphaFactor = 206;\nTHREE.OneMinusDstAlphaFactor = 207;\n\n// custom blending source factors\n\n//THREE.ZeroFactor = 200;\n//THREE.OneFactor = 201;\n//THREE.SrcAlphaFactor = 204;\n//THREE.OneMinusSrcAlphaFactor = 205;\n//THREE.DstAlphaFactor = 206;\n//THREE.OneMinusDstAlphaFactor = 207;\nTHREE.DstColorFactor = 208;\nTHREE.OneMinusDstColorFactor = 209;\nTHREE.SrcAlphaSaturateFactor = 210;\n\n\n// TEXTURE CONSTANTS\n\nTHREE.MultiplyOperation = 0;\nTHREE.MixOperation = 1;\nTHREE.AddOperation = 2;\n\n// Mapping modes\n\nTHREE.UVMapping = 300;\n\nTHREE.CubeReflectionMapping = 301;\nTHREE.CubeRefractionMapping = 302;\n\nTHREE.EquirectangularReflectionMapping = 303;\nTHREE.EquirectangularRefractionMapping = 304;\n\nTHREE.SphericalReflectionMapping = 305;\n\n// Wrapping modes\n\nTHREE.RepeatWrapping = 1000;\nTHREE.ClampToEdgeWrapping = 1001;\nTHREE.MirroredRepeatWrapping = 1002;\n\n// Filters\n\nTHREE.NearestFilter = 1003;\nTHREE.NearestMipMapNearestFilter = 1004;\nTHREE.NearestMipMapLinearFilter = 1005;\nTHREE.LinearFilter = 1006;\nTHREE.LinearMipMapNearestFilter = 1007;\nTHREE.LinearMipMapLinearFilter = 1008;\n\n// Data types\n\nTHREE.UnsignedByteType = 1009;\nTHREE.ByteType = 1010;\nTHREE.ShortType = 1011;\nTHREE.UnsignedShortType = 1012;\nTHREE.IntType = 1013;\nTHREE.UnsignedIntType = 1014;\nTHREE.FloatType = 1015;\n\n// Pixel types\n\n//THREE.UnsignedByteType = 1009;\nTHREE.UnsignedShort4444Type = 1016;\nTHREE.UnsignedShort5551Type = 1017;\nTHREE.UnsignedShort565Type = 1018;\n\n// Pixel formats\n\nTHREE.AlphaFormat = 1019;\nTHREE.RGBFormat = 1020;\nTHREE.RGBAFormat = 1021;\nTHREE.LuminanceFormat = 1022;\nTHREE.LuminanceAlphaFormat = 1023;\n// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\nTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\n\n// DDS / ST3C Compressed texture formats\n\nTHREE.RGB_S3TC_DXT1_Format = 2001;\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\n\n\n// PVRTC compressed texture formats\n\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\n\n\n// DEPRECATED\n\nTHREE.Projector = function () {\n\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function ( vector, camera ) {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n};\n\nTHREE.CanvasRenderer = function () {\n\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\n\n\tthis.domElement = document.createElement( 'canvas' );\n\tthis.clear = function () {};\n\tthis.render = function () {};\n\tthis.setClearColor = function () {};\n\tthis.setSize = function () {};\n\n};\n\n// File:src/math/Color.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Color = function ( color ) {\n\n\tif ( arguments.length === 3 ) {\n\n\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\n\n\t}\n\n\treturn this.set( color )\n\n};\n\nTHREE.Color.prototype = {\n\n\tconstructor: THREE.Color,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value instanceof THREE.Color ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar hue2rgb = function ( p, q, t ) {\n\n\t\t\t\tif ( t < 0 ) t += 1;\n\t\t\t\tif ( t > 1 ) t -= 1;\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\t\treturn p;\n\n\t\t\t};\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\t// rgb(255,0,0)\n\n\t\tif ( /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.test( style ) ) {\n\n\t\t\tvar color = /^rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)$/i.exec( style );\n\n\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// rgb(100%,0%,0%)\n\n\t\tif ( /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.test( style ) ) {\n\n\t\t\tvar color = /^rgb\\((\\d+)\\%, ?(\\d+)\\%, ?(\\d+)\\%\\)$/i.exec( style );\n\n\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// #ff0000\n\n\t\tif ( /^\\#([0-9a-f]{6})$/i.test( style ) ) {\n\n\t\t\tvar color = /^\\#([0-9a-f]{6})$/i.exec( style );\n\n\t\t\tthis.setHex( parseInt( color[ 1 ], 16 ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// #f00\n\n\t\tif ( /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test( style ) ) {\n\n\t\t\tvar color = /^\\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec( style );\n\n\t\t\tthis.setHex( parseInt( color[ 1 ] + color[ 1 ] + color[ 2 ] + color[ 2 ] + color[ 3 ] + color[ 3 ], 16 ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// red\n\n\t\tif ( /^(\\w+)$/i.test( style ) ) {\n\n\t\t\tthis.setHex( THREE.ColorKeywords[ style ] );\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color ) {\n\n\t\tthis.r = color.r * color.r;\n\t\tthis.g = color.g * color.g;\n\t\tthis.b = color.b * color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color ) {\n\n\t\tthis.r = Math.sqrt( color.r );\n\t\tthis.g = Math.sqrt( color.g );\n\t\tthis.b = Math.sqrt( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( optionalTarget ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\thsl.h = hue;\n\t\thsl.s = saturation;\n\t\thsl.l = lightness;\n\n\t\treturn hsl;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tvar hsl = this.getHSL();\n\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.r = array[ 0 ];\n\t\tthis.g = array[ 1 ];\n\t\tthis.b = array[ 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\treturn [ this.r, this.g, this.b ];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Color().setRGB( this.r, this.g, this.b );\n\n\t}\n\n};\n\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\n// File:src/math/Quaternion.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Quaternion = function ( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Quaternion.prototype = {\n\n\tconstructor: THREE.Quaternion,\n\n\t_x: 0,_y: 0, _z: 0, _w: 0,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget w () {\n\n\t\treturn this._w;\n\n\t},\n\n\tset w ( value ) {\n\n\t\tthis._w = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\t\t}\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar c1 = Math.cos( euler._x / 2 );\n\t\tvar c2 = Math.cos( euler._y / 2 );\n\t\tvar c3 = Math.cos( euler._z / 2 );\n\t\tvar s1 = Math.sin( euler._x / 2 );\n\t\tvar s2 = Math.sin( euler._y / 2 );\n\t\tvar s3 = Math.sin( euler._z / 2 );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1, r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function ( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\tthis.normalize();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\tinverse: function () {\n\n\t\tthis.conjugate().normalize();\n\n\t\treturn this;\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\t\treturn vector.applyQuaternion( this );\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.acos( cosHalfTheta );\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {},\n\n\tclone: function () {\n\n\t\treturn new THREE.Quaternion( this._x, this._y, this._z, this._w );\n\n\t}\n\n};\n\nTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\n\n\treturn qm.copy( qa ).slerp( qb, t );\n\n}\n\n// File:src/math/Vector2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.Vector2 = function ( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n};\n\nTHREE.Vector2.prototype = {\n\n\tconstructor: THREE.Vector2,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.x *= s;\n\t\tthis.y *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector2();\n\t\t\t\tmax = new THREE.Vector2();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t    if ( offset === undefined ) offset = 0;\n\n\t    index = index * attribute.itemSize + offset;\n\n\t    this.x = attribute.array[ index ];\n\t    this.y = attribute.array[ index + 1 ];\n\n\t    return this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector2( this.x, this.y );\n\n\t}\n\n};\n\n// File:src/math/Vector3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author *kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector3 = function ( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n};\n\nTHREE.Vector3.prototype = {\n\n\tconstructor: THREE.Vector3,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function ( euler ) {\n\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function ( axis, angle ) {\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tapplyProjection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 projection matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\n\t\tvar qx = q.x;\n\t\tvar qy = q.y;\n\t\tvar qz = q.z;\n\t\tvar qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix =  qw * x + qy * z - qz * y;\n\t\tvar iy =  qw * y + qz * x - qx * z;\n\t\tvar iz =  qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\tthis.normalize();\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\t\t\tthis.z *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z > v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z < v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\tif ( this.z < min.z ) {\n\n\t\t\tthis.z = min.z;\n\n\t\t} else if ( this.z > max.z ) {\n\n\t\t\tthis.z = max.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector3();\n\t\t\t\tmax = new THREE.Vector3();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength  ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tthis.x = y * v.z - z * v.y;\n\t\tthis.y = z * v.x - x * v.z;\n\t\tthis.z = x * v.y - y * v.x;\n\n\t\treturn this;\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function () {\n\n\t\tvar v1, dot;\n\n\t\treturn function ( vector ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tv1.copy( vector ).normalize();\n\n\t\t\tdot = this.dot( v1 );\n\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\n\n\t\t};\n\n\t}(),\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1;\n\n\t\treturn function ( planeNormal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t}\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1;\n\n\t\treturn function ( normal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t}\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x;\n\t\tvar dy = this.y - v.y;\n\t\tvar dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tsetEulerFromRotationMatrix: function ( m, order ) {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\n\tsetEulerFromQuaternion: function ( q, order ) {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\n\t\treturn this.setFromMatrixScale( m );\n\t},\n\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\n\t\treturn this.setFromMatrixColumn( index, matrix );\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tthis.x = m.elements[ 12 ];\n\t\tthis.y = m.elements[ 13 ];\n\t\tthis.z = m.elements[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[  2 ] ).length();\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[  6 ] ).length();\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\t},\n\n\tsetFromMatrixColumn: function ( index, matrix ) {\n\n\t\tvar offset = index * 4;\n\n\t\tvar me = matrix.elements;\n\n\t\tthis.x = me[ offset ];\n\t\tthis.y = me[ offset + 1 ];\n\t\tthis.z = me[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t    if ( offset === undefined ) offset = 0;\n\n\t    index = index * attribute.itemSize + offset;\n\n\t    this.x = attribute.array[ index ];\n\t    this.y = attribute.array[ index + 1 ];\n\t    this.z = attribute.array[ index + 2 ];\n\n\t    return this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector3( this.x, this.y, this.z );\n\n\t}\n\n};\n\n// File:src/math/Vector4.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector4 = function ( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Vector4.prototype = {\n\n\tconstructor: THREE.Vector4,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x;\n\t\tvar y = this.y;\n\t\tvar z = this.z;\n\t\tvar w = this.w;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\tif ( scalar !== 0 ) {\n\n\t\t\tvar invScalar = 1 / scalar;\n\n\t\t\tthis.x *= invScalar;\n\t\t\tthis.y *= invScalar;\n\t\t\tthis.z *= invScalar;\n\t\t\tthis.w *= invScalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\t\t\tthis.w = 1;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\t this.x = 1;\n\t\t\t this.y = 0;\n\t\t\t this.z = 0;\n\n\t\t} else {\n\n\t\t\t this.x = q.x / s;\n\t\t\t this.y = q.y / s;\n\t\t\t this.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) { // m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) { // m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else { // m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tif ( this.x > v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y > v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z > v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\tif ( this.w > v.w ) {\n\n\t\t\tthis.w = v.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tif ( this.x < v.x ) {\n\n\t\t\tthis.x = v.x;\n\n\t\t}\n\n\t\tif ( this.y < v.y ) {\n\n\t\t\tthis.y = v.y;\n\n\t\t}\n\n\t\tif ( this.z < v.z ) {\n\n\t\t\tthis.z = v.z;\n\n\t\t}\n\n\t\tif ( this.w < v.w ) {\n\n\t\t\tthis.w = v.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tif ( this.x < min.x ) {\n\n\t\t\tthis.x = min.x;\n\n\t\t} else if ( this.x > max.x ) {\n\n\t\t\tthis.x = max.x;\n\n\t\t}\n\n\t\tif ( this.y < min.y ) {\n\n\t\t\tthis.y = min.y;\n\n\t\t} else if ( this.y > max.y ) {\n\n\t\t\tthis.y = max.y;\n\n\t\t}\n\n\t\tif ( this.z < min.z ) {\n\n\t\t\tthis.z = min.z;\n\n\t\t} else if ( this.z > max.z ) {\n\n\t\t\tthis.z = max.z;\n\n\t\t}\n\n\t\tif ( this.w < min.w ) {\n\n\t\t\tthis.w = min.w;\n\n\t\t} else if ( this.w > max.w ) {\n\n\t\t\tthis.w = max.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: ( function () {\n\n\t\tvar min, max;\n\n\t\treturn function ( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector4();\n\t\t\t\tmax = new THREE.Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t} )(),\n\n    floor: function () {\n\n        this.x = Math.floor( this.x );\n        this.y = Math.floor( this.y );\n        this.z = Math.floor( this.z );\n        this.w = Math.floor( this.w );\n\n        return this;\n\n    },\n\n    ceil: function () {\n\n        this.x = Math.ceil( this.x );\n        this.y = Math.ceil( this.y );\n        this.z = Math.ceil( this.z );\n        this.w = Math.ceil( this.w );\n\n        return this;\n\n    },\n\n    round: function () {\n\n        this.x = Math.round( this.x );\n        this.y = Math.round( this.y );\n        this.z = Math.round( this.z );\n        this.w = Math.round( this.w );\n\n        return this;\n\n    },\n\n    roundToZero: function () {\n\n        this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n        this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n        this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n        this.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n        return this;\n\n    },\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( l ) {\n\n\t\tvar oldLength = this.length();\n\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\n\n\t\t\tthis.multiplyScalar( l / oldLength );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t    if ( offset === undefined ) offset = 0;\n\n\t    index = index * attribute.itemSize + offset;\n\n\t    this.x = attribute.array[ index ];\n\t    this.y = attribute.array[ index + 1 ];\n\t    this.z = attribute.array[ index + 2 ];\n\t    this.w = attribute.array[ index + 3 ];\n\n\t    return this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Vector4( this.x, this.y, this.z, this.w );\n\n\t}\n\n};\n\n// File:src/math/Euler.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Euler = function ( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || THREE.Euler.DefaultOrder;\n\n};\n\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nTHREE.Euler.DefaultOrder = 'XYZ';\n\nTHREE.Euler.prototype = {\n\n\tconstructor: THREE.Euler,\n\n\t_x: 0, _y: 0, _z: 0, _order: THREE.Euler.DefaultOrder,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget order () {\n\n\t\treturn this._order;\n\n\t},\n\n\tset order ( value ) {\n\n\t\tthis._order = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = THREE.Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix;\n\n\t\treturn function ( q, order, update ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\t\t\tthis.setFromRotationMatrix( matrix, order, update );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new THREE.Quaternion();\n\n\t\treturn function ( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\t\t\tthis.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\treturn [ this._x, this._y, this._z, this._order ];\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {},\n\n\tclone: function () {\n\n\t\treturn new THREE.Euler( this._x, this._y, this._z, this._order );\n\n\t}\n\n};\n\n// File:src/math/Line3.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Line3 = function ( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\n\n};\n\nTHREE.Line3.prototype = {\n\n\tconstructor: THREE.Line3,\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new THREE.Vector3();\n\t\tvar startEnd = new THREE.Vector3();\n\n\t\treturn function ( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Line3().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Box2.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Box2 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\n\n};\n\nTHREE.Box2.prototype = {\n\n\tconstructor: THREE.Box2,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] )\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function ( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tisIntersectionBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Box2().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Box3.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Box3 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\n\n};\n\nTHREE.Box3.prototype = {\n\n\tconstructor: THREE.Box3,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] )\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and childrens', world transforms\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( object ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tobject.traverse( function ( node ) {\n\n\t\t\t\tvar geometry = node.geometry;\n\n\t\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\n\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\n\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t     point.y < this.min.y || point.y > this.max.y ||\n\t\t     point.z < this.min.z || point.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tisIntersectionBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\n\n\t\t\tresult.center = this.center();\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3()\n\t\t];\n\n\t\treturn function ( matrix ) {\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\n\n\t\t\tthis.makeEmpty();\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Box3().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Matrix3.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Matrix3 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix3.prototype = {\n\n\tconstructor: THREE.Matrix3,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( array, offset, length ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.x = array[ j ];\n\t\t\t\tv1.y = array[ j + 1 ];\n\t\t\t\tv1.z = array[ j + 2 ];\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tarray[ j ]     = v1.x;\n\t\t\t\tarray[ j + 1 ] = v1.y;\n\t\t\t\tarray[ j + 2 ] = v1.z;\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnInvertible ) {\n\n\t\t// input: THREE.Matrix4\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\n\n\t\tvar me = matrix.elements;\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\n\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\n\n\t\t// no inverse\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnInvertible || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\tthis.identity();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.multiplyScalar( 1.0 / det );\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset     ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\n\t\treturn array;\n\n\t},\n\n\tgetNormalMatrix: function ( m ) {\n\n\t\t// input: THREE.Matrix4\n\n\t\tthis.getInverse( m ).transpose();\n\n\t\treturn this;\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.elements.set( array );\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\tvar te = this.elements;\n\n\t\treturn [\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\n\t\t];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Matrix3().fromArray( this.elements );\n\n\t}\n\n};\n\n// File:src/math/Matrix4.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://exocortex.com\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Matrix4 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix4.prototype = {\n\n\tconstructor: THREE.Matrix4,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tthis.elements.set( m.elements );\n\n\t\treturn this;\n\n\t},\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n \n \t\tvar te = this.elements;\n \n\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\n \n \t\treturn this;\n \t\t\n \t},\n \n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0,       0,       0,       1\n\t\t);\n\n\t    return this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x = new THREE.Vector3();\n\t\tvar y = new THREE.Vector3();\n\t\tvar z = new THREE.Vector3();\n\n\t\treturn function ( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target ).normalize();\n\n\t\t\tif ( z.length() === 0 ) {\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\tif ( x.length() === 0 ) {\n\n\t\t\t\tz.x += 0.0001;\n\t\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\t}\n\n\t\t\ty.crossVectors( z, x );\n\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyToArray: function ( a, b, r ) {\n\n\t\tvar te = this.elements;\n\n\t\tthis.multiplyMatrices( a, b );\n\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\n\t\treturn vector.applyProjection( this );\n\n\t},\n\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\n\tmultiplyVector3Array: function ( a ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( array, offset, length ) {\n\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset, il; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.x = array[ j ];\n\t\t\t\tv1.y = array[ j + 1 ];\n\t\t\t\tv1.z = array[ j + 2 ];\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tarray[ j ]     = v1.x;\n\t\t\t\tarray[ j + 1 ] = v1.y;\n\t\t\t\tarray[ j + 2 ] = v1.z;\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\n\t\tv.transformDirection( this );\n\n\t},\n\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset     ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\t\tarray[ offset + 9 ]  = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t},\n\n\tgetPosition: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\n\t\t\tvar te = this.elements;\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\n\n\t\t};\n\n\t}(),\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnInvertible ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\n\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\n\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\n\n\t\tif ( det == 0 ) {\n\n\t\t\tvar msg = \"Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnInvertible || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\tthis.identity();\n\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.multiplyScalar( 1 / det );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\n\trotateByAxis: function ( axis, angle ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0,  0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s,  c, 0,\n\t\t\t0, 0,  0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts,  c, 0, 0,\n\t\t\t0,  0, 1, 0,\n\t\t\t0,  0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new THREE.Vector3();\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\treturn function ( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) {\n\t\t\t\tsx = - sx;\n\t\t\t}\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( fov, aspect, near, far ) {\n\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\n\t\tvar ymin = - ymax;\n\t\tvar xmin = ymin * aspect;\n\t\tvar xmax = ymax * aspect;\n\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = right - left;\n\t\tvar h = top - bottom;\n\t\tvar p = far - near;\n\n\t\tvar x = ( right + left ) / w;\n\t\tvar y = ( top + bottom ) / h;\n\t\tvar z = ( far + near ) / p;\n\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis.elements.set( array );\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function () {\n\n\t\tvar te = this.elements;\n\n\t\treturn [\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\n\t\t];\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\n\n\t}\n\n};\n\n// File:src/math/Ray.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Ray = function ( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\n\n};\n\nTHREE.Ray.prototype = {\n\n\tconstructor: THREE.Ray,\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\tresult.subVectors( point, this.origin );\n\t\tvar directionDistance = result.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn result.copy( this.origin );\n\n\t\t}\n\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceTo( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceTo( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new THREE.Vector3();\n\t\tvar segDir = new THREE.Vector3();\n\t\tvar diff = new THREE.Vector3();\n\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tintersectSphere: function () {\n\n\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( sphere, optionalTarget ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\n\t\t\tvar tca = v1.dot( this.direction );\n\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0 \n\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t}\n\n\t}(),\n\n\tisIntersectionPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\t\tif ( denominator == 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) == 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t :  null;\n\n\t},\n\n\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.at( t, optionalTarget );\n\n\t},\n\n\tisIntersectionBox: function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function ( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t}(),\n\n\tintersectBox: function ( box , optionalTarget ) {\n\n\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\n\n\t\tvar tmin,tmax,tymin,tymax,tzmin,tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t},\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new THREE.Vector3();\n\t\tvar edge1 = new THREE.Vector3();\n\t\tvar edge2 = new THREE.Vector3();\n\t\tvar normal = new THREE.Vector3();\n\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.sub( this.origin );\n\t\tthis.direction.normalize();\n\n\t\treturn this;\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Ray().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Sphere.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Sphere = function ( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n};\n\nTHREE.Sphere.prototype = {\n\n\tconstructor: THREE.Sphere,\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new THREE.Box3();\n\n\t\treturn function ( points, optionalCenter )  {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).center( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n \t\t};\n\n\t}(),\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\tresult.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tresult.sub( this.center ).normalize();\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\tvar box = optionalTarget || new THREE.Box3();\n\n\t\tbox.set( this.center, this.center );\n\t\tbox.expandByScalar( this.radius );\n\n\t\treturn box;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Sphere().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Frustum.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\n\n\t];\n\n};\n\nTHREE.Frustum.prototype = {\n\n\tconstructor: THREE.Frustum,\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new THREE.Sphere();\n\n\t\treturn function ( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new THREE.Vector3(),\n\t\t\tp2 = new THREE.Vector3();\n\n\t\treturn function ( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t}(),\n\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Frustum().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Plane.js\n\n/**\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Plane = function ( normal, constant ) {\n\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n};\n\nTHREE.Plane.prototype = {\n\n\tconstructor: THREE.Plane,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\n\t\treturn function ( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\n\n\t},\n\n\torthoPoint: function ( point, optionalTarget ) {\n\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\n\n\t},\n\n\tisIntersectionLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( line, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator == 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) == 0 ) {\n\n\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\n\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\t\tvar m1 = new THREE.Matrix3();\n\n\t\treturn function ( matrix, optionalNormalMatrix ) {\n\n\t\t\t// compute new normal based on theory here:\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\n\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant = this.constant - offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant == this.constant );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Plane().copy( this );\n\n\t}\n\n};\n\n// File:src/math/Math.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Math = {\n\n\tgenerateUUID: function () {\n\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\n\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\n\t\tvar uuid = new Array( 36 );\n\t\tvar rnd = 0, r;\n\n\t\treturn function () {\n\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\n\n\t\t\t\tif ( i == 8 || i == 13 || i == 18 || i == 23 ) {\n\n\t\t\t\t\tuuid[ i ] = '-';\n\n\t\t\t\t} else if ( i == 14 ) {\n\n\t\t\t\t\tuuid[ i ] = '4';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\n\t\t\t\t\tr = rnd & 0xf;\n\t\t\t\t\trnd = rnd >> 4;\n\t\t\t\t\tuuid[ i ] = chars[ ( i == 19 ) ? ( r & 0x3 ) | 0x8 : r ];\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn uuid.join( '' );\n\n\t\t};\n\n\t}(),\n\n\t// Clamp value to range <a, b>\n\n\tclamp: function ( x, a, b ) {\n\n\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\n\n\t},\n\n\t// Clamp value to range <a, inf)\n\n\tclampBottom: function ( x, a ) {\n\n\t\treturn x < a ? a : x;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random float from <0, 1> with 16 bits of randomness\n\t// (standard Math.random() creates repetitive patterns when applied over larger space)\n\n\trandom16: function () {\n\n\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn Math.floor( this.randFloat( low, high ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function () {\n\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\n\n\t\treturn function ( degrees ) {\n\n\t\t\treturn degrees * degreeToRadiansFactor;\n\n\t\t};\n\n\t}(),\n\n\tradToDeg: function () {\n\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\n\n\t\treturn function ( radians ) {\n\n\t\t\treturn radians * radianToDegreesFactor;\n\n\t\t};\n\n\t}(),\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n};\n\n// File:src/math/Spline.js\n\n/**\n * Spline from Tween.js, slightly optimized (and trashed)\n * http://sole.github.com/tween.js/examples/05_spline.html\n *\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Spline = function ( points ) {\n\n\tthis.points = points;\n\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\n\tpoint, intPoint, weight, w2, w3,\n\tpa, pb, pc, pd;\n\n\tthis.initFromArray = function ( a ) {\n\n\t\tthis.points = [];\n\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\n\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\n\n\t\t}\n\n\t};\n\n\tthis.getPoint = function ( k ) {\n\n\t\tpoint = ( this.points.length - 1 ) * k;\n\t\tintPoint = Math.floor( point );\n\t\tweight = point - intPoint;\n\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\tc[ 1 ] = intPoint;\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\n\n\t\tpa = this.points[ c[ 0 ] ];\n\t\tpb = this.points[ c[ 1 ] ];\n\t\tpc = this.points[ c[ 2 ] ];\n\t\tpd = this.points[ c[ 3 ] ];\n\n\t\tw2 = weight * weight;\n\t\tw3 = weight * w2;\n\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\n\n\t\treturn v3;\n\n\t};\n\n\tthis.getControlPointsArray = function () {\n\n\t\tvar i, p, l = this.points.length,\n\t\t\tcoords = [];\n\n\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\tp = this.points[ i ];\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\n\n\t\t}\n\n\t\treturn coords;\n\n\t};\n\n\t// approximate length by summing linear segments\n\n\tthis.getLength = function ( nSubDivisions ) {\n\n\t\tvar i, index, nSamples, position,\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\n\t\t\toldPosition = new THREE.Vector3(),\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tchunkLengths = [],\n\t\t\ttotalLength = 0;\n\n\t\t// first point has 0 length\n\n\t\tchunkLengths[ 0 ] = 0;\n\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\n\n\t\tnSamples = this.points.length * nSubDivisions;\n\n\t\toldPosition.copy( this.points[ 0 ] );\n\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\n\n\t\t\tindex = i / nSamples;\n\n\t\t\tposition = this.getPoint( index );\n\t\t\ttmpVec.copy( position );\n\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\n\n\t\t\toldPosition.copy( position );\n\n\t\t\tpoint = ( this.points.length - 1 ) * index;\n\t\t\tintPoint = Math.floor( point );\n\n\t\t\tif ( intPoint != oldIntPoint ) {\n\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\n\t\t\t\toldIntPoint = intPoint;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// last point ends with total length\n\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\n\n\t\treturn { chunks: chunkLengths, total: totalLength };\n\n\t};\n\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\n\n\t\tvar i, j,\n\t\t\tindex, indexCurrent, indexNext,\n\t\t\tlinearDistance, realDistance,\n\t\t\tsampling, position,\n\t\t\tnewpoints = [],\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tsl = this.getLength();\n\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\n\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\n\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\n\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\n\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\n\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\n\t\t\tindexNext = i / ( this.points.length - 1 );\n\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\n\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\n\n\t\t\t\tposition = this.getPoint( index );\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\n\n\t\t\t}\n\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\n\n\t\t}\n\n\t\tthis.points = newpoints;\n\n\t};\n\n\t// Catmull-Rom\n\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t};\n\n};\n\n// File:src/math/Triangle.js\n\n/**\n * @author bhouston / http://exocortex.com\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Triangle = function ( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\n\n};\n\nTHREE.Triangle.normal = function () {\n\n\tvar v0 = new THREE.Vector3();\n\n\treturn function ( a, b, c, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tresult.subVectors( c, b );\n\t\tv0.subVectors( a, b );\n\t\tresult.cross( v0 );\n\n\t\tvar resultLengthSq = result.lengthSq();\n\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t}\n\n\t\treturn result.set( 0, 0, 0 );\n\n\t};\n\n}();\n\n// static/instance method to calculate barycoordinates\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\nTHREE.Triangle.barycoordFromPoint = function () {\n\n\tvar v0 = new THREE.Vector3();\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\n\treturn function ( point, a, b, c, optionalTarget ) {\n\n\t\tv0.subVectors( c, a );\n\t\tv1.subVectors( b, a );\n\t\tv2.subVectors( point, a );\n\n\t\tvar dot00 = v0.dot( v0 );\n\t\tvar dot01 = v0.dot( v1 );\n\t\tvar dot02 = v0.dot( v2 );\n\t\tvar dot11 = v1.dot( v1 );\n\t\tvar dot12 = v1.dot( v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t// colinear or singular triangle\n\t\tif ( denom == 0 ) {\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn result.set( - 2, - 1, - 1 );\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycoordinates must always sum to 1\n\t\treturn result.set( 1 - u - v, v, u );\n\n\t};\n\n}();\n\nTHREE.Triangle.containsPoint = function () {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function ( point, a, b, c ) {\n\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t};\n\n}();\n\nTHREE.Triangle.prototype = {\n\n\tconstructor: THREE.Triangle,\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tarea: function () {\n\n\t\tvar v0 = new THREE.Vector3();\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tmidpoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tnormal: function ( optionalTarget ) {\n\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tplane: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Plane();\n\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Triangle().copy( this );\n\n\t}\n\n};\n\n// File:src/core/Clock.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Clock = function ( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n};\n\nTHREE.Clock.prototype = {\n\n\tconstructor: THREE.Clock,\n\n\tstart: function () {\n\n\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\n\t\t\t\t\t ? self.performance.now()\n\t\t\t\t\t : Date.now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.running = true;\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\n\t\t\t\t\t ? self.performance.now()\n\t\t\t\t\t : Date.now();\n\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n};\n\n// File:src/core/EventDispatcher.js\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nTHREE.EventDispatcher = function () {}\n\nTHREE.EventDispatcher.prototype = {\n\n\tconstructor: THREE.EventDispatcher,\n\n\tapply: function ( object ) {\n\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\n\n\t},\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = [];\n\t\t\tvar length = listenerArray.length;\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ] = listenerArray[ i ];\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/core/Raycaster.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://exocortex.com/\n * @author stephomi / http://stephaneginier.com/\n */\n\n( function ( THREE ) {\n\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\n\n\t\tthis.ray = new THREE.Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near || 0;\n\t\tthis.far = far || Infinity;\n\n\t\tthis.params = {\n\t\t\tSprite: {},\n\t\t\tMesh: {},\n\t\t\tPointCloud: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tLine: {}\n\t\t};\n\n\t};\n\n\tvar descSort = function ( a, b ) {\n\n\t\treturn a.distance - b.distance;\n\n\t};\n\n\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tvar children = object.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t//\n\n\tTHREE.Raycaster.prototype = {\n\n\t\tconstructor: THREE.Raycaster,\n\n\t\tprecision: 0.0001,\n\t\tlinePrecision: 1,\n\n\t\tset: function ( origin, direction ) {\n\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\t\tthis.ray.set( origin, direction );\n\n\t\t},\n\n\t\tsetFromCamera: function ( coords, camera ) {\n\n\t\t\t// camera is assumed _not_ to be a child of a transformed object\n\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tthis.ray.origin.copy( camera.position );\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( camera.position ).normalize();\n\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t\t}\n\n\t\t},\n\n\t\tintersectObject: function ( object, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tintersectObject( object, this, intersects, recursive );\n\n\t\t\tintersects.sort( descSort );\n\n\t\t\treturn intersects;\n\n\t\t},\n\n\t\tintersectObjects: function ( objects, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tif ( objects instanceof Array === false ) {\n\n\t\t\t\tconsole.log( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\t\treturn intersects;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t\t}\n\n\t\t\tintersects.sort( descSort );\n\n\t\t\treturn intersects;\n\n\t\t}\n\n\t};\n\n}( THREE ) );\n\n// File:src/core/Object3D.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Object3D = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = undefined;\n\tthis.children = [];\n\n\tthis.up = THREE.Object3D.DefaultUp.clone();\n\n\tvar scope = this;\n\n\tvar position = new THREE.Vector3();\n\tvar rotation = new THREE.Euler();\n\tvar quaternion = new THREE.Quaternion();\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\n\n\tvar onRotationChange = function () {\n\t\tquaternion.setFromEuler( rotation, false );\n\t};\n\n\tvar onQuaternionChange = function () {\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\t};\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t} );\n\n\tthis.rotationAutoUpdate = true;\n\n\tthis.matrix = new THREE.Matrix4();\n\tthis.matrixWorld = new THREE.Matrix4();\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\n\tthis.userData = {};\n\n};\n\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\n\nTHREE.Object3D.prototype = {\n\n\tconstructor: THREE.Object3D,\n\n\tget eulerOrder () {\n\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\n\n\t\treturn this.rotation.order;\n\n\t},\n\n\tset eulerOrder ( value ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\n\n\t\tthis.rotation.order = value;\n\n\t},\n\n\tget useQuaternion () {\n\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t},\n\n\tset useQuaternion ( value ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new THREE.Quaternion();\n\n\t\treturn function ( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function ( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t}(),\n\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( vector ) {\n\n\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"can't be added as a child of itself.\" );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object instanceof THREE.Object3D ) {\n\n\t\t\tif ( object.parent !== undefined ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add:\", object, \"is not an instance of THREE.Object3D.\" );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = undefined;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tgetChildByName: function ( name, recursive ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name, recursive );\n\n\t},\n\n\tgetObjectById: function ( id, recursive ) {\n\n\t\treturn this.getObjectByProperty( 'id', id, recursive );\n\n\t},\n\n\tgetObjectByName: function ( name, recursive ) {\n\n\t\treturn this.getObjectByProperty( 'name', name, recursive );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value, recursive ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value, recursive );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar scale = new THREE.Vector3();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t}(),\n\n\tgetWorldRotation: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Euler();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t}\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function ( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t}\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tif ( this.parent ) {\n\n\t\t\tcallback( this.parent );\n\n\t\t\tthis.parent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\n\n\t\t\tif ( this.parent === undefined ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.3,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'ObjectExporter'\n\t\t\t}\n\t\t};\n\n\t\t//\n\n\t\tvar geometries = {};\n\n\t\tvar parseGeometry = function ( geometry ) {\n\n\t\t\tif ( output.geometries === undefined ) {\n\n\t\t\t\toutput.geometries = [];\n\n\t\t\t}\n\n\t\t\tif ( geometries[ geometry.uuid ] === undefined ) {\n\n\t\t\t\tvar json = geometry.toJSON();\n\n\t\t\t\tdelete json.metadata;\n\n\t\t\t\tgeometries[ geometry.uuid ] = json;\n\n\t\t\t\toutput.geometries.push( json );\n\n\t\t\t}\n\n\t\t\treturn geometry.uuid;\n\n\t\t};\n\n\t\t//\n\n\t\tvar materials = {};\n\n\t\tvar parseMaterial = function ( material ) {\n\n\t\t\tif ( output.materials === undefined ) {\n\n\t\t\t\toutput.materials = [];\n\n\t\t\t}\n\n\t\t\tif ( materials[ material.uuid ] === undefined ) {\n\n\t\t\t\tvar json = material.toJSON();\n\n\t\t\t\tdelete json.metadata;\n\n\t\t\t\tmaterials[ material.uuid ] = json;\n\n\t\t\t\toutput.materials.push( json );\n\n\t\t\t}\n\n\t\t\treturn material.uuid;\n\n\t\t};\n\n\t\t//\n\n\t\tvar parseObject = function ( object ) {\n\n\t\t\tvar data = {};\n\n\t\t\tdata.uuid = object.uuid;\n\t\t\tdata.type = object.type;\n\n\t\t\tif ( object.name !== '' ) data.name = object.name;\n\t\t\tif ( JSON.stringify( object.userData ) !== '{}' ) data.userData = object.userData;\n\t\t\tif ( object.visible !== true ) data.visible = object.visible;\n\n\t\t\tif ( object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tdata.fov = object.fov;\n\t\t\t\tdata.aspect = object.aspect;\n\t\t\t\tdata.near = object.near;\n\t\t\t\tdata.far = object.far;\n\n\t\t\t} else if ( object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tdata.left = object.left;\n\t\t\t\tdata.right = object.right;\n\t\t\t\tdata.top = object.top;\n\t\t\t\tdata.bottom = object.bottom;\n\t\t\t\tdata.near = object.near;\n\t\t\t\tdata.far = object.far;\n\n\t\t\t} else if ( object instanceof THREE.AmbientLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\n\t\t\t} else if ( object instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\n\t\t\t} else if ( object instanceof THREE.PointLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\t\t\t\tdata.distance = object.distance;\n\n\t\t\t} else if ( object instanceof THREE.SpotLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.intensity = object.intensity;\n\t\t\t\tdata.distance = object.distance;\n\t\t\t\tdata.angle = object.angle;\n\t\t\t\tdata.exponent = object.exponent;\n\n\t\t\t} else if ( object instanceof THREE.HemisphereLight ) {\n\n\t\t\t\tdata.color = object.color.getHex();\n\t\t\t\tdata.groundColor = object.groundColor.getHex();\n\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tdata.geometry = parseGeometry( object.geometry );\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tdata.material = parseMaterial( object.material );\n\n\t\t\t}\n\n\t\t\tdata.matrix = object.matrix.toArray();\n\n\t\t\tif ( object.children.length > 0 ) {\n\n\t\t\t\tdata.children = [];\n\n\t\t\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\t\t\t\tdata.children.push( parseObject( object.children[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\toutput.object = parseObject( this );\n\n\t\treturn output;\n\n\t},\n\n\tclone: function ( object, recursive ) {\n\n\t\tif ( object === undefined ) object = new THREE.Object3D();\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tobject.name = this.name;\n\n\t\tobject.up.copy( this.up );\n\n\t\tobject.position.copy( this.position );\n\t\tobject.quaternion.copy( this.quaternion );\n\t\tobject.scale.copy( this.scale );\n\n\t\tobject.rotationAutoUpdate = this.rotationAutoUpdate;\n\n\t\tobject.matrix.copy( this.matrix );\n\t\tobject.matrixWorld.copy( this.matrixWorld );\n\n\t\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\n\t\tobject.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate;\n\n\t\tobject.visible = this.visible;\n\n\t\tobject.castShadow = this.castShadow;\n\t\tobject.receiveShadow = this.receiveShadow;\n\n\t\tobject.frustumCulled = this.frustumCulled;\n\n\t\tobject.userData = JSON.parse( JSON.stringify( this.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tvar child = this.children[ i ];\n\t\t\t\tobject.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\n\nTHREE.Object3DIdCount = 0;\n\n// File:src/core/Face3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\n\tthis.vertexNormals = normal instanceof Array ? normal : [];\n\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\n\tthis.vertexColors = color instanceof Array ? color : [];\n\n\tthis.vertexTangents = [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n};\n\nTHREE.Face3.prototype = {\n\n\tconstructor: THREE.Face3,\n\n\tclone: function () {\n\n\t\tvar face = new THREE.Face3( this.a, this.b, this.c );\n\n\t\tface.normal.copy( this.normal );\n\t\tface.color.copy( this.color );\n\n\t\tface.materialIndex = this.materialIndex;\n\n\t\tfor ( var i = 0, il = this.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tface.vertexNormals[ i ] = this.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tface.vertexColors[ i ] = this.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.vertexTangents.length; i < il; i ++ ) {\n\n\t\t\tface.vertexTangents[ i ] = this.vertexTangents[ i ].clone();\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n};\n\n// File:src/core/Face4.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\n\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' )\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\n\n};\n\n// File:src/core/BufferAttribute.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferAttribute = function ( array, itemSize ) {\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\n\tthis.needsUpdate = false;\n\n};\n\nTHREE.BufferAttribute.prototype = {\n\n\tconstructor: THREE.BufferAttribute,\n\n\tget length () {\n\n\t\treturn this.array.length;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.array.set( value );\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index     ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.BufferAttribute( new this.array.constructor( this.array ), this.itemSize );\n\n\t}\n\n};\n\n//\n\nTHREE.Int8Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint8Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint8ClampedAttribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n\n};\n\nTHREE.Int16Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint16Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Int32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Uint32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Float32Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\nTHREE.Float64Attribute = function ( data, itemSize ) {\n\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.' );\n\treturn new THREE.BufferAttribute( data, itemSize );\n\n};\n\n// File:src/core/BufferGeometry.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.attributes = {};\n\tthis.attributesKeys = [];\n\n\tthis.drawcalls = [];\n\tthis.offsets = this.drawcalls; // backwards compatibility\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n};\n\nTHREE.BufferGeometry.prototype = {\n\n\tconstructor: THREE.BufferGeometry,\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( attribute instanceof THREE.BufferAttribute === false ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.attributes[ name ] = { array: arguments[ 1 ], itemSize: arguments[ 2 ] };\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\t\tthis.attributesKeys = Object.keys( this.attributes );\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tthis.drawcalls.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tindex: indexOffset !== undefined ? indexOffset : 0\n\n\t\t} );\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToVector3Array( position.array );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcenter: function () {\n\n\t\t// TODO\n\n\t},\n\n\tfromGeometry: function ( geometry, settings ) {\n\n\t\tsettings = settings || { 'vertexColors': THREE.NoColors };\n\n\t\tvar vertices = geometry.vertices;\n\t\tvar faces = geometry.faces;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\t\tvar vertexColors = settings.vertexColors;\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexNormals = faces[ 0 ].vertexNormals.length == 3;\n\n\t\tvar positions = new Float32Array( faces.length * 3 * 3 );\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\t\tvar normals = new Float32Array( faces.length * 3 * 3 );\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\n\t\tif ( vertexColors !== THREE.NoColors ) {\n\n\t\t\tvar colors = new Float32Array( faces.length * 3 * 3 );\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\n\n\t\t}\n\n\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\tvar uvs = new Float32Array( faces.length * 3 * 2 );\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0, i2 = 0, i3 = 0; i < faces.length; i ++, i2 += 6, i3 += 9 ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar a = vertices[ face.a ];\n\t\t\tvar b = vertices[ face.b ];\n\t\t\tvar c = vertices[ face.c ];\n\n\t\t\tpositions[ i3     ] = a.x;\n\t\t\tpositions[ i3 + 1 ] = a.y;\n\t\t\tpositions[ i3 + 2 ] = a.z;\n\n\t\t\tpositions[ i3 + 3 ] = b.x;\n\t\t\tpositions[ i3 + 4 ] = b.y;\n\t\t\tpositions[ i3 + 5 ] = b.z;\n\n\t\t\tpositions[ i3 + 6 ] = c.x;\n\t\t\tpositions[ i3 + 7 ] = c.y;\n\t\t\tpositions[ i3 + 8 ] = c.z;\n\n\t\t\tif ( hasFaceVertexNormals === true ) {\n\n\t\t\t\tvar na = face.vertexNormals[ 0 ];\n\t\t\t\tvar nb = face.vertexNormals[ 1 ];\n\t\t\t\tvar nc = face.vertexNormals[ 2 ];\n\n\t\t\t\tnormals[ i3     ] = na.x;\n\t\t\t\tnormals[ i3 + 1 ] = na.y;\n\t\t\t\tnormals[ i3 + 2 ] = na.z;\n\n\t\t\t\tnormals[ i3 + 3 ] = nb.x;\n\t\t\t\tnormals[ i3 + 4 ] = nb.y;\n\t\t\t\tnormals[ i3 + 5 ] = nb.z;\n\n\t\t\t\tnormals[ i3 + 6 ] = nc.x;\n\t\t\t\tnormals[ i3 + 7 ] = nc.y;\n\t\t\t\tnormals[ i3 + 8 ] = nc.z;\n\n\t\t\t} else {\n\n\t\t\t\tvar n = face.normal;\n\n\t\t\t\tnormals[ i3     ] = n.x;\n\t\t\t\tnormals[ i3 + 1 ] = n.y;\n\t\t\t\tnormals[ i3 + 2 ] = n.z;\n\n\t\t\t\tnormals[ i3 + 3 ] = n.x;\n\t\t\t\tnormals[ i3 + 4 ] = n.y;\n\t\t\t\tnormals[ i3 + 5 ] = n.z;\n\n\t\t\t\tnormals[ i3 + 6 ] = n.x;\n\t\t\t\tnormals[ i3 + 7 ] = n.y;\n\t\t\t\tnormals[ i3 + 8 ] = n.z;\n\n\t\t\t}\n\n\t\t\tif ( vertexColors === THREE.FaceColors ) {\n\n\t\t\t\tvar fc = face.color;\n\n\t\t\t\tcolors[ i3     ] = fc.r;\n\t\t\t\tcolors[ i3 + 1 ] = fc.g;\n\t\t\t\tcolors[ i3 + 2 ] = fc.b;\n\n\t\t\t\tcolors[ i3 + 3 ] = fc.r;\n\t\t\t\tcolors[ i3 + 4 ] = fc.g;\n\t\t\t\tcolors[ i3 + 5 ] = fc.b;\n\n\t\t\t\tcolors[ i3 + 6 ] = fc.r;\n\t\t\t\tcolors[ i3 + 7 ] = fc.g;\n\t\t\t\tcolors[ i3 + 8 ] = fc.b;\n\n\t\t\t} else if ( vertexColors === THREE.VertexColors ) {\n\n\t\t\t\tvar vca = face.vertexColors[ 0 ];\n\t\t\t\tvar vcb = face.vertexColors[ 1 ];\n\t\t\t\tvar vcc = face.vertexColors[ 2 ];\n\n\t\t\t\tcolors[ i3     ] = vca.r;\n\t\t\t\tcolors[ i3 + 1 ] = vca.g;\n\t\t\t\tcolors[ i3 + 2 ] = vca.b;\n\n\t\t\t\tcolors[ i3 + 3 ] = vcb.r;\n\t\t\t\tcolors[ i3 + 4 ] = vcb.g;\n\t\t\t\tcolors[ i3 + 5 ] = vcb.b;\n\n\t\t\t\tcolors[ i3 + 6 ] = vcc.r;\n\t\t\t\tcolors[ i3 + 7 ] = vcc.g;\n\t\t\t\tcolors[ i3 + 8 ] = vcc.b;\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar uva = faceVertexUvs[ 0 ][ i ][ 0 ];\n\t\t\t\tvar uvb = faceVertexUvs[ 0 ][ i ][ 1 ];\n\t\t\t\tvar uvc = faceVertexUvs[ 0 ][ i ][ 2 ];\n\n\t\t\t\tuvs[ i2     ] = uva.x;\n\t\t\t\tuvs[ i2 + 1 ] = uva.y;\n\n\t\t\t\tuvs[ i2 + 2 ] = uvb.x;\n\t\t\t\tuvs[ i2 + 3 ] = uvb.y;\n\n\t\t\t\tuvs[ i2 + 4 ] = uvc.x;\n\t\t\t\tuvs[ i2 + 5 ] = uvc.y;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeBoundingSphere()\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tif ( this.boundingBox === null ) {\n\n\t\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\n\t\t\tif ( positions ) {\n\n\t\t\t\tvar bb = this.boundingBox;\n\t\t\t\tbb.makeEmpty();\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tbb.expandByPoint( vector );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\n\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}(),\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new THREE.Box3();\n\t\tvar vector = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\n\t\t\tif ( positions ) {\n\n\t\t\t\tbox.makeEmpty();\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tbox.expandByPoint( vector );\n\n\t\t\t\t}\n\n\t\t\t\tbox.center( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox:  sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar attributes = this.attributes;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\n\n\t\t\t\t\tnormals[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC,\n\n\t\t\tpA = new THREE.Vector3(),\n\t\t\tpB = new THREE.Vector3(),\n\t\t\tpC = new THREE.Vector3(),\n\n\t\t\tcb = new THREE.Vector3(),\n\t\t\tab = new THREE.Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( attributes.index ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\n\t\t\t\tvar offsets = ( this.offsets.length > 0 ? this.offsets : [ { start: 0, count: indices.length, index: 0 } ] );\n\n\t\t\t\tfor ( var j = 0, jl = offsets.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar start = offsets[ j ].start;\n\t\t\t\t\tvar count = offsets[ j ].count;\n\t\t\t\t\tvar index = offsets[ j ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = ( index + indices[ i     ] ) * 3;\n\t\t\t\t\t\tvB = ( index + indices[ i + 1 ] ) * 3;\n\t\t\t\t\t\tvC = ( index + indices[ i + 2 ] ) * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA     ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB     ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC     ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i     ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( this.attributes.index === undefined ||\n\t\t\t this.attributes.position === undefined ||\n\t\t\t this.attributes.normal === undefined ||\n\t\t\t this.attributes.uv === undefined ) {\n\n\t\t\tconsole.warn( 'Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar indices = this.attributes.index.array;\n\t\tvar positions = this.attributes.position.array;\n\t\tvar normals = this.attributes.normal.array;\n\t\tvar uvs = this.attributes.uv.array;\n\n\t\tvar nVertices = positions.length / 3;\n\n\t\tif ( this.attributes.tangent === undefined ) {\n\n\t\t\tthis.addAttribute( 'tangent', new THREE.BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tvar tangents = this.attributes.tangent.array;\n\n\t\tvar tan1 = [], tan2 = [];\n\n\t\tfor ( var k = 0; k < nVertices; k ++ ) {\n\n\t\t\ttan1[ k ] = new THREE.Vector3();\n\t\t\ttan2[ k ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar vA = new THREE.Vector3(),\n\t\t\tvB = new THREE.Vector3(),\n\t\t\tvC = new THREE.Vector3(),\n\n\t\t\tuvA = new THREE.Vector2(),\n\t\t\tuvB = new THREE.Vector2(),\n\t\t\tuvC = new THREE.Vector2(),\n\n\t\t\tx1, x2, y1, y2, z1, z2,\n\t\t\ts1, s2, t1, t2, r;\n\n\t\tvar sdir = new THREE.Vector3(), tdir = new THREE.Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tx1 = vB.x - vA.x;\n\t\t\tx2 = vC.x - vA.x;\n\n\t\t\ty1 = vB.y - vA.y;\n\t\t\ty2 = vC.y - vA.y;\n\n\t\t\tz1 = vB.z - vA.z;\n\t\t\tz2 = vC.z - vA.z;\n\n\t\t\ts1 = uvB.x - uvA.x;\n\t\t\ts2 = uvC.x - uvA.x;\n\n\t\t\tt1 = uvB.y - uvA.y;\n\t\t\tt2 = uvC.y - uvA.y;\n\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\n\n\t\t\tsdir.set(\n\t\t\t\t( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t( t2 * z1 - t1 * z2 ) * r\n\t\t\t);\n\n\t\t\ttdir.set(\n\t\t\t\t( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t( s1 * z2 - s2 * z1 ) * r\n\t\t\t);\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tvar i, il;\n\t\tvar j, jl;\n\t\tvar iA, iB, iC;\n\n\t\tif ( this.drawcalls.length === 0 ) {\n\n\t\t\tthis.addDrawCall( 0, indices.length, 0 );\n\n\t\t}\n\n\t\tvar drawcalls = this.drawcalls;\n\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\n\n\t\t\tvar start = drawcalls[ j ].start;\n\t\t\tvar count = drawcalls[ j ].count;\n\t\t\tvar index = drawcalls[ j ].index;\n\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\tiA = index + indices[ i ];\n\t\t\t\tiB = index + indices[ i + 1 ];\n\t\t\t\tiC = index + indices[ i + 2 ];\n\n\t\t\t\thandleTriangle( iA, iB, iC );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmp = new THREE.Vector3(), tmp2 = new THREE.Vector3();\n\t\tvar n = new THREE.Vector3(), n2 = new THREE.Vector3();\n\t\tvar w, t, test;\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tt = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\ttest = tmp2.dot( tan2[ v ] );\n\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4     ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( j = 0, jl = drawcalls.length; j < jl; ++ j ) {\n\n\t\t\tvar start = drawcalls[ j ].start;\n\t\t\tvar count = drawcalls[ j ].count;\n\t\t\tvar index = drawcalls[ j ].index;\n\n\t\t\tfor ( i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\tiA = index + indices[ i ];\n\t\t\t\tiB = index + indices[ i + 1 ];\n\t\t\t\tiC = index + indices[ i + 2 ];\n\n\t\t\t\thandleVertex( iA );\n\t\t\t\thandleVertex( iB );\n\t\t\t\thandleVertex( iC );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/*\n\t\tcomputeOffsets\n\t\tCompute the draw offset for large models by chunking the index buffer into chunks of 65k addressable vertices.\n\t\tThis method will effectively rewrite the index buffer and remap all attributes to match the new indices.\n\t\tWARNING: This method will also expand the vertex count to prevent sprawled triangles across draw offsets.\n\t\tindexBufferSize - Defaults to 65535, but allows for larger or smaller chunks.\n\t*/\n\tcomputeOffsets: function ( indexBufferSize ) {\n\n\t\tvar size = indexBufferSize;\n\t\tif ( indexBufferSize === undefined )\n\t\t\tsize = 65535; //WebGL limits type of index buffer values to 16-bit.\n\n\t\tvar s = Date.now();\n\n\t\tvar indices = this.attributes.index.array;\n\t\tvar vertices = this.attributes.position.array;\n\n\t\tvar verticesCount = ( vertices.length / 3 );\n\t\tvar facesCount = ( indices.length / 3 );\n\n\t\t/*\n\t\tconsole.log(\"Computing buffers in offsets of \"+size+\" -> indices:\"+indices.length+\" vertices:\"+vertices.length);\n\t\tconsole.log(\"Faces to process: \"+(indices.length/3));\n\t\tconsole.log(\"Reordering \"+verticesCount+\" vertices.\");\n\t\t*/\n\n\t\tvar sortedIndices = new Uint16Array( indices.length ); //16-bit buffers\n\t\tvar indexPtr = 0;\n\t\tvar vertexPtr = 0;\n\n\t\tvar offsets = [ { start:0, count:0, index:0 } ];\n\t\tvar offset = offsets[ 0 ];\n\n\t\tvar duplicatedVertices = 0;\n\t\tvar newVerticeMaps = 0;\n\t\tvar faceVertices = new Int32Array( 6 );\n\t\tvar vertexMap = new Int32Array( vertices.length );\n\t\tvar revVertexMap = new Int32Array( vertices.length );\n\t\tfor ( var j = 0; j < vertices.length; j ++ ) { vertexMap[ j ] = - 1; revVertexMap[ j ] = - 1; }\n\n\t\t/*\n\t\t\tTraverse every face and reorder vertices in the proper offsets of 65k.\n\t\t\tWe can have more than 65k entries in the index buffer per offset, but only reference 65k values.\n\t\t*/\n\t\tfor ( var findex = 0; findex < facesCount; findex ++ ) {\n\t\t\tnewVerticeMaps = 0;\n\n\t\t\tfor ( var vo = 0; vo < 3; vo ++ ) {\n\t\t\t\tvar vid = indices[ findex * 3 + vo ];\n\t\t\t\tif ( vertexMap[ vid ] == - 1 ) {\n\t\t\t\t\t//Unmapped vertice\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\n\t\t\t\t\tnewVerticeMaps ++;\n\t\t\t\t} else if ( vertexMap[ vid ] < offset.index ) {\n\t\t\t\t\t//Reused vertices from previous block (duplicate)\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = - 1;\n\t\t\t\t\tduplicatedVertices ++;\n\t\t\t\t} else {\n\t\t\t\t\t//Reused vertice in the current block\n\t\t\t\t\tfaceVertices[ vo * 2 ] = vid;\n\t\t\t\t\tfaceVertices[ vo * 2 + 1 ] = vertexMap[ vid ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar faceMax = vertexPtr + newVerticeMaps;\n\t\t\tif ( faceMax > ( offset.index + size ) ) {\n\t\t\t\tvar new_offset = { start:indexPtr, count:0, index:vertexPtr };\n\t\t\t\toffsets.push( new_offset );\n\t\t\t\toffset = new_offset;\n\n\t\t\t\t//Re-evaluate reused vertices in light of new offset.\n\t\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\n\t\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\n\t\t\t\t\tif ( new_vid > - 1 && new_vid < offset.index )\n\t\t\t\t\t\tfaceVertices[ v + 1 ] = - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Reindex the face.\n\t\t\tfor ( var v = 0; v < 6; v += 2 ) {\n\t\t\t\tvar vid = faceVertices[ v ];\n\t\t\t\tvar new_vid = faceVertices[ v + 1 ];\n\n\t\t\t\tif ( new_vid === - 1 )\n\t\t\t\t\tnew_vid = vertexPtr ++;\n\n\t\t\t\tvertexMap[ vid ] = new_vid;\n\t\t\t\trevVertexMap[ new_vid ] = vid;\n\t\t\t\tsortedIndices[ indexPtr ++ ] = new_vid - offset.index; //XXX overflows at 16bit\n\t\t\t\toffset.count ++;\n\t\t\t}\n\t\t}\n\n\t\t/* Move all attribute values to map to the new computed indices , also expand the vertice stack to match our new vertexPtr. */\n\t\tthis.reorderBuffers( sortedIndices, revVertexMap, vertexPtr );\n\t\tthis.offsets = offsets;\n\n\t\t/*\n\t\tvar orderTime = Date.now();\n\t\tconsole.log(\"Reorder time: \"+(orderTime-s)+\"ms\");\n\t\tconsole.log(\"Duplicated \"+duplicatedVertices+\" vertices.\");\n\t\tconsole.log(\"Compute Buffers time: \"+(Date.now()-s)+\"ms\");\n\t\tconsole.log(\"Draw offsets: \"+offsets.length);\n\t\t*/\n\n\t\treturn offsets;\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal.array;\n\n\t\tvar x, y, z, n;\n\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\n\n\t\t\tx = normals[ i ];\n\t\t\ty = normals[ i + 1 ];\n\t\t\tz = normals[ i + 2 ];\n\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n\t\t\tnormals[ i     ] *= n;\n\t\t\tnormals[ i + 1 ] *= n;\n\t\t\tnormals[ i + 2 ] *= n;\n\n\t\t}\n\n\t},\n\n\t/*\n\t\treoderBuffers:\n\t\tReorder attributes based on a new indexBuffer and indexMap.\n\t\tindexBuffer - Uint16Array of the new ordered indices.\n\t\tindexMap - Int32Array where the position is the new vertex ID and the value the old vertex ID for each vertex.\n\t\tvertexCount - Amount of total vertices considered in this reordering (in case you want to grow the vertice stack).\n\t*/\n\treorderBuffers: function ( indexBuffer, indexMap, vertexCount ) {\n\n\t\t/* Create a copy of all attributes for reordering. */\n\t\tvar sortedAttributes = {};\n\t\tfor ( var attr in this.attributes ) {\n\t\t\tif ( attr == 'index' )\n\t\t\t\tcontinue;\n\t\t\tvar sourceArray = this.attributes[ attr ].array;\n\t\t\tsortedAttributes[ attr ] = new sourceArray.constructor( this.attributes[ attr ].itemSize * vertexCount );\n\t\t}\n\n\t\t/* Move attribute positions based on the new index map */\n\t\tfor ( var new_vid = 0; new_vid < vertexCount; new_vid ++ ) {\n\t\t\tvar vid = indexMap[ new_vid ];\n\t\t\tfor ( var attr in this.attributes ) {\n\t\t\t\tif ( attr == 'index' )\n\t\t\t\t\tcontinue;\n\t\t\t\tvar attrArray = this.attributes[ attr ].array;\n\t\t\t\tvar attrSize = this.attributes[ attr ].itemSize;\n\t\t\t\tvar sortedAttr = sortedAttributes[ attr ];\n\t\t\t\tfor ( var k = 0; k < attrSize; k ++ )\n\t\t\t\t\tsortedAttr[ new_vid * attrSize + k ] = attrArray[ vid * attrSize + k ];\n\t\t\t}\n\t\t}\n\n\t\t/* Carry the new sorted buffers locally */\n\t\tthis.attributes[ 'index' ].array = indexBuffer;\n\t\tfor ( var attr in this.attributes ) {\n\t\t\tif ( attr == 'index' )\n\t\t\t\tcontinue;\n\t\t\tthis.attributes[ attr ].array = sortedAttributes[ attr ];\n\t\t\tthis.attributes[ attr ].numItems = this.attributes[ attr ].itemSize * vertexCount;\n\t\t}\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.0,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometryExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tdata: {\n\t\t\t\tattributes: {}\n\t\t\t}\n\t\t};\n\n\t\tvar attributes = this.attributes;\n\t\tvar offsets = this.offsets;\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = [], typeArray = attribute.array;\n\n\t\t\tfor ( var i = 0, l = typeArray.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ] = typeArray[ i ];\n\n\t\t\t}\n\n\t\t\toutput.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t}\n\n\t\t}\n\n\t\tif ( offsets.length > 0 ) {\n\n\t\t\toutput.data.offsets = JSON.parse( JSON.stringify( offsets ) );\n\n\t\t}\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\toutput.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t}\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tfor ( var attr in this.attributes ) {\n\n\t\t\tvar sourceAttr = this.attributes[ attr ];\n\t\t\tgeometry.addAttribute( attr, sourceAttr.clone() );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.offsets.length; i < il; i ++ ) {\n\n\t\t\tvar offset = this.offsets[ i ];\n\n\t\t\tgeometry.offsets.push( {\n\n\t\t\t\tstart: offset.start,\n\t\t\t\tindex: offset.index,\n\t\t\t\tcount: offset.count\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\n\n// File:src/core/Geometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://exocortex.com\n */\n\nTHREE.Geometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];  // one-to-one vertex colors, used in Points and Line\n\n\tthis.faces = [];\n\n\tthis.faceVertexUvs = [ [] ];\n\n\tthis.morphTargets = [];\n\tthis.morphColors = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.hasTangents = false;\n\n\tthis.dynamic = true; // the intermediate typed arrays will be deleted when set to false\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.elementsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.tangentsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\n\tthis.groupsNeedUpdate = false;\n\n};\n\nTHREE.Geometry.prototype = {\n\n\tconstructor: THREE.Geometry,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox instanceof THREE.Box3 ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere instanceof THREE.Sphere ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar vertices = attributes.position.array;\n\t\tvar indices = attributes.index !== undefined ? attributes.index.array : undefined;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\n\t\tfor ( var i = 0, j = 0; i < vertices.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar addFace = function ( a, b, c ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tscope.faces.push( new THREE.Face3( a, b, c, vertexNormals, vertexColors ) );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tif ( indices !== undefined ) {\n\n\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\n\n\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\toffset.addVectors( this.boundingBox.min, this.boundingBox.max );\n\t\toffset.multiplyScalar( - 0.5 );\n\n\t\tthis.applyMatrix( new THREE.Matrix4().makeTranslation( offset.x, offset.y, offset.z ) );\n\t\tthis.computeBoundingBox();\n\n\t\treturn offset;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC, vD;\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3(),\n\t\t\t\tdb = new THREE.Vector3(), dc = new THREE.Vector3(), bc = new THREE.Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.vertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\tface.vertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\tface.vertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new THREE.Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// tangents go to vertices\n\n\t\tvar f, fl, v, vl, i, il, vertexIndex,\n\t\t\tface, uv, vA, vB, vC, uvA, uvB, uvC,\n\t\t\tx1, x2, y1, y2, z1, z2,\n\t\t\ts1, s2, t1, t2, r, t, test,\n\t\t\ttan1 = [], tan2 = [],\n\t\t\tsdir = new THREE.Vector3(), tdir = new THREE.Vector3(),\n\t\t\ttmp = new THREE.Vector3(), tmp2 = new THREE.Vector3(),\n\t\t\tn = new THREE.Vector3(), w;\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\ttan1[ v ] = new THREE.Vector3();\n\t\t\ttan2[ v ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tfunction handleTriangle( context, a, b, c, ua, ub, uc ) {\n\n\t\t\tvA = context.vertices[ a ];\n\t\t\tvB = context.vertices[ b ];\n\t\t\tvC = context.vertices[ c ];\n\n\t\t\tuvA = uv[ ua ];\n\t\t\tuvB = uv[ ub ];\n\t\t\tuvC = uv[ uc ];\n\n\t\t\tx1 = vB.x - vA.x;\n\t\t\tx2 = vC.x - vA.x;\n\t\t\ty1 = vB.y - vA.y;\n\t\t\ty2 = vC.y - vA.y;\n\t\t\tz1 = vB.z - vA.z;\n\t\t\tz2 = vC.z - vA.z;\n\n\t\t\ts1 = uvB.x - uvA.x;\n\t\t\ts2 = uvC.x - uvA.x;\n\t\t\tt1 = uvB.y - uvA.y;\n\t\t\tt2 = uvC.y - uvA.y;\n\n\t\t\tr = 1.0 / ( s1 * t2 - s2 * t1 );\n\t\t\tsdir.set( ( t2 * x1 - t1 * x2 ) * r,\n\t\t\t\t\t  ( t2 * y1 - t1 * y2 ) * r,\n\t\t\t\t\t  ( t2 * z1 - t1 * z2 ) * r );\n\t\t\ttdir.set( ( s1 * x2 - s2 * x1 ) * r,\n\t\t\t\t\t  ( s1 * y2 - s2 * y1 ) * r,\n\t\t\t\t\t  ( s1 * z2 - s2 * z1 ) * r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\t\t\tuv = this.faceVertexUvs[ 0 ][ f ]; // use UV layer 0 for tangents\n\n\t\t\thandleTriangle( this, face.a, face.b, face.c, 0, 1, 2 );\n\n\t\t}\n\n\t\tvar faceIndex = [ 'a', 'b', 'c', 'd' ];\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tfor ( i = 0; i < Math.min( face.vertexNormals.length, 3 ); i ++ ) {\n\n\t\t\t\tn.copy( face.vertexNormals[ i ] );\n\n\t\t\t\tvertexIndex = face[ faceIndex[ i ] ];\n\n\t\t\t\tt = tan1[ vertexIndex ];\n\n\t\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\t\ttmp.copy( t );\n\t\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t\t// Calculate handedness\n\n\t\t\t\ttmp2.crossVectors( face.vertexNormals[ i ], t );\n\t\t\t\ttest = tmp2.dot( tan2[ vertexIndex ] );\n\t\t\t\tw = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\t\tface.vertexTangents[ i ] = new THREE.Vector4( tmp.x, tmp.y, tmp.z, w );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.hasTangents = true;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tvar d = 0;\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\tvertexOffset = this.vertices.length,\n\t\tvertices1 = this.vertices,\n\t\tvertices2 = geometry.vertices,\n\t\tfaces1 = this.faces,\n\t\tfaces2 = geometry.faces,\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertice by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, eg. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i,il, face;\n\t\tvar indices, k, j, jl, u;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t};\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\tvar dupIndex = - 1;\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\t\t\t\tif ( indices[ n ] == indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tdupIndex = n;\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.0,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometryExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type\n\t\t};\n\n\t\tif ( this.name !== \"\" ) output.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) output[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 );\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\n\n\t\t\t/*\n\t\t\tif ( hasMaterial ) {\n\n\t\t\t\tfaces.push( face.materialIndex );\n\n\t\t\t}\n\t\t\t*/\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\toutput.data = {};\n\n\t\toutput.data.vertices = vertices;\n\t\toutput.data.normals = normals;\n\t\tif ( colors.length > 0 ) output.data.colors = colors;\n\t\tif ( uvs.length > 0 ) output.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\toutput.data.faces = faces;\n\n\t\t//\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar geometry = new THREE.Geometry();\n\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tgeometry.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\tvar faces = this.faces;\n\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tgeometry.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = this.faceVertexUvs[ i ];\n\n\t\t\tif ( geometry.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\n\nTHREE.GeometryIdCount = 0;\n\n// File:src/cameras/Camera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.Camera = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new THREE.Matrix4();\n\tthis.projectionMatrix = new THREE.Matrix4();\n\n};\n\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Camera.prototype.constructor = THREE.Camera;\n\nTHREE.Camera.prototype.getWorldDirection = function () {\n\n\tvar quaternion = new THREE.Quaternion();\n\n\treturn function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.getWorldQuaternion( quaternion );\n\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t}\n\n}();\n\nTHREE.Camera.prototype.lookAt = function () {\n\n\t// This routine does not support cameras with rotated and/or translated parent(s)\n\n\tvar m1 = new THREE.Matrix4();\n\n\treturn function ( vector ) {\n\n\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t};\n\n}();\n\nTHREE.Camera.prototype.clone = function ( camera ) {\n\n\tif ( camera === undefined ) camera = new THREE.Camera();\n\n\tTHREE.Object3D.prototype.clone.call( this, camera );\n\n\tcamera.matrixWorldInverse.copy( this.matrixWorldInverse );\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n};\n\n// File:src/cameras/CubeCamera.js\n\n/**\n * Camera for rendering cube maps\n *\t- renders scene into axis-aligned cube\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tvar fov = 90, aspect = 1;\n\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\n\n\tthis.updateCubeMap = function ( renderer, scene ) {\n\n\t\tvar renderTarget = this.renderTarget;\n\t\tvar generateMipmaps = renderTarget.generateMipmaps;\n\n\t\trenderTarget.generateMipmaps = false;\n\n\t\trenderTarget.activeCubeFace = 0;\n\t\trenderer.render( scene, cameraPX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 1;\n\t\trenderer.render( scene, cameraNX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 2;\n\t\trenderer.render( scene, cameraPY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 3;\n\t\trenderer.render( scene, cameraNY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 4;\n\t\trenderer.render( scene, cameraPZ, renderTarget );\n\n\t\trenderTarget.generateMipmaps = generateMipmaps;\n\n\t\trenderTarget.activeCubeFace = 5;\n\t\trenderer.render( scene, cameraNZ, renderTarget );\n\n\t};\n\n};\n\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\n\n// File:src/cameras/OrthographicCamera.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\nTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\n\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\n\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\tvar cx = ( this.right + this.left ) / 2;\n\tvar cy = ( this.top + this.bottom ) / 2;\n\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\n\n};\n\nTHREE.OrthographicCamera.prototype.clone = function () {\n\n\tvar camera = new THREE.OrthographicCamera();\n\n\tTHREE.Camera.prototype.clone.call( this, camera );\n\n\tcamera.zoom = this.zoom;\n\n\tcamera.left = this.left;\n\tcamera.right = this.right;\n\tcamera.top = this.top;\n\tcamera.bottom = this.bottom;\n\n\tcamera.near = this.near;\n\tcamera.far = this.far;\n\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n};\n\n// File:src/cameras/PerspectiveCamera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.zoom = 1;\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\nTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\n\n\n/**\n * Uses Focal Length (in mm) to estimate and set FOV\n * 35mm (fullframe) camera is used if frame size is not specified;\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\n */\n\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\n\n\tif ( frameHeight === undefined ) frameHeight = 24;\n\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\n\tthis.updateProjectionMatrix();\n\n}\n\n\n/**\n * Sets an offset in a larger frustum. This is useful for multi-window or\n * multi-monitor/multi-machine setups.\n *\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n * the monitors are in grid like this\n *\n *   +---+---+---+\n *   | A | B | C |\n *   +---+---+---+\n *   | D | E | F |\n *   +---+---+---+\n *\n * then for each monitor you would call it like this\n *\n *   var w = 1920;\n *   var h = 1080;\n *   var fullWidth = w * 3;\n *   var fullHeight = h * 2;\n *\n *   --A--\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n *   --B--\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n *   --C--\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n *   --D--\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n *   --E--\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n *   --F--\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n *\n *   Note there is no reason monitors have to be the same size or in a grid.\n */\n\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\tthis.fullWidth = fullWidth;\n\tthis.fullHeight = fullHeight;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.updateProjectionMatrix();\n\n};\n\n\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\n\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\n\n\tif ( this.fullWidth ) {\n\n\t\tvar aspect = this.fullWidth / this.fullHeight;\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\n\t\tvar bottom = - top;\n\t\tvar left = aspect * bottom;\n\t\tvar right = aspect * top;\n\t\tvar width = Math.abs( right - left );\n\t\tvar height = Math.abs( top - bottom );\n\n\t\tthis.projectionMatrix.makeFrustum(\n\t\t\tleft + this.x * width / this.fullWidth,\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\n\t\t\ttop - this.y * height / this.fullHeight,\n\t\t\tthis.near,\n\t\t\tthis.far\n\t\t);\n\n\t} else {\n\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\n\n\t}\n\n};\n\nTHREE.PerspectiveCamera.prototype.clone = function () {\n\n\tvar camera = new THREE.PerspectiveCamera();\n\n\tTHREE.Camera.prototype.clone.call( this, camera );\n\n\tcamera.zoom = this.zoom;\n\n\tcamera.fov = this.fov;\n\tcamera.aspect = this.aspect;\n\tcamera.near = this.near;\n\tcamera.far = this.far;\n\n\tcamera.projectionMatrix.copy( this.projectionMatrix );\n\n\treturn camera;\n\n};\n\n// File:src/lights/Light.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Light = function ( color ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Light';\n\t\n\tthis.color = new THREE.Color( color );\n\n};\n\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Light.prototype.constructor = THREE.Light;\n\nTHREE.Light.prototype.clone = function ( light ) {\n\n\tif ( light === undefined ) light = new THREE.Light();\n\n\tTHREE.Object3D.prototype.clone.call( this, light );\n\n\tlight.color.copy( this.color );\n\n\treturn light;\n\n};\n\n// File:src/lights/AmbientLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AmbientLight = function ( color ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'AmbientLight';\n\n};\n\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\n\nTHREE.AmbientLight.prototype.clone = function () {\n\n\tvar light = new THREE.AmbientLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\treturn light;\n\n};\n\n// File:src/lights/AreaLight.js\n\n/**\n * @author MPanknin / http://www.redplant.de/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.AreaLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'AreaLight';\n\n\tthis.normal = new THREE.Vector3( 0, - 1, 0 );\n\tthis.right = new THREE.Vector3( 1, 0, 0 );\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n\tthis.width = 1.0;\n\tthis.height = 1.0;\n\n\tthis.constantAttenuation = 1.5;\n\tthis.linearAttenuation = 0.5;\n\tthis.quadraticAttenuation = 0.1;\n\n};\n\nTHREE.AreaLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.AreaLight.prototype.constructor = THREE.AreaLight;\n\n\n// File:src/lights/DirectionalLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DirectionalLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.target = new THREE.Object3D();\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n\tthis.castShadow = false;\n\tthis.onlyShadow = false;\n\n\t//\n\n\tthis.shadowCameraNear = 50;\n\tthis.shadowCameraFar = 5000;\n\n\tthis.shadowCameraLeft = - 500;\n\tthis.shadowCameraRight = 500;\n\tthis.shadowCameraTop = 500;\n\tthis.shadowCameraBottom = - 500;\n\n\tthis.shadowCameraVisible = false;\n\n\tthis.shadowBias = 0;\n\tthis.shadowDarkness = 0.5;\n\n\tthis.shadowMapWidth = 512;\n\tthis.shadowMapHeight = 512;\n\n\t//\n\n\tthis.shadowCascade = false;\n\n\tthis.shadowCascadeOffset = new THREE.Vector3( 0, 0, - 1000 );\n\tthis.shadowCascadeCount = 2;\n\n\tthis.shadowCascadeBias = [ 0, 0, 0 ];\n\tthis.shadowCascadeWidth = [ 512, 512, 512 ];\n\tthis.shadowCascadeHeight = [ 512, 512, 512 ];\n\n\tthis.shadowCascadeNearZ = [ - 1.000, 0.990, 0.998 ];\n\tthis.shadowCascadeFarZ  = [  0.990, 0.998, 1.000 ];\n\n\tthis.shadowCascadeArray = [];\n\n\t//\n\n\tthis.shadowMap = null;\n\tthis.shadowMapSize = null;\n\tthis.shadowCamera = null;\n\tthis.shadowMatrix = null;\n\n};\n\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\n\nTHREE.DirectionalLight.prototype.clone = function () {\n\n\tvar light = new THREE.DirectionalLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.target = this.target.clone();\n\n\tlight.intensity = this.intensity;\n\n\tlight.castShadow = this.castShadow;\n\tlight.onlyShadow = this.onlyShadow;\n\n\t//\n\n\tlight.shadowCameraNear = this.shadowCameraNear;\n\tlight.shadowCameraFar = this.shadowCameraFar;\n\n\tlight.shadowCameraLeft = this.shadowCameraLeft;\n\tlight.shadowCameraRight = this.shadowCameraRight;\n\tlight.shadowCameraTop = this.shadowCameraTop;\n\tlight.shadowCameraBottom = this.shadowCameraBottom;\n\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\n\n\tlight.shadowBias = this.shadowBias;\n\tlight.shadowDarkness = this.shadowDarkness;\n\n\tlight.shadowMapWidth = this.shadowMapWidth;\n\tlight.shadowMapHeight = this.shadowMapHeight;\n\n\t//\n\n\tlight.shadowCascade = this.shadowCascade;\n\n\tlight.shadowCascadeOffset.copy( this.shadowCascadeOffset );\n\tlight.shadowCascadeCount = this.shadowCascadeCount;\n\n\tlight.shadowCascadeBias = this.shadowCascadeBias.slice( 0 );\n\tlight.shadowCascadeWidth = this.shadowCascadeWidth.slice( 0 );\n\tlight.shadowCascadeHeight = this.shadowCascadeHeight.slice( 0 );\n\n\tlight.shadowCascadeNearZ = this.shadowCascadeNearZ.slice( 0 );\n\tlight.shadowCascadeFarZ  = this.shadowCascadeFarZ.slice( 0 );\n\n\treturn light;\n\n};\n\n// File:src/lights/HemisphereLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\n\n\tTHREE.Light.call( this, skyColor );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.position.set( 0, 100, 0 );\n\n\tthis.groundColor = new THREE.Color( groundColor );\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\n};\n\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\n\nTHREE.HemisphereLight.prototype.clone = function () {\n\n\tvar light = new THREE.HemisphereLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.groundColor.copy( this.groundColor );\n\tlight.intensity = this.intensity;\n\n\treturn light;\n\n};\n\n// File:src/lights/PointLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PointLight = function ( color, intensity, distance ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'PointLight';\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\n};\n\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.PointLight.prototype.constructor = THREE.PointLight;\n\nTHREE.PointLight.prototype.clone = function () {\n\n\tvar light = new THREE.PointLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.intensity = this.intensity;\n\tlight.distance = this.distance;\n\n\treturn light;\n\n};\n\n// File:src/lights/SpotLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent ) {\n\n\tTHREE.Light.call( this, color );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.target = new THREE.Object3D();\n\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\n\n\tthis.castShadow = false;\n\tthis.onlyShadow = false;\n\n\t//\n\n\tthis.shadowCameraNear = 50;\n\tthis.shadowCameraFar = 5000;\n\tthis.shadowCameraFov = 50;\n\n\tthis.shadowCameraVisible = false;\n\n\tthis.shadowBias = 0;\n\tthis.shadowDarkness = 0.5;\n\n\tthis.shadowMapWidth = 512;\n\tthis.shadowMapHeight = 512;\n\n\t//\n\n\tthis.shadowMap = null;\n\tthis.shadowMapSize = null;\n\tthis.shadowCamera = null;\n\tthis.shadowMatrix = null;\n\n};\n\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\nTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\n\nTHREE.SpotLight.prototype.clone = function () {\n\n\tvar light = new THREE.SpotLight();\n\n\tTHREE.Light.prototype.clone.call( this, light );\n\n\tlight.target = this.target.clone();\n\n\tlight.intensity = this.intensity;\n\tlight.distance = this.distance;\n\tlight.angle = this.angle;\n\tlight.exponent = this.exponent;\n\n\tlight.castShadow = this.castShadow;\n\tlight.onlyShadow = this.onlyShadow;\n\n\t//\n\n\tlight.shadowCameraNear = this.shadowCameraNear;\n\tlight.shadowCameraFar = this.shadowCameraFar;\n\tlight.shadowCameraFov = this.shadowCameraFov;\n\n\tlight.shadowCameraVisible = this.shadowCameraVisible;\n\n\tlight.shadowBias = this.shadowBias;\n\tlight.shadowDarkness = this.shadowDarkness;\n\n\tlight.shadowMapWidth = this.shadowMapWidth;\n\tlight.shadowMapHeight = this.shadowMapHeight;\n\n\treturn light;\n\n};\n\n// File:src/loaders/Cache.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Cache = function () {\n\n\tthis.files = {};\n\n};\n\nTHREE.Cache.prototype = {\n\n\tconstructor: THREE.Cache,\n\n\tadd: function ( key, file ) {\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {}\n\n\t}\n\n};\n\n// File:src/loaders/Loader.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Loader = function ( showStatus ) {\n\n\tthis.showStatus = showStatus;\n\tthis.statusDomElement = showStatus ? THREE.Loader.prototype.addStatusElement() : null;\n\n\tthis.imageLoader = new THREE.ImageLoader();\n\n\tthis.onLoadStart = function () {};\n\tthis.onLoadProgress = function () {};\n\tthis.onLoadComplete = function () {};\n\n};\n\nTHREE.Loader.prototype = {\n\n\tconstructor: THREE.Loader,\n\n\tcrossOrigin: undefined,\n\n\taddStatusElement: function () {\n\n\t\tvar e = document.createElement( 'div' );\n\n\t\te.style.position = 'absolute';\n\t\te.style.right = '0px';\n\t\te.style.top = '0px';\n\t\te.style.fontSize = '0.8em';\n\t\te.style.textAlign = 'left';\n\t\te.style.background = 'rgba(0,0,0,0.25)';\n\t\te.style.color = '#fff';\n\t\te.style.width = '120px';\n\t\te.style.padding = '0.5em 0.5em 0.5em 0.5em';\n\t\te.style.zIndex = 1000;\n\n\t\te.innerHTML = 'Loading ...';\n\n\t\treturn e;\n\n\t},\n\n\tupdateProgress: function ( progress ) {\n\n\t\tvar message = 'Loaded ';\n\n\t\tif ( progress.total ) {\n\n\t\t\tmessage += ( 100 * progress.loaded / progress.total ).toFixed( 0 ) + '%';\n\n\n\t\t} else {\n\n\t\t\tmessage += ( progress.loaded / 1024 ).toFixed( 2 ) + ' KB';\n\n\t\t}\n\n\t\tthis.statusDomElement.innerHTML = message;\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar parts = url.split( '/' );\n\n\t\tif ( parts.length === 1 ) return './';\n\n\t\tparts.pop();\n\n\t\treturn parts.join( '/' ) + '/';\n\n\t},\n\n\tinitMaterials: function ( materials, texturePath ) {\n\n\t\tvar array = [];\n\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath );\n\n\t\t}\n\n\t\treturn array;\n\n\t},\n\n\tneedsTangents: function ( materials ) {\n\n\t\tfor ( var i = 0, il = materials.length; i < il; i ++ ) {\n\n\t\t\tvar m = materials[ i ];\n\n\t\t\tif ( m instanceof THREE.ShaderMaterial ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcreateMaterial: function ( m, texturePath ) {\n\n\t\tvar scope = this;\n\n\t\tfunction nearest_pow2( n ) {\n\n\t\t\tvar l = Math.log( n ) / Math.LN2;\n\t\t\treturn Math.pow( 2, Math.round(  l ) );\n\n\t\t}\n\n\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\n\n\t\t\tvar fullPath = texturePath + sourceFile;\n\n\t\t\tvar texture;\n\n\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\n\n\t\t\tif ( loader !== null ) {\n\n\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t} else {\n\n\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t\tloader = scope.imageLoader;\n\t\t\t\tloader.crossOrigin = scope.crossOrigin;\n\t\t\t\tloader.load( fullPath, function ( image ) {\n\n\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\n\t\t\t\t\t\t THREE.Math.isPowerOfTwo( image.height ) === false ) {\n\n\t\t\t\t\t\tvar width = nearest_pow2( image.width );\n\t\t\t\t\t\tvar height = nearest_pow2( image.height );\n\n\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\t\t\ttexture.image = canvas;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture.image = image;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\ttexture.sourceFile = sourceFile;\n\n\t\t\tif ( repeat ) {\n\n\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\n\n\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\n\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\n\n\t\t\t}\n\n\t\t\tif ( offset ) {\n\n\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\n\n\t\t\t}\n\n\t\t\tif ( wrap ) {\n\n\t\t\t\tvar wrapMap = {\n\t\t\t\t\t'repeat': THREE.RepeatWrapping,\n\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\n\t\t\t\t}\n\n\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\n\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\n\n\t\t\t}\n\n\t\t\tif ( anisotropy ) {\n\n\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t}\n\n\t\t\twhere[ name ] = texture;\n\n\t\t}\n\n\t\tfunction rgb2hex( rgb ) {\n\n\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\n\n\t\t}\n\n\t\t// defaults\n\n\t\tvar mtype = 'MeshLambertMaterial';\n\t\tvar mpars = { color: 0xeeeeee, opacity: 1.0, map: null, lightMap: null, normalMap: null, bumpMap: null, wireframe: false };\n\n\t\t// parameters from model file\n\n\t\tif ( m.shading ) {\n\n\t\t\tvar shading = m.shading.toLowerCase();\n\n\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\n\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\n\n\t\t}\n\n\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\n\n\t\t\tmpars.blending = THREE[ m.blending ];\n\n\t\t}\n\n\t\tif ( m.transparent !== undefined || m.opacity < 1.0 ) {\n\n\t\t\tmpars.transparent = m.transparent;\n\n\t\t}\n\n\t\tif ( m.depthTest !== undefined ) {\n\n\t\t\tmpars.depthTest = m.depthTest;\n\n\t\t}\n\n\t\tif ( m.depthWrite !== undefined ) {\n\n\t\t\tmpars.depthWrite = m.depthWrite;\n\n\t\t}\n\n\t\tif ( m.visible !== undefined ) {\n\n\t\t\tmpars.visible = m.visible;\n\n\t\t}\n\n\t\tif ( m.flipSided !== undefined ) {\n\n\t\t\tmpars.side = THREE.BackSide;\n\n\t\t}\n\n\t\tif ( m.doubleSided !== undefined ) {\n\n\t\t\tmpars.side = THREE.DoubleSide;\n\n\t\t}\n\n\t\tif ( m.wireframe !== undefined ) {\n\n\t\t\tmpars.wireframe = m.wireframe;\n\n\t\t}\n\n\t\tif ( m.vertexColors !== undefined ) {\n\n\t\t\tif ( m.vertexColors === 'face' ) {\n\n\t\t\t\tmpars.vertexColors = THREE.FaceColors;\n\n\t\t\t} else if ( m.vertexColors ) {\n\n\t\t\t\tmpars.vertexColors = THREE.VertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// colors\n\n\t\tif ( m.colorDiffuse ) {\n\n\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\n\n\t\t} else if ( m.DbgColor ) {\n\n\t\t\tmpars.color = m.DbgColor;\n\n\t\t}\n\n\t\tif ( m.colorSpecular ) {\n\n\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\n\n\t\t}\n\n\t\tif ( m.colorAmbient ) {\n\n\t\t\tmpars.ambient = rgb2hex( m.colorAmbient );\n\n\t\t}\n\n\t\tif ( m.colorEmissive ) {\n\n\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\n\n\t\t}\n\n\t\t// modifiers\n\n\t\tif ( m.transparency ) {\n\n\t\t\tmpars.opacity = m.transparency;\n\n\t\t}\n\n\t\tif ( m.specularCoef ) {\n\n\t\t\tmpars.shininess = m.specularCoef;\n\n\t\t}\n\n\t\t// textures\n\n\t\tif ( m.mapDiffuse && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapLight && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapBump && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapNormal && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapSpecular && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\n\t\t}\n\n\t\tif ( m.mapAlpha && texturePath ) {\n\n\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( m.mapBumpScale ) {\n\n\t\t\tmpars.bumpScale = m.mapBumpScale;\n\n\t\t}\n\n\t\tif ( m.mapNormalFactor ) {\n\n\t\t\tmpars.normalScale = new THREE.Vector2( m.mapNormalFactor, m.mapNormalFactor );\n\n\t\t}\n\n\t\tvar material = new THREE[ mtype ]( mpars );\n\n\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\n\n\t\treturn material;\n\n\t}\n\n};\n\nTHREE.Loader.Handlers = {\n\n\thandlers: [],\n\n\tadd: function ( regex, loader ) {\n\n\t\tthis.handlers.push( regex, loader );\n\n\t},\n\n\tget: function ( file ) {\n\n\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = this.handlers[ i ];\n\t\t\tvar loader  = this.handlers[ i + 1 ];\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n};\n\n// File:src/loaders/XHRLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.XHRLoader = function ( manager ) {\n\n\tthis.cache = new THREE.Cache();\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.XHRLoader.prototype = {\n\n\tconstructor: THREE.XHRLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar cached = scope.cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tif ( onLoad ) onLoad( cached );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.open( 'GET', url, true );\n\n\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\tscope.cache.add( url, this.response );\n\n\t\t\tif ( onLoad ) onLoad( this.response );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\tif ( onProgress !== undefined ) {\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tonProgress( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onError !== undefined ) {\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tonError( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\n\t\trequest.send( null );\n\n\t\tscope.manager.itemStart( url );\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n};\n\n// File:src/loaders/ImageLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ImageLoader = function ( manager ) {\n\n\tthis.cache = new THREE.Cache();\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ImageLoader.prototype = {\n\n\tconstructor: THREE.ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar cached = scope.cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tonLoad( cached );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar image = document.createElement( 'img' );\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\timage.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tscope.cache.add( url, this );\n\n\t\t\t\tonLoad( this );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onProgress !== undefined ) {\n\n\t\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tonProgress( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( onError !== undefined ) {\n\n\t\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tonError( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\timage.src = url;\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n}\n\n// File:src/loaders/JSONLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.JSONLoader = function ( showStatus ) {\n\n\tTHREE.Loader.call( this, showStatus );\n\n\tthis.withCredentials = false;\n\n};\n\nTHREE.JSONLoader.prototype = Object.create( THREE.Loader.prototype );\nTHREE.JSONLoader.prototype.constructor = THREE.JSONLoader;\n\nTHREE.JSONLoader.prototype.load = function ( url, callback, texturePath ) {\n\n\tvar scope = this;\n\n\t// todo: unify load API to for easier SceneLoader use\n\n\ttexturePath = texturePath && ( typeof texturePath === 'string' ) ? texturePath : this.extractUrlBase( url );\n\n\tthis.onLoadStart();\n\tthis.loadAjaxJSON( this, url, callback, texturePath );\n\n};\n\nTHREE.JSONLoader.prototype.loadAjaxJSON = function ( context, url, callback, texturePath, callbackProgress ) {\n\n\tvar xhr = new XMLHttpRequest();\n\n\tvar length = 0;\n\n\txhr.onreadystatechange = function () {\n\n\t\tif ( xhr.readyState === xhr.DONE ) {\n\n\t\t\tif ( xhr.status === 200 || xhr.status === 0 ) {\n\n\t\t\t\tif ( xhr.responseText ) {\n\n\t\t\t\t\tvar json = JSON.parse( xhr.responseText );\n\n\t\t\t\t\tif ( json.metadata !== undefined && json.metadata.type === 'scene' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be a Scene. Use THREE.SceneLoader instead.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = context.parse( json, texturePath );\n\t\t\t\t\tcallback( result.geometry, result.materials );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: \"' + url + '\" seems to be unreachable or the file is empty.' );\n\n\t\t\t\t}\n\n\t\t\t\t// in context of more complex asset initialization\n\t\t\t\t// do not block on single failed file\n\t\t\t\t// maybe should go even one more level up\n\n\t\t\t\tcontext.onLoadComplete();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.JSONLoader: Couldn\\'t load \"' + url + '\" (' + xhr.status + ')' );\n\n\t\t\t}\n\n\t\t} else if ( xhr.readyState === xhr.LOADING ) {\n\n\t\t\tif ( callbackProgress ) {\n\n\t\t\t\tif ( length === 0 ) {\n\n\t\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\n\n\t\t\t\t}\n\n\t\t\t\tcallbackProgress( { total: length, loaded: xhr.responseText.length } );\n\n\t\t\t}\n\n\t\t} else if ( xhr.readyState === xhr.HEADERS_RECEIVED ) {\n\n\t\t\tif ( callbackProgress !== undefined ) {\n\n\t\t\t\tlength = xhr.getResponseHeader( 'Content-Length' );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\txhr.open( 'GET', url, true );\n\txhr.withCredentials = this.withCredentials;\n\txhr.send( null );\n\n};\n\nTHREE.JSONLoader.prototype.parse = function ( json, texturePath ) {\n\n\tvar scope = this,\n\tgeometry = new THREE.Geometry(),\n\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\n\n\tparseModel( scale );\n\n\tparseSkin();\n\tparseMorphing( scale );\n\n\tgeometry.computeFaceNormals();\n\tgeometry.computeBoundingSphere();\n\n\tfunction parseModel( scale ) {\n\n\t\tfunction isBitSet( value, position ) {\n\n\t\t\treturn value & ( 1 << position );\n\n\t\t}\n\n\t\tvar i, j, fi,\n\n\t\toffset, zLength,\n\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\n\n\t\ttype,\n\t\tisQuad,\n\t\thasMaterial,\n\t\thasFaceVertexUv,\n\t\thasFaceNormal, hasFaceVertexNormal,\n\t\thasFaceColor, hasFaceVertexColor,\n\n\t\tvertex, face, faceA, faceB, color, hex, normal,\n\n\t\tuvLayer, uv, u, v,\n\n\t\tfaces = json.faces,\n\t\tvertices = json.vertices,\n\t\tnormals = json.normals,\n\t\tcolors = json.colors,\n\n\t\tnUvLayers = 0;\n\n\t\tif ( json.uvs !== undefined ) {\n\n\t\t\t// disregard empty arrays\n\n\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\n\n\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t}\n\n\t\toffset = 0;\n\t\tzLength = vertices.length;\n\n\t\twhile ( offset < zLength ) {\n\n\t\t\tvertex = new THREE.Vector3();\n\n\t\t\tvertex.x = vertices[ offset ++ ] * scale;\n\t\t\tvertex.y = vertices[ offset ++ ] * scale;\n\t\t\tvertex.z = vertices[ offset ++ ] * scale;\n\n\t\t\tgeometry.vertices.push( vertex );\n\n\t\t}\n\n\t\toffset = 0;\n\t\tzLength = faces.length;\n\n\t\twhile ( offset < zLength ) {\n\n\t\t\ttype = faces[ offset ++ ];\n\n\n\t\t\tisQuad              = isBitSet( type, 0 );\n\t\t\thasMaterial         = isBitSet( type, 1 );\n\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\n\t\t\thasFaceNormal       = isBitSet( type, 4 );\n\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\n\t\t\thasFaceColor\t     = isBitSet( type, 6 );\n\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\n\n\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\n\n\t\t\tif ( isQuad ) {\n\n\t\t\t\tfaceA = new THREE.Face3();\n\t\t\t\tfaceA.a = faces[ offset ];\n\t\t\t\tfaceA.b = faces[ offset + 1 ];\n\t\t\t\tfaceA.c = faces[ offset + 3 ];\n\n\t\t\t\tfaceB = new THREE.Face3();\n\t\t\t\tfaceB.a = faces[ offset + 1 ];\n\t\t\t\tfaceB.b = faces[ offset + 2 ];\n\t\t\t\tfaceB.c = faces[ offset + 3 ];\n\n\t\t\t\toffset += 4;\n\n\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\tfaceA.materialIndex = materialIndex;\n\t\t\t\t\tfaceB.materialIndex = materialIndex;\n\n\t\t\t\t}\n\n\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = []\n\n\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\n\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\tfaceA.normal.set(\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t);\n\n\t\t\t\t\tfaceB.normal.copy( faceA.normal );\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\tfaceA.color.setHex( hex );\n\t\t\t\t\tfaceB.color.setHex( hex );\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\n\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faces.push( faceA );\n\t\t\t\tgeometry.faces.push( faceB );\n\n\t\t\t} else {\n\n\t\t\t\tface = new THREE.Face3();\n\t\t\t\tface.a = faces[ offset ++ ];\n\t\t\t\tface.b = faces[ offset ++ ];\n\t\t\t\tface.c = faces[ offset ++ ];\n\n\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\t}\n\n\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\n\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\tface.normal.set(\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tface.vertexNormals.push( normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\n\n\t\t\t\t}\n\n\n\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.faces.push( face );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction parseSkin() {\n\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\n\n\t\tif ( json.skinWeights ) {\n\n\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\tvar x =                               json.skinWeights[ i     ];\n\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\n\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\n\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\n\n\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.skinIndices ) {\n\n\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\tvar a =                               json.skinIndices[ i     ];\n\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\n\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\n\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\n\n\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.bones = json.bones;\n\n\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\n\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\n\n\t\t}\n\n\n\t\t// could change this to json.animations[0] or remove completely\n\n\t\tgeometry.animation = json.animation;\n\t\tgeometry.animations = json.animations;\n\n\t};\n\n\tfunction parseMorphing( scale ) {\n\n\t\tif ( json.morphTargets !== undefined ) {\n\n\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\n\n\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tgeometry.morphTargets[ i ] = {};\n\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\n\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\n\n\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\n\t\t\t\tsrcVertices = json.morphTargets [ i ].vertices;\n\n\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\n\n\t\t\t\t\tvar vertex = new THREE.Vector3();\n\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\n\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\n\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\n\n\t\t\t\t\tdstVertices.push( vertex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.morphColors !== undefined ) {\n\n\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\n\n\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\n\n\t\t\t\tgeometry.morphColors[ i ] = {};\n\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\n\t\t\t\tgeometry.morphColors[ i ].colors = [];\n\n\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\n\t\t\t\tsrcColors = json.morphColors [ i ].colors;\n\n\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\n\n\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\n\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\n\t\t\t\t\tdstColors.push( color );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tif ( json.materials === undefined || json.materials.length === 0 ) {\n\n\t\treturn { geometry: geometry };\n\n\t} else {\n\n\t\tvar materials = this.initMaterials( json.materials, texturePath );\n\n\t\tif ( this.needsTangents( materials ) ) {\n\n\t\t\tgeometry.computeTangents();\n\n\t\t}\n\n\t\treturn { geometry: geometry, materials: materials };\n\n\t}\n\n};\n\n// File:src/loaders/LoadingManager.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar loaded = 0, total = 0;\n\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\ttotal ++;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\tloaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, loaded, total );\n\n\t\t}\n\n\t\tif ( loaded === total && scope.onLoad !== undefined ) {\n\n\t\t\tscope.onLoad();\n\n\t\t}\n\n\t};\n\n};\n\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\n\n// File:src/loaders/BufferGeometryLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometryLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.BufferGeometryLoader.prototype = {\n\n\tconstructor: THREE.BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tvar attributes = json.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\n\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\n\n\t\t}\n\n\t\tvar offsets = json.offsets;\n\n\t\tif ( offsets !== undefined ) {\n\n\t\t\tgeometry.offsets = JSON.parse( JSON.stringify( offsets ) );\n\n\t\t}\n\n\t\tvar boundingSphere = json.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tvar center = new THREE.Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n};\n\n// File:src/loaders/MaterialLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MaterialLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.MaterialLoader.prototype = {\n\n\tconstructor: THREE.MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar material = new THREE[ json.type ];\n\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.ambient !== undefined ) material.ambient.setHex( json.ambient );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\n\t\tif ( json.materials !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\n\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n};\n\n// File:src/loaders/ObjectLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ObjectLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ObjectLoader.prototype = {\n\n\tconstructor: THREE.ObjectLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometries = this.parseGeometries( json.geometries );\n\t\tvar materials = this.parseMaterials( json.materials );\n\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\treturn object;\n\n\t},\n\n\tparseGeometries: function ( json ) {\n\n\t\tvar geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.PlaneGeometry(\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q,\n\t\t\t\t\t\t\tdata.heightScale\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data.data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data ).geometry;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json ) {\n\n\t\tvar materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar loader = new THREE.MaterialLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\t\t\t\tvar material = loader.parse( data );\n\n\t\t\t\tmaterial.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) material.name = data.name;\n\n\t\t\t\tmaterials[ data.uuid ] = material;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseObject: function () {\n\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\treturn function ( data, geometries, materials ) {\n\n\t\t\tvar object;\n\n\t\t\tswitch ( data.type ) {\n\n\t\t\t\tcase 'Scene':\n\n\t\t\t\t\tobject = new THREE.Scene();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientLight':\n\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DirectionalLight':\n\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Mesh':\n\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( geometry === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Line':\n\n\t\t\t\t\tvar geometry = geometries[ data.geometry ];\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( geometry === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', data.geometry );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Line( geometry, material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Sprite':\n\n\t\t\t\t\tvar material = materials[ data.material ];\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', data.material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject = new THREE.Sprite( material );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Group':\n\n\t\t\t\t\tobject = new THREE.Group();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tobject = new THREE.Object3D();\n\n\t\t\t}\n\n\t\t\tobject.uuid = data.uuid;\n\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\n\t\t\tif ( data.matrix !== undefined ) {\n\n\t\t\t\tmatrix.fromArray( data.matrix );\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\t} else {\n\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t\t}\n\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\n\t\t\tif ( data.children !== undefined ) {\n\n\t\t\t\tfor ( var child in data.children ) {\n\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn object;\n\n\t\t}\n\n\t}()\n\n};\n\n// File:src/loaders/TextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.TextureLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.TextureLoader.prototype = {\n\n\tconstructor: THREE.TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.ImageLoader( scope.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.load( url, function ( image ) {\n\n\t\t\tvar texture = new THREE.Texture( image );\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t}\n\n};\n\n// File:src/loaders/BinaryTextureLoader.js\n\n/**\n * @author Nikos M. / https://github.com/foo123/\n *\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n */\n\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function () {\n\n\t// override in sub classes\n\tthis._parser = null;\n\n};\n\nTHREE.BinaryTextureLoader.prototype = {\n\n\tconstructor: THREE.BinaryTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new THREE.DataTexture( );\n\n\t\tvar loader = new THREE.XHRLoader();\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar texData = scope._parser( buffer );\n\n\t\t\tif ( !texData ) return;\n\n\t\t\tif ( undefined !== texData.image ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( undefined !== texData.data ){\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\n\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\n\n\t\t\tif ( undefined !== texData.format ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\t\t\tif ( undefined !== texData.type ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( undefined !== texData.mipmaps ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\n\t\t\t}\n\n\t\t\tif ( 1 === texData.mipmapCount ) {\n\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/loaders/CompressedTextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n */\n\nTHREE.CompressedTextureLoader = function () {\n\n\t// override in sub classes\n\tthis._parser = null;\n\n};\n\n\nTHREE.CompressedTextureLoader.prototype = {\n\n\tconstructor: THREE.CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar images = [];\n\n\t\tvar texture = new THREE.CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tvar loader = new THREE.XHRLoader();\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tif ( url instanceof Array ) {\n\n\t\t\tvar loaded = 0;\n\n\t\t\tvar loadTexture = function ( i ) {\n\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\t\timages[ i ] = {\n\t\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t\t};\n\n\t\t\t\t\tloaded += 1;\n\n\t\t\t\t\tif ( loaded === 6 ) {\n\n \t\t\t\t\t\tif (texDatas.mipmapCount == 1)\n \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t};\n\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\n\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/materials/Material.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Material = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.side = THREE.FrontSide;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blending = THREE.NormalBlending;\n\n\tthis.blendSrc = THREE.SrcAlphaFactor;\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\n\tthis.blendEquation = THREE.AddEquation;\n\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.alphaTest = 0;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis.needsUpdate = true;\n\n};\n\nTHREE.Material.prototype = {\n\n\tconstructor: THREE.Material,\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( key in this ) {\n\n\t\t\t\tvar currentValue = this[ key ];\n\n\t\t\t\tif ( currentValue instanceof THREE.Color ) {\n\n\t\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\n\n\t\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t\t} else if ( key == 'overdraw' ) {\n\n\t\t\t\t\t// ensure overdraw is backwards-compatable with legacy boolean type\n\t\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type\n\t\t};\n\n\t\tif ( this.name !== \"\" ) output.name = this.name;\n\n\t\tif ( this instanceof THREE.MeshBasicMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\toutput.ambient = this.ambient.getHex();\n\t\t\toutput.emissive = this.emissive.getHex();\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\t\t\toutput.ambient = this.ambient.getHex();\n\t\t\toutput.emissive = this.emissive.getHex();\n\t\t\toutput.specular = this.specular.getHex();\n\t\t\toutput.shininess = this.shininess;\n\t\t\tif ( this.vertexColors !== THREE.NoColors ) output.vertexColors = this.vertexColors;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\tif ( this.shading !== THREE.FlatShading ) output.shading = this.shading;\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\tif ( this.blending !== THREE.NormalBlending ) output.blending = this.blending;\n\t\t\tif ( this.side !== THREE.FrontSide ) output.side = this.side;\n\n\t\t} else if ( this instanceof THREE.ShaderMaterial ) {\n\n\t\t\toutput.uniforms = this.uniforms;\n\t\t\toutput.vertexShader = this.vertexShader;\n\t\t\toutput.fragmentShader = this.fragmentShader;\n\n\t\t} else if ( this instanceof THREE.SpriteMaterial ) {\n\n\t\t\toutput.color = this.color.getHex();\n\n\t\t}\n\n\t\tif ( this.opacity < 1 ) output.opacity = this.opacity;\n\t\tif ( this.transparent !== false ) output.transparent = this.transparent;\n\t\tif ( this.wireframe !== false ) output.wireframe = this.wireframe;\n\n\t\treturn output;\n\n\t},\n\n\tclone: function ( material ) {\n\n\t\tif ( material === undefined ) material = new THREE.Material();\n\n\t\tmaterial.name = this.name;\n\n\t\tmaterial.side = this.side;\n\n\t\tmaterial.opacity = this.opacity;\n\t\tmaterial.transparent = this.transparent;\n\n\t\tmaterial.blending = this.blending;\n\n\t\tmaterial.blendSrc = this.blendSrc;\n\t\tmaterial.blendDst = this.blendDst;\n\t\tmaterial.blendEquation = this.blendEquation;\n\n\t\tmaterial.depthTest = this.depthTest;\n\t\tmaterial.depthWrite = this.depthWrite;\n\n\t\tmaterial.polygonOffset = this.polygonOffset;\n\t\tmaterial.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tmaterial.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tmaterial.alphaTest = this.alphaTest;\n\n\t\tmaterial.overdraw = this.overdraw;\n\n\t\tmaterial.visible = this.visible;\n\n\t\treturn material;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\n\nTHREE.MaterialIdCount = 0;\n\n// File:src/materials/LineBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\",\n *\n *  vertexColors: <bool>\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.LineBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\n\nTHREE.LineBasicMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.LineBasicMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.linewidth = this.linewidth;\n\tmaterial.linecap = this.linecap;\n\tmaterial.linejoin = this.linejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/materials/LineDashedMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>,\n *\n *  vertexColors: <bool>\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.LineDashedMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.vertexColors = false;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\n\nTHREE.LineDashedMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.LineDashedMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.linewidth = this.linewidth;\n\n\tmaterial.scale = this.scale;\n\tmaterial.dashSize = this.dashSize;\n\tmaterial.gapSize = this.gapSize;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.MeshBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\n\nTHREE.MeshBasicMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshBasicMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshLambertMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  ambient: <hex>,\n *  emissive: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.MeshLambertMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\tthis.ambient = new THREE.Color( 0xffffff );\n\tthis.emissive = new THREE.Color( 0x000000 );\n\n\tthis.wrapAround = false;\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\n\nTHREE.MeshLambertMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshLambertMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.ambient.copy( this.ambient );\n\tmaterial.emissive.copy( this.emissive );\n\n\tmaterial.wrapAround = this.wrapAround;\n\tmaterial.wrapRGB.copy( this.wrapRGB );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshPhongMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  ambient: <hex>,\n *  emissive: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.MeshPhongMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\tthis.ambient = new THREE.Color( 0xffffff );\n\tthis.emissive = new THREE.Color( 0x000000 );\n\tthis.specular = new THREE.Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.metal = false;\n\n\tthis.wrapAround = false;\n\tthis.wrapRGB = new THREE.Vector3( 1, 1, 1 );\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.fog = true;\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\n\nTHREE.MeshPhongMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshPhongMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.ambient.copy( this.ambient );\n\tmaterial.emissive.copy( this.emissive );\n\tmaterial.specular.copy( this.specular );\n\tmaterial.shininess = this.shininess;\n\n\tmaterial.metal = this.metal;\n\n\tmaterial.wrapAround = this.wrapAround;\n\tmaterial.wrapRGB.copy( this.wrapRGB );\n\n\tmaterial.map = this.map;\n\n\tmaterial.lightMap = this.lightMap;\n\n\tmaterial.bumpMap = this.bumpMap;\n\tmaterial.bumpScale = this.bumpScale;\n\n\tmaterial.normalMap = this.normalMap;\n\tmaterial.normalScale.copy( this.normalScale );\n\n\tmaterial.specularMap = this.specularMap;\n\n\tmaterial.alphaMap = this.alphaMap;\n\n\tmaterial.envMap = this.envMap;\n\tmaterial.combine = this.combine;\n\tmaterial.reflectivity = this.reflectivity;\n\tmaterial.refractionRatio = this.refractionRatio;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\tmaterial.wireframeLinecap = this.wireframeLinecap;\n\tmaterial.wireframeLinejoin = this.wireframeLinejoin;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshDepthMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshDepthMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.morphTargets = false;\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\n\nTHREE.MeshDepthMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshDepthMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshNormalMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  shading: THREE.FlatShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshNormalMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this, parameters );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.shading = THREE.FlatShading;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\n\nTHREE.MeshNormalMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.MeshNormalMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\treturn material;\n\n};\n\n// File:src/materials/MeshFaceMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MeshFaceMaterial = function ( materials ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.type = 'MeshFaceMaterial';\n\t\n\tthis.materials = materials instanceof Array ? materials : [];\n\n};\n\nTHREE.MeshFaceMaterial.prototype = {\n\n\tconstructor: THREE.MeshFaceMaterial,\n\n\ttoJSON: function () {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tmaterials: []\n\t\t};\n\n\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\n\n\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar material = new THREE.MeshFaceMaterial();\n\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\n\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n};\n\n// File:src/materials/PointCloudMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>,\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  vertexColors: <bool>,\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.PointCloudMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'PointCloudMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.vertexColors = THREE.NoColors;\n\n\tthis.fog = true;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.PointCloudMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.PointCloudMaterial.prototype.constructor = THREE.PointCloudMaterial;\n\nTHREE.PointCloudMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.PointCloudMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\n\tmaterial.map = this.map;\n\n\tmaterial.size = this.size;\n\tmaterial.sizeAttenuation = this.sizeAttenuation;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// backwards compatibility\n\nTHREE.ParticleBasicMaterial = function ( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.' );\n\treturn new THREE.PointCloudMaterial( parameters );\n\n};\n\nTHREE.ParticleSystemMaterial = function ( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.' );\n\treturn new THREE.PointCloudMaterial( parameters );\n\n};\n\n// File:src/materials/ShaderMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  shading: THREE.SmoothShading,\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *\tfog: <bool>\n * }\n */\n\nTHREE.ShaderMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\tthis.attributes = null;\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.shading = THREE.SmoothShading;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\n\tthis.lights = false; // set to use scene lights\n\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\n\nTHREE.ShaderMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.ShaderMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.fragmentShader = this.fragmentShader;\n\tmaterial.vertexShader = this.vertexShader;\n\n\tmaterial.uniforms = THREE.UniformsUtils.clone( this.uniforms );\n\n\tmaterial.attributes = this.attributes;\n\tmaterial.defines = this.defines;\n\n\tmaterial.shading = this.shading;\n\n\tmaterial.wireframe = this.wireframe;\n\tmaterial.wireframeLinewidth = this.wireframeLinewidth;\n\n\tmaterial.fog = this.fog;\n\n\tmaterial.lights = this.lights;\n\n\tmaterial.vertexColors = this.vertexColors;\n\n\tmaterial.skinning = this.skinning;\n\n\tmaterial.morphTargets = this.morphTargets;\n\tmaterial.morphNormals = this.morphNormals;\n\n\treturn material;\n\n};\n\n// File:src/materials/RawShaderMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.RawShaderMaterial = function ( parameters ) {\n\n\tTHREE.ShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n};\n\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\n\nTHREE.RawShaderMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.RawShaderMaterial();\n\n\tTHREE.ShaderMaterial.prototype.clone.call( this, material );\n\n\treturn material;\n\n};\n\n// File:src/materials/SpriteMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  blending: THREE.NormalBlending,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *\tuvOffset: new THREE.Vector2(),\n *\tuvScale: new THREE.Vector2(),\n *\n *  fog: <bool>\n * }\n */\n\nTHREE.SpriteMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.map = null;\n\n\tthis.rotation = 0;\n\n\tthis.fog = false;\n\n\t// set parameters\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\n\nTHREE.SpriteMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.SpriteMaterial();\n\n\tTHREE.Material.prototype.clone.call( this, material );\n\n\tmaterial.color.copy( this.color );\n\tmaterial.map = this.map;\n\n\tmaterial.rotation = this.rotation;\n\n\tmaterial.fog = this.fog;\n\n\treturn material;\n\n};\n\n// File:src/textures/Texture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\n\n\tthis.offset = new THREE.Vector2( 0, 0 );\n\tthis.repeat = new THREE.Vector2( 1, 1 );\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\tthis._needsUpdate = false;\n\tthis.onUpdate = null;\n\n};\n\nTHREE.Texture.DEFAULT_IMAGE = undefined;\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\n\nTHREE.Texture.prototype = {\n\n\tconstructor: THREE.Texture,\n\n\tget needsUpdate () {\n\n\t\treturn this._needsUpdate;\n\n\t},\n\n\tset needsUpdate ( value ) {\n\n\t\tif ( value === true ) this.update();\n\n\t\tthis._needsUpdate = value;\n\n\t},\n\n\tclone: function ( texture ) {\n\n\t\tif ( texture === undefined ) texture = new THREE.Texture();\n\n\t\ttexture.image = this.image;\n\t\ttexture.mipmaps = this.mipmaps.slice( 0 );\n\n\t\ttexture.mapping = this.mapping;\n\n\t\ttexture.wrapS = this.wrapS;\n\t\ttexture.wrapT = this.wrapT;\n\n\t\ttexture.magFilter = this.magFilter;\n\t\ttexture.minFilter = this.minFilter;\n\n\t\ttexture.anisotropy = this.anisotropy;\n\n\t\ttexture.format = this.format;\n\t\ttexture.type = this.type;\n\n\t\ttexture.offset.copy( this.offset );\n\t\ttexture.repeat.copy( this.repeat );\n\n\t\ttexture.generateMipmaps = this.generateMipmaps;\n\t\ttexture.premultiplyAlpha = this.premultiplyAlpha;\n\t\ttexture.flipY = this.flipY;\n\t\ttexture.unpackAlignment = this.unpackAlignment;\n\n\t\treturn texture;\n\n\t},\n\n\tupdate: function () {\n\n\t\tthis.dispatchEvent( { type: 'update' } );\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\n\nTHREE.TextureIdCount = 0;\n\n// File:src/textures/CubeTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\n\t\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.images = images;\n\n};\n\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\n\nTHREE.CubeTexture.clone = function ( texture ) {\n\n\tif ( texture === undefined ) texture = new THREE.CubeTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\ttexture.images = this.images;\n\n\treturn texture;\n\n};\n\n// File:src/textures/CompressedTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n};\n\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\n\nTHREE.CompressedTexture.prototype.clone = function () {\n\n\tvar texture = new THREE.CompressedTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\treturn texture;\n\n};\n\n// File:src/textures/DataTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { data: data, width: width, height: height };\n\n};\n\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\n\nTHREE.DataTexture.prototype.clone = function () {\n\n\tvar texture = new THREE.DataTexture();\n\n\tTHREE.Texture.prototype.clone.call( this, texture );\n\n\treturn texture;\n\n};\n\n// File:src/textures/VideoTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.generateMipmaps = false;\n\n\tvar scope = this;\n\n\tvar update = function () {\n\n\t\trequestAnimationFrame( update );\n\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\n\n\t\t\tscope.needsUpdate = true;\n\n\t\t}\n\n\t};\n\n\tupdate();\n\n};\n\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\n\n// File:src/objects/Group.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Group = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Group';\n\n};\n\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Group.prototype.constructor = THREE.Group;\n\n// File:src/objects/PointCloud.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.PointCloud = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'PointCloud';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.PointCloudMaterial( { color: Math.random() * 0xffffff } );\n\n};\n\nTHREE.PointCloud.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.PointCloud.prototype.constructor = THREE.PointCloud;\n\nTHREE.PointCloud.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar object = this;\n\t\tvar geometry = object.geometry;\n\t\tvar threshold = raycaster.params.PointCloud.threshold;\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tvar position = new THREE.Vector3();\n\n\t\tvar testPoint = function ( point, index ) {\n\n\t\t\tvar rayPointDistance = ray.distanceToPoint( point );\n\n\t\t\tif ( rayPointDistance < localThreshold ) {\n\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\n\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tdistanceToRay: rayPointDistance,\n\t\t\t\t\tpoint: intersectPoint.clone(),\n\t\t\t\t\tindex: index,\n\t\t\t\t\tface: null,\n\t\t\t\t\tobject: object\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t};\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tvar offset = {\n\t\t\t\t\t\tstart: 0,\n\t\t\t\t\t\tcount: indices.length,\n\t\t\t\t\t\tindex: 0\n\t\t\t\t\t};\n\n\t\t\t\t\toffsets = [ offset ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar a = index + indices[ i ];\n\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\n\n\t\t\t\t\t\ttestPoint( position, a );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar pointCount = positions.length / 3;\n\n\t\t\t\tfor ( var i = 0; i < pointCount; i ++ ) {\n\n\t\t\t\t\tposition.set(\n\t\t\t\t\t\tpositions[ 3 * i ],\n\t\t\t\t\t\tpositions[ 3 * i + 1 ],\n\t\t\t\t\t\tpositions[ 3 * i + 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t\ttestPoint( position, i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar vertices = this.geometry.vertices;\n\n\t\t\tfor ( var i = 0; i < vertices.length; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.PointCloud.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.PointCloud( this.geometry, this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// Backwards compatibility\n\nTHREE.ParticleSystem = function ( geometry, material ) {\n\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.PointCloud.' );\n\treturn new THREE.PointCloud( geometry, material );\n\n};\n\n// File:src/objects/Line.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Line = function ( geometry, material, mode ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.mode = ( mode !== undefined ) ? mode : THREE.LineStrip;\n\n};\n\nTHREE.LineStrip = 0;\nTHREE.LinePieces = 1;\n\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Line.prototype.constructor = THREE.Line;\n\nTHREE.Line.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\tvar sphere = new THREE.Sphere();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar precision = raycaster.linePrecision;\n\t\tvar precisionSq = precision * precision;\n\n\t\tvar geometry = this.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tsphere.copy( geometry.boundingSphere );\n\t\tsphere.applyMatrix4( this.matrixWorld );\n\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tvar vStart = new THREE.Vector3();\n\t\tvar vEnd = new THREE.Vector3();\n\t\tvar interSegment = new THREE.Vector3();\n\t\tvar interRay = new THREE.Vector3();\n\t\tvar step = this.mode === THREE.LineStrip ? 1 : 2;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar attributes = geometry.attributes;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar positions = attributes.position.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0; oi < offsets.length; oi++){\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start; i < start + count - 1; i += step ) {\n\n\t\t\t\t\t\tvar a = index + indices[ i ];\n\t\t\t\t\t\tvar b = index + indices[ i + 1 ];\n\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3 - 1; i += step ) {\n\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar nbVertices = vertices.length;\n\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\tvar distance = ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.Line.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Line( this.geometry, this.material, this.mode );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// File:src/objects/Mesh.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nTHREE.Mesh = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Mesh';\n\t\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.updateMorphTargets();\n\n};\n\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Mesh.prototype.constructor = THREE.Mesh;\n\nTHREE.Mesh.prototype.updateMorphTargets = function () {\n\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\n\n\t\tthis.morphTargetBase = - 1;\n\t\tthis.morphTargetForcedOrder = [];\n\t\tthis.morphTargetInfluences = [];\n\t\tthis.morphTargetDictionary = {};\n\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\n\n\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\n\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\n\n\t\treturn this.morphTargetDictionary[ name ];\n\n\t}\n\n\tconsole.log( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\n\n\treturn 0;\n\n};\n\n\nTHREE.Mesh.prototype.raycast = ( function () {\n\n\tvar inverseMatrix = new THREE.Matrix4();\n\tvar ray = new THREE.Ray();\n\tvar sphere = new THREE.Sphere();\n\n\tvar vA = new THREE.Vector3();\n\tvar vB = new THREE.Vector3();\n\tvar vC = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\tsphere.copy( geometry.boundingSphere );\n\t\tsphere.applyMatrix4( this.matrixWorld );\n\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check boundingBox before continuing\n\n\t\tinverseMatrix.getInverse( this.matrixWorld );\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false )  {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar material = this.material;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\tvar attributes = geometry.attributes;\n\n\t\t\tvar a, b, c;\n\t\t\tvar precision = raycaster.precision;\n\n\t\t\tif ( attributes.index !== undefined ) {\n\n\t\t\t\tvar indices = attributes.index.array;\n\t\t\t\tvar positions = attributes.position.array;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\toffsets = [ { start: 0, count: indices.length, index: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var oi = 0, ol = offsets.length; oi < ol; ++oi ) {\n\n\t\t\t\t\tvar start = offsets[ oi ].start;\n\t\t\t\t\tvar count = offsets[ oi ].count;\n\t\t\t\t\tvar index = offsets[ oi ].index;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = index + indices[ i ];\n\t\t\t\t\t\tb = index + indices[ i + 1 ];\n\t\t\t\t\t\tc = index + indices[ i + 2 ];\n\n\t\t\t\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\t\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tfor ( var i = 0, j = 0, il = positions.length; i < il; i += 3, j += 9 ) {\n\n\t\t\t\t\ta = i;\n\t\t\t\t\tb = i + 1;\n\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\tvA.fromArray( positions, j );\n\t\t\t\t\tvB.fromArray( positions, j + 3 );\n\t\t\t\t\tvC.fromArray( positions, j + 6 );\n\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vC, vB, vA, true );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\tvar isFaceMaterial = this.material instanceof THREE.MeshFaceMaterial;\n\t\t\tvar objectMaterials = isFaceMaterial === true ? this.material.materials : null;\n\n\t\t\tvar a, b, c, d;\n\t\t\tvar precision = raycaster.precision;\n\n\t\t\tvar vertices = geometry.vertices;\n\n\t\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = geometry.faces[ f ];\n\n\t\t\t\tvar material = isFaceMaterial === true ? objectMaterials[ face.materialIndex ] : this.material;\n\n\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\ta = vertices[ face.a ];\n\t\t\t\tb = vertices[ face.b ];\n\t\t\t\tc = vertices[ face.c ];\n\n\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\tvA.x += ( targets[ face.a ].x - a.x ) * influence;\n\t\t\t\t\t\tvA.y += ( targets[ face.a ].y - a.y ) * influence;\n\t\t\t\t\t\tvA.z += ( targets[ face.a ].z - a.z ) * influence;\n\n\t\t\t\t\t\tvB.x += ( targets[ face.b ].x - b.x ) * influence;\n\t\t\t\t\t\tvB.y += ( targets[ face.b ].y - b.y ) * influence;\n\t\t\t\t\t\tvB.z += ( targets[ face.b ].z - b.z ) * influence;\n\n\t\t\t\t\t\tvC.x += ( targets[ face.c ].x - c.x ) * influence;\n\t\t\t\t\t\tvC.y += ( targets[ face.c ].y - c.y ) * influence;\n\t\t\t\t\t\tvC.z += ( targets[ face.c ].z - c.z ) * influence;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvA.add( a );\n\t\t\t\t\tvB.add( b );\n\t\t\t\t\tvC.add( c );\n\n\t\t\t\t\ta = vA;\n\t\t\t\t\tb = vB;\n\t\t\t\t\tc = vC;\n\n\t\t\t\t}\n\n\t\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( c, b, a, true );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar intersectionPoint = ray.intersectTriangle( a, b, c, material.side !== THREE.DoubleSide );\n\n\t\t\t\t}\n\n\t\t\t\tif ( intersectionPoint === null ) continue;\n\n\t\t\t\tintersectionPoint.applyMatrix4( this.matrixWorld );\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPoint );\n\n\t\t\t\tif ( distance < precision || distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tpoint: intersectionPoint,\n\t\t\t\t\tface: face,\n\t\t\t\t\tfaceIndex: f,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.Mesh.prototype.clone = function ( object, recursive ) {\n\n\tif ( object === undefined ) object = new THREE.Mesh( this.geometry, this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object, recursive );\n\n\treturn object;\n\n};\n\n// File:src/objects/Bone.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.Bone = function ( belongsToSkin ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.skin = belongsToSkin;\n\n};\n\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Bone.prototype.constructor = THREE.Bone;\n\n\n// File:src/objects/Skeleton.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\n\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\n\n\tthis.identityMatrix = new THREE.Matrix4();\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\n\t// create a bone texture or an array of floats\n\n\tif ( this.useVertexTexture ) {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones  (8 * 8  / 4)\n\t\t//       16x16 pixel texture max   64 bones (16 * 16 / 4)\n\t\t//       32x32 pixel texture max  256 bones (32 * 32 / 4)\n\t\t//       64x64 pixel texture max 1024 bones (64 * 64 / 4)\n\n\t\tvar size;\n\n\t\tif ( this.bones.length > 256 )\n\t\t\tsize = 64;\n\t\telse if ( this.bones.length > 64 )\n\t\t\tsize = 32;\n\t\telse if ( this.bones.length > 16 )\n\t\t\tsize = 16;\n\t\telse\n\t\t\tsize = 8;\n\n\t\tthis.boneTextureWidth = size;\n\t\tthis.boneTextureHeight = size;\n\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\n\t\tthis.boneTexture.minFilter = THREE.NearestFilter;\n\t\tthis.boneTexture.magFilter = THREE.NearestFilter;\n\t\tthis.boneTexture.generateMipmaps = false;\n\t\tthis.boneTexture.flipY = false;\n\n\t} else {\n\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\n\n\t}\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.calculateInverses = function () {\n\n\tthis.boneInverses = [];\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tvar inverse = new THREE.Matrix4();\n\n\t\tif ( this.bones[ b ] ) {\n\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\n\n\t\t}\n\n\t\tthis.boneInverses.push( inverse );\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.pose = function () {\n\n\tvar bone;\n\n\t// recover the bind-time world matrices\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tbone = this.bones[ b ];\n\n\t\tif ( bone ) {\n\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\n\n\t\t}\n\n\t}\n\n\t// compute the local matrices, positions, rotations and scales\n\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\tbone = this.bones[ b ];\n\n\t\tif ( bone ) {\n\n\t\t\tif ( bone.parent ) {\n\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t}\n\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Skeleton.prototype.update = ( function () {\n\n\tvar offsetMatrix = new THREE.Matrix4();\n\t\n\treturn function () {\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\n\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\n\n\t\t}\n\n\t\tif ( this.useVertexTexture ) {\n\n\t\t\tthis.boneTexture.needsUpdate = true;\n\n\t\t}\n\t\t\n\t};\n\n} )();\n\n\n// File:src/objects/SkinnedMesh.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = \"attached\";\n\tthis.bindMatrix = new THREE.Matrix4();\n\tthis.bindMatrixInverse = new THREE.Matrix4();\n\n\t// init bones\n\n\t// TODO: remove bone creation as there is no reason (other than\n\t// convenience) for THREE.SkinnedMesh to do this.\n\n\tvar bones = [];\n\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\n\n\t\tvar bone, gbone, p, q, s;\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tp = gbone.pos;\n\t\t\tq = gbone.rotq;\n\t\t\ts = gbone.scl;\n\n\t\t\tbone = new THREE.Bone( this );\n\t\t\tbones.push( bone );\n\n\t\t\tbone.name = gbone.name;\n\t\t\tbone.position.set( p[ 0 ], p[ 1 ], p[ 2 ] );\n\t\t\tbone.quaternion.set( q[ 0 ], q[ 1 ], q[ 2 ], q[ 3 ] );\n\n\t\t\tif ( s !== undefined ) {\n\n\t\t\t\tbone.scale.set( s[ 0 ], s[ 1 ], s[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tbone.scale.set( 1, 1, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tif ( gbone.parent !== - 1 ) {\n\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.add( bones[ b ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.normalizeSkinWeights();\n\n\tthis.updateMatrixWorld( true );\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ) );\n\n};\n\n\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\n\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\n\n\tthis.skeleton = skeleton;\n\n\tif ( bindMatrix === undefined ) {\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tbindMatrix = this.matrixWorld;\n\n\t}\n\n\tthis.bindMatrix.copy( bindMatrix );\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n};\n\nTHREE.SkinnedMesh.prototype.pose = function () {\n\n\tthis.skeleton.pose();\n\n};\n\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\n\n\tif ( this.geometry instanceof THREE.Geometry ) {\n\n\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\n\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\n\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tsw.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\n\n\t}\n\n};\n\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\n\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\n\n\tif ( this.bindMode === \"attached\" ) {\n\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t} else if ( this.bindMode === \"detached\" ) {\n\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t} else {\n\n\t\tconsole.warn( 'THREE.SkinnedMesh unreckognized bindMode: ' + this.bindMode );\n\n\t}\n\n};\n\nTHREE.SkinnedMesh.prototype.clone = function( object ) {\n\n\tif ( object === undefined ) {\n\n\t\tobject = new THREE.SkinnedMesh( this.geometry, this.material, this.useVertexTexture );\n\n\t}\n\n\tTHREE.Mesh.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n\n// File:src/objects/MorphAnimMesh.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MorphAnimMesh = function ( geometry, material ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.type = 'MorphAnimMesh';\n\n\t// API\n\n\tthis.duration = 1000; // milliseconds\n\tthis.mirroredLoop = false;\n\tthis.time = 0;\n\n\t// internals\n\n\tthis.lastKeyframe = 0;\n\tthis.currentKeyframe = 0;\n\n\tthis.direction = 1;\n\tthis.directionBackwards = false;\n\n\tthis.setFrameRange( 0, this.geometry.morphTargets.length - 1 );\n\n};\n\nTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh;\n\nTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\n\n\tthis.startKeyframe = start;\n\tthis.endKeyframe = end;\n\n\tthis.length = this.endKeyframe - this.startKeyframe + 1;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\n\n\tthis.direction = 1;\n\tthis.directionBackwards = false;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\n\n\tthis.direction = - 1;\n\tthis.directionBackwards = true;\n\n};\n\nTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\n\n\tvar geometry = this.geometry;\n\n\tif ( ! geometry.animations ) geometry.animations = {};\n\n\tvar firstAnimation, animations = geometry.animations;\n\n\tvar pattern = /([a-z]+)_?(\\d+)/;\n\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\n\n\t\tvar morph = geometry.morphTargets[ i ];\n\t\tvar parts = morph.name.match( pattern );\n\n\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\tvar label = parts[ 1 ];\n\t\t\tvar num = parts[ 2 ];\n\n\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\n\n\t\t\tvar animation = animations[ label ];\n\n\t\t\tif ( i < animation.start ) animation.start = i;\n\t\t\tif ( i > animation.end ) animation.end = i;\n\n\t\t\tif ( ! firstAnimation ) firstAnimation = label;\n\n\t\t}\n\n\t}\n\n\tgeometry.firstAnimation = firstAnimation;\n\n};\n\nTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\n\n\tif ( ! this.geometry.animations ) this.geometry.animations = {};\n\n\tthis.geometry.animations[ label ] = { start: start, end: end };\n\n};\n\nTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\n\n\tvar animation = this.geometry.animations[ label ];\n\n\tif ( animation ) {\n\n\t\tthis.setFrameRange( animation.start, animation.end );\n\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\n\t\tthis.time = 0;\n\n\t} else {\n\n\t\tconsole.warn( 'animation[' + label + '] undefined' );\n\n\t}\n\n};\n\nTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\n\n\tvar frameTime = this.duration / this.length;\n\n\tthis.time += this.direction * delta;\n\n\tif ( this.mirroredLoop ) {\n\n\t\tif ( this.time > this.duration || this.time < 0 ) {\n\n\t\t\tthis.direction *= - 1;\n\n\t\t\tif ( this.time > this.duration ) {\n\n\t\t\t\tthis.time = this.duration;\n\t\t\t\tthis.directionBackwards = true;\n\n\t\t\t}\n\n\t\t\tif ( this.time < 0 ) {\n\n\t\t\t\tthis.time = 0;\n\t\t\t\tthis.directionBackwards = false;\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\tthis.time = this.time % this.duration;\n\n\t\tif ( this.time < 0 ) this.time += this.duration;\n\n\t}\n\n\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\n\n\tif ( keyframe !== this.currentKeyframe ) {\n\n\t\tthis.morphTargetInfluences[ this.lastKeyframe ] = 0;\n\t\tthis.morphTargetInfluences[ this.currentKeyframe ] = 1;\n\n\t\tthis.morphTargetInfluences[ keyframe ] = 0;\n\n\t\tthis.lastKeyframe = this.currentKeyframe;\n\t\tthis.currentKeyframe = keyframe;\n\n\t}\n\n\tvar mix = ( this.time % frameTime ) / frameTime;\n\n\tif ( this.directionBackwards ) {\n\n\t\tmix = 1 - mix;\n\n\t}\n\n\tthis.morphTargetInfluences[ this.currentKeyframe ] = mix;\n\tthis.morphTargetInfluences[ this.lastKeyframe ] = 1 - mix;\n\n};\n\nTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\n\n\tvar influences = this.morphTargetInfluences;\n\n\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\n\n\t\tinfluences[ i ] = 0;\n\n\t}\n\n\tif ( a > -1 ) influences[ a ] = 1 - t;\n\tif ( b > -1 ) influences[ b ] = t;\n\n};\n\nTHREE.MorphAnimMesh.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.MorphAnimMesh( this.geometry, this.material );\n\n\tobject.duration = this.duration;\n\tobject.mirroredLoop = this.mirroredLoop;\n\tobject.time = this.time;\n\n\tobject.lastKeyframe = this.lastKeyframe;\n\tobject.currentKeyframe = this.currentKeyframe;\n\n\tobject.direction = this.direction;\n\tobject.directionBackwards = this.directionBackwards;\n\n\tTHREE.Mesh.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// File:src/objects/LOD.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LOD = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.objects = [];\n\n};\n\n\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.LOD.prototype.constructor = THREE.LOD;\n\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\n\n\tif ( distance === undefined ) distance = 0;\n\n\tdistance = Math.abs( distance );\n\n\tfor ( var l = 0; l < this.objects.length; l ++ ) {\n\n\t\tif ( distance < this.objects[ l ].distance ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tthis.objects.splice( l, 0, { distance: distance, object: object } );\n\tthis.add( object );\n\n};\n\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\n\n\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\n\n\t\tif ( distance < this.objects[ i ].distance ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn this.objects[ i - 1 ].object;\n\n};\n\nTHREE.LOD.prototype.raycast = ( function () {\n\n\tvar matrixPosition = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\n\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t};\n\n}() );\n\nTHREE.LOD.prototype.update = function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\n\treturn function ( camera ) {\n\n\t\tif ( this.objects.length > 1 ) {\n\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = v1.distanceTo( v2 );\n\n\t\t\tthis.objects[ 0 ].object.visible = true;\n\n\t\t\tfor ( var i = 1, l = this.objects.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= this.objects[ i ].distance ) {\n\n\t\t\t\t\tthis.objects[ i - 1 ].object.visible = false;\n\t\t\t\t\tthis.objects[ i     ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tthis.objects[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n}();\n\nTHREE.LOD.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.LOD();\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\tfor ( var i = 0, l = this.objects.length; i < l; i ++ ) {\n\t\tvar x = this.objects[ i ].object.clone();\n\t\tx.visible = i === 0;\n\t\tobject.addLevel( x, this.objects[ i ].distance );\n\t}\n\n\treturn object;\n\n};\n\n// File:src/objects/Sprite.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Sprite = ( function () {\n\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\treturn function ( material ) {\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.type = 'Sprite';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\n\n\t};\n\n} )();\n\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Sprite.prototype.constructor = THREE.Sprite;\n\nTHREE.Sprite.prototype.raycast = ( function () {\n\n\tvar matrixPosition = new THREE.Vector3();\n\n\treturn function ( raycaster, intersects ) {\n\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tvar distance = raycaster.ray.distanceToPoint( matrixPosition );\n\n\t\tif ( distance > this.scale.x ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: this.position,\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t};\n\n}() );\n\nTHREE.Sprite.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Sprite( this.material );\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\treturn object;\n\n};\n\n// Backwards compatibility\n\nTHREE.Particle = THREE.Sprite;\n\n// File:src/objects/LensFlare.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.lensFlares = [];\n\n\tthis.positionScreen = new THREE.Vector3();\n\tthis.customUpdateCallback = undefined;\n\n\tif( texture !== undefined ) {\n\n\t\tthis.add( texture, size, distance, blending, color );\n\n\t}\n\n};\n\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\n\n\n/*\n * Add: adds another flare\n */\n\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\n\n\tif ( size === undefined ) size = - 1;\n\tif ( distance === undefined ) distance = 0;\n\tif ( opacity === undefined ) opacity = 1;\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\n\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\n\n\tthis.lensFlares.push( {\n\t\ttexture: texture, \t\t\t// THREE.Texture\n\t\tsize: size, \t\t\t\t// size in pixels (-1 = use texture.width)\n\t\tdistance: distance, \t\t// distance (0-1) from light source (0=at light source)\n\t\tx: 0, y: 0, z: 0,\t\t\t// screen position (-1 => 1) z = 0 is ontop z = 1 is back\n\t\tscale: 1, \t\t\t\t\t// scale\n\t\trotation: 1, \t\t\t\t// rotation\n\t\topacity: opacity,\t\t\t// opacity\n\t\tcolor: color,\t\t\t\t// color\n\t\tblending: blending\t\t\t// blending\n\t} );\n\n};\n\n/*\n * Update lens flares update positions on all flares based on the screen position\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\n */\n\nTHREE.LensFlare.prototype.updateLensFlares = function () {\n\n\tvar f, fl = this.lensFlares.length;\n\tvar flare;\n\tvar vecX = - this.positionScreen.x * 2;\n\tvar vecY = - this.positionScreen.y * 2;\n\n\tfor( f = 0; f < fl; f ++ ) {\n\n\t\tflare = this.lensFlares[ f ];\n\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\n\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\n\n\t}\n\n};\n\n\n// File:src/scenes/Scene.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Scene = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n};\n\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Scene.prototype.constructor = THREE.Scene;\n\nTHREE.Scene.prototype.clone = function ( object ) {\n\n\tif ( object === undefined ) object = new THREE.Scene();\n\n\tTHREE.Object3D.prototype.clone.call( this, object );\n\n\tif ( this.fog !== null ) object.fog = this.fog.clone();\n\tif ( this.overrideMaterial !== null ) object.overrideMaterial = this.overrideMaterial.clone();\n\n\tobject.autoUpdate = this.autoUpdate;\n\tobject.matrixAutoUpdate = this.matrixAutoUpdate;\n\n\treturn object;\n\n};\n\n// File:src/scenes/Fog.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Fog = function ( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n};\n\nTHREE.Fog.prototype.clone = function () {\n\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\n\n};\n\n// File:src/scenes/FogExp2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.FogExp2 = function ( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n};\n\nTHREE.FogExp2.prototype.clone = function () {\n\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\n\n};\n\n// File:src/renderers/shaders/ShaderChunk.js\n\nTHREE.ShaderChunk = {};\n\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\ntransformedNormal = normalize( transformedNormal );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\tfloat dotProduct = dot( transformedNormal, dirVector );\\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\t#ifdef WRAP_AROUND\\n\\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\\n\\n\t\t#endif\\n\\n\t#endif\\n\\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\\n\\n\t#endif\\n\\n}\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\tfloat lDistance = 1.0;\\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\t\tlVector = normalize( lVector );\\n\\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\\n\\n\t\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\\n\\n\t\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\\n\\n\t\t\t\t#endif\\n\\n\t\t\t#endif\\n\\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/default_vertex.glsl\n\nTHREE.ShaderChunk[ 'default_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#elif defined( USE_MORPHTARGETS )\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\\n\\n#else\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\\n\\n#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\t#ifdef USE_MORPHNORMALS\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\\n\\n\t#else\\n\\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lightmap_pars_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"vec3 normal = normalize( vNormal );\\nvec3 viewPosition = normalize( vViewPosition );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tvec3 pointDiffuse = vec3( 0.0 );\\n\tvec3 pointSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( pointLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\\n\\n\t\t\t\t// specular\\n\\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tvec3 spotDiffuse = vec3( 0.0 );\\n\tvec3 spotSpecular = vec3( 0.0 );\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\\n\\n\t\tfloat lDistance = 1.0;\\n\t\tif ( spotLightDistance[ i ] > 0.0 )\\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\\n\\n\t\tlVector = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\\n\\n\t\t\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lVector );\\n\\n\t\t\t#ifdef WRAP_AROUND\\n\\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t\t#else\\n\\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t\t#endif\\n\\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\\n\\n\t\t\t\t\t// specular\\n\\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tvec3 dirDiffuse = vec3( 0.0 );\\n\tvec3 dirSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\\n\t\tvec3 dirVector = normalize( lDirection.xyz );\\n\\n\t\t\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, dirVector );\\n\\n\t\t#ifdef WRAP_AROUND\\n\\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\\n\\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\\n\\n\t\t#else\\n\\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\\n\\n\t\t#endif\\n\\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\\n\\n\t\t// specular\\n\\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\\n\\n\t\t/*\\n\t\t// fresnel term from skin shader\\n\t\tconst float F0 = 0.128;\\n\\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\\n\t\tfloat exponential = pow( base, 5.0 );\\n\\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\\n\t\t*/\\n\\n\t\t/*\\n\t\t// fresnel term from fresnel shader\\n\t\tconst float mFresnelBias = 0.08;\\n\t\tconst float mFresnelScale = 0.3;\\n\t\tconst float mFresnelPower = 5.0;\\n\\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\\n\t\t*/\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\\n\\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tvec3 hemiDiffuse = vec3( 0.0 );\\n\tvec3 hemiSpecular = vec3( 0.0 );\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\\n\t\tvec3 lVector = normalize( lDirection.xyz );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lVector );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\themiDiffuse += diffuse * hemiColor;\\n\\n\t\t// specular (sky light)\\n\\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\\n\\n\t\t// specular (ground light)\\n\\n\t\tvec3 lVectorGround = -lVector;\\n\\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\\n\\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\\n\\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\\n\\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\\n\\n\t}\\n\\n#endif\\n\\nvec3 totalDiffuse = vec3( 0.0 );\\nvec3 totalSpecular = vec3( 0.0 );\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\ttotalDiffuse += dirDiffuse;\\n\ttotalSpecular += dirSpecular;\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\ttotalDiffuse += hemiDiffuse;\\n\ttotalSpecular += hemiSpecular;\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\ttotalDiffuse += pointDiffuse;\\n\ttotalSpecular += pointSpecular;\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\ttotalDiffuse += spotDiffuse;\\n\ttotalSpecular += spotSpecular;\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\\n\\n#else\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tvec3 morphedNormal = vec3( 0.0 );\\n\\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n\tmorphedNormal += normal;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvarying vec2 vUv2;\\n\tuniform sampler2D lightMap;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\ttexelColor.xyz *= texelColor.xyz;\\n\\n\t#endif\\n\\n\tgl_FragColor = gl_FragColor * texelColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'lightmap_vertex'] = \"#ifdef USE_LIGHTMAP\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tvColor = color * color;\\n\\n\t#else\\n\\n\t\tvColor = color;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\t#ifdef USE_MORPHTARGETS\\n\\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\n\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"#ifdef GAMMA_OUTPUT\\n\\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambient;\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\n\\nuniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'map_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\\n\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t#else\\n\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t#endif\\n\\n\t#else\\n\\n\t\tvec3 reflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t\t\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\tenvColor.xyz *= envColor.xyz;\\n\\n\t#endif\\n\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\t\tgl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tconst float LOG2 = 1.442695;\\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec3 objectNormal = skinnedNormal.xyz;\\n\\n#elif defined( USE_MORPHNORMALS )\\n\\n\tvec3 objectNormal = morphedNormal;\\n\\n#else\\n\\n\tvec3 objectNormal = normal;\\n\\n#endif\\n\\n#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\n#ifdef WRAP_AROUND\\n\\n\tuniform vec3 wrapRGB;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\nvarying vec3 vNormal;\";\n\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/map_vertex.glsl\n\nTHREE.ShaderChunk[ 'map_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\tvec3 morphed = vec3( 0.0 );\\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n\tmorphed += position;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\\n\tworldNormal = normalize( worldNormal );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t#else\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\tint inFrustumCount = 0;\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\t\t\t// don't shadow pixels outside of light frustum\\n\t\t\t\t// use just first frustum (for cascades)\\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\\n\\n\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\tinFrustumCount += int( inFrustum );\\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\\n\\n\t\t#else\\n\\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\t#endif\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\t#ifdef SHADOWMAP_CASCADE\\n\\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#else\\n\\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\\n\\n\t\t\t#endif\\n\\n\t\t#endif\\n\\n\t}\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\tshadowColor *= shadowColor;\\n\\n\t#endif\\n\\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\n\nTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#elif defined( USE_MORPHTARGETS )\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\\n\\n\t#else\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\t#extension GL_EXT_frag_depth : enable\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/UniformsUtils.js\n\n/**\n * Uniform Utilities\n */\n\nTHREE.UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( parameter_src instanceof Array ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\n// File:src/renderers/shaders/UniformsLib.js\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nTHREE.UniformsLib = {\n\n\tcommon: {\n\n\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\n\n\t\t\"map\" : { type: \"t\", value: null },\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\n\t\t\"lightMap\" : { type: \"t\", value: null },\n\t\t\"specularMap\" : { type: \"t\", value: null },\n\t\t\"alphaMap\" : { type: \"t\", value: null },\n\n\t\t\"envMap\" : { type: \"t\", value: null },\n\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\n\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\n\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 },\n\n\t\t\"morphTargetInfluences\" : { type: \"f\", value: 0 }\n\n\t},\n\n\tbump: {\n\n\t\t\"bumpMap\" : { type: \"t\", value: null },\n\t\t\"bumpScale\" : { type: \"f\", value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\t\"normalMap\" : { type: \"t\", value: null },\n\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\n\t},\n\n\tfog : {\n\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\n\n\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\n\n\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\n\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\n\n\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\n\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\n\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\n\n\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\n\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\n\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\n\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\n\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\n\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] }\n\n\t},\n\n\tparticle: {\n\n\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\n\t\t\"size\" : { type: \"f\", value: 1.0 },\n\t\t\"scale\" : { type: \"f\", value: 1.0 },\n\t\t\"map\" : { type: \"t\", value: null },\n\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\n\n\t},\n\n\tshadowmap: {\n\n\t\t\"shadowMap\": { type: \"tv\", value: [] },\n\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\n\n\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\n\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\n\n\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\n\n\t}\n\n};\n\n// File:src/renderers/shaders/ShaderLib.js\n\n/**\n * Webgl Shader Library for three.js\n *\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\n\nTHREE.ShaderLib = {\n\n\t'basic': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\n\t\t\t\"\t#ifdef USE_ENVMAP\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'lambert': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\n\n\t\t\t{\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"#define LAMBERT\",\n\n\t\t\t\"varying vec3 vLightFront;\",\n\n\t\t\t\"#ifdef DOUBLE_SIDED\",\n\n\t\t\t\"\tvarying vec3 vLightBack;\",\n\n\t\t\t\"#endif\",\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"varying vec3 vLightFront;\",\n\n\t\t\t\"#ifdef DOUBLE_SIDED\",\n\n\t\t\t\"\tvarying vec3 vLightBack;\",\n\n\t\t\t\"#endif\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\n\n\t\t\t\t\t//\"float isFront = float( gl_FrontFacing );\",\n\t\t\t\t\t//\"gl_FragColor.xyz *= isFront * vLightFront + ( 1.0 - isFront ) * vLightBack;\",\n\n\t\t\t\"\t\tif ( gl_FrontFacing )\",\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightFront;\",\n\t\t\t\"\t\telse\",\n\t\t\t\"\t\t\tgl_FragColor.xyz *= vLightBack;\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tgl_FragColor.xyz *= vLightFront;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'phong': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"bump\" ],\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\n\n\t\t\t{\n\t\t\t\t\"ambient\"  : { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 },\n\t\t\t\t\"wrapRGB\"  : { type: \"v3\", value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"#define PHONG\",\n\n\t\t\t\"varying vec3 vViewPosition;\",\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"map_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"map_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\n\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"\tvViewPosition = -mvPosition.xyz;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"#define PHONG\",\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"uniform vec3 ambient;\",\n\t\t\t\"uniform vec3 emissive;\",\n\t\t\t\"uniform vec3 specular;\",\n\t\t\t\"uniform float shininess;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\n\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'particle_basic': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"particle\" ],\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"uniform float size;\",\n\t\t\t\"uniform float scale;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\n\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\n\t\t\t\"\t#else\",\n\t\t\t\"\t\tgl_PointSize = size;\",\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 psColor;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( psColor, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'dashed': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ \"common\" ],\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\n\n\t\t\t{\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: [\n\n\t\t\t\"uniform float scale;\",\n\t\t\t\"attribute float lineDistance;\",\n\n\t\t\t\"varying float vLineDistance;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\n\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\n\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform vec3 diffuse;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\t\"uniform float dashSize;\",\n\t\t\t\"uniform float totalSize;\",\n\n\t\t\t\"varying float vLineDistance;\",\n\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\n\n\t\t\t\"\t\tdiscard;\",\n\n\t\t\t\"\t}\",\n\n\t\t\t\"\tgl_FragColor = vec4( diffuse, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'depth': {\n\n\t\tuniforms: {\n\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float mNear;\",\n\t\t\t\"uniform float mFar;\",\n\t\t\t\"uniform float opacity;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\n\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t'normal': {\n\n\t\tuniforms: {\n\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\n\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform float opacity;\",\n\t\t\t\"varying vec3 vNormal;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\t'cube': {\n\n\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform samplerCube tCube;\",\n\t\t\t\"uniform float tFlip;\",\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\t'equirect': {\n\n\t\tuniforms: { \"tEquirect\": { type: \"t\", value: null },\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n\t\t\t\"\tvWorldPosition = worldPosition.xyz;\",\n\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform sampler2D tEquirect;\",\n\t\t\t\"uniform float tFlip;\",\n\n\t\t\t\"varying vec3 vWorldPosition;\",\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\n\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\n\t\t\t\t\"vec2 sampleUV;\",\n\t\t\t\t\"sampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);\",\n\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;\", // reciprocal( 2 PI ) + 0.5\n\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t},\n\n\t/* Depth encoding into RGBA texture\n\t *\n\t * based on SpiderGL shadow map example\n\t * http://spidergl.org/example.php?id=6\n\t *\n\t * originally from\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\n\t *\n\t * see also\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\n\t */\n\n\t'depthRGBA': {\n\n\t\tuniforms: {},\n\n\t\tvertexShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"default_vertex\" ],\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\"),\n\n\t\tfragmentShader: [\n\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\n\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\n\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\n\t\t\t\"\treturn res;\",\n\n\t\t\t\"}\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\n\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\n\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\n\n\t\t\t\"\t#else\",\n\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\n\n\t\t\t\"\t#endif\",\n\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\n\n\t\t\t\"}\"\n\n\t\t].join(\"\\n\")\n\n\t}\n\n};\n\n// File:src/renderers/WebGLRenderer.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nTHREE.WebGLRenderer = function ( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\n\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\tpixelRatio = 1,\n\n\t_precision = parameters.precision !== undefined ? parameters.precision : 'highp',\n\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t_logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false,\n\n\t_clearColor = new THREE.Color( 0x000000 ),\n\t_clearAlpha = 0;\n\n\tvar lights = [];\n\n\tvar _webglObjects = {};\n\tvar _webglObjectsImmediate = [];\n\n\tvar opaqueObjects = [];\n\tvar transparentObjects = [];\n\n\tvar sprites = [];\n\tvar lensFlares = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// physically based shading\n\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// shadow map\n\n\tthis.shadowMapEnabled = false;\n\tthis.shadowMapType = THREE.PCFShadowMap;\n\tthis.shadowMapCullFace = THREE.CullFaceFront;\n\tthis.shadowMapDebug = false;\n\tthis.shadowMapCascade = false;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// flags\n\n\tthis.autoScaleCubemaps = true;\n\n\t// info\n\n\tthis.info = {\n\n\t\tmemory: {\n\n\t\t\tprograms: 0,\n\t\t\tgeometries: 0,\n\t\t\ttextures: 0\n\n\t\t},\n\n\t\trender: {\n\n\t\t\tcalls: 0,\n\t\t\tvertices: 0,\n\t\t\tfaces: 0,\n\t\t\tpoints: 0\n\n\t\t}\n\n\t};\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t_programs = [],\n\n\t// internal state cache\n\n\t_currentProgram = null,\n\t_currentFramebuffer = null,\n\t_currentMaterialId = - 1,\n\t_currentGeometryProgram = '',\n\t_currentCamera = null,\n\n\t_usedTextureUnits = 0,\n\n\t// GL state cache\n\n\t_oldDoubleSided = - 1,\n\t_oldFlipSided = - 1,\n\n\t_oldBlending = - 1,\n\n\t_oldBlendEquation = - 1,\n\t_oldBlendSrc = - 1,\n\t_oldBlendDst = - 1,\n\n\t_oldDepthTest = - 1,\n\t_oldDepthWrite = - 1,\n\n\t_oldPolygonOffset = null,\n\t_oldPolygonOffsetFactor = null,\n\t_oldPolygonOffsetUnits = null,\n\n\t_oldLineWidth = null,\n\n\t_viewportX = 0,\n\t_viewportY = 0,\n\t_viewportWidth = _canvas.width,\n\t_viewportHeight = _canvas.height,\n\t_currentWidth = 0,\n\t_currentHeight = 0,\n\n\t_newAttributes = new Uint8Array( 16 ),\n\t_enabledAttributes = new Uint8Array( 16 ),\n\n\t// frustum\n\n\t_frustum = new THREE.Frustum(),\n\n\t // camera matrices cache\n\n\t_projScreenMatrix = new THREE.Matrix4(),\n\t_projScreenMatrixPS = new THREE.Matrix4(),\n\n\t_vector3 = new THREE.Vector3(),\n\n\t// light arrays cache\n\n\t_direction = new THREE.Vector3(),\n\n\t_lightsNeedUpdate = true,\n\n\t_lights = {\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: { length: 0, colors:[], positions: [] },\n\t\tpoint: { length: 0, colors: [], positions: [], distances: [] },\n\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [] },\n\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\n\n\t};\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar attributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\n\t\t};\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl') !== null ) {\n\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\n\n\t\t\t} else {\n\n\t\t\t\tthrow 'Error creating WebGL context.';\n\n\t\t\t}\n\n\t\t}\n\n\t\t_canvas.addEventListener( 'webglcontextlost', function ( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tresetGLState();\n\t\t\tsetDefaultGLState();\n\n\t\t\t_webglObjects = {};\n\n\t\t}, false);\n\n\t} catch ( error ) {\n\n\t\tconsole.error( error );\n\n\t}\n\n\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\treturn {\n\t\t\t\t'rangeMin': 1,\n\t\t\t\t'rangeMax': 1,\n\t\t\t\t'precision': 1\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\tvar extensions = new THREE.WebGLExtensions( _gl );\n\n\textensions.get( 'OES_texture_float' );\n\textensions.get( 'OES_texture_float_linear' );\n\textensions.get( 'OES_standard_derivatives' );\n\n\tif ( _logarithmicDepthBuffer ) {\n\n\t\textensions.get( 'EXT_frag_depth' );\n\n\t}\n\n\t//\n\n\tvar setDefaultGLState = function () {\n\n\t\t_gl.clearColor( 0, 0, 0, 1 );\n\t\t_gl.clearDepth( 1 );\n\t\t_gl.clearStencil( 0 );\n\n\t\t_gl.enable( _gl.DEPTH_TEST );\n\t\t_gl.depthFunc( _gl.LEQUAL );\n\n\t\t_gl.frontFace( _gl.CCW );\n\t\t_gl.cullFace( _gl.BACK );\n\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t_gl.enable( _gl.BLEND );\n\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tvar resetGLState = function () {\n\n\t\t_currentProgram = null;\n\t\t_currentCamera = null;\n\n\t\t_oldBlending = - 1;\n\t\t_oldDepthTest = - 1;\n\t\t_oldDepthWrite = - 1;\n\t\t_oldDoubleSided = - 1;\n\t\t_oldFlipSided = - 1;\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\n\t\t_lightsNeedUpdate = true;\n\n\t\tfor ( var i = 0; i < _enabledAttributes.length; i ++ ) {\n\n\t\t\t_enabledAttributes[ i ] = 0;\n\n\t\t}\n\n\t};\n\n\tsetDefaultGLState();\n\n\tthis.context = _gl;\n\n\t// GPU capabilities\n\n\tvar _maxTextures = _gl.getParameter( _gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar _maxVertexTextures = _gl.getParameter( _gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar _maxTextureSize = _gl.getParameter( _gl.MAX_TEXTURE_SIZE );\n\tvar _maxCubemapSize = _gl.getParameter( _gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar _supportsVertexTextures = _maxVertexTextures > 0;\n\tvar _supportsBoneTextures = _supportsVertexTextures && extensions.get( 'OES_texture_float' );\n\n\t//\n\n\tvar _vertexShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.HIGH_FLOAT );\n\tvar _vertexShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.MEDIUM_FLOAT );\n\tvar _vertexShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.VERTEX_SHADER, _gl.LOW_FLOAT );\n\n\tvar _fragmentShaderPrecisionHighpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.HIGH_FLOAT );\n\tvar _fragmentShaderPrecisionMediumpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.MEDIUM_FLOAT );\n\tvar _fragmentShaderPrecisionLowpFloat = _gl.getShaderPrecisionFormat( _gl.FRAGMENT_SHADER, _gl.LOW_FLOAT );\n\n\tvar getCompressedTextureFormats = ( function () {\n\n\t\tvar array;\n\n\t\treturn function () {\n\n\t\t\tif ( array !== undefined ) {\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tarray = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) || extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\n\n\t\t\t\tvar formats = _gl.getParameter( _gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ){\n\n\t\t\t\t\tarray.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t} )();\n\n\t// clamp precision to maximum available\n\n\tvar highpAvailable = _vertexShaderPrecisionHighpFloat.precision > 0 && _fragmentShaderPrecisionHighpFloat.precision > 0;\n\tvar mediumpAvailable = _vertexShaderPrecisionMediumpFloat.precision > 0 && _fragmentShaderPrecisionMediumpFloat.precision > 0;\n\n\tif ( _precision === 'highp' && ! highpAvailable ) {\n\n\t\tif ( mediumpAvailable ) {\n\n\t\t\t_precision = 'mediump';\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp not supported, using mediump.' );\n\n\t\t} else {\n\n\t\t\t_precision = 'lowp';\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: highp and mediump not supported, using lowp.' );\n\n\t\t}\n\n\t}\n\n\tif ( _precision === 'mediump' && ! mediumpAvailable ) {\n\n\t\t_precision = 'lowp';\n\t\tconsole.warn( 'THREE.WebGLRenderer: mediump not supported, using lowp.' );\n\n\t}\n\n\t// Plugins\n\n\tvar shadowMapPlugin = new THREE.ShadowMapPlugin( this, lights, _webglObjects, _webglObjectsImmediate );\n\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\n\n\t};\n\n\tthis.supportsVertexTextures = function () {\n\n\t\treturn _supportsVertexTextures;\n\n\t};\n\n\tthis.supportsFloatTextures = function () {\n\n\t\treturn extensions.get( 'OES_texture_float' );\n\n\t};\n\n\tthis.supportsStandardDerivatives = function () {\n\n\t\treturn extensions.get( 'OES_standard_derivatives' );\n\n\t};\n\n\tthis.supportsCompressedTextureS3TC = function () {\n\n\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t};\n\n\tthis.supportsCompressedTexturePVRTC = function () {\n\n\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t};\n\n\tthis.supportsBlendMinMax = function () {\n\n\t\treturn extensions.get( 'EXT_blend_minmax' );\n\n\t};\n\n\tthis.getMaxAnisotropy = ( function () {\n\n\t\tvar value;\n\n\t\treturn function () {\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\treturn value;\n\n\t\t\t}\n\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tvalue = extension !== null ? _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT ) : 0;\n\n\t\t\treturn value;\n\n\t\t}\n\n\t} )();\n\n\tthis.getPrecision = function () {\n\n\t\treturn _precision;\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tpixelRatio = value;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_canvas.width = width * pixelRatio;\n\t\t_canvas.height = height * pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewportX = x * pixelRatio;\n\t\t_viewportY = y * pixelRatio;\n\n\t\t_viewportWidth = width * pixelRatio;\n\t\t_viewportHeight = height * pixelRatio;\n\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t_gl.scissor(\n\t\t\tx * pixelRatio,\n\t\t\ty * pixelRatio,\n\t\t\twidth * pixelRatio,\n\t\t\theight * pixelRatio\n\t\t);\n\n\t};\n\n\tthis.enableScissorTest = function ( enable ) {\n\n\t\tenable ? _gl.enable( _gl.SCISSOR_TEST ) : _gl.disable( _gl.SCISSOR_TEST );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.setClearAlpha = function ( alpha ) {\n\n\t\t_clearAlpha = alpha;\n\n\t\t_gl.clearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t// Reset\n\n\tthis.resetGLState = resetGLState;\n\n\t// Buffer allocation\n\n\tfunction createParticleBuffers ( geometry ) {\n\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\tfunction createLineBuffers ( geometry ) {\n\n\t\tgeometry.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometry.__webglColorBuffer = _gl.createBuffer();\n\t\tgeometry.__webglLineDistanceBuffer = _gl.createBuffer();\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\tfunction createMeshBuffers ( geometryGroup ) {\n\n\t\tgeometryGroup.__webglVertexBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglNormalBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglTangentBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglColorBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglUVBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglUV2Buffer = _gl.createBuffer();\n\n\t\tgeometryGroup.__webglSkinIndicesBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglSkinWeightsBuffer = _gl.createBuffer();\n\n\t\tgeometryGroup.__webglFaceBuffer = _gl.createBuffer();\n\t\tgeometryGroup.__webglLineBuffer = _gl.createBuffer();\n\n\t\tvar numMorphTargets = geometryGroup.numMorphTargets;\n\n\t\tif ( numMorphTargets ) {\n\n\t\t\tgeometryGroup.__webglMorphTargetsBuffers = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__webglMorphTargetsBuffers.push( _gl.createBuffer() );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar numMorphNormals = geometryGroup.numMorphNormals;\n\n\t\tif ( numMorphNormals ) {\n\n\t\t\tgeometryGroup.__webglMorphNormalsBuffers = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__webglMorphNormalsBuffers.push( _gl.createBuffer() );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_this.info.memory.geometries ++;\n\n\t};\n\n\t// Events\n\n\tvar onObjectRemoved = function ( event ) {\n\n\t\tvar object = event.target;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tchild.removeEventListener( 'remove', onObjectRemoved );\n\n\t\t\tremoveObject( child );\n\n\t\t} );\n\n\t};\n\n\tvar onGeometryDispose = function ( event ) {\n\n\t\tvar geometry = event.target;\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdeallocateGeometry( geometry );\n\n\t};\n\n\tvar onTextureDispose = function ( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\t_this.info.memory.textures --;\n\n\n\t};\n\n\tvar onRenderTargetDispose = function ( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\t_this.info.memory.textures --;\n\n\t};\n\n\tvar onMaterialDispose = function ( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t};\n\n\t// Buffer deallocation\n\n\tvar deleteBuffers = function ( geometry ) {\n\n\t\tvar buffers = [\n\t\t\t'__webglVertexBuffer',\n\t\t\t'__webglNormalBuffer',\n\t\t\t'__webglTangentBuffer',\n\t\t\t'__webglColorBuffer',\n\t\t\t'__webglUVBuffer',\n\t\t\t'__webglUV2Buffer',\n\n\t\t\t'__webglSkinIndicesBuffer',\n\t\t\t'__webglSkinWeightsBuffer',\n\n\t\t\t'__webglFaceBuffer',\n\t\t\t'__webglLineBuffer',\n\n\t\t\t'__webglLineDistanceBuffer'\n\t\t];\n\n\t\tfor ( var i = 0, l = buffers.length; i < l; i ++ ) {\n\n\t\t\tvar name = buffers[ i ];\n\n\t\t\tif ( geometry[ name ] !== undefined ) {\n\n\t\t\t\t_gl.deleteBuffer( geometry[ name ] );\n\n\t\t\t\tdelete geometry[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// custom attributes\n\n\t\tif ( geometry.__webglCustomAttributesList !== undefined ) {\n\n\t\t\tfor ( var name in geometry.__webglCustomAttributesList ) {\n\n\t\t\t\t_gl.deleteBuffer( geometry.__webglCustomAttributesList[ name ].buffer );\n\n\t\t\t}\n\n\t\t\tdelete geometry.__webglCustomAttributesList;\n\n\t\t}\n\n\t\t_this.info.memory.geometries --;\n\n\t};\n\n\tvar deallocateGeometry = function ( geometry ) {\n\n\t\tdelete geometry.__webglInit;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tfor ( var name in geometry.attributes ) {\n\n\t\t\t\tvar attribute = geometry.attributes[ name ];\n\n\t\t\t\tif ( attribute.buffer !== undefined ) {\n\n\t\t\t\t\t_gl.deleteBuffer( attribute.buffer );\n\n\t\t\t\t\tdelete attribute.buffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_this.info.memory.geometries --;\n\n\t\t} else {\n\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\tif ( geometryGroupsList !== undefined ) {\n\n\t\t\t\tfor ( var i = 0, l = geometryGroupsList.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\n\t\t\t\t\tif ( geometryGroup.numMorphTargets !== undefined ) {\n\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphTargetsBuffers[ m ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphTargetsBuffers;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometryGroup.numMorphNormals !== undefined ) {\n\n\t\t\t\t\t\tfor ( var m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\t_gl.deleteBuffer( geometryGroup.__webglMorphNormalsBuffers[ m ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete geometryGroup.__webglMorphNormalsBuffers;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdeleteBuffers( geometryGroup );\n\n\t\t\t\t}\n\n\t\t\t\tdelete geometryGroups[ geometry.id ];\n\n\t\t\t} else {\n\n\t\t\t\tdeleteBuffers( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// TOFIX: Workaround for deleted geometry being currently bound\n\n\t\t_currentGeometryProgram = '';\n\n\t};\n\n\tvar deallocateTexture = function ( texture ) {\n\n\t\tif ( texture.image && texture.image.__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( texture.image.__webglTextureCube );\n\n\t\t\tdelete texture.image.__webglTextureCube;\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( texture.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( texture.__webglTexture );\n\n\t\t\tdelete texture.__webglTexture;\n\t\t\tdelete texture.__webglInit;\n\n\t\t}\n\n\t};\n\n\tvar deallocateRenderTarget = function ( renderTarget ) {\n\n\t\tif ( ! renderTarget || renderTarget.__webglTexture === undefined ) return;\n\n\t\t_gl.deleteTexture( renderTarget.__webglTexture );\n\n\t\tdelete renderTarget.__webglTexture;\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer[ i ] );\n\t\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTarget.__webglFramebuffer );\n\t\t\t_gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer );\n\n\t\t}\n\n\t\tdelete renderTarget.__webglFramebuffer;\n\t\tdelete renderTarget.__webglRenderbuffer;\n\n\t};\n\n\tvar deallocateMaterial = function ( material ) {\n\n\t\tvar program = material.program.program;\n\n\t\tif ( program === undefined ) return;\n\n\t\tmaterial.program = undefined;\n\n\t\t// only deallocate GL program if this was the last use of shared program\n\t\t// assumed there is only single copy of any program in the _programs list\n\t\t// (that's how it's constructed)\n\n\t\tvar i, il, programInfo;\n\t\tvar deleteProgram = false;\n\n\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\n\n\t\t\tprogramInfo = _programs[ i ];\n\n\t\t\tif ( programInfo.program === program ) {\n\n\t\t\t\tprogramInfo.usedTimes --;\n\n\t\t\t\tif ( programInfo.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteProgram = true;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( deleteProgram === true ) {\n\n\t\t\t// avoid using array.splice, this is costlier than creating new array from scratch\n\n\t\t\tvar newPrograms = [];\n\n\t\t\tfor ( i = 0, il = _programs.length; i < il; i ++ ) {\n\n\t\t\t\tprogramInfo = _programs[ i ];\n\n\t\t\t\tif ( programInfo.program !== program ) {\n\n\t\t\t\t\tnewPrograms.push( programInfo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_programs = newPrograms;\n\n\t\t\t_gl.deleteProgram( program );\n\n\t\t\t_this.info.memory.programs --;\n\n\t\t}\n\n\t};\n\n\t// Buffer initialization\n\n\tfunction initCustomAttributes ( object ) {\n\n\t\tvar geometry = object.geometry;\n\t\tvar material = object.material;\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tif ( material.attributes ) {\n\n\t\t\tif ( geometry.__webglCustomAttributesList === undefined ) {\n\n\t\t\t\tgeometry.__webglCustomAttributesList = [];\n\n\t\t\t}\n\n\t\t\tfor ( var name in material.attributes ) {\n\n\t\t\t\tvar attribute = material.attributes[ name ];\n\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\n\n\t\t\t\t\tattribute.__webglInitialized = true;\n\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\n\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\n\n\t\t\t\t\tattribute.size = size;\n\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\n\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.__webglCustomAttributesList.push( attribute );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction initParticleBuffers ( geometry, object ) {\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\n\n\t\tgeometry.__sortArray = [];\n\n\t\tgeometry.__webglParticleCount = nvertices;\n\n\t\tinitCustomAttributes( object );\n\n\t};\n\n\tfunction initLineBuffers ( geometry, object ) {\n\n\t\tvar nvertices = geometry.vertices.length;\n\n\t\tgeometry.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__colorArray = new Float32Array( nvertices * 3 );\n\t\tgeometry.__lineDistanceArray = new Float32Array( nvertices * 1 );\n\n\t\tgeometry.__webglLineCount = nvertices;\n\n\t\tinitCustomAttributes( object );\n\n\t};\n\n\tfunction initMeshBuffers ( geometryGroup, object ) {\n\n\t\tvar geometry = object.geometry,\n\t\t\tfaces3 = geometryGroup.faces3,\n\n\t\t\tnvertices = faces3.length * 3,\n\t\t\tntris     = faces3.length * 1,\n\t\t\tnlines    = faces3.length * 3,\n\n\t\t\tmaterial = getBufferMaterial( object, geometryGroup );\n\n\t\tgeometryGroup.__vertexArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__normalArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__colorArray = new Float32Array( nvertices * 3 );\n\t\tgeometryGroup.__uvArray = new Float32Array( nvertices * 2 );\n\n\t\tif ( geometry.faceVertexUvs.length > 1 ) {\n\n\t\t\tgeometryGroup.__uv2Array = new Float32Array( nvertices * 2 );\n\n\t\t}\n\n\t\tif ( geometry.hasTangents ) {\n\n\t\t\tgeometryGroup.__tangentArray = new Float32Array( nvertices * 4 );\n\n\t\t}\n\n\t\tif ( object.geometry.skinWeights.length && object.geometry.skinIndices.length ) {\n\n\t\t\tgeometryGroup.__skinIndexArray = new Float32Array( nvertices * 4 );\n\t\t\tgeometryGroup.__skinWeightArray = new Float32Array( nvertices * 4 );\n\n\t\t}\n\n\t\tvar UintArray = extensions.get( 'OES_element_index_uint' ) !== null && ntris > 21845 ? Uint32Array : Uint16Array; // 65535 / 3\n\n\t\tgeometryGroup.__typeArray = UintArray;\n\t\tgeometryGroup.__faceArray = new UintArray( ntris * 3 );\n\t\tgeometryGroup.__lineArray = new UintArray( nlines * 2 );\n\n\t\tvar numMorphTargets = geometryGroup.numMorphTargets;\n\n\t\tif ( numMorphTargets ) {\n\n\t\t\tgeometryGroup.__morphTargetsArrays = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__morphTargetsArrays.push( new Float32Array( nvertices * 3 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar numMorphNormals = geometryGroup.numMorphNormals;\n\n\t\tif ( numMorphNormals ) {\n\n\t\t\tgeometryGroup.__morphNormalsArrays = [];\n\n\t\t\tfor ( var m = 0, ml = numMorphNormals; m < ml; m ++ ) {\n\n\t\t\t\tgeometryGroup.__morphNormalsArrays.push( new Float32Array( nvertices * 3 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometryGroup.__webglFaceCount = ntris * 3;\n\t\tgeometryGroup.__webglLineCount = nlines * 2;\n\n\n\t\t// custom attributes\n\n\t\tif ( material.attributes ) {\n\n\t\t\tif ( geometryGroup.__webglCustomAttributesList === undefined ) {\n\n\t\t\t\tgeometryGroup.__webglCustomAttributesList = [];\n\n\t\t\t}\n\n\t\t\tfor ( var name in material.attributes ) {\n\n\t\t\t\t// Do a shallow copy of the attribute object so different geometryGroup chunks use different\n\t\t\t\t// attribute buffers which are correctly indexed in the setMeshBuffers function\n\n\t\t\t\tvar originalAttribute = material.attributes[ name ];\n\n\t\t\t\tvar attribute = {};\n\n\t\t\t\tfor ( var property in originalAttribute ) {\n\n\t\t\t\t\tattribute[ property ] = originalAttribute[ property ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! attribute.__webglInitialized || attribute.createUniqueBuffers ) {\n\n\t\t\t\t\tattribute.__webglInitialized = true;\n\n\t\t\t\t\tvar size = 1;   // \"f\" and \"i\"\n\n\t\t\t\t\tif ( attribute.type === 'v2' ) size = 2;\n\t\t\t\t\telse if ( attribute.type === 'v3' ) size = 3;\n\t\t\t\t\telse if ( attribute.type === 'v4' ) size = 4;\n\t\t\t\t\telse if ( attribute.type === 'c'  ) size = 3;\n\n\t\t\t\t\tattribute.size = size;\n\n\t\t\t\t\tattribute.array = new Float32Array( nvertices * size );\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.buffer.belongsToAttribute = name;\n\n\t\t\t\t\toriginalAttribute.needsUpdate = true;\n\t\t\t\t\tattribute.__original = originalAttribute;\n\n\t\t\t\t}\n\n\t\t\t\tgeometryGroup.__webglCustomAttributesList.push( attribute );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometryGroup.__inittedArrays = true;\n\n\t};\n\n\tfunction getBufferMaterial( object, geometryGroup ) {\n\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\n\t\t\t ? object.material.materials[ geometryGroup.materialIndex ]\n\t\t\t : object.material;\n\n\t};\n\n\tfunction materialNeedsSmoothNormals ( material ) {\n\n\t\treturn material && material.shading !== undefined && material.shading === THREE.SmoothShading;\n\n\t};\n\n\t// Buffer setting\n\n\tfunction setParticleBuffers ( geometry, hint, object ) {\n\n\t\tvar v, c, vertex, offset, index, color,\n\n\t\tvertices = geometry.vertices,\n\t\tvl = vertices.length,\n\n\t\tcolors = geometry.colors,\n\t\tcl = colors.length,\n\n\t\tvertexArray = geometry.__vertexArray,\n\t\tcolorArray = geometry.__colorArray,\n\n\t\tsortArray = geometry.__sortArray,\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyElements = geometry.elementsNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\n\t\ti, il,\n\t\ta, ca, cal, value,\n\t\tcustomAttribute;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\tvertex = vertices[ v ];\n\n\t\t\t\toffset = v * 3;\n\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\n\n\t\t\t\tcolor = colors[ c ];\n\n\t\t\t\toffset = c * 3;\n\n\t\t\t\tcolorArray[ offset ]     = color.r;\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( customAttribute.needsUpdate && ( customAttribute.boundTo === undefined ||  customAttribute.boundTo === 'vertices' ) ) {\n\n\t\t\t\t\tcal = customAttribute.value.length;\n\n\t\t\t\t\toffset = 0;\n\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\n\t\t\t\t\t\t\toffset += 2;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]      = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\n\n\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t\tcustomAttribute.needsUpdate = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setLineBuffers ( geometry, hint ) {\n\n\t\tvar v, c, d, vertex, offset, color,\n\n\t\tvertices = geometry.vertices,\n\t\tcolors = geometry.colors,\n\t\tlineDistances = geometry.lineDistances,\n\n\t\tvl = vertices.length,\n\t\tcl = colors.length,\n\t\tdl = lineDistances.length,\n\n\t\tvertexArray = geometry.__vertexArray,\n\t\tcolorArray = geometry.__colorArray,\n\t\tlineDistanceArray = geometry.__lineDistanceArray,\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\t\tdirtyLineDistances = geometry.lineDistancesNeedUpdate,\n\n\t\tcustomAttributes = geometry.__webglCustomAttributesList,\n\n\t\ti, il,\n\t\ta, ca, cal, value,\n\t\tcustomAttribute;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( v = 0; v < vl; v ++ ) {\n\n\t\t\t\tvertex = vertices[ v ];\n\n\t\t\t\toffset = v * 3;\n\n\t\t\t\tvertexArray[ offset ]     = vertex.x;\n\t\t\t\tvertexArray[ offset + 1 ] = vertex.y;\n\t\t\t\tvertexArray[ offset + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( c = 0; c < cl; c ++ ) {\n\n\t\t\t\tcolor = colors[ c ];\n\n\t\t\t\toffset = c * 3;\n\n\t\t\t\tcolorArray[ offset ]     = color.r;\n\t\t\t\tcolorArray[ offset + 1 ] = color.g;\n\t\t\t\tcolorArray[ offset + 2 ] = color.b;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyLineDistances ) {\n\n\t\t\tfor ( d = 0; d < dl; d ++ ) {\n\n\t\t\t\tlineDistanceArray[ d ] = lineDistances[ d ];\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.__webglLineDistanceBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, lineDistanceArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( customAttribute.needsUpdate && ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) ) {\n\n\t\t\t\t\toffset = 0;\n\n\t\t\t\t\tcal = customAttribute.value.length;\n\n\t\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tcustomAttribute.array[ ca ] = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\n\t\t\t\t\t\t\toffset += 2;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.r;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.g;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.b;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset ]   = value.x;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1 ] = value.y;\n\t\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2 ] = value.z;\n\n\t\t\t\t\t\t\t\toffset += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\t\tfor ( ca = 0; ca < cal; ca ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ ca ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset ]    = value.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 1  ] = value.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 2  ] = value.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset + 3  ] = value.w;\n\n\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t\t\tcustomAttribute.needsUpdate = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setMeshBuffers( geometryGroup, object, hint, dispose, material ) {\n\n\t\tif ( ! geometryGroup.__inittedArrays ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar needsSmoothNormals = materialNeedsSmoothNormals( material );\n\n\t\tvar f, fl, fi, face,\n\t\tvertexNormals, faceNormal, normal,\n\t\tvertexColors, faceColor,\n\t\tvertexTangents,\n\t\tuv, uv2, v1, v2, v3, v4, t1, t2, t3, t4, n1, n2, n3, n4,\n\t\tc1, c2, c3,\n\t\tsw1, sw2, sw3, sw4,\n\t\tsi1, si2, si3, si4,\n\t\tsa1, sa2, sa3, sa4,\n\t\tsb1, sb2, sb3, sb4,\n\t\tm, ml, i, il,\n\t\tvn, uvi, uv2i,\n\t\tvk, vkl, vka,\n\t\tnka, chf, faceVertexNormals,\n\t\ta,\n\n\t\tvertexIndex = 0,\n\n\t\toffset = 0,\n\t\toffset_uv = 0,\n\t\toffset_uv2 = 0,\n\t\toffset_face = 0,\n\t\toffset_normal = 0,\n\t\toffset_tangent = 0,\n\t\toffset_line = 0,\n\t\toffset_color = 0,\n\t\toffset_skin = 0,\n\t\toffset_morphTarget = 0,\n\t\toffset_custom = 0,\n\t\toffset_customSrc = 0,\n\n\t\tvalue,\n\n\t\tvertexArray = geometryGroup.__vertexArray,\n\t\tuvArray = geometryGroup.__uvArray,\n\t\tuv2Array = geometryGroup.__uv2Array,\n\t\tnormalArray = geometryGroup.__normalArray,\n\t\ttangentArray = geometryGroup.__tangentArray,\n\t\tcolorArray = geometryGroup.__colorArray,\n\n\t\tskinIndexArray = geometryGroup.__skinIndexArray,\n\t\tskinWeightArray = geometryGroup.__skinWeightArray,\n\n\t\tmorphTargetsArrays = geometryGroup.__morphTargetsArrays,\n\t\tmorphNormalsArrays = geometryGroup.__morphNormalsArrays,\n\n\t\tcustomAttributes = geometryGroup.__webglCustomAttributesList,\n\t\tcustomAttribute,\n\n\t\tfaceArray = geometryGroup.__faceArray,\n\t\tlineArray = geometryGroup.__lineArray,\n\n\t\tgeometry = object.geometry, // this is shared for all chunks\n\n\t\tdirtyVertices = geometry.verticesNeedUpdate,\n\t\tdirtyElements = geometry.elementsNeedUpdate,\n\t\tdirtyUvs = geometry.uvsNeedUpdate,\n\t\tdirtyNormals = geometry.normalsNeedUpdate,\n\t\tdirtyTangents = geometry.tangentsNeedUpdate,\n\t\tdirtyColors = geometry.colorsNeedUpdate,\n\t\tdirtyMorphTargets = geometry.morphTargetsNeedUpdate,\n\n\t\tvertices = geometry.vertices,\n\t\tchunk_faces3 = geometryGroup.faces3,\n\t\tobj_faces = geometry.faces,\n\n\t\tobj_uvs  = geometry.faceVertexUvs[ 0 ],\n\t\tobj_uvs2 = geometry.faceVertexUvs[ 1 ],\n\n\t\tobj_colors = geometry.colors,\n\n\t\tobj_skinIndices = geometry.skinIndices,\n\t\tobj_skinWeights = geometry.skinWeights,\n\n\t\tmorphTargets = geometry.morphTargets,\n\t\tmorphNormals = geometry.morphNormals;\n\n\t\tif ( dirtyVertices ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tv1 = vertices[ face.a ];\n\t\t\t\tv2 = vertices[ face.b ];\n\t\t\t\tv3 = vertices[ face.c ];\n\n\t\t\t\tvertexArray[ offset ]     = v1.x;\n\t\t\t\tvertexArray[ offset + 1 ] = v1.y;\n\t\t\t\tvertexArray[ offset + 2 ] = v1.z;\n\n\t\t\t\tvertexArray[ offset + 3 ] = v2.x;\n\t\t\t\tvertexArray[ offset + 4 ] = v2.y;\n\t\t\t\tvertexArray[ offset + 5 ] = v2.z;\n\n\t\t\t\tvertexArray[ offset + 6 ] = v3.x;\n\t\t\t\tvertexArray[ offset + 7 ] = v3.y;\n\t\t\t\tvertexArray[ offset + 8 ] = v3.z;\n\n\t\t\t\toffset += 9;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, vertexArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyMorphTargets ) {\n\n\t\t\tfor ( vk = 0, vkl = morphTargets.length; vk < vkl; vk ++ ) {\n\n\t\t\t\toffset_morphTarget = 0;\n\n\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\tchf = chunk_faces3[ f ];\n\t\t\t\t\tface = obj_faces[ chf ];\n\n\t\t\t\t\t// morph positions\n\n\t\t\t\t\tv1 = morphTargets[ vk ].vertices[ face.a ];\n\t\t\t\t\tv2 = morphTargets[ vk ].vertices[ face.b ];\n\t\t\t\t\tv3 = morphTargets[ vk ].vertices[ face.c ];\n\n\t\t\t\t\tvka = morphTargetsArrays[ vk ];\n\n\t\t\t\t\tvka[ offset_morphTarget ]     = v1.x;\n\t\t\t\t\tvka[ offset_morphTarget + 1 ] = v1.y;\n\t\t\t\t\tvka[ offset_morphTarget + 2 ] = v1.z;\n\n\t\t\t\t\tvka[ offset_morphTarget + 3 ] = v2.x;\n\t\t\t\t\tvka[ offset_morphTarget + 4 ] = v2.y;\n\t\t\t\t\tvka[ offset_morphTarget + 5 ] = v2.z;\n\n\t\t\t\t\tvka[ offset_morphTarget + 6 ] = v3.x;\n\t\t\t\t\tvka[ offset_morphTarget + 7 ] = v3.y;\n\t\t\t\t\tvka[ offset_morphTarget + 8 ] = v3.z;\n\n\t\t\t\t\t// morph normals\n\n\t\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t\tif ( needsSmoothNormals ) {\n\n\t\t\t\t\t\t\tfaceVertexNormals = morphNormals[ vk ].vertexNormals[ chf ];\n\n\t\t\t\t\t\t\tn1 = faceVertexNormals.a;\n\t\t\t\t\t\t\tn2 = faceVertexNormals.b;\n\t\t\t\t\t\t\tn3 = faceVertexNormals.c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tn1 = morphNormals[ vk ].faceNormals[ chf ];\n\t\t\t\t\t\t\tn2 = n1;\n\t\t\t\t\t\t\tn3 = n1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnka = morphNormalsArrays[ vk ];\n\n\t\t\t\t\t\tnka[ offset_morphTarget ]     = n1.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 1 ] = n1.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 2 ] = n1.z;\n\n\t\t\t\t\t\tnka[ offset_morphTarget + 3 ] = n2.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 4 ] = n2.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 5 ] = n2.z;\n\n\t\t\t\t\t\tnka[ offset_morphTarget + 6 ] = n3.x;\n\t\t\t\t\t\tnka[ offset_morphTarget + 7 ] = n3.y;\n\t\t\t\t\t\tnka[ offset_morphTarget + 8 ] = n3.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//\n\n\t\t\t\t\toffset_morphTarget += 9;\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ vk ] );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphTargetsArrays[ vk ], hint );\n\n\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ vk ] );\n\t\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, morphNormalsArrays[ vk ], hint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( obj_skinWeights.length ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t// weights\n\n\t\t\t\tsw1 = obj_skinWeights[ face.a ];\n\t\t\t\tsw2 = obj_skinWeights[ face.b ];\n\t\t\t\tsw3 = obj_skinWeights[ face.c ];\n\n\t\t\t\tskinWeightArray[ offset_skin ]     = sw1.x;\n\t\t\t\tskinWeightArray[ offset_skin + 1 ] = sw1.y;\n\t\t\t\tskinWeightArray[ offset_skin + 2 ] = sw1.z;\n\t\t\t\tskinWeightArray[ offset_skin + 3 ] = sw1.w;\n\n\t\t\t\tskinWeightArray[ offset_skin + 4 ] = sw2.x;\n\t\t\t\tskinWeightArray[ offset_skin + 5 ] = sw2.y;\n\t\t\t\tskinWeightArray[ offset_skin + 6 ] = sw2.z;\n\t\t\t\tskinWeightArray[ offset_skin + 7 ] = sw2.w;\n\n\t\t\t\tskinWeightArray[ offset_skin + 8 ]  = sw3.x;\n\t\t\t\tskinWeightArray[ offset_skin + 9 ]  = sw3.y;\n\t\t\t\tskinWeightArray[ offset_skin + 10 ] = sw3.z;\n\t\t\t\tskinWeightArray[ offset_skin + 11 ] = sw3.w;\n\n\t\t\t\t// indices\n\n\t\t\t\tsi1 = obj_skinIndices[ face.a ];\n\t\t\t\tsi2 = obj_skinIndices[ face.b ];\n\t\t\t\tsi3 = obj_skinIndices[ face.c ];\n\n\t\t\t\tskinIndexArray[ offset_skin ]     = si1.x;\n\t\t\t\tskinIndexArray[ offset_skin + 1 ] = si1.y;\n\t\t\t\tskinIndexArray[ offset_skin + 2 ] = si1.z;\n\t\t\t\tskinIndexArray[ offset_skin + 3 ] = si1.w;\n\n\t\t\t\tskinIndexArray[ offset_skin + 4 ] = si2.x;\n\t\t\t\tskinIndexArray[ offset_skin + 5 ] = si2.y;\n\t\t\t\tskinIndexArray[ offset_skin + 6 ] = si2.z;\n\t\t\t\tskinIndexArray[ offset_skin + 7 ] = si2.w;\n\n\t\t\t\tskinIndexArray[ offset_skin + 8 ]  = si3.x;\n\t\t\t\tskinIndexArray[ offset_skin + 9 ]  = si3.y;\n\t\t\t\tskinIndexArray[ offset_skin + 10 ] = si3.z;\n\t\t\t\tskinIndexArray[ offset_skin + 11 ] = si3.w;\n\n\t\t\t\toffset_skin += 12;\n\n\t\t\t}\n\n\t\t\tif ( offset_skin > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinIndexArray, hint );\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, skinWeightArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyColors ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexColors = face.vertexColors;\n\t\t\t\tfaceColor = face.color;\n\n\t\t\t\tif ( vertexColors.length === 3 && material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\tc1 = vertexColors[ 0 ];\n\t\t\t\t\tc2 = vertexColors[ 1 ];\n\t\t\t\t\tc3 = vertexColors[ 2 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tc1 = faceColor;\n\t\t\t\t\tc2 = faceColor;\n\t\t\t\t\tc3 = faceColor;\n\n\t\t\t\t}\n\n\t\t\t\tcolorArray[ offset_color ]     = c1.r;\n\t\t\t\tcolorArray[ offset_color + 1 ] = c1.g;\n\t\t\t\tcolorArray[ offset_color + 2 ] = c1.b;\n\n\t\t\t\tcolorArray[ offset_color + 3 ] = c2.r;\n\t\t\t\tcolorArray[ offset_color + 4 ] = c2.g;\n\t\t\t\tcolorArray[ offset_color + 5 ] = c2.b;\n\n\t\t\t\tcolorArray[ offset_color + 6 ] = c3.r;\n\t\t\t\tcolorArray[ offset_color + 7 ] = c3.g;\n\t\t\t\tcolorArray[ offset_color + 8 ] = c3.b;\n\n\t\t\t\toffset_color += 9;\n\n\t\t\t}\n\n\t\t\tif ( offset_color > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, colorArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyTangents && geometry.hasTangents ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexTangents = face.vertexTangents;\n\n\t\t\t\tt1 = vertexTangents[ 0 ];\n\t\t\t\tt2 = vertexTangents[ 1 ];\n\t\t\t\tt3 = vertexTangents[ 2 ];\n\n\t\t\t\ttangentArray[ offset_tangent ]     = t1.x;\n\t\t\t\ttangentArray[ offset_tangent + 1 ] = t1.y;\n\t\t\t\ttangentArray[ offset_tangent + 2 ] = t1.z;\n\t\t\t\ttangentArray[ offset_tangent + 3 ] = t1.w;\n\n\t\t\t\ttangentArray[ offset_tangent + 4 ] = t2.x;\n\t\t\t\ttangentArray[ offset_tangent + 5 ] = t2.y;\n\t\t\t\ttangentArray[ offset_tangent + 6 ] = t2.z;\n\t\t\t\ttangentArray[ offset_tangent + 7 ] = t2.w;\n\n\t\t\t\ttangentArray[ offset_tangent + 8 ]  = t3.x;\n\t\t\t\ttangentArray[ offset_tangent + 9 ]  = t3.y;\n\t\t\t\ttangentArray[ offset_tangent + 10 ] = t3.z;\n\t\t\t\ttangentArray[ offset_tangent + 11 ] = t3.w;\n\n\t\t\t\toffset_tangent += 12;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, tangentArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyNormals ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\tvertexNormals = face.vertexNormals;\n\t\t\t\tfaceNormal = face.normal;\n\n\t\t\t\tif ( vertexNormals.length === 3 && needsSmoothNormals ) {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tvn = vertexNormals[ i ];\n\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = vn.x;\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = vn.y;\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = vn.z;\n\n\t\t\t\t\t\toffset_normal += 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\tnormalArray[ offset_normal ]     = faceNormal.x;\n\t\t\t\t\t\tnormalArray[ offset_normal + 1 ] = faceNormal.y;\n\t\t\t\t\t\tnormalArray[ offset_normal + 2 ] = faceNormal.z;\n\n\t\t\t\t\t\toffset_normal += 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, normalArray, hint );\n\n\t\t}\n\n\t\tif ( dirtyUvs && obj_uvs ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfi = chunk_faces3[ f ];\n\n\t\t\t\tuv = obj_uvs[ fi ];\n\n\t\t\t\tif ( uv === undefined ) continue;\n\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tuvi = uv[ i ];\n\n\t\t\t\t\tuvArray[ offset_uv ]     = uvi.x;\n\t\t\t\t\tuvArray[ offset_uv + 1 ] = uvi.y;\n\n\t\t\t\t\toffset_uv += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( offset_uv > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uvArray, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyUvs && obj_uvs2 ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfi = chunk_faces3[ f ];\n\n\t\t\t\tuv2 = obj_uvs2[ fi ];\n\n\t\t\t\tif ( uv2 === undefined ) continue;\n\n\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tuv2i = uv2[ i ];\n\n\t\t\t\t\tuv2Array[ offset_uv2 ]     = uv2i.x;\n\t\t\t\t\tuv2Array[ offset_uv2 + 1 ] = uv2i.y;\n\n\t\t\t\t\toffset_uv2 += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( offset_uv2 > 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, uv2Array, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dirtyElements ) {\n\n\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\tfaceArray[ offset_face ]   = vertexIndex;\n\t\t\t\tfaceArray[ offset_face + 1 ] = vertexIndex + 1;\n\t\t\t\tfaceArray[ offset_face + 2 ] = vertexIndex + 2;\n\n\t\t\t\toffset_face += 3;\n\n\t\t\t\tlineArray[ offset_line ]     = vertexIndex;\n\t\t\t\tlineArray[ offset_line + 1 ] = vertexIndex + 1;\n\n\t\t\t\tlineArray[ offset_line + 2 ] = vertexIndex;\n\t\t\t\tlineArray[ offset_line + 3 ] = vertexIndex + 2;\n\n\t\t\t\tlineArray[ offset_line + 4 ] = vertexIndex + 1;\n\t\t\t\tlineArray[ offset_line + 5 ] = vertexIndex + 2;\n\n\t\t\t\toffset_line += 6;\n\n\t\t\t\tvertexIndex += 3;\n\n\t\t\t}\n\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, faceArray, hint );\n\n\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\n\t\t\t_gl.bufferData( _gl.ELEMENT_ARRAY_BUFFER, lineArray, hint );\n\n\t\t}\n\n\t\tif ( customAttributes ) {\n\n\t\t\tfor ( i = 0, il = customAttributes.length; i < il; i ++ ) {\n\n\t\t\t\tcustomAttribute = customAttributes[ i ];\n\n\t\t\t\tif ( ! customAttribute.__original.needsUpdate ) continue;\n\n\t\t\t\toffset_custom = 0;\n\t\t\t\toffset_customSrc = 0;\n\n\t\t\t\tif ( customAttribute.size === 1 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\toffset_custom += 3;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = value;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = value;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = value;\n\n\t\t\t\t\t\t\toffset_custom += 3;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 2 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\n\n\t\t\t\t\t\t\toffset_custom += 6;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2.y;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v3.y;\n\n\t\t\t\t\t\t\toffset_custom += 6;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 3 ) {\n\n\t\t\t\t\tvar pp;\n\n\t\t\t\t\tif ( customAttribute.type === 'c' ) {\n\n\t\t\t\t\t\tpp = [ 'r', 'g', 'b' ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpp = [ 'x', 'y', 'z' ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value[ 0 ];\n\t\t\t\t\t\t\tv2 = value[ 1 ];\n\t\t\t\t\t\t\tv3 = value[ 2 ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom ]     = v1[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1 ] = v1[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2 ] = v1[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3 ] = v2[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4 ] = v2[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5 ] = v2[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6 ] = v3[ pp[ 0 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7 ] = v3[ pp[ 1 ] ];\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8 ] = v3[ pp[ 2 ] ];\n\n\t\t\t\t\t\t\toffset_custom += 9;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( customAttribute.size === 4 ) {\n\n\t\t\t\t\tif ( customAttribute.boundTo === undefined || customAttribute.boundTo === 'vertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tface = obj_faces[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = customAttribute.value[ face.a ];\n\t\t\t\t\t\t\tv2 = customAttribute.value[ face.b ];\n\t\t\t\t\t\t\tv3 = customAttribute.value[ face.c ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faces' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value;\n\t\t\t\t\t\t\tv2 = value;\n\t\t\t\t\t\t\tv3 = value;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( customAttribute.boundTo === 'faceVertices' ) {\n\n\t\t\t\t\t\tfor ( f = 0, fl = chunk_faces3.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\t\tvalue = customAttribute.value[ chunk_faces3[ f ] ];\n\n\t\t\t\t\t\t\tv1 = value[ 0 ];\n\t\t\t\t\t\t\tv2 = value[ 1 ];\n\t\t\t\t\t\t\tv3 = value[ 2 ];\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom  ]   = v1.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 1  ] = v1.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 2  ] = v1.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 3  ] = v1.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 4  ] = v2.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 5  ] = v2.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 6  ] = v2.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 7  ] = v2.w;\n\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 8  ] = v3.x;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 9  ] = v3.y;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 10 ] = v3.z;\n\t\t\t\t\t\t\tcustomAttribute.array[ offset_custom + 11 ] = v3.w;\n\n\t\t\t\t\t\t\toffset_custom += 12;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, customAttribute.buffer );\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, customAttribute.array, hint );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( dispose ) {\n\n\t\t\tdelete geometryGroup.__inittedArrays;\n\t\t\tdelete geometryGroup.__colorArray;\n\t\t\tdelete geometryGroup.__normalArray;\n\t\t\tdelete geometryGroup.__tangentArray;\n\t\t\tdelete geometryGroup.__uvArray;\n\t\t\tdelete geometryGroup.__uv2Array;\n\t\t\tdelete geometryGroup.__faceArray;\n\t\t\tdelete geometryGroup.__vertexArray;\n\t\t\tdelete geometryGroup.__lineArray;\n\t\t\tdelete geometryGroup.__skinIndexArray;\n\t\t\tdelete geometryGroup.__skinWeightArray;\n\n\t\t}\n\n\t};\n\n\t// Buffer rendering\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tinitAttributes();\n\n\t\tif ( object.hasPositions && ! object.__webglVertexBuffer ) object.__webglVertexBuffer = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! object.__webglNormalBuffer ) object.__webglNormalBuffer = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! object.__webglUvBuffer ) object.__webglUvBuffer = _gl.createBuffer();\n\t\tif ( object.hasColors && ! object.__webglColorBuffer ) object.__webglColorBuffer = _gl.createBuffer();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglVertexBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.position );\n\t\t\t_gl.vertexAttribPointer( program.attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglNormalBuffer );\n\n\t\t\tif ( material.shading === THREE.FlatShading ) {\n\n\t\t\t\tvar nx, ny, nz,\n\t\t\t\t\tnax, nbx, ncx, nay, nby, ncy, naz, nbz, ncz,\n\t\t\t\t\tnormalArray,\n\t\t\t\t\ti, il = object.count * 3;\n\n\t\t\t\tfor ( i = 0; i < il; i += 9 ) {\n\n\t\t\t\t\tnormalArray = object.normalArray;\n\n\t\t\t\t\tnax  = normalArray[ i ];\n\t\t\t\t\tnay  = normalArray[ i + 1 ];\n\t\t\t\t\tnaz  = normalArray[ i + 2 ];\n\n\t\t\t\t\tnbx  = normalArray[ i + 3 ];\n\t\t\t\t\tnby  = normalArray[ i + 4 ];\n\t\t\t\t\tnbz  = normalArray[ i + 5 ];\n\n\t\t\t\t\tncx  = normalArray[ i + 6 ];\n\t\t\t\t\tncy  = normalArray[ i + 7 ];\n\t\t\t\t\tncz  = normalArray[ i + 8 ];\n\n\t\t\t\t\tnx = ( nax + nbx + ncx ) / 3;\n\t\t\t\t\tny = ( nay + nby + ncy ) / 3;\n\t\t\t\t\tnz = ( naz + nbz + ncz ) / 3;\n\n\t\t\t\t\tnormalArray[ i ]   = nx;\n\t\t\t\t\tnormalArray[ i + 1 ] = ny;\n\t\t\t\t\tnormalArray[ i + 2 ] = nz;\n\n\t\t\t\t\tnormalArray[ i + 3 ] = nx;\n\t\t\t\t\tnormalArray[ i + 4 ] = ny;\n\t\t\t\t\tnormalArray[ i + 5 ] = nz;\n\n\t\t\t\t\tnormalArray[ i + 6 ] = nx;\n\t\t\t\t\tnormalArray[ i + 7 ] = ny;\n\t\t\t\t\tnormalArray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.normal );\n\t\t\t_gl.vertexAttribPointer( program.attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglUvBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.uv );\n\t\t\t_gl.vertexAttribPointer( program.attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, object.__webglColorBuffer );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\t\t\tenableAttribute( program.attributes.color );\n\t\t\t_gl.vertexAttribPointer( program.attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.attributes;\n\t\tvar programAttributesKeys = program.attributesKeys;\n\n\t\tfor ( var i = 0, l = programAttributesKeys.length; i < l; i ++ ) {\n\n\t\t\tvar key = programAttributesKeys[ i ];\n\t\t\tvar programAttribute = programAttributes[ key ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ key ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryAttribute.buffer );\n\n\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tif ( material.defaultAttributeValues[ key ].length === 2 ) {\n\n\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, material.defaultAttributeValues[ key ] );\n\n\t\t\t\t\t} else if ( material.defaultAttributeValues[ key ].length === 3 ) {\n\n\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, material.defaultAttributeValues[ key ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tthis.renderBufferDirect = function ( camera, lights, fog, material, geometry, object ) {\n\n\t\tif ( material.visible === false ) return;\n\n\t\tupdateObject( object );\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\tvar updateBuffers = false,\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\n\t\t\tgeometryProgram = 'direct_' + geometry.id + '_' + program.id + '_' + wireframeBit;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tinitAttributes();\n\n\t\t}\n\n\t\t// render mesh\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tvar mode = material.wireframe === true ? _gl.LINES : _gl.TRIANGLES;\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed triangles\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 );\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\n\t\t\t\t\t_this.info.render.faces += index.array.length / 3;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tupdateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed triangles\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\n\t\t\t\t\t\t_this.info.render.faces += offsets[ i ].count / 3;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed triangles\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes[ 'position' ];\n\n\t\t\t\t// render non-indexed triangles\n\n\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t_this.info.render.vertices += position.array.length / 3;\n\t\t\t\t_this.info.render.faces += position.array.length / 9;\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t// render particles\n\n\t\t\tvar mode = _gl.POINTS;\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed points\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0);\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.points += index.array.length;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed points\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.points += offsets[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed points\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.points += position.array.length / 3;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t_gl.drawArrays( mode, offsets[ i ].index, offsets[ i ].count );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.points += offsets[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\n\n\t\t\tsetLineWidth( material.linewidth );\n\n\t\t\tvar index = geometry.attributes.index;\n\n\t\t\tif ( index ) {\n\n\t\t\t\t// indexed lines\n\n\t\t\t\tvar type, size;\n\n\t\t\t\tif ( index.array instanceof Uint32Array ) {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\t\t\tsize = 4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\t\t\tsize = 2;\n\n\t\t\t\t}\n\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.drawElements( mode, index.array.length, type, 0 ); // 2 bytes per Uint16Array\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += index.array.length; // not really true, here vertices can be shared\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// if there is more than 1 chunk\n\t\t\t\t\t// must set attribute pointers to use new offsets for each chunk\n\t\t\t\t\t// even if geometry and materials didn't change\n\n\t\t\t\t\tif ( offsets.length > 1 ) updateBuffers = true;\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar startIndex = offsets[ i ].index;\n\n\t\t\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\t\t\tsetupVertexAttributes( material, program, geometry, startIndex );\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, index.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// render indexed lines\n\n\t\t\t\t\t\t_gl.drawElements( mode, offsets[ i ].count, type, offsets[ i ].start * size ); // 2 bytes per Uint16Array\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count; // not really true, here vertices can be shared\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed lines\n\n\t\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t\tsetupVertexAttributes( material, program, geometry, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar offsets = geometry.offsets;\n\n\t\t\t\tif ( offsets.length === 0 ) {\n\n\t\t\t\t\t_gl.drawArrays( mode, 0, position.array.length / 3 );\n\n\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t_this.info.render.vertices += position.array.length / 3;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = offsets.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t_gl.drawArrays( mode, offsets[ i ].index, offsets[ i ].count );\n\n\t\t\t\t\t\t_this.info.render.calls ++;\n\t\t\t\t\t\t_this.info.render.vertices += offsets[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.renderBuffer = function ( camera, lights, fog, material, geometryGroup, object ) {\n\n\t\tif ( material.visible === false ) return;\n\n\t\tupdateObject( object );\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\tvar attributes = program.attributes;\n\n\t\tvar updateBuffers = false,\n\t\t\twireframeBit = material.wireframe ? 1 : 0,\n\t\t\tgeometryProgram = geometryGroup.id + '_' + program.id + '_' + wireframeBit;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tinitAttributes();\n\n\t\t}\n\n\t\t// vertices\n\n\t\tif ( ! material.morphTargets && attributes.position >= 0 ) {\n\n\t\t\tif ( updateBuffers ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\t\tenableAttribute( attributes.position );\n\t\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( object.morphTargetBase ) {\n\n\t\t\t\tsetupMorphTargets( material, geometryGroup, object );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif ( updateBuffers ) {\n\n\t\t\t// custom attributes\n\n\t\t\t// Use the per-geometryGroup custom attribute arrays which are setup in initMeshBuffers\n\n\t\t\tif ( geometryGroup.__webglCustomAttributesList ) {\n\n\t\t\t\tfor ( var i = 0, il = geometryGroup.__webglCustomAttributesList.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar attribute = geometryGroup.__webglCustomAttributesList[ i ];\n\n\t\t\t\t\tif ( attributes[ attribute.buffer.belongsToAttribute ] >= 0 ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, attribute.buffer );\n\t\t\t\t\t\tenableAttribute( attributes[ attribute.buffer.belongsToAttribute ] );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ attribute.buffer.belongsToAttribute ], attribute.size, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// colors\n\n\t\t\tif ( attributes.color >= 0 ) {\n\n\t\t\t\tif ( object.geometry.colors.length > 0 || object.geometry.faces.length > 0 ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglColorBuffer );\n\t\t\t\t\tenableAttribute( attributes.color );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib3fv( attributes.color, material.defaultAttributeValues.color );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( attributes.normal >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglNormalBuffer );\n\t\t\t\tenableAttribute( attributes.normal );\n\t\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// tangents\n\n\t\t\tif ( attributes.tangent >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglTangentBuffer );\n\t\t\t\tenableAttribute( attributes.tangent );\n\t\t\t\t_gl.vertexAttribPointer( attributes.tangent, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( attributes.uv >= 0 ) {\n\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 0 ] ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUVBuffer );\n\t\t\t\t\tenableAttribute( attributes.uv );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv, material.defaultAttributeValues.uv );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( attributes.uv2 >= 0 ) {\n\n\t\t\t\tif ( object.geometry.faceVertexUvs[ 1 ] ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglUV2Buffer );\n\t\t\t\t\tenableAttribute( attributes.uv2 );\n\t\t\t\t\t_gl.vertexAttribPointer( attributes.uv2, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t} else if ( material.defaultAttributeValues !== undefined ) {\n\n\n\t\t\t\t\t_gl.vertexAttrib2fv( attributes.uv2, material.defaultAttributeValues.uv2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.skinning &&\n\t\t\t\t attributes.skinIndex >= 0 && attributes.skinWeight >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinIndicesBuffer );\n\t\t\t\tenableAttribute( attributes.skinIndex );\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinIndex, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglSkinWeightsBuffer );\n\t\t\t\tenableAttribute( attributes.skinWeight );\n\t\t\t\t_gl.vertexAttribPointer( attributes.skinWeight, 4, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t\t// line distances\n\n\t\t\tif ( attributes.lineDistance >= 0 ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglLineDistanceBuffer );\n\t\t\t\tenableAttribute( attributes.lineDistance );\n\t\t\t\t_gl.vertexAttribPointer( attributes.lineDistance, 1, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t\t// render mesh\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tvar type = geometryGroup.__typeArray === Uint32Array ? _gl.UNSIGNED_INT : _gl.UNSIGNED_SHORT;\n\n\t\t\t// wireframe\n\n\t\t\tif ( material.wireframe ) {\n\n\t\t\t\tsetLineWidth( material.wireframeLinewidth );\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglLineBuffer );\n\t\t\t\t_gl.drawElements( _gl.LINES, geometryGroup.__webglLineCount, type, 0 );\n\n\t\t\t// triangles\n\n\t\t\t} else {\n\n\t\t\t\tif ( updateBuffers ) _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, geometryGroup.__webglFaceBuffer );\n\t\t\t\t_gl.drawElements( _gl.TRIANGLES, geometryGroup.__webglFaceCount, type, 0 );\n\n\t\t\t}\n\n\t\t\t_this.info.render.calls ++;\n\t\t\t_this.info.render.vertices += geometryGroup.__webglFaceCount;\n\t\t\t_this.info.render.faces += geometryGroup.__webglFaceCount / 3;\n\n\t\t// render lines\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar mode = ( object.mode === THREE.LineStrip ) ? _gl.LINE_STRIP : _gl.LINES;\n\n\t\t\tsetLineWidth( material.linewidth );\n\n\t\t\t_gl.drawArrays( mode, 0, geometryGroup.__webglLineCount );\n\n\t\t\t_this.info.render.calls ++;\n\n\t\t// render particles\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t_gl.drawArrays( _gl.POINTS, 0, geometryGroup.__webglParticleCount );\n\n\t\t\t_this.info.render.calls ++;\n\t\t\t_this.info.render.points += geometryGroup.__webglParticleCount;\n\n\t\t}\n\n\t};\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = _newAttributes.length; i < l; i ++ ) {\n\n\t\t\t_newAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\t_newAttributes[ attribute ] = 1;\n\n\t\tif ( _enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\t_gl.enableVertexAttribArray( attribute );\n\t\t\t_enabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = _enabledAttributes.length; i < l; i ++ ) {\n\n\t\t\tif ( _enabledAttributes[ i ] !== _newAttributes[ i ] ) {\n\n\t\t\t\t_gl.disableVertexAttribArray( i );\n\t\t\t\t_enabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupMorphTargets ( material, geometryGroup, object ) {\n\n\t\t// set base\n\n\t\tvar attributes = material.program.attributes;\n\n\t\tif ( object.morphTargetBase !== - 1 && attributes.position >= 0 ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ object.morphTargetBase ] );\n\t\t\tenableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t} else if ( attributes.position >= 0 ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n\t\t\tenableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.morphTargetForcedOrder.length ) {\n\n\t\t\t// set forced order\n\n\t\t\tvar m = 0;\n\t\t\tvar order = object.morphTargetForcedOrder;\n\t\t\tvar influences = object.morphTargetInfluences;\n\n\t\t\tvar attribute;\n\n\t\t\twhile ( m < material.numSupportedMorphTargets && m < order.length ) {\n\n\t\t\t\tattribute = attributes[ 'morphTarget' + m ];\n\n\t\t\t\tif ( attribute >= 0 ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ order[ m ] ] );\n\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tattribute = attributes[ 'morphNormal' + m ];\n\n\t\t\t\tif ( attribute >= 0 && material.morphNormals ) {\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ order[ m ] ] );\n\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ order[ m ] ];\n\n\t\t\t\tm ++;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// find the most influencing\n\n\t\t\tvar activeInfluenceIndices = [];\n\t\t\tvar influences = object.morphTargetInfluences;\n\n\t\t\tfor ( var i = 0, il = influences.length; i < il; i ++ ) {\n\n\t\t\t\tvar influence = influences[ i ];\n\n\t\t\t\tactiveInfluenceIndices.push( [ influence, i ] );\n\n\t\t\t}\n\n\t\t\tif ( activeInfluenceIndices.length > material.numSupportedMorphTargets ) {\n\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\n\t\t\t\tactiveInfluenceIndices.length = material.numSupportedMorphTargets;\n\n\t\t\t} else if ( activeInfluenceIndices.length > material.numSupportedMorphNormals ) {\n\n\t\t\t\tactiveInfluenceIndices.sort( numericalSort );\n\n\t\t\t} else if ( activeInfluenceIndices.length === 0 ) {\n\n\t\t\t\tactiveInfluenceIndices.push( [ 0, 0 ] );\n\n\t\t\t}\n\n\t\t\tvar attribute;\n\n\t\t\tfor ( var m = 0, ml = material.numSupportedMorphTargets; m < ml; m ++ ) {\n\n\t\t\t\tif ( activeInfluenceIndices[ m ] ) {\n\n\t\t\t\t\tvar influenceIndex = activeInfluenceIndices[ m ][ 1 ];\n\n\t\t\t\t\tattribute = attributes[ 'morphTarget' + m ];\n\n\t\t\t\t\tif ( attribute >= 0 ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphTargetsBuffers[ influenceIndex ] );\n\t\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tattribute = attributes[ 'morphNormal' + m ];\n\n\t\t\t\t\tif ( attribute >= 0 && material.morphNormals ) {\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglMorphNormalsBuffers[ influenceIndex ] );\n\t\t\t\t\t\tenableAttribute( attribute );\n\t\t\t\t\t\t_gl.vertexAttribPointer( attribute, 3, _gl.FLOAT, false, 0, 0 );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = influences[ influenceIndex ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\t/*\n\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphTarget\" + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\tif ( material.morphNormals ) {\n\n\t\t\t\t\t\t_gl.vertexAttribPointer( attributes[ \"morphNormal\" + m ], 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\n\t\t\t\t\tobject.__webglMorphTargetInfluences[ m ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// load updated influences uniform\n\n\t\tif ( material.program.uniforms.morphTargetInfluences !== null ) {\n\n\t\t\t_gl.uniform1fv( material.program.uniforms.morphTargetInfluences, object.__webglMorphTargetInfluences );\n\n\t\t}\n\n\t}\n\n\t// Sorting\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.material.id !== b.material.id ) {\n\n\t\t\treturn a.material.id - b.material.id;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn a.z - b.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction reversePainterSortStable ( a, b ) {\n\n\t\tif ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction numericalSort ( a, b ) {\n\n\t\treturn b[ 0 ] - a[ 0 ];\n\n\t}\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( camera instanceof THREE.Camera === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar fog = scene.fog;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\t\t_lightsNeedUpdate = true;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === undefined ) camera.updateMatrixWorld();\n\n\t\t// update Skeleton objects\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\tobject.skeleton.update();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\tlights.length = 0;\n\t\topaqueObjects.length = 0;\n\t\ttransparentObjects.length = 0;\n\n\t\tsprites.length = 0;\n\t\tlensFlares.length = 0;\n\n\t\tprojectObject( scene );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\topaqueObjects.sort( painterSortStable );\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\n\n\t\t}\n\n\t\t// custom render plugins (pre pass)\n\n\t\tshadowMapPlugin.render( scene, camera );\n\n\t\t//\n\n\t\t_this.info.render.calls = 0;\n\t\t_this.info.render.vertices = 0;\n\t\t_this.info.render.faces = 0;\n\t\t_this.info.render.points = 0;\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\tif ( this.autoClear || forceClear ) {\n\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\n\n\t\t}\n\n\t\t// set matrices for immediate objects\n\n\t\tfor ( var i = 0, il = _webglObjectsImmediate.length; i < il; i ++ ) {\n\n\t\t\tvar webglObject = _webglObjectsImmediate[ i ];\n\t\t\tvar object = webglObject.object;\n\n\t\t\tif ( object.visible ) {\n\n\t\t\t\tsetupMatrices( object, camera );\n\n\t\t\t\tunrollImmediateBufferMaterial( webglObject );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar material = scene.overrideMaterial;\n\n\t\t\tthis.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\tthis.setDepthTest( material.depthTest );\n\t\t\tthis.setDepthWrite( material.depthWrite );\n\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, true, material );\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, '', camera, lights, fog, false, material );\n\n\t\t} else {\n\n\t\t\tvar material = null;\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tthis.setBlending( THREE.NoBlending );\n\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, false, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'opaque', camera, lights, fog, false, material );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, true, material );\n\t\t\trenderObjectsImmediate( _webglObjectsImmediate, 'transparent', camera, lights, fog, true, material );\n\n\t\t}\n\n\t\t// custom render plugins (post pass)\n\n\t\tspritePlugin.render( scene, camera );\n\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\n\n\t\t\tupdateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tthis.setDepthTest( true );\n\t\tthis.setDepthWrite( true );\n\n\t\t// _gl.finish();\n\n\t};\n\n\tfunction projectObject( object ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object instanceof THREE.Scene || object instanceof THREE.Group ) {\n\n\t\t\t// skip\n\n\t\t} else {\n\n\t\t\tinitObject( object );\n\n\t\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t\tlights.push( object );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tsprites.push( object );\n\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\n\n\t\t\t\tlensFlares.push( object );\n\n\t\t\t} else {\n\n\t\t\t\tvar webglObjects = _webglObjects[ object.id ];\n\n\t\t\t\tif ( webglObjects && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar webglObject = webglObjects[i];\n\n\t\t\t\t\t\tunrollBufferMaterial( webglObject );\n\n\t\t\t\t\t\twebglObject.render = true;\n\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\n\n\t\t\t\t\t\t\twebglObject.z = _vector3.z;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( object.children[ i ] );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, camera, lights, fog, useBlending, overrideMaterial ) {\n\n\t\tvar material;\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar webglObject = renderList[ i ];\n\n\t\t\tvar object = webglObject.object;\n\t\t\tvar buffer = webglObject.buffer;\n\n\t\t\tsetupMatrices( object, camera );\n\n\t\t\tif ( overrideMaterial ) {\n\n\t\t\t\tmaterial = overrideMaterial;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = webglObject.material;\n\n\t\t\t\tif ( ! material ) continue;\n\n\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\n\t\t\t\t_this.setDepthTest( material.depthTest );\n\t\t\t\t_this.setDepthWrite( material.depthWrite );\n\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\t}\n\n\t\t\t_this.setMaterialFaces( material );\n\n\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t_this.renderBufferDirect( camera, lights, fog, material, buffer, object );\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBuffer( camera, lights, fog, material, buffer, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObjectsImmediate ( renderList, materialType, camera, lights, fog, useBlending, overrideMaterial ) {\n\n\t\tvar material;\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar webglObject = renderList[ i ];\n\t\t\tvar object = webglObject.object;\n\n\t\t\tif ( object.visible ) {\n\n\t\t\t\tif ( overrideMaterial ) {\n\n\t\t\t\t\tmaterial = overrideMaterial;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterial = webglObject[ materialType ];\n\n\t\t\t\t\tif ( ! material ) continue;\n\n\t\t\t\t\tif ( useBlending ) _this.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\n\t\t\t\t\t_this.setDepthTest( material.depthTest );\n\t\t\t\t\t_this.setDepthWrite( material.depthWrite );\n\t\t\t\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\t\t\t}\n\n\t\t\t\t_this.renderImmediateObject( camera, lights, fog, material, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.renderImmediateObject = function ( camera, lights, fog, material, object ) {\n\n\t\tvar program = setProgram( camera, lights, fog, material, object );\n\n\t\t_currentGeometryProgram = '';\n\n\t\t_this.setMaterialFaces( material );\n\n\t\tif ( object.immediateRenderCallback ) {\n\n\t\t\tobject.immediateRenderCallback( program, _gl, _frustum );\n\n\t\t} else {\n\n\t\t\tobject.render( function ( object ) { _this.renderBufferImmediate( object, program, material ); } );\n\n\t\t}\n\n\t};\n\n\tfunction unrollImmediateBufferMaterial ( globject ) {\n\n\t\tvar object = globject.object,\n\t\t\tmaterial = object.material;\n\n\t\tif ( material.transparent ) {\n\n\t\t\tglobject.transparent = material;\n\t\t\tglobject.opaque = null;\n\n\t\t} else {\n\n\t\t\tglobject.opaque = material;\n\t\t\tglobject.transparent = null;\n\n\t\t}\n\n\t}\n\n\tfunction unrollBufferMaterial ( globject ) {\n\n\t\tvar object = globject.object;\n\t\tvar buffer = globject.buffer;\n\n\t\tvar geometry = object.geometry;\n\t\tvar material = object.material;\n\n\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\n\n\t\t\tvar materialIndex = geometry instanceof THREE.BufferGeometry ? 0 : buffer.materialIndex;\n\n\t\t\tmaterial = material.materials[ materialIndex ];\n\n\t\t\tglobject.material = material;\n\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\ttransparentObjects.push( globject );\n\n\t\t\t} else {\n\n\t\t\t\topaqueObjects.push( globject );\n\n\t\t\t}\n\n\t\t} else if ( material ) {\n\n\t\t\tglobject.material = material;\n\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\ttransparentObjects.push( globject );\n\n\t\t\t} else {\n\n\t\t\t\topaqueObjects.push( globject );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initObject( object ) {\n\n\t\tif ( object.__webglInit === undefined ) {\n\n\t\t\tobject.__webglInit = true;\n\t\t\tobject._modelViewMatrix = new THREE.Matrix4();\n\t\t\tobject._normalMatrix = new THREE.Matrix3();\n\n\t\t\tobject.addEventListener( 'removed', onObjectRemoved );\n\n\t\t}\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry === undefined ) {\n\n\t\t\t// ImmediateRenderObject\n\n\t\t} else if ( geometry.__webglInit === undefined ) {\n\n\t\t\tgeometry.__webglInit = true;\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t_this.info.memory.geometries ++;\n\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tinitGeometryGroups( object, geometry );\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\n\n\t\t\t\t\tcreateLineBuffers( geometry );\n\t\t\t\t\tinitLineBuffers( geometry, object );\n\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\n\t\t\t\t\tgeometry.lineDistancesNeedUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\t\tif ( geometry.__webglVertexBuffer === undefined ) {\n\n\t\t\t\t\tcreateParticleBuffers( geometry );\n\t\t\t\t\tinitParticleBuffers( geometry, object );\n\n\t\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\t\tgeometry.colorsNeedUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.__webglActive === undefined) {\n\n\t\t\tobject.__webglActive = true;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\taddBuffer( _webglObjects, geometry, object );\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\t\t\tfor ( var i = 0,l = geometryGroupsList.length; i < l; i ++ ) {\n\n\t\t\t\t\t\taddBuffer( _webglObjects, geometryGroupsList[ i ], object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line || object instanceof THREE.PointCloud ) {\n\n\t\t\t\taddBuffer( _webglObjects, geometry, object );\n\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\n\n\t\t\t\taddBufferImmediate( _webglObjectsImmediate, object );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Geometry splitting\n\n\tvar geometryGroups = {};\n\tvar geometryGroupCounter = 0;\n\n\tfunction makeGroups( geometry, usesFaceMaterial ) {\n\n\t\tvar maxVerticesInGroup = extensions.get( 'OES_element_index_uint' ) ? 4294967296 : 65535;\n\n\t\tvar groupHash, hash_map = {};\n\n\t\tvar numMorphTargets = geometry.morphTargets.length;\n\t\tvar numMorphNormals = geometry.morphNormals.length;\n\n\t\tvar group;\n\t\tvar groups = {};\n\t\tvar groupsList = [];\n\n\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = geometry.faces[ f ];\n\t\t\tvar materialIndex = usesFaceMaterial ? face.materialIndex : 0;\n\n\t\t\tif ( ! ( materialIndex in hash_map ) ) {\n\n\t\t\t\thash_map[ materialIndex ] = { hash: materialIndex, counter: 0 };\n\n\t\t\t}\n\n\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\n\n\t\t\tif ( ! ( groupHash in groups ) ) {\n\n\t\t\t\tgroup = {\n\t\t\t\t\tid: geometryGroupCounter ++,\n\t\t\t\t\tfaces3: [],\n\t\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\t\tvertices: 0,\n\t\t\t\t\tnumMorphTargets: numMorphTargets,\n\t\t\t\t\tnumMorphNormals: numMorphNormals\n\t\t\t\t};\n\n\t\t\t\tgroups[ groupHash ] = group;\n\t\t\t\tgroupsList.push( group );\n\n\t\t\t}\n\n\t\t\tif ( groups[ groupHash ].vertices + 3 > maxVerticesInGroup ) {\n\n\t\t\t\thash_map[ materialIndex ].counter += 1;\n\t\t\t\tgroupHash = hash_map[ materialIndex ].hash + '_' + hash_map[ materialIndex ].counter;\n\n\t\t\t\tif ( ! ( groupHash in groups ) ) {\n\n\t\t\t\t\tgroup = {\n\t\t\t\t\t\tid: geometryGroupCounter ++,\n\t\t\t\t\t\tfaces3: [],\n\t\t\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\t\t\tvertices: 0,\n\t\t\t\t\t\tnumMorphTargets: numMorphTargets,\n\t\t\t\t\t\tnumMorphNormals: numMorphNormals\n\t\t\t\t\t};\n\n\t\t\t\t\tgroups[ groupHash ] = group;\n\t\t\t\t\tgroupsList.push( group );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgroups[ groupHash ].faces3.push( f );\n\t\t\tgroups[ groupHash ].vertices += 3;\n\n\t\t}\n\n\t\treturn groupsList;\n\n\t}\n\n\tfunction initGeometryGroups( object, geometry ) {\n\n\t\tvar material = object.material, addBuffers = false;\n\n\t\tif ( geometryGroups[ geometry.id ] === undefined || geometry.groupsNeedUpdate === true ) {\n\n\t\t\tdelete _webglObjects[ object.id ];\n\n\t\t\tgeometryGroups[ geometry.id ] = makeGroups( geometry, material instanceof THREE.MeshFaceMaterial );\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t// create separate VBOs per geometry chunk\n\n\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\n\n\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\n\t\t\t// initialise VBO on the first access\n\n\t\t\tif ( geometryGroup.__webglVertexBuffer === undefined ) {\n\n\t\t\t\tcreateMeshBuffers( geometryGroup );\n\t\t\t\tinitMeshBuffers( geometryGroup, object );\n\n\t\t\t\tgeometry.verticesNeedUpdate = true;\n\t\t\t\tgeometry.morphTargetsNeedUpdate = true;\n\t\t\t\tgeometry.elementsNeedUpdate = true;\n\t\t\t\tgeometry.uvsNeedUpdate = true;\n\t\t\t\tgeometry.normalsNeedUpdate = true;\n\t\t\t\tgeometry.tangentsNeedUpdate = true;\n\t\t\t\tgeometry.colorsNeedUpdate = true;\n\n\t\t\t\taddBuffers = true;\n\n\t\t\t} else {\n\n\t\t\t\taddBuffers = false;\n\n\t\t\t}\n\n\t\t\tif ( addBuffers || object.__webglActive === undefined ) {\n\n\t\t\t\taddBuffer( _webglObjects, geometryGroup, object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tobject.__webglActive = true;\n\n\t}\n\n\tfunction addBuffer( objlist, buffer, object ) {\n\n\t\tvar id = object.id;\n\t\tobjlist[id] = objlist[id] || [];\n\t\tobjlist[id].push(\n\t\t\t{\n\t\t\t\tid: id,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tobject: object,\n\t\t\t\tmaterial: null,\n\t\t\t\tz: 0\n\t\t\t}\n\t\t);\n\n\t};\n\n\tfunction addBufferImmediate( objlist, object ) {\n\n\t\tobjlist.push(\n\t\t\t{\n\t\t\t\tid: null,\n\t\t\t\tobject: object,\n\t\t\t\topaque: null,\n\t\t\t\ttransparent: null,\n\t\t\t\tz: 0\n\t\t\t}\n\t\t);\n\n\t};\n\n\t// Objects updates\n\n\tfunction updateObject( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar attributesKeys = geometry.attributesKeys;\n\n\t\t\tfor ( var i = 0, l = attributesKeys.length; i < l; i ++ ) {\n\n\t\t\t\tvar key = attributesKeys[ i ];\n\t\t\t\tvar attribute = attributes[ key ];\n\n\t\t\t\tif ( attribute.buffer === undefined ) {\n\n\t\t\t\t\tattribute.buffer = _gl.createBuffer();\n\t\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( attribute.needsUpdate === true ) {\n\n\t\t\t\t\tvar bufferType = ( key === 'index' ) ? _gl.ELEMENT_ARRAY_BUFFER : _gl.ARRAY_BUFFER;\n\n\t\t\t\t\t_gl.bindBuffer( bufferType, attribute.buffer );\n\t\t\t\t\t_gl.bufferData( bufferType, attribute.array, _gl.STATIC_DRAW );\n\n\t\t\t\t\tattribute.needsUpdate = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\t// check all geometry groups\n\n\t\t\tif ( geometry.groupsNeedUpdate === true ) {\n\n\t\t\t\tinitGeometryGroups( object, geometry );\n\n\t\t\t}\n\n\t\t\tvar geometryGroupsList = geometryGroups[ geometry.id ];\n\n\t\t\tfor ( var i = 0, il = geometryGroupsList.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometryGroup = geometryGroupsList[ i ];\n\t\t\t\tvar material = getBufferMaterial( object, geometryGroup );\n\n\t\t\t\tif ( geometry.groupsNeedUpdate === true ) {\n\n\t\t\t\t\tinitMeshBuffers( geometryGroup, object );\n\n\t\t\t\t}\n\n\t\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\t\tif ( geometry.verticesNeedUpdate || geometry.morphTargetsNeedUpdate || geometry.elementsNeedUpdate ||\n\t\t\t\t\t geometry.uvsNeedUpdate || geometry.normalsNeedUpdate ||\n\t\t\t\t\t geometry.colorsNeedUpdate || geometry.tangentsNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\t\tsetMeshBuffers( geometryGroup, object, _gl.DYNAMIC_DRAW, ! geometry.dynamic, material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.morphTargetsNeedUpdate = false;\n\t\t\tgeometry.elementsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.tangentsNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar material = getBufferMaterial( object, geometry );\n\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || geometry.lineDistancesNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\tsetLineBuffers( geometry, _gl.DYNAMIC_DRAW );\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t} else if ( object instanceof THREE.PointCloud ) {\n\n\t\t\tvar material = getBufferMaterial( object, geometry );\n\t\t\tvar customAttributesDirty = material.attributes && areCustomAttributesDirty( material );\n\n\t\t\tif ( geometry.verticesNeedUpdate || geometry.colorsNeedUpdate || customAttributesDirty ) {\n\n\t\t\t\tsetParticleBuffers( geometry, _gl.DYNAMIC_DRAW, object );\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t\tmaterial.attributes && clearCustomAttributes( material );\n\n\t\t}\n\n\t}\n\n\t// Objects updates - custom attributes check\n\n\tfunction areCustomAttributesDirty( material ) {\n\n\t\tfor ( var name in material.attributes ) {\n\n\t\t\tif ( material.attributes[ name ].needsUpdate ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction clearCustomAttributes( material ) {\n\n\t\tfor ( var name in material.attributes ) {\n\n\t\t\tmaterial.attributes[ name ].needsUpdate = false;\n\n\t\t}\n\n\t}\n\n\t// Objects removal\n\n\tfunction removeObject( object ) {\n\n\t\tif ( object instanceof THREE.Mesh  ||\n\t\t\t object instanceof THREE.PointCloud ||\n\t\t\t object instanceof THREE.Line ) {\n\n\t\t\tdelete _webglObjects[ object.id ];\n\n\t\t} else if ( object instanceof THREE.ImmediateRenderObject || object.immediateRenderCallback ) {\n\n\t\t\tremoveInstances( _webglObjectsImmediate, object );\n\n\t\t}\n\n\t\tdelete object.__webglInit;\n\t\tdelete object._modelViewMatrix;\n\t\tdelete object._normalMatrix;\n\n\t\tdelete object.__webglActive;\n\n\t}\n\n\tfunction removeInstances( objlist, object ) {\n\n\t\tfor ( var o = objlist.length - 1; o >= 0; o -- ) {\n\n\t\t\tif ( objlist[ o ].object === object ) {\n\n\t\t\t\tobjlist.splice( o, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Materials\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointCloudMaterial: 'particle_basic'\n\t};\n\n\tfunction initMaterial( material, lights, fog, object ) {\n\n\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\tif ( shaderID ) {\n\n\t\t\tvar shader = THREE.ShaderLib[ shaderID ];\n\n\t\t\tmaterial.__webglShader = {\n\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tmaterial.__webglShader = {\n\t\t\t\tuniforms: material.uniforms,\n\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t}\n\n\t\t}\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxLightCount = allocateLights( lights );\n\t\tvar maxShadows = allocateShadows( lights );\n\t\tvar maxBones = allocateBones( object );\n\n\t\tvar parameters = {\n\n\t\t\tprecision: _precision,\n\t\t\tsupportsVertexTextures: _supportsVertexTextures,\n\n\t\t\tmap: !! material.map,\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: _logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: _this.maxMorphTargets,\n\t\t\tmaxMorphNormals: _this.maxMorphNormals,\n\n\t\t\tmaxDirLights: maxLightCount.directional,\n\t\t\tmaxPointLights: maxLightCount.point,\n\t\t\tmaxSpotLights: maxLightCount.spot,\n\t\t\tmaxHemiLights: maxLightCount.hemi,\n\n\t\t\tmaxShadows: maxShadows,\n\t\t\tshadowMapEnabled: _this.shadowMapEnabled && object.receiveShadow && maxShadows > 0,\n\t\t\tshadowMapType: _this.shadowMapType,\n\t\t\tshadowMapDebug: _this.shadowMapDebug,\n\t\t\tshadowMapCascade: _this.shadowMapCascade,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tmetal: material.metal,\n\t\t\twrapAround: material.wrapAround,\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\n\t\t\tflipSided: material.side === THREE.BackSide\n\n\t\t};\n\n\t\t// Generate code\n\n\t\tvar chunks = [];\n\n\t\tif ( shaderID ) {\n\n\t\t\tchunks.push( shaderID );\n\n\t\t} else {\n\n\t\t\tchunks.push( material.fragmentShader );\n\t\t\tchunks.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tchunks.push( name );\n\t\t\t\tchunks.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var name in parameters ) {\n\n\t\t\tchunks.push( name );\n\t\t\tchunks.push( parameters[ name ] );\n\n\t\t}\n\n\t\tvar code = chunks.join();\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\n\t\tfor ( var p = 0, pl = _programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = _programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\tprogram.usedTimes ++;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new THREE.WebGLProgram( _this, code, material, parameters );\n\t\t\t_programs.push( program );\n\n\t\t\t_this.info.memory.programs = _programs.length;\n\n\t\t}\n\n\t\tmaterial.program = program;\n\n\t\tvar attributes = program.attributes;\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tvar id, base = 'morphTarget';\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tid = base + i;\n\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tvar id, base = 'morphNormal';\n\n\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tid = base + i;\n\n\t\t\t\tif ( attributes[ id ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tmaterial.uniformsList = [];\n\n\t\tfor ( var u in material.__webglShader.uniforms ) {\n\n\t\t\tvar location = material.program.uniforms[ u ];\n\n\t\t\tif ( location ) {\n\t\t\t\tmaterial.uniformsList.push( [ material.__webglShader.uniforms[ u ], location ] );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setProgram( camera, lights, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tif ( material.program ) deallocateMaterial( material );\n\n\t\t\tinitMaterial( material, lights, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tif ( ! object.__webglMorphTargetInfluences ) {\n\n\t\t\t\tobject.__webglMorphTargetInfluences = new Float32Array( _this.maxMorphTargets );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = material.program,\n\t\t\tp_uniforms = program.uniforms,\n\t\t\tm_uniforms = material.__webglShader.uniforms;\n\n\t\tif ( program.id !== _currentProgram ) {\n\n\t\t\t_gl.useProgram( program.program );\n\t\t\t_currentProgram = program.id;\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\tif ( _currentMaterialId === -1 ) refreshLights = true;\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\t\tif ( _logarithmicDepthBuffer ) {\n\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\n\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material.envMap ) {\n\n\t\t\t\tif ( p_uniforms.cameraPosition !== null ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material.skinning ) {\n\n\t\t\t\tif ( p_uniforms.viewMatrix !== null ) {\n\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== null ) {\n\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\n\n\t\t\t}\n\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== null ) {\n\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\n\n\t\t\t}\n\n\t\t\tif ( _supportsBoneTextures && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\t\tif ( p_uniforms.boneTexture !== null ) {\n\n\t\t\t\t\tvar textureUnit = getTextureUnit();\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\n\n\t\t\t\t}\n\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== null ) {\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\n\n\t\t\t\t}\n\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== null ) {\n\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\n\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== null ) {\n\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material.lights ) {\n\n\t\t\t\tif ( _lightsNeedUpdate ) {\n\n\t\t\t\t\trefreshLights = true;\n\t\t\t\t\tsetupLights( lights );\n\t\t\t\t\t_lightsNeedUpdate = false;\n\t\t\t\t}\n\n\t\t\t\tif ( refreshLights ) {\n\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\n\t\t\t\t} else {\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// refresh single material specific uniforms\n\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.PointCloudMaterial ) {\n\n\t\t\t\trefreshUniformsParticle( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\t\tm_uniforms.mNear.value = camera.near;\n\t\t\t\tm_uniforms.mFar.value = camera.far;\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\n\n\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\n\n\t\t\t}\n\n\t\t\t// load common uniforms\n\n\t\t\tloadUniformsGeneric( material.uniformsList );\n\n\t\t}\n\n\t\tloadUniformsMatrices( p_uniforms, object );\n\n\t\tif ( p_uniforms.modelMatrix !== null ) {\n\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon ( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.diffuse.value.copyGammaToLinear( material.color );\n\n\t\t} else {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\n\t\t}\n\n\t\tuniforms.map.value = material.map;\n\t\tuniforms.lightMap.value = material.lightMap;\n\t\tuniforms.specularMap.value = material.specularMap;\n\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t//  1. color map\n\t\t//  2. specular map\n\t\t//  3. normal map\n\t\t//  4. bump map\n\t\t//  5. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tvar offset = uvScaleMap.offset;\n\t\t\tvar repeat = uvScaleMap.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t\tuniforms.envMap.value = material.envMap;\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\t//uniforms.reflectivity.value = material.reflectivity * material.reflectivity;\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\n\t\t} else {\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\n\t\t}\n\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t}\n\n\tfunction refreshUniformsLine ( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash ( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsParticle ( uniforms, material ) {\n\n\t\tuniforms.psColor.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size;\n\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\n\n\t\tuniforms.map.value = material.map;\n\n\t}\n\n\tfunction refreshUniformsFog ( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong ( uniforms, material ) {\n\n\t\tuniforms.shininess.value = material.shininess;\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\n\t\t\tuniforms.specular.value.copyGammaToLinear( material.specular );\n\n\t\t} else {\n\n\t\t\tuniforms.ambient.value = material.ambient;\n\t\t\tuniforms.emissive.value = material.emissive;\n\t\t\tuniforms.specular.value = material.specular;\n\n\t\t}\n\n\t\tif ( material.wrapAround ) {\n\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert ( uniforms, material ) {\n\n\t\tif ( _this.gammaInput ) {\n\n\t\t\tuniforms.ambient.value.copyGammaToLinear( material.ambient );\n\t\t\tuniforms.emissive.value.copyGammaToLinear( material.emissive );\n\n\t\t} else {\n\n\t\t\tuniforms.ambient.value = material.ambient;\n\t\t\tuniforms.emissive.value = material.emissive;\n\n\t\t}\n\n\t\tif ( material.wrapAround ) {\n\n\t\t\tuniforms.wrapRGB.value.copy( material.wrapRGB );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLights ( uniforms, lights ) {\n\n\t\tuniforms.ambientLightColor.value = lights.ambient;\n\n\t\tuniforms.directionalLightColor.value = lights.directional.colors;\n\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\n\n\t\tuniforms.pointLightColor.value = lights.point.colors;\n\t\tuniforms.pointLightPosition.value = lights.point.positions;\n\t\tuniforms.pointLightDistance.value = lights.point.distances;\n\n\t\tuniforms.spotLightColor.value = lights.spot.colors;\n\t\tuniforms.spotLightPosition.value = lights.spot.positions;\n\t\tuniforms.spotLightDistance.value = lights.spot.distances;\n\t\tuniforms.spotLightDirection.value = lights.spot.directions;\n\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\n\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\n\n\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\n\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\n\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, boolean ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = boolean;\n\n\t\tuniforms.directionalLightColor.needsUpdate = boolean;\n\t\tuniforms.directionalLightDirection.needsUpdate = boolean;\n\n\t\tuniforms.pointLightColor.needsUpdate = boolean;\n\t\tuniforms.pointLightPosition.needsUpdate = boolean;\n\t\tuniforms.pointLightDistance.needsUpdate = boolean;\n\n\t\tuniforms.spotLightColor.needsUpdate = boolean;\n\t\tuniforms.spotLightPosition.needsUpdate = boolean;\n\t\tuniforms.spotLightDistance.needsUpdate = boolean;\n\t\tuniforms.spotLightDirection.needsUpdate = boolean;\n\t\tuniforms.spotLightAngleCos.needsUpdate = boolean;\n\t\tuniforms.spotLightExponent.needsUpdate = boolean;\n\n\t\tuniforms.hemisphereLightSkyColor.needsUpdate = boolean;\n\t\tuniforms.hemisphereLightGroundColor.needsUpdate = boolean;\n\t\tuniforms.hemisphereLightDirection.needsUpdate = boolean;\n\n\t}\n\n\tfunction refreshUniformsShadow ( uniforms, lights ) {\n\n\t\tif ( uniforms.shadowMatrix ) {\n\n\t\t\tvar j = 0;\n\n\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\t\tvar light = lights[ i ];\n\n\t\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) ) {\n\n\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\n\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\n\n\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\n\n\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\n\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\n\n\t\t\t\t\tj ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Uniforms (load to GPU)\n\n\tfunction loadUniformsMatrices ( uniforms, object ) {\n\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object._modelViewMatrix.elements );\n\n\t\tif ( uniforms.normalMatrix ) {\n\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object._normalMatrix.elements );\n\n\t\t}\n\n\t}\n\n\tfunction getTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= _maxTextures ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + _maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction loadUniformsGeneric ( uniforms ) {\n\n\t\tvar texture, textureUnit, offset;\n\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\n\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\n\n\t\t\t// needsUpdate property is not added to all uniforms.\n\t\t\tif ( uniform.needsUpdate === false ) continue;\n\n\t\t\tvar type = uniform.type;\n\t\t\tvar value = uniform.value;\n\t\t\tvar location = uniforms[ j ][ 1 ];\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase '1i':\n\t\t\t\t\t_gl.uniform1i( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1f':\n\t\t\t\t\t_gl.uniform1f( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2f':\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3f':\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '4f':\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1iv':\n\t\t\t\t\t_gl.uniform1iv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3iv':\n\t\t\t\t\t_gl.uniform3iv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '1fv':\n\t\t\t\t\t_gl.uniform1fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '2fv':\n\t\t\t\t\t_gl.uniform2fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '3fv':\n\t\t\t\t\t_gl.uniform3fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '4fv':\n\t\t\t\t\t_gl.uniform4fv( location, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Matrix3fv':\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Matrix4fv':\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\n\t\t\t\t\tbreak;\n\n\t\t\t\t//\n\n\t\t\t\tcase 'i':\n\n\t\t\t\t\t// single integer\n\t\t\t\t\t_gl.uniform1i( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'f':\n\n\t\t\t\t\t// single float\n\t\t\t\t\t_gl.uniform1f( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v2':\n\n\t\t\t\t\t// single THREE.Vector2\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v3':\n\n\t\t\t\t\t// single THREE.Vector3\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v4':\n\n\t\t\t\t\t// single THREE.Vector4\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'c':\n\n\t\t\t\t\t// single THREE.Color\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'iv1':\n\n\t\t\t\t\t// flat array of integers (JS or typed array)\n\t\t\t\t\t_gl.uniform1iv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'iv':\n\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\n\t\t\t\t\t_gl.uniform3iv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'fv1':\n\n\t\t\t\t\t// flat array of floats (JS or typed array)\n\t\t\t\t\t_gl.uniform1fv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'fv':\n\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\n\t\t\t\t\t_gl.uniform3fv( location, value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v2v':\n\n\t\t\t\t\t// array of THREE.Vector2\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 2;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v3v':\n\n\t\t\t\t\t// array of THREE.Vector3\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 3;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v4v':\n\n\t\t\t\t\t// array of THREE.Vector4\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\toffset = i * 4;\n\n\t\t\t\t\t\tuniform._array[ offset ]   = value[ i ].x;\n\t\t\t\t\t\tuniform._array[ offset + 1 ] = value[ i ].y;\n\t\t\t\t\t\tuniform._array[ offset + 2 ] = value[ i ].z;\n\t\t\t\t\t\tuniform._array[ offset + 3 ] = value[ i ].w;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm3':\n\n\t\t\t\t\t// single THREE.Matrix3\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm3v':\n\n\t\t\t\t\t// array of THREE.Matrix3\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm4':\n\n\t\t\t\t\t// single THREE.Matrix4\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'm4v':\n\n\t\t\t\t\t// array of THREE.Matrix4\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 't':\n\n\t\t\t\t\t// single THREE.Texture (2d or cube)\n\n\t\t\t\t\ttexture = value;\n\t\t\t\t\ttextureUnit = getTextureUnit();\n\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\n\n\t\t\t\t\tif ( ! texture ) continue;\n\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\n\t\t\t\t\t   ( texture.image instanceof Array && texture.image.length === 6 ) ) { // CompressedTexture can have Array in image :/\n\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\n\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tv':\n\n\t\t\t\t\t// array of THREE.Texture (2d)\n\n\t\t\t\t\tif ( uniform._array === undefined ) {\n\n\t\t\t\t\t\tuniform._array = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\n\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\n\n\t\t\t\t\t\ttexture = uniform.value[ i ];\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\n\n\t\t\t\t\t\tif ( ! texture ) continue;\n\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupMatrices ( object, camera ) {\n\n\t\tobject._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject._normalMatrix.getNormalMatrix( object._modelViewMatrix );\n\n\t}\n\n\t//\n\n\tfunction setColorGamma( array, offset, color, intensitySq ) {\n\n\t\tarray[ offset ]     = color.r * color.r * intensitySq;\n\t\tarray[ offset + 1 ] = color.g * color.g * intensitySq;\n\t\tarray[ offset + 2 ] = color.b * color.b * intensitySq;\n\n\t}\n\n\tfunction setColorLinear( array, offset, color, intensity ) {\n\n\t\tarray[ offset ]     = color.r * intensity;\n\t\tarray[ offset + 1 ] = color.g * intensity;\n\t\tarray[ offset + 2 ] = color.b * intensity;\n\n\t}\n\n\tfunction setupLights ( lights ) {\n\n\t\tvar l, ll, light, n,\n\t\tr = 0, g = 0, b = 0,\n\t\tcolor, skyColor, groundColor,\n\t\tintensity,  intensitySq,\n\t\tposition,\n\t\tdistance,\n\n\t\tzlights = _lights,\n\n\t\tdirColors = zlights.directional.colors,\n\t\tdirPositions = zlights.directional.positions,\n\n\t\tpointColors = zlights.point.colors,\n\t\tpointPositions = zlights.point.positions,\n\t\tpointDistances = zlights.point.distances,\n\n\t\tspotColors = zlights.spot.colors,\n\t\tspotPositions = zlights.spot.positions,\n\t\tspotDistances = zlights.spot.distances,\n\t\tspotDirections = zlights.spot.directions,\n\t\tspotAnglesCos = zlights.spot.anglesCos,\n\t\tspotExponents = zlights.spot.exponents,\n\n\t\themiSkyColors = zlights.hemi.skyColors,\n\t\themiGroundColors = zlights.hemi.groundColors,\n\t\themiPositions = zlights.hemi.positions,\n\n\t\tdirLength = 0,\n\t\tpointLength = 0,\n\t\tspotLength = 0,\n\t\themiLength = 0,\n\n\t\tdirCount = 0,\n\t\tpointCount = 0,\n\t\tspotCount = 0,\n\t\themiCount = 0,\n\n\t\tdirOffset = 0,\n\t\tpointOffset = 0,\n\t\tspotOffset = 0,\n\t\themiOffset = 0;\n\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tlight = lights[ l ];\n\n\t\t\tif ( light.onlyShadow ) continue;\n\n\t\t\tcolor = light.color;\n\t\t\tintensity = light.intensity;\n\t\t\tdistance = light.distance;\n\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tr += color.r * color.r;\n\t\t\t\t\tg += color.g * color.g;\n\t\t\t\t\tb += color.b * color.b;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tr += color.r;\n\t\t\t\t\tg += color.g;\n\t\t\t\t\tb += color.b;\n\n\t\t\t\t}\n\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tdirCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t_direction.sub( _vector3 );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\tdirOffset = dirLength * 3;\n\n\t\t\t\tdirPositions[ dirOffset ]     = _direction.x;\n\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\n\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( dirColors, dirOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\tdirLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\tpointCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tpointOffset = pointLength * 3;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( pointColors, pointOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tpointPositions[ pointOffset ]     = _vector3.x;\n\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\n\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\n\n\t\t\t\tpointDistances[ pointLength ] = distance;\n\n\t\t\t\tpointLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\n\n\t\t\t\tspotCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\tspotOffset = spotLength * 3;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tsetColorGamma( spotColors, spotOffset, color, intensity * intensity );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\n\n\t\t\t\t}\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tspotPositions[ spotOffset ]     = _direction.x;\n\t\t\t\tspotPositions[ spotOffset + 1 ] = _direction.y;\n\t\t\t\tspotPositions[ spotOffset + 2 ] = _direction.z;\n\n\t\t\t\tspotDistances[ spotLength ] = distance;\n\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t_direction.sub( _vector3 );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\tspotDirections[ spotOffset ]     = _direction.x;\n\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\n\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\n\n\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\n\t\t\t\tspotExponents[ spotLength ] = light.exponent;\n\n\t\t\t\tspotLength += 1;\n\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\n\n\t\t\t\themiCount += 1;\n\n\t\t\t\tif ( ! light.visible ) continue;\n\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_direction.normalize();\n\n\t\t\t\themiOffset = hemiLength * 3;\n\n\t\t\t\themiPositions[ hemiOffset ]     = _direction.x;\n\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\n\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\n\n\t\t\t\tskyColor = light.color;\n\t\t\t\tgroundColor = light.groundColor;\n\n\t\t\t\tif ( _this.gammaInput ) {\n\n\t\t\t\t\tintensitySq = intensity * intensity;\n\n\t\t\t\t\tsetColorGamma( hemiSkyColors, hemiOffset, skyColor, intensitySq );\n\t\t\t\t\tsetColorGamma( hemiGroundColors, hemiOffset, groundColor, intensitySq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\n\t\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\n\n\t\t\t\t}\n\n\t\t\t\themiLength += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// null eventual remains from removed lights\n\t\t// (this is to avoid if in shader)\n\n\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\n\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\n\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\n\n\t\tzlights.directional.length = dirLength;\n\t\tzlights.point.length = pointLength;\n\t\tzlights.spot.length = spotLength;\n\t\tzlights.hemi.length = hemiLength;\n\n\t\tzlights.ambient[ 0 ] = r;\n\t\tzlights.ambient[ 1 ] = g;\n\t\tzlights.ambient[ 2 ] = b;\n\n\t}\n\n\t// GL state setting\n\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\tif ( cullFace === THREE.CullFaceNone ) {\n\n\t\t\t_gl.disable( _gl.CULL_FACE );\n\n\t\t} else {\n\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\n\n\t\t\t\t_gl.frontFace( _gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.frontFace( _gl.CCW );\n\n\t\t\t}\n\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\n\n\t\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\n\n\t\t\t\t_gl.cullFace( _gl.FRONT );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\n\n\t\t\t}\n\n\t\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t}\n\n\t};\n\n\tthis.setMaterialFaces = function ( material ) {\n\n\t\tvar doubleSided = material.side === THREE.DoubleSide;\n\t\tvar flipSided = material.side === THREE.BackSide;\n\n\t\tif ( _oldDoubleSided !== doubleSided ) {\n\n\t\t\tif ( doubleSided ) {\n\n\t\t\t\t_gl.disable( _gl.CULL_FACE );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.enable( _gl.CULL_FACE );\n\n\t\t\t}\n\n\t\t\t_oldDoubleSided = doubleSided;\n\n\t\t}\n\n\t\tif ( _oldFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\t_gl.frontFace( _gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.frontFace( _gl.CCW );\n\n\t\t\t}\n\n\t\t\t_oldFlipSided = flipSided;\n\n\t\t}\n\n\t};\n\n\tthis.setDepthTest = function ( depthTest ) {\n\n\t\tif ( _oldDepthTest !== depthTest ) {\n\n\t\t\tif ( depthTest ) {\n\n\t\t\t\t_gl.enable( _gl.DEPTH_TEST );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.disable( _gl.DEPTH_TEST );\n\n\t\t\t}\n\n\t\t\t_oldDepthTest = depthTest;\n\n\t\t}\n\n\t};\n\n\tthis.setDepthWrite = function ( depthWrite ) {\n\n\t\tif ( _oldDepthWrite !== depthWrite ) {\n\n\t\t\t_gl.depthMask( depthWrite );\n\t\t\t_oldDepthWrite = depthWrite;\n\n\t\t}\n\n\t};\n\n\tfunction setLineWidth ( width ) {\n\n\t\twidth *= pixelRatio;\n\n\t\tif ( width !== _oldLineWidth ) {\n\n\t\t\t_gl.lineWidth( width );\n\n\t\t\t_oldLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset ( polygonoffset, factor, units ) {\n\n\t\tif ( _oldPolygonOffset !== polygonoffset ) {\n\n\t\t\tif ( polygonoffset ) {\n\n\t\t\t\t_gl.enable( _gl.POLYGON_OFFSET_FILL );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.disable( _gl.POLYGON_OFFSET_FILL );\n\n\t\t\t}\n\n\t\t\t_oldPolygonOffset = polygonoffset;\n\n\t\t}\n\n\t\tif ( polygonoffset && ( _oldPolygonOffsetFactor !== factor || _oldPolygonOffsetUnits !== units ) ) {\n\n\t\t\t_gl.polygonOffset( factor, units );\n\n\t\t\t_oldPolygonOffsetFactor = factor;\n\t\t\t_oldPolygonOffsetUnits = units;\n\n\t\t}\n\n\t}\n\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst ) {\n\n\t\tif ( blending !== _oldBlending ) {\n\n\t\t\tif ( blending === THREE.NoBlending ) {\n\n\t\t\t\t_gl.disable( _gl.BLEND );\n\n\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.SRC_ALPHA, _gl.ONE );\n\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\n\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\n\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquation( _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFunc( _gl.ZERO, _gl.SRC_COLOR );\n\n\t\t\t} else if ( blending === THREE.CustomBlending ) {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.enable( _gl.BLEND );\n\t\t\t\t_gl.blendEquationSeparate( _gl.FUNC_ADD, _gl.FUNC_ADD );\n\t\t\t\t_gl.blendFuncSeparate( _gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t}\n\n\t\t\t_oldBlending = blending;\n\n\t\t}\n\n\t\tif ( blending === THREE.CustomBlending ) {\n\n\t\t\tif ( blendEquation !== _oldBlendEquation ) {\n\n\t\t\t\t_gl.blendEquation( paramThreeToGL( blendEquation ) );\n\n\t\t\t\t_oldBlendEquation = blendEquation;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== _oldBlendSrc || blendDst !== _oldBlendDst ) {\n\n\t\t\t\t_gl.blendFunc( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ) );\n\n\t\t\t\t_oldBlendSrc = blendSrc;\n\t\t\t\t_oldBlendDst = blendDst;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_oldBlendEquation = null;\n\t\t\t_oldBlendSrc = null;\n\t\t\t_oldBlendDst = null;\n\n\t\t}\n\n\t};\n\n\t// Textures\n\n\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\n\n\t\tvar extension;\n\n\t\tif ( isImagePowerOfTwo ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( ' + texture.sourceFile + ' )' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( ' + texture.sourceFile + ' )' );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension && texture.type !== THREE.FloatType ) {\n\n\t\t\tif ( texture.anisotropy > 1 || texture.__oldAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\n\t\t\t\ttexture.__oldAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.uploadTexture = function ( texture ) {\n\n\t\tif ( texture.__webglInit === undefined ) {\n\n\t\t\ttexture.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttexture.__webglTexture = _gl.createTexture();\n\n\t\t\t_this.info.memory.textures ++;\n\n\t\t}\n\n\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\ttexture.image = clampToMaxSize( texture.image, _maxTextureSize );\n\n\t\tvar image = texture.image,\n\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\n\t\tglFormat = paramThreeToGL( texture.format ),\n\t\tglType = paramThreeToGL( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture instanceof THREE.DataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t}\n\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\n\n\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else { // regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\ttexture.needsUpdate = false;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate();\n\n\t};\n\n\tthis.setTexture = function ( texture, slot ) {\n\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\n\t\tif ( texture.needsUpdate ) {\n\n\t\t\t_this.uploadTexture( texture );\n\n\t\t} else {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, texture.__webglTexture );\n\n\t\t}\n\n\t};\n\n\tfunction clampToMaxSize ( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer:', image, 'is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height + '.' );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction setCubeTexture ( texture, slot ) {\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.needsUpdate ) {\n\n\t\t\t\tif ( ! texture.image.__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttexture.image.__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\t_this.info.memory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], _maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( getCompressedTextureFormats().indexOf( glFormat ) > -1 ) {\n\n\t\t\t\t\t\t\t\t\t_gl.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( \"Attempt to load unsupported compressed texture format\" );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\n\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = false;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate();\n\n\t\t\t} else {\n\n\t\t\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.image.__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setCubeTextureDynamic ( texture, slot ) {\n\n\t\t_gl.activeTexture( _gl.TEXTURE0 + slot );\n\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, texture.__webglTexture );\n\n\t}\n\n\t// Render targets\n\n\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, renderTarget.__webglTexture, 0 );\n\n\t}\n\n\tfunction setupRenderBuffer ( renderbuffer, renderTarget  ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t/* For some reason this is not working. Defaulting to RGBA4.\n\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\t\t*/\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t}\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\n\t\tif ( renderTarget && renderTarget.__webglFramebuffer === undefined ) {\n\n\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\n\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\n\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\t\trenderTarget.__webglTexture = _gl.createTexture();\n\n\t\t\t_this.info.memory.textures ++;\n\n\t\t\t// Setup texture, create render and frame buffers\n\n\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\n\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\n\t\t\t\tglType = paramThreeToGL( renderTarget.type );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTarget.__webglFramebuffer = [];\n\t\t\t\trenderTarget.__webglRenderbuffer = [];\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\trenderTarget.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\t\t\t\t\trenderTarget.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t} else {\n\n\t\t\t\trenderTarget.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\n\n\t\t\t\t\trenderTarget.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderTarget.__webglRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\n\n\t\t\t\t_gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t\t\tsetupFrameBuffer( renderTarget.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\n\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\n\n\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTarget.__webglRenderbuffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetupRenderBuffer( renderTarget.__webglRenderbuffer, renderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\t\t}\n\n\t\t\t// Release everything\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t\t}\n\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t\t}\n\n\t\tvar framebuffer, width, height, vx, vy;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer[ renderTarget.activeCubeFace ];\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = renderTarget.__webglFramebuffer;\n\n\t\t\t}\n\n\t\t\twidth = renderTarget.width;\n\t\t\theight = renderTarget.height;\n\n\t\t\tvx = 0;\n\t\t\tvy = 0;\n\n\t\t} else {\n\n\t\t\tframebuffer = null;\n\n\t\t\twidth = _viewportWidth;\n\t\t\theight = _viewportHeight;\n\n\t\t\tvx = _viewportX;\n\t\t\tvy = _viewportY;\n\n\t\t}\n\n\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_gl.viewport( vx, vy, width, height );\n\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\t_currentWidth = width;\n\t\t_currentHeight = height;\n\n\t};\n\n\tfunction updateRenderTargetMipmap ( renderTarget ) {\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTarget.__webglTexture );\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\t_gl.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, renderTarget.__webglTexture );\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\t_gl.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback ( f ) {\n\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t// Map three.js constants to WebGL constants\n\n\tfunction paramThreeToGL ( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\n\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\n\t\tif ( p === THREE.IntType ) return _gl.INT;\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\n\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\n\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t}\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\t// Allocations\n\n\tfunction allocateBones ( object ) {\n\n\t\tif ( _supportsBoneTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader\n\t\t\t//   to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = _gl.getParameter( _gl.MAX_VERTEX_UNIFORM_VECTORS );\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = nVertexMatrices;\n\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\n\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\n\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction allocateLights( lights ) {\n\n\t\tvar dirLights = 0;\n\t\tvar pointLights = 0;\n\t\tvar spotLights = 0;\n\t\tvar hemiLights = 0;\n\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = lights[ l ];\n\n\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\n\n\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\n\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\n\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\n\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\n\n\t\t}\n\n\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\n\n\t}\n\n\tfunction allocateShadows( lights ) {\n\n\t\tvar maxShadows = 0;\n\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = lights[ l ];\n\n\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\n\t\t\tif ( light instanceof THREE.DirectionalLight && ! light.shadowCascade ) maxShadows ++;\n\n\t\t}\n\n\t\treturn maxShadows;\n\n\t}\n\n\t// DEPRECATED\n\n\tthis.initMaterial = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t};\n\n\tthis.addPrePlugin = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t};\n\n\tthis.addPostPlugin = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t};\n\n\tthis.updateShadowMap = function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t};\n\n};\n\n// File:src/renderers/WebGLRenderTarget.js\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\toptions = options || {};\n\n\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\n\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\n\n\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\n\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\n\n\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\n\n\tthis.offset = new THREE.Vector2( 0, 0 );\n\tthis.repeat = new THREE.Vector2( 1, 1 );\n\n\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\n\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\n\tthis.generateMipmaps = true;\n\n\tthis.shareDepthFrom = null;\n\n};\n\nTHREE.WebGLRenderTarget.prototype = {\n\n\tconstructor: THREE.WebGLRenderTarget,\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar tmp = new THREE.WebGLRenderTarget( this.width, this.height );\n\n\t\ttmp.wrapS = this.wrapS;\n\t\ttmp.wrapT = this.wrapT;\n\n\t\ttmp.magFilter = this.magFilter;\n\t\ttmp.minFilter = this.minFilter;\n\n\t\ttmp.anisotropy = this.anisotropy;\n\n\t\ttmp.offset.copy( this.offset );\n\t\ttmp.repeat.copy( this.repeat );\n\n\t\ttmp.format = this.format;\n\t\ttmp.type = this.type;\n\n\t\ttmp.depthBuffer = this.depthBuffer;\n\t\ttmp.stencilBuffer = this.stencilBuffer;\n\n\t\ttmp.generateMipmaps = this.generateMipmaps;\n\n\t\ttmp.shareDepthFrom = this.shareDepthFrom;\n\n\t\treturn tmp;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\n\n// File:src/renderers/WebGLRenderTargetCube.js\n\n/**\n * @author alteredq / http://alteredqualia.com\n */\n\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\n\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\n\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n\n};\n\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\n\n// File:src/renderers/webgl/WebGLExtensions.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLExtensions = function ( gl ) {\n\n\tvar extensions = {};\n\n\tthis.get = function ( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tvar extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/WebGLProgram.js\n\nTHREE.WebGLProgram = ( function () {\n\n\tvar programIdCount = 0;\n\n\tvar generateDefines = function ( defines ) {\n\n\t\tvar value, chunk, chunks = [];\n\n\t\tfor ( var d in defines ) {\n\n\t\t\tvalue = defines[ d ];\n\t\t\tif ( value === false ) continue;\n\n\t\t\tchunk = '#define ' + d + ' ' + value;\n\t\t\tchunks.push( chunk );\n\n\t\t}\n\n\t\treturn chunks.join( '\\n' );\n\n\t};\n\n\tvar cacheUniformLocations = function ( gl, program, identifiers ) {\n\n\t\tvar uniforms = {};\n\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\n\n\t\t\tvar id = identifiers[ i ];\n\t\t\tuniforms[ id ] = gl.getUniformLocation( program, id );\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t};\n\n\tvar cacheAttributeLocations = function ( gl, program, identifiers ) {\n\n\t\tvar attributes = {};\n\n\t\tfor ( var i = 0, l = identifiers.length; i < l; i ++ ) {\n\n\t\t\tvar id = identifiers[ i ];\n\t\t\tattributes[ id ] = gl.getAttribLocation( program, id );\n\n\t\t}\n\n\t\treturn attributes;\n\n\t};\n\n\treturn function ( renderer, code, material, parameters ) {\n\n\t\tvar _this = renderer;\n\t\tvar _gl = _this.context;\n\n\t\tvar defines = material.defines;\n\t\tvar uniforms = material.__webglShader.uniforms;\n\t\tvar attributes = material.attributes;\n\n\t\tvar vertexShader = material.__webglShader.vertexShader;\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\n\n\t\tvar index0AttributeName = material.index0AttributeName;\n\n\t\tif ( index0AttributeName === undefined && parameters.morphTargets === true ) {\n\n\t\t\t// programs with morphTargets displace position out of attribute 0\n\n\t\t\tindex0AttributeName = 'position';\n\n\t\t}\n\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t\t}\n\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\t\tif ( parameters.envMap ) {\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase THREE.CubeReflectionMapping:\n\t\t\t\tcase THREE.CubeRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.SphericalReflectionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase THREE.CubeRefractionMapping:\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.combine ) {\n\n\t\t\t\tcase THREE.MultiplyOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.MixOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.AddOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.log( 'building new program ' );\n\n\t\t//\n\n\t\tvar customDefines = generateDefines( defines );\n\n\t\t//\n\n\t\tvar program = _gl.createProgram();\n\n\t\tvar prefix_vertex, prefix_fragment;\n\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\n\n\t\t\tprefix_vertex = '';\n\t\t\tprefix_fragment = '';\n\n\t\t} else {\n\n\t\t\tprefix_vertex = [\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t\t_this.gammaInput ? '#define GAMMA_INPUT' : '',\n\t\t\t\t_this.gammaOutput ? '#define GAMMA_OUTPUT' : '',\n\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\n\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\n\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\t\tparameters.morphNormals ? '#define USE_MORPHNORMALS' : '',\n\t\t\t\tparameters.wrapAround ? '#define WRAP_AROUND' : '',\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\n\t\t\t\tparameters.shadowMapCascade ? '#define SHADOWMAP_CASCADE' : '',\n\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\t//_this._glExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\n\t\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t\t'attribute vec3 position;',\n\t\t\t\t'attribute vec3 normal;',\n\t\t\t\t'attribute vec2 uv;',\n\t\t\t\t'attribute vec2 uv2;',\n\n\t\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t\t'\tattribute vec3 color;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t\t'\t#else',\n\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t\t'\t#endif',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t''\n\n\t\t\t].join( '\\n' );\n\n\t\t\tprefix_fragment = [\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\t( parameters.bumpMap || parameters.normalMap ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\n\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\n\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest: '',\n\n\t\t\t\t_this.gammaInput ? '#define GAMMA_INPUT' : '',\n\t\t\t\t_this.gammaOutput ? '#define GAMMA_OUTPUT' : '',\n\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.metal ? '#define METAL' : '',\n\t\t\t\tparameters.wrapAround ? '#define WRAP_AROUND' : '',\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\n\t\t\t\tparameters.shadowMapCascade ? '#define SHADOWMAP_CASCADE' : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\t//_this._glExtensionFragDepth ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t\t''\n\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\tvar glVertexShader = new THREE.WebGLShader( _gl, _gl.VERTEX_SHADER, prefix_vertex + vertexShader );\n\t\tvar glFragmentShader = new THREE.WebGLShader( _gl, _gl.FRAGMENT_SHADER, prefix_fragment + fragmentShader );\n\n\t\t_gl.attachShader( program, glVertexShader );\n\t\t_gl.attachShader( program, glFragmentShader );\n\n\t\tif ( index0AttributeName !== undefined ) {\n\n\t\t\t// Force a particular attribute to index 0.\n\t\t\t// because potentially expensive emulation is done by browser if attribute 0 is disabled.\n\t\t\t// And, color, for example is often automatically bound to index 0 so disabling it\n\n\t\t\t_gl.bindAttribLocation( program, 0, index0AttributeName );\n\n\t\t}\n\n\t\t_gl.linkProgram( program );\n\n\t\tif ( _gl.getProgramParameter( program, _gl.LINK_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: Could not initialise shader.' );\n\t\t\tconsole.error( 'gl.VALIDATE_STATUS', _gl.getProgramParameter( program, _gl.VALIDATE_STATUS ) );\n\t\t\tconsole.error( 'gl.getError()', _gl.getError() );\n\n\t\t}\n\n\t\tif ( _gl.getProgramInfoLog( program ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', _gl.getProgramInfoLog( program ) );\n\t\t\t// console.warn( _gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t\t\t// console.warn( _gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\t\t}\n\n\t\t// clean up\n\n\t\t_gl.deleteShader( glVertexShader );\n\t\t_gl.deleteShader( glFragmentShader );\n\n\t\t// cache uniform locations\n\n\t\tvar identifiers = [\n\n\t\t\t'viewMatrix',\n\t\t\t'modelViewMatrix',\n\t\t\t'projectionMatrix',\n\t\t\t'normalMatrix',\n\t\t\t'modelMatrix',\n\t\t\t'cameraPosition',\n\t\t\t'morphTargetInfluences',\n\t\t\t'bindMatrix',\n\t\t\t'bindMatrixInverse'\n\n\t\t];\n\n\t\tif ( parameters.useVertexTexture ) {\n\n\t\t\tidentifiers.push( 'boneTexture' );\n\t\t\tidentifiers.push( 'boneTextureWidth' );\n\t\t\tidentifiers.push( 'boneTextureHeight' );\n\n\t\t} else {\n\n\t\t\tidentifiers.push( 'boneGlobalMatrices' );\n\n\t\t}\n\n\t\tif ( parameters.logarithmicDepthBuffer ) {\n\n\t\t\tidentifiers.push('logDepthBufFC');\n\n\t\t}\n\n\n\t\tfor ( var u in uniforms ) {\n\n\t\t\tidentifiers.push( u );\n\n\t\t}\n\n\t\tthis.uniforms = cacheUniformLocations( _gl, program, identifiers );\n\n\t\t// cache attributes locations\n\n\t\tidentifiers = [\n\n\t\t\t'position',\n\t\t\t'normal',\n\t\t\t'uv',\n\t\t\t'uv2',\n\t\t\t'tangent',\n\t\t\t'color',\n\t\t\t'skinIndex',\n\t\t\t'skinWeight',\n\t\t\t'lineDistance'\n\n\t\t];\n\n\t\tfor ( var i = 0; i < parameters.maxMorphTargets; i ++ ) {\n\n\t\t\tidentifiers.push( 'morphTarget' + i );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameters.maxMorphNormals; i ++ ) {\n\n\t\t\tidentifiers.push( 'morphNormal' + i );\n\n\t\t}\n\n\t\tfor ( var a in attributes ) {\n\n\t\t\tidentifiers.push( a );\n\n\t\t}\n\n\t\tthis.attributes = cacheAttributeLocations( _gl, program, identifiers );\n\t\tthis.attributesKeys = Object.keys( this.attributes );\n\n\t\t//\n\n\t\tthis.id = programIdCount ++;\n\t\tthis.code = code;\n\t\tthis.usedTimes = 1;\n\t\tthis.program = program;\n\t\tthis.vertexShader = glVertexShader;\n\t\tthis.fragmentShader = glFragmentShader;\n\n\t\treturn this;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/WebGLShader.js\n\nTHREE.WebGLShader = ( function () {\n\n\tvar addLineNumbers = function ( string ) {\n\n\t\tvar lines = string.split( '\\n' );\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t\t}\n\n\t\treturn lines.join( '\\n' );\n\n\t};\n\n\treturn function ( gl, type, string ) {\n\n\t\tvar shader = gl.createShader( type ); \n\n\t\tgl.shaderSource( shader, string );\n\t\tgl.compileShader( shader );\n\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t\t}\n\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', gl.getShaderInfoLog( shader ) );\n\t\t\tconsole.warn( addLineNumbers( string ) );\n\n\t\t}\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\treturn shader;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\n\n\tvar gl = renderer.context;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\tvar hasVertexTexture;\n\n\tvar tempTexture, occlusionTexture;\n\n\tvar init = function () {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t-1, -1,  0, 0,\n\t\t\t 1, -1,  1, 0,\n\t\t\t 1,  1,  1, 1,\n\t\t\t-1,  1,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\t// buffers\n\n\t\tvertexBuffer     = gl.createBuffer();\n\t\telementBuffer    = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t// textures\n\n\t\ttempTexture      = gl.createTexture();\n\t\tocclusionTexture = gl.createTexture();\n\n\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\n\n\t\tvar shader;\n\n\t\tif ( hasVertexTexture ) {\n\n\t\t\tshader = {\n\n\t\t\t\tvertexShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\n\t\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\n\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\n\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" ),\n\n\t\t\t\tfragmentShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t// pink square\n\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\n\n\t\t\t\t\t\t// restore\n\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t\t// flare\n\n\t\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" )\n\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tshader = {\n\n\t\t\t\tvertexShader: [\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" ),\n\n\t\t\t\tfragmentShader: [\n\n\t\t\t\t\t\"precision mediump float;\",\n\n\t\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\t\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\t\"varying vec2 vUV;\",\n\n\t\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\t// pink square\n\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\n\n\t\t\t\t\t\t// restore\n\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t\t// flare\n\n\t\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\n\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"}\"\n\n\t\t\t\t].join( \"\\n\" )\n\n\t\t\t};\n\n\t\t}\n\n\t\tprogram = createProgram( shader );\n\n\t\tattributes = {\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\n\t\t}\n\n\t\tuniforms = {\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\n\t\t};\n\n\t};\n\n\t/*\n\t * Render lens flares\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t *         reads these back and calculates occlusion.\n\t */\n\n\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\n\n\t\tif ( flares.length === 0 ) return;\n\n\t\tvar tempPosition = new THREE.Vector3();\n\n\t\tvar invAspect = viewportHeight / viewportWidth,\n\t\t\thalfViewportWidth = viewportWidth * 0.5,\n\t\t\thalfViewportHeight = viewportHeight * 0.5;\n\n\t\tvar size = 16 / viewportHeight,\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\n\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tgl.enableVertexAttribArray( attributes.vertex );\n\t\tgl.enableVertexAttribArray( attributes.uv );\n\n\t\t// loop through all lens flares to update their occlusion and positions\n\t\t// setup gl and common used attribs/unforms\n\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.depthMask( false );\n\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\tsize = 16 / viewportHeight;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t// calc object screen position\n\n\t\t\tvar flare = flares[ i ];\n\t\t\t\n\t\t\ttempPosition.set( flare.matrixWorld.elements[12], flare.matrixWorld.elements[13], flare.matrixWorld.elements[14] );\n\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\n\n\t\t\t// setup arrays for gl programs\n\n\t\t\tscreenPosition.copy( tempPosition )\n\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\n\n\t\t\t// screen cull\n\n\t\t\tif ( hasVertexTexture || (\n\t\t\t\tscreenPositionPixels.x > 0 &&\n\t\t\t\tscreenPositionPixels.x < viewportWidth &&\n\t\t\t\tscreenPositionPixels.y > 0 &&\n\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\n\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\tgl.disable( gl.BLEND );\n\t\t\t\tgl.enable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\n\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\tgl.disable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.activeTexture( gl.TEXTURE1 );\n\t\t\t\tgl.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// update object positions\n\n\t\t\t\tflare.positionScreen.copy( screenPosition )\n\n\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t}\n\n\t\t\t\t// render flares\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\tgl.enable( gl.BLEND );\n\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\n\n\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\trenderer.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\n\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tgl.enable( gl.CULL_FACE );\n\t\tgl.enable( gl.DEPTH_TEST );\n\t\tgl.depthMask( true );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram ( shader ) {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\n\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\tgl.compileShader( fragmentShader );\n\t\tgl.compileShader( vertexShader );\n\n\t\tgl.attachShader( program, fragmentShader );\n\t\tgl.attachShader( program, vertexShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n};\n\n// File:src/renderers/webgl/plugins/ShadowMapPlugin.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ShadowMapPlugin = function ( _renderer, _lights, _webglObjects, _webglObjectsImmediate ) {\n\n\tvar _gl = _renderer.context;\n\n\tvar _depthMaterial, _depthMaterialMorph, _depthMaterialSkin, _depthMaterialMorphSkin,\n\n\t_frustum = new THREE.Frustum(),\n\t_projScreenMatrix = new THREE.Matrix4(),\n\n\t_min = new THREE.Vector3(),\n\t_max = new THREE.Vector3(),\n\n\t_matrixPosition = new THREE.Vector3(),\n\t\n\t_renderList = [];\n\n\t// init\n\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\n\n\t_depthMaterial = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader\n\t } );\n\n\t_depthMaterialMorph = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tmorphTargets: true\n\t} );\n\n\t_depthMaterialSkin = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tskinning: true\n\t} );\n\n\t_depthMaterialMorphSkin = new THREE.ShaderMaterial( {\n\t\tuniforms: depthUniforms,\n\t\tvertexShader: depthShader.vertexShader,\n\t\tfragmentShader: depthShader.fragmentShader,\n\t\tmorphTargets: true,\n\t\tskinning: true\n\t} );\n\n\t_depthMaterial._shadowPass = true;\n\t_depthMaterialMorph._shadowPass = true;\n\t_depthMaterialSkin._shadowPass = true;\n\t_depthMaterialMorphSkin._shadowPass = true;\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( _renderer.shadowMapEnabled === false ) return;\n\n\t\tvar i, il, j, jl, n,\n\n\t\tshadowMap, shadowMatrix, shadowCamera,\n\t\tprogram, buffer, material,\n\t\twebglObject, object, light,\n\n\t\tlights = [],\n\t\tk = 0,\n\n\t\tfog = null;\n\n\t\t// set GL state for depth map\n\n\t\t_gl.clearColor( 1, 1, 1, 1 );\n\t\t_gl.disable( _gl.BLEND );\n\n\t\t_gl.enable( _gl.CULL_FACE );\n\t\t_gl.frontFace( _gl.CCW );\n\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\n\n\t\t\t_gl.cullFace( _gl.FRONT );\n\n\t\t} else {\n\n\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t}\n\n\t\t_renderer.setDepthTest( true );\n\n\t\t// preprocess lights\n\t\t// \t- skip lights that are not casting shadows\n\t\t//\t- create virtual lights for cascaded shadow maps\n\n\t\tfor ( i = 0, il = _lights.length; i < il; i ++ ) {\n\n\t\t\tlight = _lights[ i ];\n\n\t\t\tif ( ! light.castShadow ) continue;\n\n\t\t\tif ( ( light instanceof THREE.DirectionalLight ) && light.shadowCascade ) {\n\n\t\t\t\tfor ( n = 0; n < light.shadowCascadeCount; n ++ ) {\n\n\t\t\t\t\tvar virtualLight;\n\n\t\t\t\t\tif ( ! light.shadowCascadeArray[ n ] ) {\n\n\t\t\t\t\t\tvirtualLight = createVirtualLight( light, n );\n\t\t\t\t\t\tvirtualLight.originalCamera = camera;\n\n\t\t\t\t\t\tvar gyro = new THREE.Gyroscope();\n\t\t\t\t\t\tgyro.position.copy( light.shadowCascadeOffset );\n\n\t\t\t\t\t\tgyro.add( virtualLight );\n\t\t\t\t\t\tgyro.add( virtualLight.target );\n\n\t\t\t\t\t\tcamera.add( gyro );\n\n\t\t\t\t\t\tlight.shadowCascadeArray[ n ] = virtualLight;\n\n\t\t\t\t\t\tconsole.log( \"Created virtualLight\", virtualLight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvirtualLight = light.shadowCascadeArray[ n ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tupdateVirtualLight( light, n );\n\n\t\t\t\t\tlights[ k ] = virtualLight;\n\t\t\t\t\tk ++;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tlights[ k ] = light;\n\t\t\t\tk ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// render depth map\n\n\t\tfor ( i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tlight = lights[ i ];\n\n\t\t\tif ( ! light.shadowMap ) {\n\n\t\t\t\tvar shadowFilter = THREE.LinearFilter;\n\n\t\t\t\tif ( _renderer.shadowMapType === THREE.PCFSoftShadowMap ) {\n\n\t\t\t\t\tshadowFilter = THREE.NearestFilter;\n\n\t\t\t\t}\n\n\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\n\n\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\n\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\n\n\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\n\n\t\t\t}\n\n\t\t\tif ( ! light.shadowCamera ) {\n\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\n\n\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\n\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( \"Unsupported light type for shadow\" );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tscene.add( light.shadowCamera );\n\n\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t\t}\n\n\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\n\n\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\n\t\t\t\tscene.add( light.cameraHelper );\n\n\t\t\t}\n\n\t\t\tif ( light.isVirtual && virtualLight.originalCamera == camera ) {\n\n\t\t\t\tupdateShadowCamera( camera, light );\n\n\t\t\t}\n\n\t\t\tshadowMap = light.shadowMap;\n\t\t\tshadowMatrix = light.shadowMatrix;\n\t\t\tshadowCamera = light.shadowCamera;\n\n\t\t\t//\n\n\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\tshadowCamera.lookAt( _matrixPosition );\n\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\n\n\t\t\t//\n\n\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\n\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\n\n\t\t\t// compute shadow matrix\n\n\t\t\tshadowMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t// update camera matrices and frustum\n\n\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t// render shadow map\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// set object matrices & frustum culling\n\n\t\t\t_renderList.length = 0;\n\n\t\t\tprojectObject( scene, scene, shadowCamera );\n\n\n\t\t\t// render regular objects\n\n\t\t\tvar objectMaterial, useMorphing, useSkinning;\n\n\t\t\tfor ( j = 0, jl = _renderList.length; j < jl; j ++ ) {\n\n\t\t\t\twebglObject = _renderList[ j ];\n\n\t\t\t\tobject = webglObject.object;\n\t\t\t\tbuffer = webglObject.buffer;\n\n\t\t\t\t// culling is overriden globally for all objects\n\t\t\t\t// while rendering depth map\n\n\t\t\t\t// need to deal with MeshFaceMaterial somehow\n\t\t\t\t// in that case just use the first of material.materials for now\n\t\t\t\t// (proper solution would require to break objects by materials\n\t\t\t\t//  similarly to regular rendering and then set corresponding\n\t\t\t\t//  depth materials per each chunk instead of just once per object)\n\n\t\t\t\tobjectMaterial = getObjectMaterial( object );\n\n\t\t\t\tuseMorphing = object.geometry.morphTargets !== undefined && object.geometry.morphTargets.length > 0 && objectMaterial.morphTargets;\n\t\t\t\tuseSkinning = object instanceof THREE.SkinnedMesh && objectMaterial.skinning;\n\n\t\t\t\tif ( object.customDepthMaterial ) {\n\n\t\t\t\t\tmaterial = object.customDepthMaterial;\n\n\t\t\t\t} else if ( useSkinning ) {\n\n\t\t\t\t\tmaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\n\n\t\t\t\t} else if ( useMorphing ) {\n\n\t\t\t\t\tmaterial = _depthMaterialMorph;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmaterial = _depthMaterial;\n\n\t\t\t\t}\n\n\t\t\t\t_renderer.setMaterialFaces( objectMaterial );\n\n\t\t\t\tif ( buffer instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, fog, material, buffer, object );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_renderer.renderBuffer( shadowCamera, _lights, fog, material, buffer, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// set matrices and render immediate objects\n\n\t\t\tfor ( j = 0, jl = _webglObjectsImmediate.length; j < jl; j ++ ) {\n\n\t\t\t\twebglObject = _webglObjectsImmediate[ j ];\n\t\t\t\tobject = webglObject.object;\n\n\t\t\t\tif ( object.visible && object.castShadow ) {\n\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\t\t_renderer.renderImmediateObject( shadowCamera, _lights, fog, _depthMaterial, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore GL state\n\n\t\tvar clearColor = _renderer.getClearColor(),\n\t\tclearAlpha = _renderer.getClearAlpha();\n\n\t\t_gl.clearColor( clearColor.r, clearColor.g, clearColor.b, clearAlpha );\n\t\t_gl.enable( _gl.BLEND );\n\n\t\tif ( _renderer.shadowMapCullFace === THREE.CullFaceFront ) {\n\n\t\t\t_gl.cullFace( _gl.BACK );\n\n\t\t}\n\n\t\t_renderer.resetGLState();\n\n\t};\n\n\tfunction projectObject( scene, object, shadowCamera ){\n\n\t\tif ( object.visible ) {\n\n\t\t\tvar webglObjects = _webglObjects[ object.id ];\n\n\t\t\tif ( webglObjects && object.castShadow && (object.frustumCulled === false || _frustum.intersectsObject( object ) === true) ) {\n\n\t\t\t\tfor ( var i = 0, l = webglObjects.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar webglObject = webglObjects[ i ];\n\n\t\t\t\t\tobject._modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\t\t\t\t\t_renderList.push( webglObject );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\tprojectObject( scene, object.children[ i ], shadowCamera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVirtualLight( light, cascade ) {\n\n\t\tvar virtualLight = new THREE.DirectionalLight();\n\n\t\tvirtualLight.isVirtual = true;\n\n\t\tvirtualLight.onlyShadow = true;\n\t\tvirtualLight.castShadow = true;\n\n\t\tvirtualLight.shadowCameraNear = light.shadowCameraNear;\n\t\tvirtualLight.shadowCameraFar = light.shadowCameraFar;\n\n\t\tvirtualLight.shadowCameraLeft = light.shadowCameraLeft;\n\t\tvirtualLight.shadowCameraRight = light.shadowCameraRight;\n\t\tvirtualLight.shadowCameraBottom = light.shadowCameraBottom;\n\t\tvirtualLight.shadowCameraTop = light.shadowCameraTop;\n\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\n\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\n\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\n\t\tvirtualLight.shadowMapWidth = light.shadowCascadeWidth[ cascade ];\n\t\tvirtualLight.shadowMapHeight = light.shadowCascadeHeight[ cascade ];\n\n\t\tvirtualLight.pointsWorld = [];\n\t\tvirtualLight.pointsFrustum = [];\n\n\t\tvar pointsWorld = virtualLight.pointsWorld,\n\t\t\tpointsFrustum = virtualLight.pointsFrustum;\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tpointsWorld[ i ] = new THREE.Vector3();\n\t\t\tpointsFrustum[ i ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\n\n\t\tpointsFrustum[ 0 ].set( - 1, - 1, nearZ );\n\t\tpointsFrustum[ 1 ].set(  1, - 1, nearZ );\n\t\tpointsFrustum[ 2 ].set( - 1,  1, nearZ );\n\t\tpointsFrustum[ 3 ].set(  1,  1, nearZ );\n\n\t\tpointsFrustum[ 4 ].set( - 1, - 1, farZ );\n\t\tpointsFrustum[ 5 ].set(  1, - 1, farZ );\n\t\tpointsFrustum[ 6 ].set( - 1,  1, farZ );\n\t\tpointsFrustum[ 7 ].set(  1,  1, farZ );\n\n\t\treturn virtualLight;\n\n\t}\n\n\t// Synchronize virtual light with the original light\n\n\tfunction updateVirtualLight( light, cascade ) {\n\n\t\tvar virtualLight = light.shadowCascadeArray[ cascade ];\n\n\t\tvirtualLight.position.copy( light.position );\n\t\tvirtualLight.target.position.copy( light.target.position );\n\t\tvirtualLight.lookAt( virtualLight.target );\n\n\t\tvirtualLight.shadowCameraVisible = light.shadowCameraVisible;\n\t\tvirtualLight.shadowDarkness = light.shadowDarkness;\n\n\t\tvirtualLight.shadowBias = light.shadowCascadeBias[ cascade ];\n\n\t\tvar nearZ = light.shadowCascadeNearZ[ cascade ];\n\t\tvar farZ = light.shadowCascadeFarZ[ cascade ];\n\n\t\tvar pointsFrustum = virtualLight.pointsFrustum;\n\n\t\tpointsFrustum[ 0 ].z = nearZ;\n\t\tpointsFrustum[ 1 ].z = nearZ;\n\t\tpointsFrustum[ 2 ].z = nearZ;\n\t\tpointsFrustum[ 3 ].z = nearZ;\n\n\t\tpointsFrustum[ 4 ].z = farZ;\n\t\tpointsFrustum[ 5 ].z = farZ;\n\t\tpointsFrustum[ 6 ].z = farZ;\n\t\tpointsFrustum[ 7 ].z = farZ;\n\n\t}\n\n\t// Fit shadow camera's ortho frustum to camera frustum\n\n\tfunction updateShadowCamera( camera, light ) {\n\n\t\tvar shadowCamera = light.shadowCamera,\n\t\t\tpointsFrustum = light.pointsFrustum,\n\t\t\tpointsWorld = light.pointsWorld;\n\n\t\t_min.set( Infinity, Infinity, Infinity );\n\t\t_max.set( - Infinity, - Infinity, - Infinity );\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar p = pointsWorld[ i ];\n\n\t\t\tp.copy( pointsFrustum[ i ] );\n\t\t\tp.unproject( camera );\n\n\t\t\tp.applyMatrix4( shadowCamera.matrixWorldInverse );\n\n\t\t\tif ( p.x < _min.x ) _min.x = p.x;\n\t\t\tif ( p.x > _max.x ) _max.x = p.x;\n\n\t\t\tif ( p.y < _min.y ) _min.y = p.y;\n\t\t\tif ( p.y > _max.y ) _max.y = p.y;\n\n\t\t\tif ( p.z < _min.z ) _min.z = p.z;\n\t\t\tif ( p.z > _max.z ) _max.z = p.z;\n\n\t\t}\n\n\t\tshadowCamera.left = _min.x;\n\t\tshadowCamera.right = _max.x;\n\t\tshadowCamera.top = _max.y;\n\t\tshadowCamera.bottom = _min.y;\n\n\t\t// can't really fit near/far\n\t\t//shadowCamera.near = _min.z;\n\t\t//shadowCamera.far = _max.z;\n\n\t\tshadowCamera.updateProjectionMatrix();\n\n\t}\n\n\t// For the moment just ignore objects that have multiple materials with different animation methods\n\t// Only the first material will be taken into account for deciding which depth material to use for shadow maps\n\n\tfunction getObjectMaterial( object ) {\n\n\t\treturn object.material instanceof THREE.MeshFaceMaterial\n\t\t\t? object.material.materials[ 0 ]\n\t\t\t: object.material;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/plugins/SpritePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpritePlugin = function ( renderer, sprites ) {\n\n\tvar gl = renderer.context;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new THREE.Vector3();\n\tvar spriteRotation = new THREE.Quaternion();\n\tvar spriteScale = new THREE.Vector3();\n\n\tvar init = function () {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5,  0, 0,\n\t\t\t  0.5, - 0.5,  1, 0,\n\t\t\t  0.5,   0.5,  1, 1,\n\t\t\t- 0.5,   0.5,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer  = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\n\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new THREE.Texture( canvas );\n\t\ttexture.needsUpdate = true;\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tgl.enableVertexAttribArray( attributes.position );\n\t\tgl.enableVertexAttribArray( attributes.uv );\n\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tgl.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite._modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite._modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite._modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\trenderer.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\trenderer.setDepthTest( material.depthTest );\n\t\t\trenderer.setDepthWrite( material.depthWrite );\n\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\n\n\t\t\t\trenderer.setTexture( material.map, 0 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setTexture( texture, 0 );\n\n\t\t\t}\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tgl.enable( gl.CULL_FACE );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram () {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\n\n\t\t\t\t'vec2 alignedPosition = position * scale;',\n\n\t\t\t\t'vec2 rotatedPosition;',\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t\t'vec4 finalPosition;',\n\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\n\n\t\t\t\t'gl_Position = finalPosition;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\n\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\n\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t\t'if ( fogType > 0 ) {',\n\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\n\t\t\t\t\t'float fogFactor = 0.0;',\n\n\t\t\t\t\t'if ( fogType == 1 ) {',\n\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\n\n\t\t\t\t\t'} else {',\n\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\n\t\t\t\t\t\t'float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t\t\t'}',\n\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\n\n\t\t\t\t'}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t};\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t};\n\n};\n\n// File:src/extras/GeometryUtils.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.GeometryUtils = {\n\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\n\t\tvar matrix;\n\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\n\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\tmatrix = geometry2.matrix;\n\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t}\n\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t},\n\n\tcenter: function ( geometry ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\treturn geometry.center();\n\n\t}\n\n};\n\n// File:src/extras/ImageUtils.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author Daosheng Mu / https://github.com/DaoshengMu/\n */\n\nTHREE.ImageUtils = {\n\n\tcrossOrigin: undefined,\n\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\n\n\t\tvar loader = new THREE.ImageLoader();\n\t\tloader.crossOrigin = this.crossOrigin;\n\n\t\tvar texture = new THREE.Texture( undefined, mapping );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t}, undefined, function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t} );\n\n\t\ttexture.sourceFile = url;\n\n\t\treturn texture;\n\n\t},\n\n\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\n\n\t\tvar images = [];\n\n\t\tvar loader = new THREE.ImageLoader();\n\t\tloader.crossOrigin = this.crossOrigin;\n\n\t\tvar texture = new THREE.CubeTexture( images, mapping );\n\n\t\t// no flipping needed for cube textures\n\n\t\ttexture.flipY = false;\n\n\t\tvar loaded = 0;\n\n\t\tvar loadTexture = function ( i ) {\n\n\t\t\tloader.load( array[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tloadCompressedTexture: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\n\n\t},\n\n\tloadCompressedTextureCube: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\n\n\t},\n\n\tgetNormalMap: function ( image, depth ) {\n\n\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\n\n\t\tvar cross = function ( a, b ) {\n\n\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\n\n\t\t}\n\n\t\tvar subtract = function ( a, b ) {\n\n\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\n\n\t\t}\n\n\t\tvar normalize = function ( a ) {\n\n\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\n\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\n\n\t\t}\n\n\t\tdepth = depth | 1;\n\n\t\tvar width = image.width;\n\t\tvar height = image.height;\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = width;\n\t\tcanvas.height = height;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.drawImage( image, 0, 0 );\n\n\t\tvar data = context.getImageData( 0, 0, width, height ).data;\n\t\tvar imageData = context.createImageData( width, height );\n\t\tvar output = imageData.data;\n\n\t\tfor ( var x = 0; x < width; x ++ ) {\n\n\t\t\tfor ( var y = 0; y < height; y ++ ) {\n\n\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\n\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\n\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\n\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\n\n\t\t\t\tvar points = [];\n\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\n\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [  1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\n\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\n\n\t\t\t\tvar normals = [];\n\t\t\t\tvar num_points = points.length;\n\n\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\n\n\t\t\t\t\tvar v1 = points[ i ];\n\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\n\t\t\t\t\tv1 = subtract( v1, origin );\n\t\t\t\t\tv2 = subtract( v2, origin );\n\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tvar normal = [ 0, 0, 0 ];\n\n\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\n\n\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\n\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\n\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\n\n\t\t\t\t}\n\n\t\t\t\tnormal[ 0 ] /= normals.length;\n\t\t\t\tnormal[ 1 ] /= normals.length;\n\t\t\t\tnormal[ 2 ] /= normals.length;\n\n\t\t\t\tvar idx = ( y * width + x ) * 4;\n\n\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\n\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\n\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\n\t\t\t\toutput[ idx + 3 ] = 255;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\treturn canvas;\n\n\t},\n\n\tgenerateDataTexture: function ( width, height, color ) {\n\n\t\tvar size = width * height;\n\t\tvar data = new Uint8Array( 3 * size );\n\n\t\tvar r = Math.floor( color.r * 255 );\n\t\tvar g = Math.floor( color.g * 255 );\n\t\tvar b = Math.floor( color.b * 255 );\n\n\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\tdata[ i * 3 ] \t   = r;\n\t\t\tdata[ i * 3 + 1 ] = g;\n\t\t\tdata[ i * 3 + 2 ] = b;\n\n\t\t}\n\n\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n};\n\n// File:src/extras/SceneUtils.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SceneUtils = {\n\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\n\n\t\tvar group = new THREE.Object3D();\n\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\n\n\t\t}\n\n\t\treturn group;\n\n\t},\n\n\tdetach: function ( child, parent, scene ) {\n\n\t\tchild.applyMatrix( parent.matrixWorld );\n\t\tparent.remove( child );\n\t\tscene.add( child );\n\n\t},\n\n\tattach: function ( child, scene, parent ) {\n\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\t\tchild.applyMatrix( matrixWorldInverse );\n\n\t\tscene.remove( child );\n\t\tparent.add( child );\n\n\t}\n\n};\n\n// File:src/extras/FontUtils.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * For Text operations in three.js (See TextGeometry)\n *\n * It uses techniques used in:\n *\n * \ttypeface.js and canvastext\n * \t\tFor converting fonts and rendering with javascript\n *\t\thttp://typeface.neocracy.org\n *\n *\tTriangulation ported from AS3\n *\t\tSimple Polygon Triangulation\n *\t\thttp://actionsnippet.com/?p=1462\n *\n * \tA Method to triangulate shapes with holes\n *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\n *\n */\n\nTHREE.FontUtils = {\n\n\tfaces: {},\n\n\t// Just for now. face[weight][style]\n\n\tface: 'helvetiker',\n\tweight: 'normal',\n\tstyle: 'normal',\n\tsize: 150,\n\tdivisions: 10,\n\n\tgetFace: function () {\n\n\t\ttry {\n\n\t\t\treturn this.faces[ this.face ][ this.weight ][ this.style ];\n\n\t\t} catch (e) {\n\n\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\n\n\t\t};\n\n\t},\n\n\tloadFace: function ( data ) {\n\n\t\tvar family = data.familyName.toLowerCase();\n\n\t\tvar ThreeFont = this;\n\n\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\n\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\n\n\t\tvar face = ThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\n\n\t\treturn data;\n\n\t},\n\n\tdrawText: function ( text ) {\n\n\t\tvar characterPts = [], allPts = [];\n\n\t\t// RenderText\n\n\t\tvar i, p,\n\t\t\tface = this.getFace(),\n\t\t\tscale = this.size / face.resolution,\n\t\t\toffset = 0,\n\t\t\tchars = String( text ).split( '' ),\n\t\t\tlength = chars.length;\n\n\t\tvar fontPaths = [];\n\n\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\tvar path = new THREE.Path();\n\n\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\n\t\t\toffset += ret.offset;\n\n\t\t\tfontPaths.push( ret.path );\n\n\t\t}\n\n\t\t// get the width\n\n\t\tvar width = offset / 2;\n\t\t//\n\t\t// for ( p = 0; p < allPts.length; p++ ) {\n\t\t//\n\t\t// \tallPts[ p ].x -= width;\n\t\t//\n\t\t// }\n\n\t\t//var extract = this.extractPoints( allPts, characterPts );\n\t\t//extract.contour = allPts;\n\n\t\t//extract.paths = fontPaths;\n\t\t//extract.offset = width;\n\n\t\treturn { paths: fontPaths, offset: width };\n\n\t},\n\n\n\n\n\textractGlyphPoints: function ( c, face, scale, offset, path ) {\n\n\t\tvar pts = [];\n\n\t\tvar i, i2, divisions,\n\t\t\toutline, action, length,\n\t\t\tscaleX, scaleY,\n\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\n\t\t\tlaste,\n\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\n\n\t\tif ( ! glyph ) return;\n\n\t\tif ( glyph.o ) {\n\n\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\t\t\tlength = outline.length;\n\n\t\t\tscaleX = scale;\n\t\t\tscaleY = scale;\n\n\t\t\tfor ( i = 0; i < length; ) {\n\n\t\t\t\taction = outline[ i ++ ];\n\n\t\t\t\t//console.log( action );\n\n\t\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm':\n\n\t\t\t\t\t// Move To\n\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l':\n\n\t\t\t\t\t// Line To\n\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\n\t\t\t\t\tpath.lineTo( x,y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q':\n\n\t\t\t\t\t// QuadraticCurveTo\n\n\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\n\t\t\t\t\t  }\n\n\t\t\t\t  }\n\n\t\t\t\t  break;\n\n\t\t\t\tcase 'b':\n\n\t\t\t\t\t// Cubic Bezier Curve\n\n\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\n\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\tvar tx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\t\t\t\tvar ty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\n\n\t\treturn { offset: glyph.ha * scale, path:path };\n\t}\n\n};\n\n\nTHREE.FontUtils.generateShapes = function ( text, parameters ) {\n\n\t// Parameters \n\n\tparameters = parameters || {};\n\n\tvar size = parameters.size !== undefined ? parameters.size : 100;\n\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\n\n\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\n\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\n\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\n\n\tTHREE.FontUtils.size = size;\n\tTHREE.FontUtils.divisions = curveSegments;\n\n\tTHREE.FontUtils.face = font;\n\tTHREE.FontUtils.weight = weight;\n\tTHREE.FontUtils.style = style;\n\n\t// Get a Font data json object\n\n\tvar data = THREE.FontUtils.drawText( text );\n\n\tvar paths = data.paths;\n\tvar shapes = [];\n\n\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t}\n\n\treturn shapes;\n\n};\n\n\n/**\n * This code is a quick port of code written in C++ which was submitted to\n * flipcode.com by John W. Ratcliff  // July 22, 2000\n * See original code and more information here:\n * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\n *\n * ported to actionscript by Zevan Rosser\n * www.actionsnippet.com\n *\n * ported to javascript by Joshua Koo\n * http://www.lab4games.net/zz85/blog\n *\n */\n\n\n( function ( namespace ) {\n\n\tvar EPSILON = 0.0000000001;\n\n\t// takes in an contour array and returns\n\n\tvar process = function ( contour, indices ) {\n\n\t\tvar n = contour.length;\n\n\t\tif ( n < 3 ) return null;\n\n\t\tvar result = [],\n\t\t\tverts = [],\n\t\t\tvertIndices = [];\n\n\t\t/* we want a counter-clockwise polygon in verts */\n\n\t\tvar u, v, w;\n\n\t\tif ( area( contour ) > 0.0 ) {\n\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\n\n\t\t} else {\n\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\n\n\t\t}\n\n\t\tvar nv = n;\n\n\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\n\n\t\tvar count = 2 * nv;   /* error detection */\n\n\t\tfor ( v = nv - 1; nv > 2; ) {\n\n\t\t\t/* if we loop, it is probably a non-simple polygon */\n\n\t\t\tif ( ( count -- ) <= 0 ) {\n\n\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\n\n\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\n\t\t\t\t//return null;\n\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\n\t\t\t\tconsole.log( 'Warning, unable to triangulate polygon!' );\n\n\t\t\t\tif ( indices ) return vertIndices;\n\t\t\t\treturn result;\n\n\t\t\t}\n\n\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\n\n\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\n\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\n\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\n\n\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\n\n\t\t\t\tvar a, b, c, s, t;\n\n\t\t\t\t/* true names of the vertices */\n\n\t\t\t\ta = verts[ u ];\n\t\t\t\tb = verts[ v ];\n\t\t\t\tc = verts[ w ];\n\n\t\t\t\t/* output Triangle */\n\n\t\t\t\tresult.push( [ contour[ a ],\n\t\t\t\t\tcontour[ b ],\n\t\t\t\t\tcontour[ c ] ] );\n\n\n\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\n\n\t\t\t\t/* remove v from the remaining polygon */\n\n\t\t\t\tfor ( s = v, t = v + 1; t < nv; s++, t++ ) {\n\n\t\t\t\t\tverts[ s ] = verts[ t ];\n\n\t\t\t\t}\n\n\t\t\t\tnv --;\n\n\t\t\t\t/* reset error detection counter */\n\n\t\t\t\tcount = 2 * nv;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( indices ) return vertIndices;\n\t\treturn result;\n\n\t};\n\n\t// calculate area of the contour polygon\n\n\tvar area = function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t};\n\n\tvar snip = function ( contour, u, v, w, n, verts ) {\n\n\t\tvar p;\n\t\tvar ax, ay, bx, by;\n\t\tvar cx, cy, px, py;\n\n\t\tax = contour[ verts[ u ] ].x;\n\t\tay = contour[ verts[ u ] ].y;\n\n\t\tbx = contour[ verts[ v ] ].x;\n\t\tby = contour[ verts[ v ] ].y;\n\n\t\tcx = contour[ verts[ w ] ].x;\n\t\tcy = contour[ verts[ w ] ].y;\n\n\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\n\n\t\tvar aX, aY, bX, bY, cX, cY;\n\t\tvar apx, apy, bpx, bpy, cpx, cpy;\n\t\tvar cCROSSap, bCROSScp, aCROSSbp;\n\n\t\taX = cx - bx;  aY = cy - by;\n\t\tbX = ax - cx;  bY = ay - cy;\n\t\tcX = bx - ax;  cY = by - ay;\n\n\t\tfor ( p = 0; p < n; p ++ ) {\n\n\t\t\tpx = contour[ verts[ p ] ].x\n\t\t\tpy = contour[ verts[ p ] ].y\n\n\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\n\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\n\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\n\n\t\t\tapx = px - ax;  apy = py - ay;\n\t\t\tbpx = px - bx;  bpy = py - by;\n\t\t\tcpx = px - cx;  cpy = py - cy;\n\n\t\t\t// see if p is inside triangle abc\n\n\t\t\taCROSSbp = aX * bpy - aY * bpx;\n\t\t\tcCROSSap = cX * apy - cY * apx;\n\t\t\tbCROSScp = bX * cpy - bY * cpx;\n\n\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n\n\tnamespace.Triangulate = process;\n\tnamespace.Triangulate.area = area;\n\n\treturn namespace;\n\n} )( THREE.FontUtils );\n\n// To use the typeface.js face files, hook up the API\nself._typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\nTHREE.typeface_js = self._typeface_js;\n\n// File:src/extras/audio/Audio.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Audio = function ( listener ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.context = listener.context;\n\tthis.source = this.context.createBufferSource();\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( this.context.destination );\n\n\tthis.panner = this.context.createPanner();\n\tthis.panner.connect( this.gain );\n\n};\n\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Audio.prototype.constructor = THREE.Audio;\n\nTHREE.Audio.prototype.load = function ( file ) {\n\n\tvar scope = this;\n\n\tvar request = new XMLHttpRequest();\n\trequest.open( 'GET', file, true );\n\trequest.responseType = 'arraybuffer';\n\trequest.onload = function ( e ) {\n\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\n\n\t\t\tscope.source.buffer = buffer;\n\t\t\tscope.source.connect( scope.panner );\n\t\t\tscope.source.start( 0 );\n\n\t\t} );\n\n\t};\n\trequest.send();\n\n\treturn this;\n\n};\n\nTHREE.Audio.prototype.setLoop = function ( value ) {\n\n\tthis.source.loop = value;\n\n};\n\nTHREE.Audio.prototype.setRefDistance = function ( value ) {\n\n\tthis.panner.refDistance = value;\n\n};\n\nTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\n\n\tthis.panner.rolloffFactor = value;\n\n};\n\nTHREE.Audio.prototype.updateMatrixWorld = ( function () {\n\n\tvar position = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\n\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\n\n\t};\n\n} )();\n\n// File:src/extras/audio/AudioListener.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AudioListener = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'AudioListener';\n\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\n\n};\n\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\n\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\n\n\tvar position = new THREE.Vector3();\n\tvar quaternion = new THREE.Quaternion();\n\tvar scale = new THREE.Vector3();\n\n\tvar orientation = new THREE.Vector3();\n\tvar velocity = new THREE.Vector3();\n\n\tvar positionPrev = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tvar listener = this.context.listener;\n\t\tvar up = this.up;\n\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\n\n\t\torientation.set( 0, 0, -1 ).applyQuaternion( quaternion );\n\t\tvelocity.subVectors( position, positionPrev );\n\n\t\tlistener.setPosition( position.x, position.y, position.z );\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\n\t\tlistener.setVelocity( velocity.x, velocity.y, velocity.z );\n\n\t\tpositionPrev.copy( position );\n\n\t};\n\n} )();\n\n// File:src/extras/core/Curve.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of Curve methods\n * .getPoint(t), getTangent(t)\n * .getPointAt(u), getTagentAt(u)\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following classes subclasses THREE.Curve:\n *\n * -- 2d classes --\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.CubicBezierCurve\n * THREE.SplineCurve\n * THREE.ArcCurve\n * THREE.EllipseCurve\n *\n * -- 3d classes --\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n * THREE.CubicBezierCurve3\n * THREE.SplineCurve3\n * THREE.ClosedSplineCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nTHREE.Curve = function () {\n\n};\n\n// Virtual base class method to overwrite and implement in subclasses\n//\t- t [0 .. 1]\n\nTHREE.Curve.prototype.getPoint = function ( t ) {\n\n\tconsole.log( \"Warning, getPoint() not implemented!\" );\n\treturn null;\n\n};\n\n// Get point at relative position in curve according to arc length\n// - u [0 .. 1]\n\nTHREE.Curve.prototype.getPointAt = function ( u ) {\n\n\tvar t = this.getUtoTmapping( u );\n\treturn this.getPoint( t );\n\n};\n\n// Get sequence of points using getPoint( t )\n\nTHREE.Curve.prototype.getPoints = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = 5;\n\n\tvar d, pts = [];\n\n\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\tpts.push( this.getPoint( d / divisions ) );\n\n\t}\n\n\treturn pts;\n\n};\n\n// Get sequence of points using getPointAt( u )\n\nTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = 5;\n\n\tvar d, pts = [];\n\n\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\tpts.push( this.getPointAt( d / divisions ) );\n\n\t}\n\n\treturn pts;\n\n};\n\n// Get total curve arc length\n\nTHREE.Curve.prototype.getLength = function () {\n\n\tvar lengths = this.getLengths();\n\treturn lengths[ lengths.length - 1 ];\n\n};\n\n// Get list of cumulative segment lengths\n\nTHREE.Curve.prototype.getLengths = function ( divisions ) {\n\n\tif ( ! divisions ) divisions = (this.__arcLengthDivisions) ? (this.__arcLengthDivisions): 200;\n\n\tif ( this.cacheArcLengths\n\t\t&& ( this.cacheArcLengths.length == divisions + 1 )\n\t\t&& ! this.needsUpdate) {\n\n\t\t//console.log( \"cached\", this.cacheArcLengths );\n\t\treturn this.cacheArcLengths;\n\n\t}\n\n\tthis.needsUpdate = false;\n\n\tvar cache = [];\n\tvar current, last = this.getPoint( 0 );\n\tvar p, sum = 0;\n\n\tcache.push( 0 );\n\n\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\tcurrent = this.getPoint ( p / divisions );\n\t\tsum += current.distanceTo( last );\n\t\tcache.push( sum );\n\t\tlast = current;\n\n\t}\n\n\tthis.cacheArcLengths = cache;\n\n\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\n\n};\n\n\nTHREE.Curve.prototype.updateArcLengths = function() {\n\tthis.needsUpdate = true;\n\tthis.getLengths();\n};\n\n// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equi distance\n\nTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\n\n\tvar arcLengths = this.getLengths();\n\n\tvar i = 0, il = arcLengths.length;\n\n\tvar targetArcLength; // The targeted u distance value to get\n\n\tif ( distance ) {\n\n\t\ttargetArcLength = distance;\n\n\t} else {\n\n\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t}\n\n\t//var time = Date.now();\n\n\t// binary search for the index with largest value smaller than target u distance\n\n\tvar low = 0, high = il - 1, comparison;\n\n\twhile ( low <= high ) {\n\n\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\tif ( comparison < 0 ) {\n\n\t\t\tlow = i + 1;\n\t\t\tcontinue;\n\n\t\t} else if ( comparison > 0 ) {\n\n\t\t\thigh = i - 1;\n\t\t\tcontinue;\n\n\t\t} else {\n\n\t\t\thigh = i;\n\t\t\tbreak;\n\n\t\t\t// DONE\n\n\t\t}\n\n\t}\n\n\ti = high;\n\n\t//console.log('b' , i, low, high, Date.now()- time);\n\n\tif ( arcLengths[ i ] == targetArcLength ) {\n\n\t\tvar t = i / ( il - 1 );\n\t\treturn t;\n\n\t}\n\n\t// we could get finer grain at lengths, or use simple interpolatation between two points\n\n\tvar lengthBefore = arcLengths[ i ];\n    var lengthAfter = arcLengths[ i + 1 ];\n\n    var segmentLength = lengthAfter - lengthBefore;\n\n    // determine where we are between the 'before' and 'after' points\n\n    var segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n    // add that fractional amount to t\n\n    var t = ( i + segmentFraction ) / ( il -1 );\n\n\treturn t;\n\n};\n\n// Returns a unit vector tangent at t\n// In case any sub curve does not implement its tangent derivation,\n// 2 points a small delta apart will be used to find its gradient\n// which seems to give a reasonable approximation\n\nTHREE.Curve.prototype.getTangent = function( t ) {\n\n\tvar delta = 0.0001;\n\tvar t1 = t - delta;\n\tvar t2 = t + delta;\n\n\t// Capping in case of danger\n\n\tif ( t1 < 0 ) t1 = 0;\n\tif ( t2 > 1 ) t2 = 1;\n\n\tvar pt1 = this.getPoint( t1 );\n\tvar pt2 = this.getPoint( t2 );\n\n\tvar vec = pt2.clone().sub(pt1);\n\treturn vec.normalize();\n\n};\n\n\nTHREE.Curve.prototype.getTangentAt = function ( u ) {\n\n\tvar t = this.getUtoTmapping( u );\n\treturn this.getTangent( t );\n\n};\n\n\n\n\n\n/**************************************************************\n *\tUtils\n **************************************************************/\n\nTHREE.Curve.Utils = {\n\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\n\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\n\n\t},\n\n\t// Puay Bing, thanks for helping with this derivative!\n\n\ttangentCubicBezier: function (t, p0, p1, p2, p3 ) {\n\n\t\treturn - 3 * p0 * (1 - t) * (1 - t)  +\n\t\t\t3 * p1 * (1 - t) * (1-t) - 6 *t *p1 * (1-t) +\n\t\t\t6 * t *  p2 * (1-t) - 3 * t * t * p2 +\n\t\t\t3 * t * t * p3;\n\n\t},\n\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\n\n\t\t// To check if my formulas are correct\n\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3 − 3t^2 + 1\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3 − 2t^2 + t\n\t\tvar h01 = - 6 * t * t + 6 * t; \t// − 2t3 + 3t2\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3 − t2\n\n\t\treturn h00 + h10 + h01 + h11;\n\n\t},\n\n\t// Catmull-Rom\n\n\tinterpolate: function( p0, p1, p2, p3, t ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\n\t\tvar t2 = t * t;\n\t\tvar t3 = t * t2;\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t}\n\n};\n\n\n// TODO: Transformation for Curves?\n\n/**************************************************************\n *\t3D Curves\n **************************************************************/\n\n// A Factory method for creating new curve subclasses\n\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\n\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\n\tconstructor.prototype.constructor = constructor;\n\tconstructor.prototype.getPoint = getPointFunc;\n\n\treturn constructor;\n\n};\n\n// File:src/extras/core/CurvePath.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nTHREE.CurvePath = function () {\n\n\tthis.curves = [];\n\tthis.bends = [];\n\t\n\tthis.autoClose = false; // Automatically closes the path\n};\n\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\nTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\n\nTHREE.CurvePath.prototype.add = function ( curve ) {\n\n\tthis.curves.push( curve );\n\n};\n\nTHREE.CurvePath.prototype.checkConnection = function() {\n\t// TODO\n\t// If the ending of curve is not connected to the starting\n\t// or the next curve, then, this is not a real path\n};\n\nTHREE.CurvePath.prototype.closePath = function() {\n\t// TODO Test\n\t// and verify for vector3 (needs to implement equals)\n\t// Add a line curve if start and end of lines are not connected\n\tvar startPoint = this.curves[0].getPoint(0);\n\tvar endPoint = this.curves[this.curves.length-1].getPoint(1);\n\t\n\tif (! startPoint.equals(endPoint)) {\n\t\tthis.curves.push( new THREE.LineCurve(endPoint, startPoint) );\n\t}\n\t\n};\n\n// To get accurate point with reference to\n// entire path distance at time t,\n// following has to be done:\n\n// 1. Length of each sub path have to be known\n// 2. Locate and identify type of curve\n// 3. Get t for the curve\n// 4. Return curve.getPointAt(t')\n\nTHREE.CurvePath.prototype.getPoint = function( t ) {\n\n\tvar d = t * this.getLength();\n\tvar curveLengths = this.getCurveLengths();\n\tvar i = 0, diff, curve;\n\n\t// To think about boundaries points.\n\n\twhile ( i < curveLengths.length ) {\n\n\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\tdiff = curveLengths[ i ] - d;\n\t\t\tcurve = this.curves[ i ];\n\n\t\t\tvar u = 1 - diff / curve.getLength();\n\n\t\t\treturn curve.getPointAt( u );\n\n\t\t\tbreak;\n\t\t}\n\n\t\ti ++;\n\n\t}\n\n\treturn null;\n\n\t// loop where sum != 0, sum > d , sum+1 <d\n\n};\n\n/*\nTHREE.CurvePath.prototype.getTangent = function( t ) {\n};*/\n\n\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n// getPoint() depends on getLength\n\nTHREE.CurvePath.prototype.getLength = function() {\n\n\tvar lens = this.getCurveLengths();\n\treturn lens[ lens.length - 1 ];\n\n};\n\n// Compute lengths and cache them\n// We cannot overwrite getLengths() because UtoT mapping uses it.\n\nTHREE.CurvePath.prototype.getCurveLengths = function() {\n\n\t// We use cache values if curves and cache array are same length\n\n\tif ( this.cacheLengths && this.cacheLengths.length == this.curves.length ) {\n\n\t\treturn this.cacheLengths;\n\n\t};\n\n\t// Get length of subsurve\n\t// Push sums into cached array\n\n\tvar lengths = [], sums = 0;\n\tvar i, il = this.curves.length;\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tsums += this.curves[ i ].getLength();\n\t\tlengths.push( sums );\n\n\t}\n\n\tthis.cacheLengths = lengths;\n\n\treturn lengths;\n\n};\n\n\n\n// Returns min and max coordinates\n\nTHREE.CurvePath.prototype.getBoundingBox = function () {\n\n\tvar points = this.getPoints();\n\n\tvar maxX, maxY, maxZ;\n\tvar minX, minY, minZ;\n\n\tmaxX = maxY = Number.NEGATIVE_INFINITY;\n\tminX = minY = Number.POSITIVE_INFINITY;\n\n\tvar p, i, il, sum;\n\n\tvar v3 = points[0] instanceof THREE.Vector3;\n\n\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\n\n\tfor ( i = 0, il = points.length; i < il; i ++ ) {\n\n\t\tp = points[ i ];\n\n\t\tif ( p.x > maxX ) maxX = p.x;\n\t\telse if ( p.x < minX ) minX = p.x;\n\n\t\tif ( p.y > maxY ) maxY = p.y;\n\t\telse if ( p.y < minY ) minY = p.y;\n\n\t\tif ( v3 ) {\n\n\t\t\tif ( p.z > maxZ ) maxZ = p.z;\n\t\t\telse if ( p.z < minZ ) minZ = p.z;\n\n\t\t}\n\n\t\tsum.add( p );\n\n\t}\n\n\tvar ret = {\n\n\t\tminX: minX,\n\t\tminY: minY,\n\t\tmaxX: maxX,\n\t\tmaxY: maxY\n\n\t};\n\n\tif ( v3 ) {\n\n\t\tret.maxZ = maxZ;\n\t\tret.minZ = minZ;\n\n\t}\n\n\treturn ret;\n\n};\n\n/**************************************************************\n *\tCreate Geometries Helpers\n **************************************************************/\n\n/// Generate geometry from path points (for Line or Points objects)\n\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\n\n\tvar pts = this.getPoints( divisions, true );\n\treturn this.createGeometry( pts );\n\n};\n\n// Generate geometry from equidistance sampling along the path\n\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\n\n\tvar pts = this.getSpacedPoints( divisions, true );\n\treturn this.createGeometry( pts );\n\n};\n\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\n\n\tvar geometry = new THREE.Geometry();\n\n\tfor ( var i = 0; i < points.length; i ++ ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0) );\n\n\t}\n\n\treturn geometry;\n\n};\n\n\n/**************************************************************\n *\tBend / Wrap Helper Methods\n **************************************************************/\n\n// Wrap path / Bend modifiers?\n\nTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\n\n\tthis.bends.push( bendpath );\n\n};\n\nTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\n\n\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\n\tvar i, il;\n\n\tif ( ! bends ) {\n\n\t\tbends = this.bends;\n\n\t}\n\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\n\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\n\n\t}\n\n\treturn oldPts;\n\n};\n\nTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\n\n\tvar oldPts = this.getSpacedPoints( segments );\n\n\tvar i, il;\n\n\tif ( ! bends ) {\n\n\t\tbends = this.bends;\n\n\t}\n\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\n\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\n\n\t}\n\n\treturn oldPts;\n\n};\n\n// This returns getPoints() bend/wrapped around the contour of a path.\n// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\n\nTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\n\n\tvar bounds = this.getBoundingBox();\n\n\tvar i, il, p, oldX, oldY, xNorm;\n\n\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\n\n\t\tp = oldPts[ i ];\n\n\t\toldX = p.x;\n\t\toldY = p.y;\n\n\t\txNorm = oldX / bounds.maxX;\n\n\t\t// If using actual distance, for length > path, requires line extrusions\n\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\n\n\t\txNorm = path.getUtoTmapping( xNorm, oldX );\n\n\t\t// check for out of bounds?\n\n\t\tvar pathPt = path.getPoint( xNorm );\n\t\tvar normal = path.getTangent( xNorm );\n\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\n\n\t\tp.x = pathPt.x + normal.x;\n\t\tp.y = pathPt.y + normal.y;\n\n\t}\n\n\treturn oldPts;\n\n};\n\n\n// File:src/extras/core/Gyroscope.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Gyroscope = function () {\n\n\tTHREE.Object3D.call( this );\n\n};\n\nTHREE.Gyroscope.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Gyroscope.prototype.constructor = THREE.Gyroscope;\n\nTHREE.Gyroscope.prototype.updateMatrixWorld = ( function () {\n\n\tvar translationObject = new THREE.Vector3();\n\tvar quaternionObject = new THREE.Quaternion();\n\tvar scaleObject = new THREE.Vector3();\n\n\tvar translationWorld = new THREE.Vector3();\n\tvar quaternionWorld = new THREE.Quaternion();\n\tvar scaleWorld = new THREE.Vector3();\n\n\treturn function ( force ) {\n\n\t\tthis.matrixAutoUpdate && this.updateMatrix();\n\n\t\t// update matrixWorld\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t\tthis.matrixWorld.decompose( translationWorld, quaternionWorld, scaleWorld );\n\t\t\t\tthis.matrix.decompose( translationObject, quaternionObject, scaleObject );\n\n\t\t\t\tthis.matrixWorld.compose( translationWorld, quaternionObject, scaleWorld );\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t}\n\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t};\n\t\n}() );\n\n// File:src/extras/core/Path.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n *\n **/\n\nTHREE.Path = function ( points ) {\n\n\tTHREE.CurvePath.call(this);\n\n\tthis.actions = [];\n\n\tif ( points ) {\n\n\t\tthis.fromPoints( points );\n\n\t}\n\n};\n\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\nTHREE.Path.prototype.constructor = THREE.Path;\n\nTHREE.PathActions = {\n\n\tMOVE_TO: 'moveTo',\n\tLINE_TO: 'lineTo',\n\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\n\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\n\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-rom spline\n\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\n\tELLIPSE: 'ellipse'\n};\n\n// TODO Clean up PATH API\n\n// Create path using straight lines to connect all points\n// - vectors: array of Vector2\n\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\n\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\n\n\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\n\n\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\n\n\t};\n\n};\n\n// startPath() endPath()?\n\nTHREE.Path.prototype.moveTo = function ( x, y ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.lineTo = function ( x, y ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\n\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\n\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\n\n};\n\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\n\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n//---\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\n\tArray.prototype.push.apply( npts, pts );\n\n\tvar curve = new THREE.SplineCurve( npts );\n\tthis.curves.push( curve );\n\n\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\n\n};\n\n// FUTURE: Change the API or follow canvas API?\n\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tthis.absarc(aX + x0, aY + y0, aRadius,\n\t\taStartAngle, aEndAngle, aClockwise );\n\n };\n\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\tthis.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n };\n\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar lastargs = this.actions[ this.actions.length - 1].args;\n\tvar x0 = lastargs[ lastargs.length - 2 ];\n\tvar y0 = lastargs[ lastargs.length - 1 ];\n\n\tthis.absellipse(aX + x0, aY + y0, xRadius, yRadius,\n\t\taStartAngle, aEndAngle, aClockwise );\n\n };\n\n\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\n\n\tvar args = Array.prototype.slice.call( arguments );\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\n\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise );\n\tthis.curves.push( curve );\n\n\tvar lastPoint = curve.getPoint(1);\n\targs.push(lastPoint.x);\n\targs.push(lastPoint.y);\n\n\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\n\n };\n\nTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\n\n\tif ( ! divisions ) divisions = 40;\n\n\tvar points = [];\n\n\tfor ( var i = 0; i < divisions; i ++ ) {\n\n\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\n\n\t}\n\n\t// if ( closedPath ) {\n\t//\n\t// \tpoints.push( points[ 0 ] );\n\t//\n\t// }\n\n\treturn points;\n\n};\n\n/* Return an array of vectors based on contour of the path */\n\nTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\n\n\tif (this.useSpacedPoints) {\n\t\tconsole.log('tata');\n\t\treturn this.getSpacedPoints( divisions, closedPath );\n\t}\n\n\tdivisions = divisions || 12;\n\n\tvar points = [];\n\n\tvar i, il, item, action, args;\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\n\t\tlaste, j,\n\t\tt, tx, ty;\n\n\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\n\n\t\titem = this.actions[ i ];\n\n\t\taction = item.action;\n\t\targs = item.args;\n\n\t\tswitch( action ) {\n\n\t\tcase THREE.PathActions.MOVE_TO:\n\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.LINE_TO:\n\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\n\n\t\t\tcpx  = args[ 2 ];\n\t\t\tcpy  = args[ 3 ];\n\n\t\t\tcpx1 = args[ 0 ];\n\t\t\tcpy1 = args[ 1 ];\n\n\t\t\tif ( points.length > 0 ) {\n\n\t\t\t\tlaste = points[ points.length - 1 ];\n\n\t\t\t\tcpx0 = laste.x;\n\t\t\t\tcpy0 = laste.y;\n\n\t\t\t} else {\n\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\n\n\t\t\t}\n\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\n\n\t\t\t\tt = j / divisions;\n\n\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\n\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\n\n\t\t\tcpx  = args[ 4 ];\n\t\t\tcpy  = args[ 5 ];\n\n\t\t\tcpx1 = args[ 0 ];\n\t\t\tcpy1 = args[ 1 ];\n\n\t\t\tcpx2 = args[ 2 ];\n\t\t\tcpy2 = args[ 3 ];\n\n\t\t\tif ( points.length > 0 ) {\n\n\t\t\t\tlaste = points[ points.length - 1 ];\n\n\t\t\t\tcpx0 = laste.x;\n\t\t\t\tcpy0 = laste.y;\n\n\t\t\t} else {\n\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\n\n\t\t\t}\n\n\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\n\n\t\t\t\tt = j / divisions;\n\n\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.CSPLINE_THRU:\n\n\t\t\tlaste = this.actions[ i - 1 ].args;\n\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\n\t\t\tvar spts = [ last ];\n\n\t\t\tvar n = divisions * args[ 0 ].length;\n\n\t\t\tspts = spts.concat( args[ 0 ] );\n\n\t\t\tvar spline = new THREE.SplineCurve( spts );\n\n\t\t\tfor ( j = 1; j <= n; j ++ ) {\n\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) ) ;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase THREE.PathActions.ARC:\n\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\n\t\t\t\taRadius = args[ 2 ],\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\n\t\t\t\taClockwise = !! args[ 5 ];\n\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\n\t\t\tvar angle;\n\t\t\tvar tdivisions = divisions * 2;\n\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\n\n\t\t\t\tt = j / tdivisions;\n\n\t\t\t\tif ( ! aClockwise ) {\n\n\t\t\t\t\tt = 1 - t;\n\n\t\t\t\t}\n\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\n\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\n\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\t//console.log(points);\n\n\t\t  break;\n\t\t  \n\t\tcase THREE.PathActions.ELLIPSE:\n\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\n\t\t\t\txRadius = args[ 2 ],\n\t\t\t\tyRadius = args[ 3 ],\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\n\t\t\t\taClockwise = !! args[ 6 ];\n\n\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\n\t\t\tvar angle;\n\t\t\tvar tdivisions = divisions * 2;\n\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\n\n\t\t\t\tt = j / tdivisions;\n\n\t\t\t\tif ( ! aClockwise ) {\n\n\t\t\t\t\tt = 1 - t;\n\n\t\t\t\t}\n\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\n\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\n\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\n\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\n\n\t\t\t}\n\n\t\t\t//console.log(points);\n\n\t\t  break;\n\n\t\t} // end switch\n\n\t}\n\n\n\n\t// Normalize to remove the closing point by default.\n\tvar lastPoint = points[ points.length - 1];\n\tvar EPSILON = 0.0000000001;\n\tif ( Math.abs(lastPoint.x - points[ 0 ].x) < EPSILON &&\n\t\t\t Math.abs(lastPoint.y - points[ 0 ].y) < EPSILON)\n\t\tpoints.splice( points.length - 1, 1);\n\tif ( closedPath ) {\n\n\t\tpoints.push( points[ 0 ] );\n\n\t}\n\n\treturn points;\n\n};\n\n//\n// Breaks path into shapes\n//\n//\tAssumptions (if parameter isCCW==true the opposite holds):\n//\t- solid shapes are defined clockwise (CW)\n//\t- holes are defined counterclockwise (CCW)\n//\n//\tIf parameter noHoles==true:\n//  - all subPaths are regarded as solid shapes\n//  - definition order CW/CCW has no relevance\n//\n\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\n\n\tfunction extractSubpaths( inActions ) {\n\n\t\tvar i, il, item, action, args;\n\n\t\tvar subPaths = [], lastPath = new THREE.Path();\n\n\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\n\n\t\t\titem = inActions[ i ];\n\n\t\t\targs = item.args;\n\t\t\taction = item.action;\n\n\t\t\tif ( action == THREE.PathActions.MOVE_TO ) {\n\n\t\t\t\tif ( lastPath.actions.length != 0 ) {\n\n\t\t\t\t\tsubPaths.push( lastPath );\n\t\t\t\t\tlastPath = new THREE.Path();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlastPath[ action ].apply( lastPath, args );\n\n\t\t}\n\n\t\tif ( lastPath.actions.length != 0 ) {\n\n\t\t\tsubPaths.push( lastPath );\n\n\t\t}\n\n\t\t// console.log(subPaths);\n\n\t\treturn\tsubPaths;\n\t}\n\n\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\tvar shapes = [];\n\n\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\n\n\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\tvar tmpShape = new THREE.Shape();\n\t\t\ttmpShape.actions = tmpPath.actions;\n\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\tshapes.push( tmpShape );\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\t};\n\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\t\tvar EPSILON = 0.0000000001;\n\n\t\tvar polyLen = inPolygon.length;\n\n\t\t// inPt on polygon contour => immediate success    or\n\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t//  with the horizontal line through inPt, left of inPt\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\tvar inside = false;\n\t\tfor( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\n\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\tif ( Math.abs(edgeDy) > EPSILON ) {\t\t\t// not parallel\n\t\t\t\tif ( edgeDy < 0 ) {\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\t\t\t\t}\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\tif ( inPt.y == edgeLowPt.y ) {\n\t\t\t\t\tif ( inPt.x == edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\t\t\t\t} else {\n\t\t\t\t\tvar perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\n\t\t\t\t\tif ( perpEdge == 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\t\t\t\t}\n\t\t\t} else {\t\t// parallel or colinear\n\t\t\t\tif ( inPt.y != edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t// egde lies on the same horizontal line as inPt\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t// continue;\n\t\t\t}\n\t\t}\n\n\t\treturn\tinside;\n\t}\n\n\n\tvar subPaths = extractSubpaths( this.actions );\n\tif ( subPaths.length == 0 ) return [];\n\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\tif ( subPaths.length == 1) {\n\n\t\ttmpPath = subPaths[0];\n\t\ttmpShape = new THREE.Shape();\n\t\ttmpShape.actions = tmpPath.actions;\n\t\ttmpShape.curves = tmpPath.curves;\n\t\tshapes.push( tmpShape );\n\t\treturn shapes;\n\n\t}\n\n\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t// console.log(\"Holes first\", holesFirst);\n\t\n\tvar betterShapeHoles = [];\n\tvar newShapes = [];\n\tvar newShapeHoles = [];\n\tvar mainIdx = 0;\n\tvar tmpPoints;\n\n\tnewShapes[mainIdx] = undefined;\n\tnewShapeHoles[mainIdx] = [];\n\n\tvar i, il;\n\n\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\n\n\t\ttmpPath = subPaths[ i ];\n\t\ttmpPoints = tmpPath.getPoints();\n\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\n\t\tsolid = isCCW ? ! solid : solid;\n\n\t\tif ( solid ) {\n\n\t\t\tif ( (! holesFirst ) && ( newShapes[mainIdx] ) )\tmainIdx ++;\n\n\t\t\tnewShapes[mainIdx] = { s: new THREE.Shape(), p: tmpPoints };\n\t\t\tnewShapes[mainIdx].s.actions = tmpPath.actions;\n\t\t\tnewShapes[mainIdx].s.curves = tmpPath.curves;\n\t\t\t\n\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\tnewShapeHoles[mainIdx] = [];\n\n\t\t\t//console.log('cw', i);\n\n\t\t} else {\n\n\t\t\tnewShapeHoles[mainIdx].push( { h: tmpPath, p: tmpPoints[0] } );\n\n\t\t\t//console.log('ccw', i);\n\n\t\t}\n\n\t}\n\n\t// only Holes? -> probably all Shapes with wrong orientation\n\tif ( ! newShapes[0] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\tif ( newShapes.length > 1 ) {\n\t\tvar ambigious = false;\n\t\tvar toChange = [];\n\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\t\t\tbetterShapeHoles[sIdx] = [];\n\t\t}\n\t\tfor (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\t\t\tvar sh = newShapes[sIdx];\n\t\t\tvar sho = newShapeHoles[sIdx];\n\t\t\tfor (var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\t\t\t\tvar ho = sho[hIdx];\n\t\t\t\tvar hole_unassigned = true;\n\t\t\t\tfor (var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[s2Idx].p ) ) {\n\t\t\t\t\t\tif ( sIdx != s2Idx )\t\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\tif ( hole_unassigned ) {\n\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\tbetterShapeHoles[s2Idx].push( ho );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tambigious = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( hole_unassigned ) { betterShapeHoles[sIdx].push( ho ); }\n\t\t\t}\n\t\t}\n\t\t// console.log(\"ambigious: \", ambigious);\n\t\tif ( toChange.length > 0 ) {\n\t\t\t// console.log(\"to change: \", toChange);\n\t\t\tif (! ambigious)\tnewShapeHoles = betterShapeHoles;\n\t\t}\n\t}\n\n\tvar tmpHoles, j, jl;\n\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\n\t\ttmpShape = newShapes[i].s;\n\t\tshapes.push( tmpShape );\n\t\ttmpHoles = newShapeHoles[i];\n\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\t\t\ttmpShape.holes.push( tmpHoles[j].h );\n\t\t}\n\t}\n\n\t//console.log(\"shape\", shapes);\n\n\treturn shapes;\n\n};\n\n// File:src/extras/core/Shape.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nTHREE.Shape = function () {\n\n\tTHREE.Path.apply( this, arguments );\n\tthis.holes = [];\n\n};\n\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\nTHREE.Shape.prototype.constructor = THREE.Shape;\n\n// Convenience method to return ExtrudeGeometry\n\nTHREE.Shape.prototype.extrude = function ( options ) {\n\n\tvar extruded = new THREE.ExtrudeGeometry( this, options );\n\treturn extruded;\n\n};\n\n// Convenience method to return ShapeGeometry\n\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\n\n\tvar geometry = new THREE.ShapeGeometry( this, options );\n\treturn geometry;\n\n};\n\n// Get points of holes\n\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\n\n\tvar i, il = this.holes.length, holesPts = [];\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\n\n\t}\n\n\treturn holesPts;\n\n};\n\n// Get points of holes (spaced by regular distance)\n\nTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\n\n\tvar i, il = this.holes.length, holesPts = [];\n\n\tfor ( i = 0; i < il; i ++ ) {\n\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\n\n\t}\n\n\treturn holesPts;\n\n};\n\n\n// Get points of shape and holes (keypoints based on segments parameter)\n\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\n\n\treturn {\n\n\t\tshape: this.getTransformedPoints( divisions ),\n\t\tholes: this.getPointsHoles( divisions )\n\n\t};\n\n};\n\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\n\n\tif (this.useSpacedPoints) {\n\t\treturn this.extractAllSpacedPoints(divisions);\n\t}\n\n\treturn this.extractAllPoints(divisions);\n\n};\n\n//\n// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\n//\n// \treturn {\n//\n// \t\tshape: this.transform( bend, divisions ),\n// \t\tholes: this.getPointsHoles( divisions, bend )\n//\n// \t};\n//\n// };\n\n// Get points of shape and holes (spaced by regular distance)\n\nTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\n\n\treturn {\n\n\t\tshape: this.getTransformedSpacedPoints( divisions ),\n\t\tholes: this.getSpacedPointsHoles( divisions )\n\n\t};\n\n};\n\n/**************************************************************\n *\tUtils\n **************************************************************/\n\nTHREE.Shape.Utils = {\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\n\t\t\t// inOtherPt needs to be colinear to the inSegment\n\t\t\tif ( inSegPt1.x != inSegPt2.x ) {\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\n\t\t\t\t} else {\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\n\t\t\t\t} else {\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\n\t\t\tvar EPSILON = 0.0000000001;\n\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\n\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\n\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\n\n\t\t\tif ( Math.abs(limit) > EPSILON ) {\t\t\t// not parallel\n\n\t\t\t\tvar perpSeg2;\n\t\t\t\tif ( limit > 0 ) {\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\n\t\t\t\t} else {\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\n\t\t\t\t}\n\n\t\t\t\t// i.e. to reduce rounding errors\n\t\t\t\t// intersection at endpoint of segment#1?\n\t\t\t\tif ( perpSeg2 == 0 ) {\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\n\t\t\t\t}\n\t\t\t\tif ( perpSeg2 == limit ) {\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 == 0 ) || ( perpSeg1 == limit ) ) )\t\treturn [];\n\t\t\t\t\treturn  [ inSeg1Pt2 ];\n\t\t\t\t}\n\t\t\t\t// intersection at endpoint of segment#2?\n\t\t\t\tif ( perpSeg1 == 0 )\t\treturn  [ inSeg2Pt1 ];\n\t\t\t\tif ( perpSeg1 == limit )\treturn  [ inSeg2Pt2 ];\n\n\t\t\t\t// return real intersection point\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\n\n\t\t\t} else {\t\t// parallel or colinear\n\t\t\t\tif ( ( perpSeg1 != 0 ) ||\n\t\t\t\t\t ( seg2dy * seg1seg2dx != seg2dx * seg1seg2dy ) ) \t\t\treturn [];\n\n\t\t\t\t// they are collinear or degenerate\n\t\t\t\tvar seg1Pt = ( (seg1dx == 0) && (seg1dy == 0) );\t// segment1 ist just a point?\n\t\t\t\tvar seg2Pt = ( (seg2dx == 0) && (seg2dy == 0) );\t// segment2 ist just a point?\n\t\t\t\t// both segments are points\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\n\t\t\t\t\tif ( (inSeg1Pt1.x != inSeg2Pt1.x) ||\n\t\t\t\t\t\t (inSeg1Pt1.y != inSeg2Pt1.y) )\t\treturn [];   \t// they are distinct  points\n\t\t\t\t\treturn  [ inSeg1Pt1 ];                 \t\t\t\t\t// they are the same point\n\t\t\t\t}\n\t\t\t\t// segment#1  is a single point\n\t\t\t\tif ( seg1Pt ) {\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\n\t\t\t\t\treturn  [ inSeg1Pt1 ];\n\t\t\t\t}\n\t\t\t\t// segment#2  is a single point\n\t\t\t\tif ( seg2Pt ) {\n\t\t\t\t\tif (! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\n\t\t\t\t\treturn  [ inSeg2Pt1 ];\n\t\t\t\t}\n\n\t\t\t\t// they are collinear segments, which might overlap\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\n\t\t\t\tif (seg1dx != 0) {\t\t// the segments are NOT on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\n\t\t\t\t\t}\n\t\t\t\t} else {\t\t\t\t// the segments are on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\n\t\t\t\t\tif ( seg1maxVal == seg2minVal )\t{\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg2min ];\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\n\t\t\t\t} else {\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\n\t\t\t\t\tif ( seg1minVal == seg2maxVal )\t{\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg1min ];\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\n\t\t\t// The order of legs is important\n\n\t\t\tvar EPSILON = 0.0000000001;\n\n\t\t\t// translation of all points, so that Vertex is at (0,0)\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\n\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\n\n\t\t\tif ( Math.abs(from2toAngle) > EPSILON ) {\t\t\t// angle != 180 deg.\n\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\n\n\t\t\t\tif ( from2toAngle > 0 ) {\t\t\t\t// main angle < 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\n\t\t\t\t} else {\t\t\t\t\t\t\t\t// main angle > 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\n\t\t\t\t}\n\t\t\t} else {\t\t\t\t\t\t\t\t\t\t// angle == 180 deg.\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\n\t\t\t\treturn\t( from2otherAngle > 0 );\n\t\t\t}\n\t\t}\n\n\n\t\tfunction removeHoles( contour, holes ) {\n\n\t\t\tvar shape = contour.concat(); // work on this shape\n\t\t\tvar hole;\n\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\n\t\t\t\t// Check if hole point lies within angle around shape point\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\n\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\n\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\n\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[inShapeIdx], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[inHoleIdx] );\n\t\t\t\tif (! insideAngle ) {\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\n\t\t\t\t\treturn\tfalse;\n\t\t\t\t}\n\n\t\t\t\t// Check if shape point lies within angle around hole point\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\n\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\n\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\n\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[inHoleIdx], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[inShapeIdx] );\n\t\t\t\tif (! insideAngle ) {\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\n\t\t\t\t\treturn\tfalse;\n\t\t\t\t}\n\n\t\t\t\treturn\ttrue;\n\t\t\t}\n\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\n\t\t\t\t// checks for intersections with shape edges\n\t\t\t\tvar sIdx, nextIdx, intersection;\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\n\t\t\t\t\tnextIdx = sIdx+1; nextIdx %= shape.length;\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[sIdx], shape[nextIdx], true );\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\t\t\t\t}\n\n\t\t\t\treturn\tfalse;\n\t\t\t}\n\n\t\t\tvar indepHoles = [];\n\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\n\t\t\t\t// checks for intersections with hole edges\n\t\t\t\tvar ihIdx, chkHole,\n\t\t\t\t\thIdx, nextIdx, intersection;\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\n\t\t\t\t\tchkHole = holes[indepHoles[ihIdx]];\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\n\t\t\t\t\t\tnextIdx = hIdx+1; nextIdx %= chkHole.length;\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[hIdx], chkHole[nextIdx], true );\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn\tfalse;\n\t\t\t}\n\n\t\t\tvar holeIndex, shapeIndex,\n\t\t\t\tshapePt, holePt,\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\n\t\t\t\ttmpShape1, tmpShape2,\n\t\t\t\ttmpHole1, tmpHole2;\n\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tindepHoles.push( h );\n\n\t\t\t}\n\n\t\t\tvar minShapeIndex = 0;\n\t\t\tvar counter = indepHoles.length * 2;\n\t\t\twhile ( indepHoles.length > 0 ) {\n\t\t\t\tcounter --;\n\t\t\t\tif ( counter < 0 ) {\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// search for shape-vertex and hole-vertex,\n\t\t\t\t// which can be connected without intersections\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\n\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\n\t\t\t\t\tholeIndex\t= - 1;\n\n\t\t\t\t\t// search for hole which can be reached without intersections\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\n\t\t\t\t\t\tholeIdx = indepHoles[h];\n\n\t\t\t\t\t\t// prevent multiple checks\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\n\t\t\t\t\t\tif ( failedCuts[cutKey] !== undefined )\t\t\tcontinue;\n\n\t\t\t\t\t\thole = holes[holeIdx];\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\n\t\t\t\t\t\t\tif (! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\n\n\t\t\t\t\t\t\tholeIndex = h2;\n\t\t\t\t\t\t\tindepHoles.splice(h,1);\n\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex+1 );\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex+1 );\n\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\n\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\n\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t\t\tfailedCuts[cutKey] = true;\t\t\t// remember failure\n\t\t\t\t\t}\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn shape; \t\t\t/* shape with no holes */\n\t\t}\n\n\n\t\tvar i, il, f, face,\n\t\t\tkey, index,\n\t\t\tallPointsMap = {};\n\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\n\n\t\tvar allpoints = contour.concat();\n\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tArray.prototype.push.apply( allpoints, holes[h] );\n\n\t\t}\n\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\n\n\t\t// prepare all points map\n\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\n\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\n\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\n\n\t\t\t\tconsole.log( \"Duplicate point\", key );\n\n\t\t\t}\n\n\t\t\tallPointsMap[ key ] = i;\n\n\t\t}\n\n\t\t// remove holes by cutting paths to holes and adding them to the shape\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\n\n\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\n\t\t//console.log( \"triangles\",triangles, triangles.length );\n\n\t\t// check all face vertices against all points map\n\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\n\n\t\t\tface = triangles[ i ];\n\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\n\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\n\n\t\t\t\tindex = allPointsMap[ key ];\n\n\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\tface[ f ] = index;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles.concat();\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\n\n\t},\n\n\t// Bezier Curves formulas obtained from\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\n\n\t// Quad Bezier Functions\n\n\tb2p0: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * p;\n\n\t},\n\n\tb2p1: function ( t, p ) {\n\n\t\treturn 2 * ( 1 - t ) * t * p;\n\n\t},\n\n\tb2p2: function ( t, p ) {\n\n\t\treturn t * t * p;\n\n\t},\n\n\tb2: function ( t, p0, p1, p2 ) {\n\n\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\n\n\t},\n\n\t// Cubic Bezier Functions\n\n\tb3p0: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn k * k * k * p;\n\n\t},\n\n\tb3p1: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn 3 * k * k * t * p;\n\n\t},\n\n\tb3p2: function ( t, p ) {\n\n\t\tvar k = 1 - t;\n\t\treturn 3 * k * t * t * p;\n\n\t},\n\n\tb3p3: function ( t, p ) {\n\n\t\treturn t * t * t * p;\n\n\t},\n\n\tb3: function ( t, p0, p1, p2, p3 ) {\n\n\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\n\n\t}\n\n};\n\n\n// File:src/extras/curves/LineCurve.js\n\n/**************************************************************\n *\tLine\n **************************************************************/\n\nTHREE.LineCurve = function ( v1, v2 ) {\n\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\n\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\n\n\tvar point = this.v2.clone().sub(this.v1);\n\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\n\n\treturn this.getPoint( u );\n\n};\n\nTHREE.LineCurve.prototype.getTangent = function( t ) {\n\n\tvar tangent = this.v2.clone().sub(this.v1);\n\n\treturn tangent.normalize();\n\n};\n\n// File:src/extras/curves/QuadraticBezierCurve.js\n\n/**************************************************************\n *\tQuadratic Bezier curve\n **************************************************************/\n\n\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\n\n\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\n\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\n\n\treturn vector;\n\n};\n\n\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\n\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\n\n\t// returns unit vector\n\n\treturn vector.normalize();\n\n};\n\n// File:src/extras/curves/CubicBezierCurve.js\n\n/**************************************************************\n *\tCubic Bezier curve\n **************************************************************/\n\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\tthis.v3 = v3;\n\n};\n\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\n\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar tx, ty;\n\n\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\n\treturn new THREE.Vector2( tx, ty );\n\n};\n\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar tx, ty;\n\n\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\n\tvar tangent = new THREE.Vector2( tx, ty );\n\ttangent.normalize();\n\n\treturn tangent;\n\n};\n\n// File:src/extras/curves/SplineCurve.js\n\n/**************************************************************\n *\tSpline curve\n **************************************************************/\n\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\n\n\tthis.points = ( points == undefined ) ? [] : points;\n\n};\n\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\n\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\n\n\tvar points = this.points;\n\tvar point = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( point );\n\tvar weight = point - intPoint;\n\n\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ]\n\tvar point1 = points[ intPoint ]\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length -1 : intPoint + 1 ]\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length -1 : intPoint + 2 ]\n\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\n\treturn vector;\n\n};\n\n// File:src/extras/curves/EllipseCurve.js\n\n/**************************************************************\n *\tEllipse curve\n **************************************************************/\n\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tthis.aX = aX;\n\tthis.aY = aY;\n\n\tthis.xRadius = xRadius;\n\tthis.yRadius = yRadius;\n\n\tthis.aStartAngle = aStartAngle;\n\tthis.aEndAngle = aEndAngle;\n\n\tthis.aClockwise = aClockwise;\n\n};\n\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\n\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\n\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\n\n\tvar angle;\n\n\tif ( this.aClockwise === true ) {\n\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\n\n\t} else {\n\n\t\tangle = this.aStartAngle + t * deltaAngle;\n\n\t}\n\t\n\tvar vector = new THREE.Vector2();\n\n\tvector.x = this.aX + this.xRadius * Math.cos( angle );\n\tvector.y = this.aY + this.yRadius * Math.sin( angle );\n\n\treturn vector;\n\n};\n\n// File:src/extras/curves/ArcCurve.js\n\n/**************************************************************\n *\tArc curve\n **************************************************************/\n\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n};\n\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\n\n// File:src/extras/curves/LineCurve3.js\n\n/**************************************************************\n *\tLine3D\n **************************************************************/\n\nTHREE.LineCurve3 = THREE.Curve.create(\n\n\tfunction ( v1, v2 ) {\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\n\t\tvector.multiplyScalar( t );\n\t\tvector.add( this.v1 );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/QuadraticBezierCurve3.js\n\n/**************************************************************\n *\tQuadratic Bezier 3D curve\n **************************************************************/\n\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\n\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/CubicBezierCurve3.js\n\n/**************************************************************\n *\tCubic Bezier 3D curve\n **************************************************************/\n\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2, v3 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\n\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\n\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/SplineCurve3.js\n\n/**************************************************************\n *\tSpline 3D curve\n **************************************************************/\n\n\nTHREE.SplineCurve3 = THREE.Curve.create(\n\n\tfunction ( points /* array of Vector3 */) {\n\n\t\tthis.points = ( points == undefined ) ? [] : points;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 1 ) * t;\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\n\t\tvar point1 = points[ intPoint ];\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/ClosedSplineCurve3.js\n\n/**************************************************************\n *\tClosed Spline 3D curve\n **************************************************************/\n\n\nTHREE.ClosedSplineCurve3 = THREE.Curve.create(\n\n\tfunction ( points /* array of Vector3 */) {\n\n\t\tthis.points = ( points == undefined ) ? [] : points;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\n\n\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\n\t\tvar point1 = points[ ( intPoint     ) % points.length ];\n\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\n\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/animation/AnimationHandler.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n */\n\nTHREE.AnimationHandler = {\n\n\tLINEAR: 0,\n\tCATMULLROM: 1,\n\tCATMULLROM_FORWARD: 2,\n\n\t//\n\n\tadd: function () { console.warn( 'THREE.AnimationHandler.add() has been deprecated.' ); },\n\tget: function () { console.warn( 'THREE.AnimationHandler.get() has been deprecated.' ); },\n\tremove: function () { console.warn( 'THREE.AnimationHandler.remove() has been deprecated.' ); },\n\n\t//\n\n\tanimations: [],\n\n\tinit: function ( data ) {\n\n\t\tif ( data.initialized === true ) return data;\n\n\t\t// loop through all keys\n\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t// remove minus times\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\n\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\n\n\t\t\t\t}\n\n\t\t\t\t// create quaternions\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\n\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// prepare morph target keys\n\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\n\n\t\t\t\t// get all used\n\n\t\t\t\tvar usedMorphTargets = {};\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\n\n\n\t\t\t\t// set all used on all frames\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tvar influences = {};\n\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\n\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\n\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// remove all keys that are on the same time\n\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\n\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\n\t\t\t\t\tk --;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// set index\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdata.initialized = true;\n\n\t\treturn data;\n\n\t},\n\n\tparse: function ( root ) {\n\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\n\n\t\t\thierarchy.push( root );\n\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\n\n\t\t};\n\n\t\t// setup hierarchy\n\n\t\tvar hierarchy = [];\n\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\n\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\n\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tparseRecurseHierarchy( root, hierarchy );\n\n\t\t}\n\n\t\treturn hierarchy;\n\n\t},\n\n\tplay: function ( animation ) {\n\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\n\n\t\t\tthis.animations.push( animation );\n\n\t\t}\n\n\t},\n\n\tstop: function ( animation ) {\n\n\t\tvar index = this.animations.indexOf( animation );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.animations.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( deltaTimeMS ) {\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].resetBlendWeights( );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/extras/animation/Animation.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Animation = function ( root, data ) {\n\n\tthis.root = root;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\n\n\tthis.currentTime = 0;\n\tthis.timeScale = 1;\n\n\tthis.isPlaying = false;\n\tthis.loop = true;\n\tthis.weight = 0;\n\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\n\n};\n\n\nTHREE.Animation.prototype.keyTypes = [ \"pos\", \"rot\", \"scl\" ];\n\n\nTHREE.Animation.prototype.play = function ( startTime, weight ) {\n\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\tthis.weight = weight !== undefined ? weight: 1;\n\n\tthis.isPlaying = true;\n\n\tthis.reset();\n\n\tTHREE.AnimationHandler.play( this );\n\n};\n\n\nTHREE.Animation.prototype.stop = function() {\n\n\tthis.isPlaying = false;\n\n\tTHREE.AnimationHandler.stop( this );\n\n};\n\nTHREE.Animation.prototype.reset = function () {\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\n\t\tif ( object.animationCache === undefined ) {\n\n\t\t\tobject.animationCache = {\n\t\t\t\tanimations: {},\n\t\t\t\tblending: {\n\t\t\t\t\tpositionWeight: 0.0,\n\t\t\t\t\tquaternionWeight: 0.0,\n\t\t\t\t\tscaleWeight: 0.0\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif ( object.animationCache.animations[this.data.name] === undefined ) {\n\n\t\t\tobject.animationCache.animations[this.data.name] = {};\n\t\t\tobject.animationCache.animations[this.data.name].prevKey = { pos: 0, rot: 0, scl: 0 };\n\t\t\tobject.animationCache.animations[this.data.name].nextKey = { pos: 0, rot: 0, scl: 0 };\n\t\t\tobject.animationCache.animations[this.data.name].originalMatrix = object.matrix;\n\n\t\t}\n\n\t\tvar animationCache = object.animationCache.animations[this.data.name];\n\n\t\t// Get keys to match our current time\n\n\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\tvar type = this.keyTypes[ t ];\n\n\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\tprevKey = nextKey;\n\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t}\n\n\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Animation.prototype.resetBlendWeights = function () {\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\n\t\tif ( object.animationCache !== undefined ) {\n\n\t\t\tobject.animationCache.blending.positionWeight = 0.0;\n\t\t\tobject.animationCache.blending.quaternionWeight = 0.0;\n\t\t\tobject.animationCache.blending.scaleWeight = 0.0;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.Animation.prototype.update = (function(){\n\n\tvar points = [];\n\tvar target = new THREE.Vector3();\n\tvar newVector = new THREE.Vector3();\n\tvar newQuat = new THREE.Quaternion();\n\n\t// Catmull-Rom spline\n\n\tvar interpolateCatmullRom = function ( points, scale ) {\n\n\t\tvar c = [], v3 = [],\n\t\tpoint, intPoint, weight, w2, w3,\n\t\tpa, pb, pc, pd;\n\n\t\tpoint = ( points.length - 1 ) * scale;\n\t\tintPoint = Math.floor( point );\n\t\tweight = point - intPoint;\n\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\tc[ 1 ] = intPoint;\n\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\n\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\n\n\t\tpa = points[ c[ 0 ] ];\n\t\tpb = points[ c[ 1 ] ];\n\t\tpc = points[ c[ 2 ] ];\n\t\tpd = points[ c[ 3 ] ];\n\n\t\tw2 = weight * weight;\n\t\tw3 = weight * w2;\n\n\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\n\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\n\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\n\n\t\treturn v3;\n\n\t};\n\n\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t};\n\n\treturn function ( delta ) {\n\n\t\tif ( this.isPlaying === false ) return;\n\n\t\tthis.currentTime += delta * this.timeScale;\n\n\t\tif ( this.weight === 0 )\n\t\t\treturn;\n\n\t\t//\n\n\t\tvar duration = this.data.length;\n\n\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\n\n\t\t\tif ( this.loop ) {\n\n\t\t\t\tthis.currentTime %= duration;\n\n\t\t\t\tif ( this.currentTime < 0 )\n\t\t\t\t\tthis.currentTime += duration;\n\n\t\t\t\tthis.reset();\n\n\t\t\t} else {\n\n\t\t\t\tthis.stop();\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\t\tvar object = this.hierarchy[ h ];\n\t\t\tvar animationCache = object.animationCache.animations[this.data.name];\n\t\t\tvar blending = object.animationCache.blending;\n\n\t\t\t// loop through pos/rot/scl\n\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\t\t// get keys\n\n\t\t\t\tvar type    = this.keyTypes[ t ];\n\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\n\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\n\n\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\n\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\n\n\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t\t\t}\n\n\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\n\n\t\t\t\tvar prevXYZ = prevKey[ type ];\n\t\t\t\tvar nextXYZ = nextKey[ type ];\n\n\t\t\t\tif ( scale < 0 ) scale = 0;\n\t\t\t\tif ( scale > 1 ) scale = 1;\n\n\t\t\t\t// interpolate\n\n\t\t\t\tif ( type === \"pos\" ) {\n\n\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\n\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\t\t// blend\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\n\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\n\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\n\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\n\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\n\n\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\n\n\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t\t// blend\n\n\t\t\t\t\t\tvar vector = object.position;\n\t\t\t\t\t\t\n\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\n\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\n\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\n\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\n\n\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\n\t\t\t\t\t\t\ttarget.sub( vector );\n\t\t\t\t\t\t\ttarget.y = 0;\n\t\t\t\t\t\t\ttarget.normalize();\n\n\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\n\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( type === \"rot\" ) {\n\n\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\n\n\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\n\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\n\n\t\t\t\t\t\tobject.quaternion.copy(newQuat);\n\t\t\t\t\t\tblending.quaternionWeight = this.weight;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\n\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\n\t\t\t\t\t\tblending.quaternionWeight += this.weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( type === \"scl\" ) {\n\n\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\n\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\n\t\t\t\t\tblending.scaleWeight += this.weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n})();\n\n\n\n\n\n// Get next key with\n\nTHREE.Animation.prototype.getNextKeyWith = function ( type, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\n\n\t} else {\n\n\t\tkey = key % keys.length;\n\n\t}\n\n\tfor ( ; key < keys.length; key ++ ) {\n\n\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn this.data.hierarchy[ h ].keys[ 0 ];\n\n};\n\n// Get previous key with\n\nTHREE.Animation.prototype.getPrevKeyWith = function ( type, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\n\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\tkey = key > 0 ? key : 0;\n\n\t} else {\n\n\t\tkey = key >= 0 ? key : key + keys.length;\n\n\t}\n\n\n\tfor ( ; key >= 0; key -- ) {\n\n\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\n\n};\n\n// File:src/extras/animation/KeyFrameAnimation.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author khang duong\n * @author erik kitson\n */\n\nTHREE.KeyFrameAnimation = function ( data ) {\n\n\tthis.root = data.node;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\n\tthis.currentTime = 0;\n\tthis.timeScale = 0.001;\n\tthis.isPlaying = false;\n\tthis.isPaused = true;\n\tthis.loop = true;\n\n\t// initialize to first keyframes\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar keys = this.data.hierarchy[h].keys,\n\t\t\tsids = this.data.hierarchy[h].sids,\n\t\t\tobj = this.hierarchy[h];\n\n\t\tif ( keys.length && sids ) {\n\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\n\n\t\t\t\tvar sid = sids[ s ],\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\n\n\t\t\t\tif ( next ) {\n\n\t\t\t\t\tnext.apply( sid );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobj.matrixAutoUpdate = false;\n\t\t\tthis.data.hierarchy[h].node.updateMatrix();\n\t\t\tobj.matrixWorldNeedsUpdate = true;\n\n\t\t}\n\n\t}\n\n};\n\n\nTHREE.KeyFrameAnimation.prototype.play = function ( startTime ) {\n\n\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\n\tif ( this.isPlaying === false ) {\n\n\t\tthis.isPlaying = true;\n\n\t\t// reset key cache\n\n\t\tvar h, hl = this.hierarchy.length,\n\t\t\tobject,\n\t\t\tnode;\n\n\t\tfor ( h = 0; h < hl; h ++ ) {\n\n\t\t\tobject = this.hierarchy[ h ];\n\t\t\tnode = this.data.hierarchy[ h ];\n\n\t\t\tif ( node.animationCache === undefined ) {\n\n\t\t\t\tnode.animationCache = {};\n\t\t\t\tnode.animationCache.prevKey = null;\n\t\t\t\tnode.animationCache.nextKey = null;\n\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\n\n\t\t\t}\n\n\t\t\tvar keys = this.data.hierarchy[h].keys;\n\n\t\t\tif (keys.length) {\n\n\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\n\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\n\n\t\t\t\tthis.startTime = Math.min( keys[0].time, this.startTime );\n\t\t\t\tthis.endTime = Math.max( keys[keys.length - 1].time, this.endTime );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.update( 0 );\n\n\t}\n\n\tthis.isPaused = false;\n\n\tTHREE.AnimationHandler.play( this );\n\n};\n\n\nTHREE.KeyFrameAnimation.prototype.stop = function() {\n\n\tthis.isPlaying = false;\n\tthis.isPaused  = false;\n\n\tTHREE.AnimationHandler.stop( this );\n\n\t// reset JIT matrix and remove cache\n\n\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\n\t\t\n\t\tvar obj = this.hierarchy[ h ];\n\t\tvar node = this.data.hierarchy[ h ];\n\n\t\tif ( node.animationCache !== undefined ) {\n\n\t\t\tvar original = node.animationCache.originalMatrix;\n\n\t\t\toriginal.copy( obj.matrix );\n\t\t\tobj.matrix = original;\n\n\t\t\tdelete node.animationCache;\n\n\t\t}\n\n\t}\n\n};\n\n\n// Update\n\nTHREE.KeyFrameAnimation.prototype.update = function ( delta ) {\n\n\tif ( this.isPlaying === false ) return;\n\n\tthis.currentTime += delta * this.timeScale;\n\n\t//\n\n\tvar duration = this.data.length;\n\n\tif ( this.loop === true && this.currentTime > duration ) {\n\n\t\tthis.currentTime %= duration;\n\n\t}\n\n\tthis.currentTime = Math.min( this.currentTime, duration );\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar object = this.hierarchy[ h ];\n\t\tvar node = this.data.hierarchy[ h ];\n\n\t\tvar keys = node.keys,\n\t\t\tanimationCache = node.animationCache;\n\n\n\t\tif ( keys.length ) {\n\n\t\t\tvar prevKey = animationCache.prevKey;\n\t\t\tvar nextKey = animationCache.nextKey;\n\n\t\t\tif ( nextKey.time <= this.currentTime ) {\n\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tanimationCache.prevKey = prevKey;\n\t\t\t\tanimationCache.nextKey = nextKey;\n\n\t\t\t}\n\n\t\t\tif ( nextKey.time >= this.currentTime ) {\n\n\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\n\n\t\t\t} else {\n\n\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\n\n\t\t\t}\n\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\n\t\t\tobject.matrixWorldNeedsUpdate = true;\n\n\t\t}\n\n\t}\n\n};\n\n// Get next key with\n\nTHREE.KeyFrameAnimation.prototype.getNextKeyWith = function( sid, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\tkey = key % keys.length;\n\n\tfor ( ; key < keys.length; key ++ ) {\n\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn keys[ 0 ];\n\n};\n\n// Get previous key with\n\nTHREE.KeyFrameAnimation.prototype.getPrevKeyWith = function( sid, h, key ) {\n\n\tvar keys = this.data.hierarchy[ h ].keys;\n\tkey = key >= 0 ? key : key + keys.length;\n\n\tfor ( ; key >= 0; key -- ) {\n\n\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\treturn keys[ key ];\n\n\t\t}\n\n\t}\n\n\treturn keys[ keys.length - 1 ];\n\n};\n\n// File:src/extras/animation/MorphAnimation.js\n\n/**\n * @author mrdoob / http://mrdoob.com\n * @author willy-vvu / http://willy-vvu.github.io\n */\n\nTHREE.MorphAnimation = function ( mesh ) {\n\n\tthis.mesh = mesh;\n\tthis.frames = mesh.morphTargetInfluences.length;\n\tthis.currentTime = 0;\n\tthis.duration = 1000;\n\tthis.loop = true;\n\tthis.lastFrame = 0;\n\tthis.currentFrame = 0;\n\n\tthis.isPlaying = false;\n\n};\n\nTHREE.MorphAnimation.prototype = {\n\n\tconstructor: THREE.MorphAnimation,\n\n\tplay: function () {\n\n\t\tthis.isPlaying = true;\n\n\t},\n\n\tpause: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tupdate: function ( delta ) {\n\n\t\tif ( this.isPlaying === false ) return;\n\n\t\tthis.currentTime += delta;\n\n\t\tif ( this.loop === true && this.currentTime > this.duration ) {\n\n\t\t\tthis.currentTime %= this.duration;\n\n\t\t}\n\n\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\n\n\t\tvar interpolation = this.duration / this.frames;\n\t\tvar frame = Math.floor( this.currentTime / interpolation );\n\n\t\tif ( frame != this.currentFrame ) {\n\n\t\t\tthis.mesh.morphTargetInfluences[ this.lastFrame ] = 0;\n\t\t\tthis.mesh.morphTargetInfluences[ this.currentFrame ] = 1;\n\t\t\tthis.mesh.morphTargetInfluences[ frame ] = 0;\n\n\t\t\tthis.lastFrame = this.currentFrame;\n\t\t\tthis.currentFrame = frame;\n\n\t\t}\n\n\t\tthis.mesh.morphTargetInfluences[ frame ] = ( this.currentTime % interpolation ) / interpolation;\n\t\tthis.mesh.morphTargetInfluences[ this.lastFrame ] = 1 - this.mesh.morphTargetInfluences[ frame ];\n\n\t}\n\n};\n\n// File:src/extras/geometries/BoxGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\n */\n\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.widthSegments = widthSegments || 1;\n\tthis.heightSegments = heightSegments || 1;\n\tthis.depthSegments = depthSegments || 1;\n\n\tvar scope = this;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\tvar depth_half = depth / 2;\n\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\n\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\n\n\t\tvar w, ix, iy,\n\t\tgridX = scope.widthSegments,\n\t\tgridY = scope.heightSegments,\n\t\twidth_half = width / 2,\n\t\theight_half = height / 2,\n\t\toffset = scope.vertices.length;\n\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\n\n\t\t\tw = 'z';\n\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\n\n\t\t\tw = 'y';\n\t\t\tgridY = scope.depthSegments;\n\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\n\n\t\t\tw = 'x';\n\t\t\tgridX = scope.depthSegments;\n\n\t\t}\n\n\t\tvar gridX1 = gridX + 1,\n\t\tgridY1 = gridY + 1,\n\t\tsegment_width = width / gridX,\n\t\tsegment_height = height / gridY,\n\t\tnormal = new THREE.Vector3();\n\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar vector = new THREE.Vector3();\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\n\t\t\t\tvector[ w ] = depth;\n\n\t\t\t\tscope.vertices.push( vector );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = ix + gridX1 * iy;\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\n\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\n\t\t\t\tface.normal.copy( normal );\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\n\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\tscope.faces.push( face );\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\n\t\t\t\tface.normal.copy( normal );\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\n\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\tscope.faces.push( face );\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.mergeVertices();\n\n};\n\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\n\n// File:src/extras/geometries/CircleGeometry.js\n\n/**\n * @author hughes\n */\n\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 50;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tvar i, uvs = [],\n\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\n\n\tthis.vertices.push(center);\n\tuvs.push( centerUV );\n\n\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\tvar vertex = new THREE.Vector3();\n\t\tvar segment = thetaStart + i / segments * thetaLength;\n\n\t\tvertex.x = radius * Math.cos( segment );\n\t\tvertex.y = radius * Math.sin( segment );\n\n\t\tthis.vertices.push( vertex );\n\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\n\n\t}\n\n\tvar n = new THREE.Vector3( 0, 0, 1 );\n\n\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\n\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\n\n// File:src/extras/geometries/CubeGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nTHREE.CubeGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tconsole.warn( 'THREE.CubeGeometry has been renamed to THREE.BoxGeometry.' );\n\treturn new THREE.BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments );\n\n };\n\n// File:src/extras/geometries/CylinderGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n\theight = height !== undefined ? height : 100;\n\n\tradialSegments = radialSegments || 8;\n\theightSegments = heightSegments || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\n\n\tvar heightHalf = height / 2;\n\n\tvar x, y, vertices = [], uvs = [];\n\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\tvar verticesRow = [];\n\t\tvar uvsRow = [];\n\n\t\tvar v = y / heightSegments;\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\n\t\t\tvertex.y = - v * height + heightHalf;\n\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tverticesRow.push( this.vertices.length - 1 );\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\n\n\t\t}\n\n\t\tvertices.push( verticesRow );\n\t\tuvs.push( uvsRow );\n\n\t}\n\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\n\tvar na, nb;\n\n\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\tif ( radiusTop !== 0 ) {\n\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\n\n\t\t} else {\n\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\n\n\t\t}\n\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\n\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x ];\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\n\n\t\t\tvar n1 = na.clone();\n\t\t\tvar n2 = na.clone();\n\t\t\tvar n3 = nb.clone();\n\t\t\tvar n4 = nb.clone();\n\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\n\n\t\t}\n\n\t}\n\n\t// top cap\n\n\tif ( openEnded === false && radiusTop > 0 ) {\n\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ 0 ][ x ];\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\n\t\t\tvar v3 = this.vertices.length - 1;\n\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\n\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t}\n\n\t}\n\n\t// bottom cap\n\n\tif ( openEnded === false && radiusBottom > 0 ) {\n\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\n\t\t\tvar v2 = vertices[ heightSegments ][ x ];\n\t\t\tvar v3 = this.vertices.length - 1;\n\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\n\n\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\n\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\n\n// File:src/extras/geometries/ExtrudeGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segements of extrude spline too\n *  amount: <int>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\n *\n *  material: <int> // material index for front and back faces\n *  extrudeMaterial: <int> // material index for extrusion and beveled faces\n *  uvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\n\n\tif ( typeof( shapes ) === \"undefined\" ) {\n\t\tshapes = [];\n\t\treturn;\n\t}\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tshapes = shapes instanceof Array ? shapes : [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n\t// can't really use automatic vertex normals\n\t// as then front and back sides get smoothed too\n\t// should do separate smoothing just for sides\n\n\t//this.computeVertexNormals();\n\n\t//console.log( \"took\", ( Date.now() - startTime ) );\n\n};\n\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\n\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\tvar sl = shapes.length;\n\n\tfor ( var s = 0; s < sl; s ++ ) {\n\t\tvar shape = shapes[ s ];\n\t\tthis.addShape( shape, options );\n\t}\n};\n\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\n\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar steps = options.steps !== undefined ? options.steps : 1;\n\n\tvar extrudePath = options.extrudePath;\n\tvar extrudePts, extrudeByPath = false;\n\n\tvar material = options.material;\n\tvar extrudeMaterial = options.extrudeMaterial;\n\n\t// Use default WorldUVGenerator if no UV generators are specified.\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\n\n\tvar splineTube, binormal, normal, position2;\n\tif ( extrudePath ) {\n\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\textrudeByPath = true;\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t// SETUP TNB variables\n\n\t\t// Reuse TNB from TubeGeomtry for now.\n\t\t// TODO1 - have a .isClosed in spline?\n\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames(extrudePath, steps, false);\n\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\tbinormal = new THREE.Vector3();\n\t\tnormal = new THREE.Vector3();\n\t\tposition2 = new THREE.Vector3();\n\n\t}\n\n\t// Safeguards if bevels are not enabled\n\n\tif ( ! bevelEnabled ) {\n\n\t\tbevelSegments = 0;\n\t\tbevelThickness = 0;\n\t\tbevelSize = 0;\n\n\t}\n\n\t// Variables initalization\n\n\tvar ahole, h, hl; // looping of holes\n\tvar scope = this;\n\tvar bevelPoints = [];\n\n\tvar shapesOffset = this.vertices.length;\n\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices ) ;\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\n\n\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\n\n\t}\n\n\n\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\n\n\t/* Vertices */\n\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\tvertices = vertices.concat( ahole );\n\n\t}\n\n\n\tfunction scalePt2 ( pt, vec, size ) {\n\n\t\tif ( ! vec ) console.log( \"die\" );\n\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t}\n\n\tvar b, bs, t, z,\n\t\tvert, vlen = vertices.length,\n\t\tface, flen = faces.length,\n\t\tcont, clen = contour.length;\n\n\n\t// Find directions for point movement\n\n\tvar RAD_TO_DEGREES = 180 / Math.PI;\n\n\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\tvar EPSILON = 0.0000000001;\n\t\t\n\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t//   shiftet by 1 unit (length of normalized vector) to the left\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t//\n\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\t\t\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\n\n\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\n\t\t\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\t\t\n\t\t// check for colinear edges\n\t\tvar colinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\t\t\n\t\tif ( Math.abs( colinear0 ) > EPSILON ) {\t\t// not colinear\n\t\t\t\n\t\t\t// length of vectors for normalizing\n\t\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\t\t\t\n\t\t\t// shift adjacent points by unit vectors to the left\n\t\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\t\t\t\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\t\n\t\t\t// scaling factor for v_prev to intersection point\n\t\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\t\n\t\t\t// vector from inPt to intersection point\n\t\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\t\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t//  but prevent crazy spikes\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y )\n\t\t\tif ( v_trans_lensq <= 2 ) {\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\n\t\t\t} else {\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\t\t\t}\n\t\t\t\n\t\t} else {\t\t// handle special case of colinear edges\n\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\n\t\t\tif ( v_prev_x > EPSILON ) {\n\t\t\t\tif ( v_next_x > EPSILON ) { direction_eq = true; }\n\t\t\t} else {\n\t\t\t\tif ( v_prev_x < - EPSILON ) {\n\t\t\t\t\tif ( v_next_x < - EPSILON ) { direction_eq = true; }\n\t\t\t\t} else {\n\t\t\t\t\tif ( Math.sign(v_prev_y) == Math.sign(v_next_y) ) { direction_eq = true; }\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( direction_eq ) {\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\tv_trans_y =  v_prev_x;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\t\t\t} else {\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\t\t\t}\n\n\t\t}\n\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t}\n\n\n\tvar contourMovements = [];\n\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\tif ( j === il ) j = 0;\n\t\tif ( k === il ) k = 0;\n\n\t\t//  (j)---(i)---(k)\n\t\t// console.log('i,j,k', i, j , k)\n\n\t\tvar pt_i = contour[ i ];\n\t\tvar pt_j = contour[ j ];\n\t\tvar pt_k = contour[ k ];\n\n\t\tcontourMovements[ i ]= getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t}\n\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\toneHoleMovements = [];\n\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\toneHoleMovements[ i ]= getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t}\n\n\t\tholesMovements.push( oneHoleMovements );\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t}\n\n\n\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\n\t\t//z = bevelThickness * t;\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI/2 ) ) ; // curved\n\t\t//bs = bevelSize * t ; // linear\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tbs = bevelSize;\n\n\t// Back facing vertices\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\tif ( ! extrudeByPath ) {\n\n\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t} else {\n\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\tnormal.copy( splineTube.normals[0] ).multiplyScalar(vert.x);\n\t\t\tbinormal.copy( splineTube.binormals[0] ).multiplyScalar(vert.y);\n\n\t\t\tposition2.copy( extrudePts[0] ).add(normal).add(binormal);\n\n\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t}\n\n\t}\n\n\t// Add stepped vertices...\n\t// Including front facing vertices\n\n\tvar s;\n\n\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[s] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[s] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[s] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Add bevel segments planes\n\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\n\t\tbs = bevelSize * Math.sin ( t * Math.PI/2 ) ;\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/* Faces */\n\n\t// Top and bottom faces\n\n\tbuildLidFaces();\n\n\t// Sides faces\n\n\tbuildSideFaces();\n\n\n\t/////  Internal functions\n\n\tfunction buildLidFaces() {\n\n\t\tif ( bevelEnabled ) {\n\n\t\t\tvar layer = 0 ; // steps + 1\n\t\t\tvar offset = vlen * layer;\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ]+ offset, face[ 1 ]+ offset, face[ 0 ] + offset );\n\n\t\t\t}\n\n\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\toffset = vlen * layer;\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t}\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// Create faces for the z-sides of the shape\n\n\tfunction buildSideFaces() {\n\n\t\tvar layeroffset = 0;\n\t\tsidewalls( contour, layeroffset );\n\t\tlayeroffset += contour.length;\n\n\t\tfor ( h = 0, hl = holes.length;  h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t//, true\n\t\t\tlayeroffset += ahole.length;\n\n\t\t}\n\n\t}\n\n\tfunction sidewalls( contour, layeroffset ) {\n\n\t\tvar j, k;\n\t\ti = contour.length;\n\n\t\twhile ( --i >= 0 ) {\n\n\t\t\tj = i;\n\t\t\tk = i - 1;\n\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\n\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\n\tfunction v( x, y, z ) {\n\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\n\n\t}\n\n\tfunction f3( a, b, c ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\n\t\t// normal, color, material\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\n\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\n\n \t\tscope.faceVertexUvs[ 0 ].push( uvs );\n\n\t}\n\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\t\td += shapesOffset;\n\n \t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, extrudeMaterial ) );\n \t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, extrudeMaterial ) );\n\n \t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\n\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\n \t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\n\n\t}\n\n};\n\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\n\t\treturn [\n\t\t\tnew THREE.Vector2( a.x, a.y ),\n\t\t\tnew THREE.Vector2( b.x, b.y ),\n\t\t\tnew THREE.Vector2( c.x, c.y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\t\tvar d = vertices[ indexD ];\n\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\n\t\t\t];\n\t\t} else {\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\n\t\t\t];\n\t\t}\n\t}\n};\n\n// File:src/extras/geometries/ShapeGeometry.js\n\n/**\n * @author jonobr1 / http://jonobr1.com\n *\n * Creates a one-sided polygonal geometry from a path shape. Similar to\n * ExtrudeGeometry.\n *\n * parameters = {\n *\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\n *\n *\tmaterial: <int> // material index for front and back faces\n *\tuvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ShapeGeometry = function ( shapes, options ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( shapes instanceof Array === false ) shapes = [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\n\n/**\n * Add an array of shapes to THREE.ShapeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tthis.addShape( shapes[ i ], options );\n\n\t}\n\n\treturn this;\n\n};\n\n/**\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tif ( options === undefined ) options = {};\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar material = options.material;\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\n\n\t//\n\n\tvar i, l, hole, s;\n\n\tvar shapesOffset = this.vertices.length;\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\n\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\t\thole = holes[ i ];\n\n\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\n\n\t\t\t\tholes[ i ] = hole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false;\n\n\t}\n\n\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\n\n\t// Vertices\n\n\tvar contour = vertices;\n\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\thole = holes[ i ];\n\t\tvertices = vertices.concat( hole );\n\n\t}\n\n\t//\n\n\tvar vert, vlen = vertices.length;\n\tvar face, flen = faces.length;\n\tvar cont, clen = contour.length;\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = vertices[ i ];\n\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\n\n\t}\n\n\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\tface = faces[ i ];\n\n\t\tvar a = face[ 0 ] + shapesOffset;\n\t\tvar b = face[ 1 ] + shapesOffset;\n\t\tvar c = face[ 2 ] + shapesOffset;\n\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\n\n\t}\n\n};\n\n// File:src/extras/geometries/LatheGeometry.js\n\n/**\n * @author astrodud / http://astrodud.isgreat.org/\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://exocortex.com\n */\n\n// points - to create a closed torus, one must use a set of points \n//    like so: [ a, b, c, d, a ], see first is the same as last.\n// segments - the number of circumference segments to create\n// phiStart - the starting radian\n// phiLength - the radian (0 to 2*PI) range of the lathed section\n//    2*pi is a closed lathe, less than 2PI is a portion.\n\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = segments || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || 2 * Math.PI;\n\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\n\tvar inverseSegments = 1.0 / segments;\n\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\n\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tvar c = Math.cos( phi ),\n\t\t\ts = Math.sin( phi );\n\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\n\n\t\t\tvar pt = points[ j ];\n\n\t\t\tvar vertex = new THREE.Vector3();\n\n\t\t\tvertex.x = c * pt.x - s * pt.y;\n\t\t\tvertex.y = s * pt.x + c * pt.y;\n\t\t\tvertex.z = pt.z;\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t}\n\n\t}\n\n\tvar np = points.length;\n\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\n\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\n\n\t\t\tvar base = j + np * i;\n\t\t\tvar a = base;\n\t\t\tvar b = base + np;\n\t\t\tvar c = base + 1 + np;\n\t\t\tvar d = base + 1;\n\n\t\t\tvar u0 = i * inverseSegments;\n\t\t\tvar v0 = j * inversePointLength;\n\t\t\tvar u1 = u0 + inverseSegments;\n\t\t\tvar v1 = v0 + inversePointLength;\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\n\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\n\t\t\t\tnew THREE.Vector2( u0, v1 )\n\n\t\t\t] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\n\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\n\t\t\t\tnew THREE.Vector2( u0, v1 )\n\n\t\t\t] );\n\n\n\t\t}\n\n\t}\n\n\tthis.mergeVertices();\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\n\n// File:src/extras/geometries/PlaneGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tconsole.info( 'THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint.' );\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\n};\n\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\n\n// File:src/extras/geometries/PlaneBufferGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = widthSegments || 1;\n\tvar gridY = heightSegments || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\n\n\tvar offset = 0;\n\tvar offset2 = 0;\n\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices[ offset     ] = x;\n\t\t\tvertices[ offset + 1 ] = - y;\n\n\t\t\tnormals[ offset + 2 ] = 1;\n\n\t\t\tuvs[ offset2     ] = ix / gridX;\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\n\n\t\t\toffset += 3;\n\t\t\toffset2 += 2;\n\n\t\t}\n\n\t}\n\n\toffset = 0;\n\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\n\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\tindices[ offset     ] = a;\n\t\t\tindices[ offset + 1 ] = b;\n\t\t\tindices[ offset + 2 ] = d;\n\n\t\t\tindices[ offset + 3 ] = b;\n\t\t\tindices[ offset + 4 ] = c;\n\t\t\tindices[ offset + 5 ] = d;\n\n\t\t\toffset += 6;\n\n\t\t}\n\n\t}\n\n\tthis.addAttribute( 'index', new THREE.BufferAttribute( indices, 1 ) );\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n};\n\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\n\n// File:src/extras/geometries/RingGeometry.js\n\n/**\n * @author Kaleb Murphy\n */\n\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 0;\n\touterRadius = outerRadius || 50;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\n\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) { // concentric circles inside ring\n\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) { // number of segments per circle\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tthis.vertices.push( vertex );\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\n\t\t}\n\n\t\tradius += radiusStep;\n\n\t}\n\n\tvar n = new THREE.Vector3( 0, 0, 1 );\n\n\tfor ( i = 0; i < phiSegments; i ++ ) { // concentric circles inside ring\n\n\t\tvar thetaSegment = i * (thetaSegments + 1);\n\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) { // number of segments per circle\n\n\t\t\tvar segment = o + thetaSegment;\n\n\t\t\tvar v1 = segment;\n\t\t\tvar v2 = segment + thetaSegments + 1;\n\t\t\tvar v3 = segment + thetaSegments + 2;\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\n\n\t\t\tv1 = segment;\n\t\t\tv2 = segment + thetaSegments + 2;\n\t\t\tv3 = segment + 1;\n\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ]);\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\n\n\n// File:src/extras/geometries/SphereGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength \n\t};\n\n\tradius = radius || 50;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar x, y, vertices = [], uvs = [];\n\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\tvar verticesRow = [];\n\t\tvar uvsRow = [];\n\n\t\tfor ( x = 0; x <= widthSegments; x ++ ) {\n\n\t\t\tvar u = x / widthSegments;\n\t\t\tvar v = y / heightSegments;\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tverticesRow.push( this.vertices.length - 1 );\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\n\n\t\t}\n\n\t\tvertices.push( verticesRow );\n\t\tuvs.push( uvsRow );\n\n\t}\n\n\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\tfor ( x = 0; x < widthSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\n\t\t\tvar v2 = vertices[ y ][ x ];\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\n\n\t\t\tvar n1 = this.vertices[ v1 ].clone().normalize();\n\t\t\tvar n2 = this.vertices[ v2 ].clone().normalize();\n\t\t\tvar n3 = this.vertices[ v3 ].clone().normalize();\n\t\t\tvar n4 = this.vertices[ v4 ].clone().normalize();\n\n\t\t\tvar uv1 = uvs[ y ][ x + 1 ].clone();\n\t\t\tvar uv2 = uvs[ y ][ x ].clone();\n\t\t\tvar uv3 = uvs[ y + 1 ][ x ].clone();\n\t\t\tvar uv4 = uvs[ y + 1 ][ x + 1 ].clone();\n\n\t\t\tif ( Math.abs( this.vertices[ v1 ].y ) === radius ) {\n\n\t\t\t\tuv1.x = ( uv1.x + uv2.x ) / 2;\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v3, v4, [ n1, n3, n4 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv3, uv4 ] );\n\n\t\t\t} else if ( Math.abs( this.vertices[ v3 ].y ) === radius ) {\n\n\t\t\t\tuv3.x = ( uv3.x + uv4.x ) / 2;\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\n\n\t\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\n\n// File:src/extras/geometries/TextGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * For creating 3D text geometry in three.js\n *\n * Text = 3D Text\n *\n * parameters = {\n *  size: \t\t\t<float>, \t// size of the text\n *  height: \t\t<float>, \t// thickness to extrude text\n *  curveSegments: \t<int>,\t\t// number of points on the curves\n *\n *  font: \t\t\t<string>,\t\t// font name\n *  weight: \t\t<string>,\t\t// font weight (normal, bold)\n *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\n *\n *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\n *  bevelThickness: <float>, \t\t// how deep into text bevel goes\n *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\n *  }\n *\n */\n\n/*\tUsage Examples\n\n\t// TextGeometry wrapper\n\n\tvar text3d = new TextGeometry( text, options );\n\n\t// Complete manner\n\n\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\n\tvar text3d = new ExtrudeGeometry( textShapes, options );\n\n*/\n\n\nTHREE.TextGeometry = function ( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\n\n\tthis.type = 'TextGeometry';\n\n};\n\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\n\n// File:src/extras/geometries/TorusGeometry.js\n\n/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\n */\n\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = radialSegments || 8;\n\ttubularSegments = tubularSegments || 6;\n\tarc = arc || Math.PI * 2;\n\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\n\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar u = i / tubularSegments * arc;\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tthis.vertices.push( vertex );\n\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\n\n\t\t}\n\n\t}\n\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\n\t\t\tthis.faces.push( face );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\n\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\n\t\t\tthis.faces.push( face );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\n\n// File:src/extras/geometries/TorusKnotGeometry.js\n\n/**\n * @author oosmoxiecode\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\n */\n\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tp: p,\n\t\tq: q,\n\t\theightScale: heightScale\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = radialSegments || 64;\n\ttubularSegments = tubularSegments || 8;\n\tp = p || 2;\n\tq = q || 3;\n\theightScale = heightScale || 1;\n\t\n\tvar grid = new Array( radialSegments );\n\tvar tang = new THREE.Vector3();\n\tvar n = new THREE.Vector3();\n\tvar bitan = new THREE.Vector3();\n\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\n\n\t\tgrid[ i ] = new Array( tubularSegments );\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\n\t\ttang.subVectors( p2, p1 );\n\t\tn.addVectors( p2, p1 );\n\n\t\tbitan.crossVectors( tang, n );\n\t\tn.crossVectors( bitan, tang );\n\t\tbitan.normalize();\n\t\tn.normalize();\n\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\n\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\n\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\tvar pos = new THREE.Vector3();\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\n\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\n\n\t\t}\n\n\t}\n\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\n\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\n\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\n\n\t\t\tvar a = grid[ i ][ j ];\n\t\t\tvar b = grid[ ip ][ j ];\n\t\t\tvar c = grid[ ip ][ jp ];\n\t\t\tvar d = grid[ i ][ jp ];\n\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\n\n\t\tvar cu = Math.cos( u );\n\t\tvar su = Math.sin( u );\n\t\tvar quOverP = in_q / in_p * u;\n\t\tvar cs = Math.cos( quOverP );\n\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\n\n\t\treturn new THREE.Vector3( tx, ty, tz );\n\n\t}\n\n};\n\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\n\n// File:src/extras/geometries/TubeGeometry.js\n\n/**\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n * @author jonobr1 / https://github.com/jonobr1\n *\n * Modified from the TorusKnotGeometry by @oosmoxiecode\n *\n * Creates a tube which extrudes along a 3d spline\n *\n * Uses parallel transport frames as described in\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n */\n\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\tsegments: segments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\tsegments = segments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\n\n\tvar grid = [];\n\n\tvar scope = this,\n\n\t\ttangent,\n\t\tnormal,\n\t\tbinormal,\n\n\t\tnumpoints = segments + 1,\n\n\t\tx, y, z,\n\t\ttx, ty, tz,\n\t\tu, v, r,\n\n\t\tcx, cy,\n\t\tpos, pos2 = new THREE.Vector3(),\n\t\ti, j,\n\t\tip, jp,\n\t\ta, b, c, d,\n\t\tuva, uvb, uvc, uvd;\n\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\n\t\ttangents = frames.tangents,\n\t\tnormals = frames.normals,\n\t\tbinormals = frames.binormals;\n\n\t// proxy internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\tfunction vert( x, y, z ) {\n\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\n\n\t}\n\n\t// consruct the grid\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tgrid[ i ] = [];\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\tpos = path.getPointAt( u );\n\n\t\ttangent = tangents[ i ];\n\t\tnormal = normals[ i ];\n\t\tbinormal = binormals[ i ];\n\n\t\tr = radius * taper( u );\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tv = j / radialSegments * 2 * Math.PI;\n\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\n\t\t\tcy = r * Math.sin( v );\n\n\t\t\tpos2.copy( pos );\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\n\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\n\n\t\t}\n\t}\n\n\n\t// construct the mesh\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tip = ( closed ) ? (i + 1) % segments : i + 1;\n\t\t\tjp = (j + 1) % radialSegments;\n\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\n\t\t\tb = grid[ ip ][ j ];\n\t\t\tc = grid[ ip ][ jp ];\n\t\t\td = grid[ i ][ jp ];\n\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\t}\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\n\nTHREE.TubeGeometry.NoTaper = function ( u ) {\n\n\treturn 1;\n\n};\n\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\n\n\treturn Math.sin( Math.PI * u );\n\n};\n\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\n\n\tvar\ttangent = new THREE.Vector3(),\n\t\tnormal = new THREE.Vector3(),\n\t\tbinormal = new THREE.Vector3(),\n\n\t\ttangents = [],\n\t\tnormals = [],\n\t\tbinormals = [],\n\n\t\tvec = new THREE.Vector3(),\n\t\tmat = new THREE.Matrix4(),\n\n\t\tnumpoints = segments + 1,\n\t\ttheta,\n\t\tepsilon = 0.0001,\n\t\tsmallest,\n\n\t\ttx, ty, tz,\n\t\ti, u, v;\n\n\n\t// expose internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\t// compute the tangent vectors for each segment on the path\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\ttangents[ i ] = path.getTangentAt( u );\n\t\ttangents[ i ].normalize();\n\n\t}\n\n\tinitialNormal3();\n\n\t/*\n\tfunction initialNormal1(lastBinormal) {\n\t\t// fixed start binormal. Has dangers of 0 vectors\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\t}\n\n\tfunction initialNormal2() {\n\n\t\t// This uses the Frenet-Serret formula for deriving binormal\n\t\tvar t2 = path.getTangentAt( epsilon );\n\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\n\t}\n\t*/\n\n\tfunction initialNormal3() {\n\t\t// select an initial normal vector perpenicular to the first tangent vector,\n\t\t// and in the direction of the smallest tangent xyz component\n\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tsmallest = Number.MAX_VALUE;\n\t\ttx = Math.abs( tangents[ 0 ].x );\n\t\tty = Math.abs( tangents[ 0 ].y );\n\t\ttz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= smallest ) {\n\t\t\tsmallest = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\t\t}\n\n\t\tif ( ty <= smallest ) {\n\t\t\tsmallest = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\t\t}\n\n\t\tif ( tz <= smallest ) {\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\t}\n\n\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\n\n\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\tnormals[ i ] = normals[ i-1 ].clone();\n\n\t\tbinormals[ i ] = binormals[ i-1 ].clone();\n\n\t\tvec.crossVectors( tangents[ i-1 ], tangents[ i ] );\n\n\t\tif ( vec.length() > epsilon ) {\n\n\t\t\tvec.normalize();\n\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i-1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t}\n\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t}\n\n\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\tif ( closed ) {\n\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints-1 ] ), - 1, 1 ) );\n\t\ttheta /= ( numpoints - 1 );\n\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints-1 ] ) ) > 0 ) {\n\n\t\t\ttheta = - theta;\n\n\t\t}\n\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\t\t// twist a little...\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t}\n};\n\n// File:src/extras/geometries/PolyhedronGeometry.js\n\n/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\tvar that = this;\n\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\n\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n\t}\n\n\tvar midpoints = [], p = this.vertices;\n\n\tvar faces = [];\n\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\n\n\t\tvar v1 = p[ indices[ i     ] ];\n\t\tvar v2 = p[ indices[ i + 1 ] ];\n\t\tvar v3 = p[ indices[ i + 2 ] ];\n\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\n\t}\n\n\tvar centroid = new THREE.Vector3();\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tsubdivide( faces[ i ], detail );\n\n\t}\n\n\n\t// Handle case when face straddles the seam\n\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\n\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\tvar x0 = uvs[ 0 ].x;\n\t\tvar x1 = uvs[ 1 ].x;\n\t\tvar x2 = uvs[ 2 ].x;\n\n\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\n\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\n\n\t\tif ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\n\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\n\n\t\t}\n\n\t}\n\n\n\t// Apply radius\n\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\tthis.vertices[ i ].multiplyScalar( radius );\n\n\t}\n\n\n\t// Merge vertices\n\n\tthis.mergeVertices();\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n\n\t// Project vector onto sphere's surface\n\n\tfunction prepare( vector ) {\n\n\t\tvar vertex = vector.normalize().clone();\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\n\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\n\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\n\n\t\treturn vertex;\n\n\t}\n\n\n\t// Approximate a curved face with recursively sub-divided triangles.\n\n\tfunction make( v1, v2, v3 ) {\n\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\t\tthat.faces.push( face );\n\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\n\n\t\tvar azi = azimuth( centroid );\n\n\t\tthat.faceVertexUvs[ 0 ].push( [\n\t\t\tcorrectUV( v1.uv, v1, azi ),\n\t\t\tcorrectUV( v2.uv, v2, azi ),\n\t\t\tcorrectUV( v3.uv, v3, azi )\n\t\t] );\n\n\t}\n\n\n\t// Analytically subdivide a face to the required detail level.\n\n\tfunction subdivide( face, detail ) {\n\n\t\tvar cols = Math.pow(2, detail);\n\t\tvar cells = Math.pow(4, detail);\n\t\tvar a = prepare( that.vertices[ face.a ] );\n\t\tvar b = prepare( that.vertices[ face.b ] );\n\t\tvar c = prepare( that.vertices[ face.c ] );\n\t\tvar v = [];\n\n\t\t// Construct all of the vertices for this subdivision.\n\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\n\t\t\tvar rows = cols - i;\n\n\t\t\tfor ( var j = 0; j <= rows; j ++) {\n\n\t\t\t\tif ( j == 0 && i == cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Construct all of the faces.\n\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\n\n\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 == 0 ) {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1],\n\t\t\t\t\t\tv[ i + 1 ][ k ],\n\t\t\t\t\t\tv[ i ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1 ],\n\t\t\t\t\t\tv[ i + 1][ k + 1],\n\t\t\t\t\t\tv[ i + 1 ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n\n\t// Texture fixing helper. Spheres have some odd behaviours.\n\n\tfunction correctUV( uv, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\n\t\treturn uv.clone();\n\n\t}\n\n\n};\n\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\n\n// File:src/extras/geometries/DodecahedronGeometry.js\n\n/**\n * @author Abe Pazos / https://hamoid.com\n */\n\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tvar r = 1 / t;\n\n\tvar vertices = [\n\n\t\t// (±1, ±1, ±1)\n\t\t-1, -1, -1,    -1, -1,  1,\n\t\t-1,  1, -1,    -1,  1,  1,\n\t\t 1, -1, -1,     1, -1,  1,\n\t\t 1,  1, -1,     1,  1,  1,\n\n\t\t// (0, ±1/φ, ±φ)\n\t\t 0, -r, -t,     0, -r,  t,\n\t\t 0,  r, -t,     0,  r,  t,\n\n\t\t// (±1/φ, ±φ, 0)\n\t\t-r, -t,  0,    -r,  t,  0,\n\t\t r, -t,  0,     r,  t,  0,\n\n\t\t// (±φ, 0, ±1/φ)\n\t\t-t,  0, -r,     t,  0, -r,\n\t\t-t,  0,  r,     t,  0,  r\n\t];\n\n\tvar indices = [\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n};\n\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\n\n// File:src/extras/geometries/IcosahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tvar vertices = [\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\n\t];\n\n\tvar indices = [\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n};\n\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\n\n// File:src/extras/geometries/OctahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.OctahedronGeometry = function ( radius, detail ) {\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tvar vertices = [\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\n\t];\n\n\tvar indices = [\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n};\n\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\n\n// File:src/extras/geometries/TetrahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\n\n\tvar vertices = [\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\n\t];\n\n\tvar indices = [\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n};\n\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\n\n// File:src/extras/geometries/ParametricGeometry.js\n\n/**\n * @author zz85 / https://github.com/zz85\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n *\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\n *\n */\n\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tvar verts = this.vertices;\n\tvar faces = this.faces;\n\tvar uvs = this.faceVertexUvs[ 0 ];\n\n\tvar i, il, j, p;\n\tvar u, v;\n\n\tvar stackCount = stacks + 1;\n\tvar sliceCount = slices + 1;\n\n\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\tv = i / stacks;\n\n\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\tu = j / slices;\n\n\t\t\tp = func( u, v );\n\t\t\tverts.push( p );\n\n\t\t}\n\t}\n\n\tvar a, b, c, d;\n\tvar uva, uvb, uvc, uvd;\n\n\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\ta = i * sliceCount + j;\n\t\t\tb = i * sliceCount + j + 1;\n\t\t\tc = (i + 1) * sliceCount + j + 1;\n\t\t\td = (i + 1) * sliceCount + j;\n\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\n\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\n\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\n\t}\n\n\t// console.log(this);\n\n\t// magic bullet\n\t// var diff = this.mergeVertices();\n\t// console.log('removed ', diff, ' vertices by merging');\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\n\n// File:src/extras/helpers/AxisHelper.js\n\n/**\n * @author sroucheray / http://sroucheray.org/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AxisHelper = function ( size ) {\n\n\tsize = size || 1;\n\n\tvar vertices = new Float32Array( [\n\t\t0, 0, 0,  size, 0, 0,\n\t\t0, 0, 0,  0, size, 0,\n\t\t0, 0, 0,  0, 0, size\n\t] );\n\n\tvar colors = new Float32Array( [\n\t\t1, 0, 0,  1, 0.6, 0,\n\t\t0, 1, 0,  0.6, 1, 0,\n\t\t0, 0, 1,  0, 0.6, 1\n\t] );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n};\n\nTHREE.AxisHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\n\n// File:src/extras/helpers/ArrowHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://exocortex.com\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nTHREE.ArrowHelper = ( function () {\n\n\tvar lineGeometry = new THREE.Geometry();\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\n\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\tconeGeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\n\n\treturn function ( dir, origin, length, color, headLength, headWidth ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tif ( color === undefined ) color = 0xffff00;\n\t\tif ( length === undefined ) length = 1;\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n}() );\n\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\n\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\n\n\tvar axis = new THREE.Vector3();\n\tvar radians;\n\n\treturn function ( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tradians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, length - headLength, 1 );\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.set( color );\n\tthis.cone.material.color.set( color );\n\n};\n\n// File:src/extras/helpers/BoxHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BoxHelper = function ( object ) {\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( 72 ), 3 ) );\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ), THREE.LinePieces );\n\n\tif ( object !== undefined ) {\n\n\t\tthis.update( object );\n\n\t}\n\n};\n\nTHREE.BoxHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\n\nTHREE.BoxHelper.prototype.update = function ( object ) {\n\n\tvar geometry = object.geometry;\n\n\tif ( geometry.boundingBox === null ) {\n\n\t\tgeometry.computeBoundingBox();\n\n\t}\n\n\tvar min = geometry.boundingBox.min;\n\tvar max = geometry.boundingBox.max;\n\n\t/*\n\t  5____4\n\t1/___0/|\n\t| 6__|_7\n\t2/___3/\n\n\t0: max.x, max.y, max.z\n\t1: min.x, max.y, max.z\n\t2: min.x, min.y, max.z\n\t3: max.x, min.y, max.z\n\t4: max.x, max.y, min.z\n\t5: min.x, max.y, min.z\n\t6: min.x, min.y, min.z\n\t7: max.x, min.y, min.z\n\t*/\n\n\tvar vertices = this.geometry.attributes.position.array;\n\n\tvertices[  0 ] = max.x; vertices[  1 ] = max.y; vertices[  2 ] = max.z;\n\tvertices[  3 ] = min.x; vertices[  4 ] = max.y; vertices[  5 ] = max.z;\n\n\tvertices[  6 ] = min.x; vertices[  7 ] = max.y; vertices[  8 ] = max.z;\n\tvertices[  9 ] = min.x; vertices[ 10 ] = min.y; vertices[ 11 ] = max.z;\n\n\tvertices[ 12 ] = min.x; vertices[ 13 ] = min.y; vertices[ 14 ] = max.z;\n\tvertices[ 15 ] = max.x; vertices[ 16 ] = min.y; vertices[ 17 ] = max.z;\n\n\tvertices[ 18 ] = max.x; vertices[ 19 ] = min.y; vertices[ 20 ] = max.z;\n\tvertices[ 21 ] = max.x; vertices[ 22 ] = max.y; vertices[ 23 ] = max.z;\n\n\t//\n\n\tvertices[ 24 ] = max.x; vertices[ 25 ] = max.y; vertices[ 26 ] = min.z;\n\tvertices[ 27 ] = min.x; vertices[ 28 ] = max.y; vertices[ 29 ] = min.z;\n\n\tvertices[ 30 ] = min.x; vertices[ 31 ] = max.y; vertices[ 32 ] = min.z;\n\tvertices[ 33 ] = min.x; vertices[ 34 ] = min.y; vertices[ 35 ] = min.z;\n\n\tvertices[ 36 ] = min.x; vertices[ 37 ] = min.y; vertices[ 38 ] = min.z;\n\tvertices[ 39 ] = max.x; vertices[ 40 ] = min.y; vertices[ 41 ] = min.z;\n\n\tvertices[ 42 ] = max.x; vertices[ 43 ] = min.y; vertices[ 44 ] = min.z;\n\tvertices[ 45 ] = max.x; vertices[ 46 ] = max.y; vertices[ 47 ] = min.z;\n\n\t//\n\n\tvertices[ 48 ] = max.x; vertices[ 49 ] = max.y; vertices[ 50 ] = max.z;\n\tvertices[ 51 ] = max.x; vertices[ 52 ] = max.y; vertices[ 53 ] = min.z;\n\n\tvertices[ 54 ] = min.x; vertices[ 55 ] = max.y; vertices[ 56 ] = max.z;\n\tvertices[ 57 ] = min.x; vertices[ 58 ] = max.y; vertices[ 59 ] = min.z;\n\n\tvertices[ 60 ] = min.x; vertices[ 61 ] = min.y; vertices[ 62 ] = max.z;\n\tvertices[ 63 ] = min.x; vertices[ 64 ] = min.y; vertices[ 65 ] = min.z;\n\n\tvertices[ 66 ] = max.x; vertices[ 67 ] = min.y; vertices[ 68 ] = max.z;\n\tvertices[ 69 ] = max.x; vertices[ 70 ] = min.y; vertices[ 71 ] = min.z;\n\n\tthis.geometry.attributes.position.needsUpdate = true;\n\n\tthis.geometry.computeBoundingSphere();\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\n// File:src/extras/helpers/BoundingBoxHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\n// a helper to show the world-axis-aligned bounding box for an object\n\nTHREE.BoundingBoxHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\n\n\tthis.object = object;\n\n\tthis.box = new THREE.Box3();\n\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\n\n};\n\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\n\nTHREE.BoundingBoxHelper.prototype.update = function () {\n\n\tthis.box.setFromObject( this.object );\n\n\tthis.box.size( this.scale );\n\n\tthis.box.center( this.position );\n\n};\n\n// File:src/extras/helpers/CameraHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n */\n\nTHREE.CameraHelper = function ( camera ) {\n\n\tvar geometry = new THREE.Geometry();\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\n\n\tvar pointMap = {};\n\n\t// colors\n\n\tvar hexFrustum = 0xffaa00;\n\tvar hexCone = 0xff0000;\n\tvar hexUp = 0x00aaff;\n\tvar hexTarget = 0xffffff;\n\tvar hexCross = 0x333333;\n\n\t// near\n\n\taddLine( \"n1\", \"n2\", hexFrustum );\n\taddLine( \"n2\", \"n4\", hexFrustum );\n\taddLine( \"n4\", \"n3\", hexFrustum );\n\taddLine( \"n3\", \"n1\", hexFrustum );\n\n\t// far\n\n\taddLine( \"f1\", \"f2\", hexFrustum );\n\taddLine( \"f2\", \"f4\", hexFrustum );\n\taddLine( \"f4\", \"f3\", hexFrustum );\n\taddLine( \"f3\", \"f1\", hexFrustum );\n\n\t// sides\n\n\taddLine( \"n1\", \"f1\", hexFrustum );\n\taddLine( \"n2\", \"f2\", hexFrustum );\n\taddLine( \"n3\", \"f3\", hexFrustum );\n\taddLine( \"n4\", \"f4\", hexFrustum );\n\n\t// cone\n\n\taddLine( \"p\", \"n1\", hexCone );\n\taddLine( \"p\", \"n2\", hexCone );\n\taddLine( \"p\", \"n3\", hexCone );\n\taddLine( \"p\", \"n4\", hexCone );\n\n\t// up\n\n\taddLine( \"u1\", \"u2\", hexUp );\n\taddLine( \"u2\", \"u3\", hexUp );\n\taddLine( \"u3\", \"u1\", hexUp );\n\n\t// target\n\n\taddLine( \"c\", \"t\", hexTarget );\n\taddLine( \"p\", \"c\", hexCross );\n\n\t// cross\n\n\taddLine( \"cn1\", \"cn2\", hexCross );\n\taddLine( \"cn3\", \"cn4\", hexCross );\n\n\taddLine( \"cf1\", \"cf2\", hexCross );\n\taddLine( \"cf3\", \"cf4\", hexCross );\n\n\tfunction addLine( a, b, hex ) {\n\n\t\taddPoint( a, hex );\n\t\taddPoint( b, hex );\n\n\t}\n\n\tfunction addPoint( id, hex ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\n\n\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\tpointMap[ id ] = [];\n\n\t\t}\n\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n\tthis.camera = camera;\n\tthis.matrix = camera.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.pointMap = pointMap;\n\n\tthis.update();\n\n};\n\nTHREE.CameraHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\n\nTHREE.CameraHelper.prototype.update = function () {\n\n\tvar geometry, pointMap;\n\t\n\tvar vector = new THREE.Vector3();\n\tvar camera = new THREE.Camera();\n\n\tvar setPoint = function ( point, x, y, z ) {\n\n\t\tvector.set( x, y, z ).unproject( camera );\n\n\t\tvar points = pointMap[ point ];\n\n\t\tif ( points !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\treturn function () {\n\n\t\tgeometry = this.geometry;\n\t\tpointMap = this.pointMap;\n\n\t\tvar w = 1, h = 1;\n\n\t\t// we need just camera projection matrix\n\t\t// world matrix must be identity\n\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\n\t\t// center / target\n\n\t\tsetPoint( \"c\", 0, 0, - 1 );\n\t\tsetPoint( \"t\", 0, 0,  1 );\n\n\t\t// near\n\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( \"f1\", - w, - h, 1 );\n\t\tsetPoint( \"f2\",   w, - h, 1 );\n\t\tsetPoint( \"f3\", - w,   h, 1 );\n\t\tsetPoint( \"f4\",   w,   h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\n\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\n\n\t\tgeometry.verticesNeedUpdate = true;\n\n\t};\n\n}();\n\n// File:src/extras/helpers/DirectionalLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.DirectionalLightHelper = function ( light, size ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tsize = size || 1;\n\n\tvar geometry = new THREE.Geometry();\n\tgeometry.vertices.push(\n\t\tnew THREE.Vector3( - size,   size, 0 ),\n\t\tnew THREE.Vector3(   size,   size, 0 ),\n\t\tnew THREE.Vector3(   size, - size, 0 ),\n\t\tnew THREE.Vector3( - size, - size, 0 ),\n\t\tnew THREE.Vector3( - size,   size, 0 )\n\t);\n\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tthis.lightPlane = new THREE.Line( geometry, material );\n\tthis.add( this.lightPlane );\n\n\tgeometry = new THREE.Geometry();\n\tgeometry.vertices.push(\n\t\tnew THREE.Vector3(),\n\t\tnew THREE.Vector3()\n\t);\n\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tthis.targetLine = new THREE.Line( geometry, material );\n\tthis.add( this.targetLine );\n\n\tthis.update();\n\n};\n\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\n\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\n\n\tthis.lightPlane.geometry.dispose();\n\tthis.lightPlane.material.dispose();\n\tthis.targetLine.geometry.dispose();\n\tthis.targetLine.material.dispose();\n};\n\nTHREE.DirectionalLightHelper.prototype.update = function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\tvar v3 = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\tv3.subVectors( v2, v1 );\n\n\t\tthis.lightPlane.lookAt( v3 );\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\n\n\t};\n\n}();\n\n// File:src/extras/helpers/EdgesHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.EdgesHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tvar edge = [ 0, 0 ], hash = {};\n\tvar sortFunction = function ( a, b ) { return a - b };\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\tvar geometry = new THREE.BufferGeometry();\n\n\tvar geometry2 = object.geometry.clone();\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tvar vertices = geometry2.vertices;\n\tvar faces = geometry2.faces;\n\tvar numEdges = 0;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge.sort( sortFunction );\n\n\t\t\tvar key = edge.toString();\n\n\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\n\t\t\t\tnumEdges ++;\n\n\t\t\t} else {\n\n\t\t\t\thash[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\tvar index = 0;\n\n\tfor ( var key in hash ) {\n\n\t\tvar h = hash[ key ];\n\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) < 0.9999 ) { // hardwired const OK\n\n\t\t\tvar vertex = vertices[ h.vert1 ];\n\t\t\tcoords[ index ++ ] = vertex.x;\n\t\t\tcoords[ index ++ ] = vertex.y;\n\t\t\tcoords[ index ++ ] = vertex.z;\n\n\t\t\tvertex = vertices[ h.vert2 ];\n\t\t\tcoords[ index ++ ] = vertex.x;\n\t\t\tcoords[ index ++ ] = vertex.y;\n\t\t\tcoords[ index ++ ] = vertex.z;\n\n\t\t}\n\n\t}\n\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.EdgesHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\n\n// File:src/extras/helpers/FaceNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar faces = this.object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.normalMatrix = new THREE.Matrix3();\n\n\tthis.update();\n\n};\n\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\n\nTHREE.FaceNormalsHelper.prototype.update = function () {\n\n\tvar vertices = this.geometry.vertices;\n\n\tvar object = this.object;\n\tvar objectVertices = object.geometry.vertices;\n\tvar objectFaces = object.geometry.faces;\n\tvar objectWorldMatrix = object.matrixWorld;\n\n\tobject.updateMatrixWorld( true );\n\n\tthis.normalMatrix.getNormalMatrix( objectWorldMatrix );\n\n\tfor ( var i = 0, i2 = 0, l = objectFaces.length; i < l; i ++, i2 += 2 ) {\n\n\t\tvar face = objectFaces[ i ];\n\n\t\tvertices[ i2 ].copy( objectVertices[ face.a ] )\n\t\t\t.add( objectVertices[ face.b ] )\n\t\t\t.add( objectVertices[ face.c ] )\n\t\t\t.divideScalar( 3 )\n\t\t\t.applyMatrix4( objectWorldMatrix );\n\n\t\tvertices[ i2 + 1 ].copy( face.normal )\n\t\t\t.applyMatrix3( this.normalMatrix )\n\t\t\t.normalize()\n\t\t\t.multiplyScalar( this.size )\n\t\t\t.add( vertices[ i2 ] );\n\n\t}\n\n\tthis.geometry.verticesNeedUpdate = true;\n\n\treturn this;\n\n};\n\n\n// File:src/extras/helpers/GridHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.GridHelper = function ( size, step ) {\n\n\tvar geometry = new THREE.Geometry();\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tthis.color1 = new THREE.Color( 0x444444 );\n\tthis.color2 = new THREE.Color( 0x888888 );\n\n\tfor ( var i = - size; i <= size; i += step ) {\n\n\t\tgeometry.vertices.push(\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\n\t\t);\n\n\t\tvar color = i === 0 ? this.color1 : this.color2;\n\n\t\tgeometry.colors.push( color, color, color, color );\n\n\t}\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n};\n\nTHREE.GridHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\n\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\n\n\tthis.color1.set( colorCenterLine );\n\tthis.color2.set( colorGrid );\n\n\tthis.geometry.colorsNeedUpdate = true;\n\n}\n\n// File:src/extras/helpers/HemisphereLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.HemisphereLightHelper = function ( light, sphereSize, arrowLength, domeSize ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\n\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\n\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\n\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\n\n\t}\n\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\n\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\n\tthis.add( this.lightSphere );\n\n\tthis.update();\n\n};\n\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\n\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\n\tthis.lightSphere.geometry.dispose();\n\tthis.lightSphere.material.dispose();\n};\n\nTHREE.HemisphereLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\n\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\n\n\t}\n\n}();\n\n// File:src/extras/helpers/PointLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PointLightHelper = function ( light, sphereSize ) {\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.matrix = this.light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\t/*\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tvar d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n};\n\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\n\nTHREE.PointLightHelper.prototype.dispose = function () {\n\n\tthis.geometry.dispose();\n\tthis.material.dispose();\n};\n\nTHREE.PointLightHelper.prototype.update = function () {\n\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t/*\n\tvar d = this.light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.visible = true;\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\t*/\n\n};\n\n// File:src/extras/helpers/SkeletonHelper.js\n\n/**\n * @author Sean Griffin / http://twitter.com/sgrif\n * @author Michael Guerrero / http://realitymeltdown.com\n * @author mrdoob / http://mrdoob.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkeletonHelper = function ( object ) {\n\n\tthis.bones = this.getBoneList( object );\n\n\tvar geometry = new THREE.Geometry();\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\n\n\t\t}\n\n\t}\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\n\n\tTHREE.Line.call( this, geometry, material, THREE.LinePieces );\n\n\tthis.root = object;\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\n\nTHREE.SkeletonHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\n\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\n\n\tvar boneList = [];\n\n\tif ( object instanceof THREE.Bone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n};\n\nTHREE.SkeletonHelper.prototype.update = function () {\n\n\tvar geometry = this.geometry;\n\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\n\n\tvar boneMatrix = new THREE.Matrix4();\n\n\tvar j = 0;\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tj += 2;\n\n\t\t}\n\n\t}\n\n\tgeometry.verticesNeedUpdate = true;\n\n\tgeometry.computeBoundingSphere();\n\n};\n\n// File:src/extras/helpers/SpotLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.SpotLightHelper = function ( light ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\n\n\tgeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, - 0.5, 0 ) );\n\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\n\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\n\n\tthis.cone = new THREE.Mesh( geometry, material );\n\tthis.add( this.cone );\n\n\tthis.update();\n\n};\n\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\n\nTHREE.SpotLightHelper.prototype.dispose = function () {\n\tthis.cone.geometry.dispose();\n\tthis.cone.material.dispose();\n};\n\nTHREE.SpotLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\tvar vector2 = new THREE.Vector3();\n\n\treturn function () {\n\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\n\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t};\n\n}();\n\n// File:src/extras/helpers/VertexNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar vertices = object.geometry.vertices;\n\n\tvar faces = object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3(), new THREE.Vector3() );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.normalMatrix = new THREE.Matrix3();\n\n\tthis.update();\n\n};\n\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\n\nTHREE.VertexNormalsHelper.prototype.update = ( function ( object ) {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function( object ) {\n\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tthis.normalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\tvar vertices = this.geometry.vertices;\n\n\t\tvar verts = this.object.geometry.vertices;\n\n\t\tvar faces = this.object.geometry.faces;\n\n\t\tvar worldMatrix = this.object.matrixWorld;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\n\t\t\t\tvar vertex = verts[ vertexId ];\n\n\t\t\t\tvar normal = face.vertexNormals[ j ];\n\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\n\n\t\t\t\tv1.copy( normal ).applyMatrix3( this.normalMatrix ).normalize().multiplyScalar( this.size );\n\n\t\t\t\tv1.add( vertices[ idx ] );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tvertices[ idx ].copy( v1 );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry.verticesNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n}());\n\n// File:src/extras/helpers/VertexTangentsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.VertexTangentsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0x0000ff;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\tvar geometry = new THREE.Geometry();\n\n\tvar vertices = object.geometry.vertices;\n\n\tvar faces = object.geometry.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ), THREE.LinePieces );\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\nTHREE.VertexTangentsHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.VertexTangentsHelper.prototype.constructor = THREE.VertexTangentsHelper;\n\nTHREE.VertexTangentsHelper.prototype.update = ( function ( object ) {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function( object ) {\n\n\t\tvar keys = [ 'a', 'b', 'c', 'd' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tvar vertices = this.geometry.vertices;\n\n\t\tvar verts = this.object.geometry.vertices;\n\n\t\tvar faces = this.object.geometry.faces;\n\n\t\tvar worldMatrix = this.object.matrixWorld;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0, jl = face.vertexTangents.length; j < jl; j ++ ) {\n\n\t\t\t\tvar vertexId = face[ keys[ j ] ];\n\t\t\t\tvar vertex = verts[ vertexId ];\n\n\t\t\t\tvar tangent = face.vertexTangents[ j ];\n\n\t\t\t\tvertices[ idx ].copy( vertex ).applyMatrix4( worldMatrix );\n\n\t\t\t\tv1.copy( tangent ).transformDirection( worldMatrix ).multiplyScalar( this.size );\n\n\t\t\t\tv1.add( vertices[ idx ] );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tvertices[ idx ].copy( v1 );\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry.verticesNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n}());\n\n// File:src/extras/helpers/WireframeHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.WireframeHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tvar edge = [ 0, 0 ], hash = {};\n\tvar sortFunction = function ( a, b ) { return a - b };\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\tvar geometry = new THREE.BufferGeometry();\n\n\tif ( object.geometry instanceof THREE.Geometry ) {\n\n\t\tvar vertices = object.geometry.vertices;\n\t\tvar faces = object.geometry.faces;\n\t\tvar numEdges = 0;\n\n\t\t// allocate maximal size\n\t\tvar edges = new Uint32Array( 6 * faces.length );\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\tvar key = edge.toString();\n\n\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j] ];\n\n\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t} else if ( object.geometry instanceof THREE.BufferGeometry ) {\n\n\t\tif ( object.geometry.attributes.index !== undefined ) { // Indexed BufferGeometry\n\n\t\t\tvar vertices = object.geometry.attributes.position.array;\n\t\t\tvar indices = object.geometry.attributes.index.array;\n\t\t\tvar drawcalls = object.geometry.drawcalls;\n\t\t\tvar numEdges = 0;\n\n\t\t\tif ( drawcalls.length === 0 ) {\n\n\t\t\t\tdrawcalls = [ { count : indices.length, index : 0, start : 0 } ];\n\n\t\t\t}\n\n\t\t\t// allocate maximal size\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\n\n\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\n\n\t\t\t\tvar start = drawcalls[ o ].start;\n\t\t\t\tvar count = drawcalls[ o ].count;\n\t\t\t\tvar index = drawcalls[ o ].index;\n\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tedge[ 0 ] = index + indices[ i + j ];\n\t\t\t\t\t\tedge[ 1 ] = index + indices[ i + ( j + 1 ) % 3 ];\n\t\t\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\t\t\tvar key = edge.toString();\n\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\t\tvar index2 = 3 * edges[ 2 * i + j];\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index2 ];\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index2 + 1 ];\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index2 + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t} else { // non-indexed BufferGeometry\n\n\t\t\tvar vertices = object.geometry.attributes.position.array;\n\t\t\tvar numEdges = vertices.length / 3;\n\t\t\tvar numTris = numEdges / 3;\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tvar index = 18 * i + 6 * j;\n\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\n\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t}\n\n\t}\n\n\tTHREE.Line.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ), THREE.LinePieces );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.WireframeHelper.prototype = Object.create( THREE.Line.prototype );\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\n\n// File:src/extras/objects/ImmediateRenderObject.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ImmediateRenderObject = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.render = function ( renderCallback ) {};\n\n};\n\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\n\n// File:src/extras/objects/MorphBlendMesh.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MorphBlendMesh = function( geometry, material ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.animationsMap = {};\n\tthis.animationsList = [];\n\n\t// prepare default animation\n\t// (all frames played together in 1 second)\n\n\tvar numFrames = this.geometry.morphTargets.length;\n\n\tvar name = \"__default\";\n\n\tvar startFrame = 0;\n\tvar endFrame = numFrames - 1;\n\n\tvar fps = numFrames / 1;\n\n\tthis.createAnimation( name, startFrame, endFrame, fps );\n\tthis.setAnimationWeight( name, 1 );\n\n};\n\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\n\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\n\n\tvar animation = {\n\n\t\tstartFrame: start,\n\t\tendFrame: end,\n\n\t\tlength: end - start + 1,\n\n\t\tfps: fps,\n\t\tduration: ( end - start ) / fps,\n\n\t\tlastFrame: 0,\n\t\tcurrentFrame: 0,\n\n\t\tactive: false,\n\n\t\ttime: 0,\n\t\tdirection: 1,\n\t\tweight: 1,\n\n\t\tdirectionBackwards: false,\n\t\tmirroredLoop: false\n\n\t};\n\n\tthis.animationsMap[ name ] = animation;\n\tthis.animationsList.push( animation );\n\n};\n\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\n\n\tvar pattern = /([a-z]+)_?(\\d+)/;\n\n\tvar firstAnimation, frameRanges = {};\n\n\tvar geometry = this.geometry;\n\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\n\n\t\tvar morph = geometry.morphTargets[ i ];\n\t\tvar chunks = morph.name.match( pattern );\n\n\t\tif ( chunks && chunks.length > 1 ) {\n\n\t\t\tvar name = chunks[ 1 ];\n\t\t\tvar num = chunks[ 2 ];\n\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\n\n\t\t\tvar range = frameRanges[ name ];\n\n\t\t\tif ( i < range.start ) range.start = i;\n\t\t\tif ( i > range.end ) range.end = i;\n\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\n\n\t\t}\n\n\t}\n\n\tfor ( var name in frameRanges ) {\n\n\t\tvar range = frameRanges[ name ];\n\t\tthis.createAnimation( name, range.start, range.end, fps );\n\n\t}\n\n\tthis.firstAnimation = firstAnimation;\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = 1;\n\t\tanimation.directionBackwards = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = - 1;\n\t\tanimation.directionBackwards = true;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.fps = fps;\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.duration = duration;\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.weight = weight;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = time;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\n\n\tvar time = 0;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\ttime = animation.time;\n\n\t}\n\n\treturn time;\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\n\n\tvar duration = - 1;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tduration = animation.duration;\n\n\t}\n\n\treturn duration;\n\n};\n\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = 0;\n\t\tanimation.active = true;\n\n\t} else {\n\n\t\tconsole.warn( \"animation[\" + name + \"] undefined\" );\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.active = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\n\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\n\n\t\tvar animation = this.animationsList[ i ];\n\n\t\tif ( ! animation.active ) continue;\n\n\t\tvar frameTime = animation.duration / animation.length;\n\n\t\tanimation.time += animation.direction * delta;\n\n\t\tif ( animation.mirroredLoop ) {\n\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\n\n\t\t\t\tanimation.direction *= - 1;\n\n\t\t\t\tif ( animation.time > animation.duration ) {\n\n\t\t\t\t\tanimation.time = animation.duration;\n\t\t\t\t\tanimation.directionBackwards = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( animation.time < 0 ) {\n\n\t\t\t\t\tanimation.time = 0;\n\t\t\t\t\tanimation.directionBackwards = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tanimation.time = animation.time % animation.duration;\n\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\n\n\t\t}\n\n\t\tvar keyframe = animation.startFrame + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\n\t\tvar weight = animation.weight;\n\n\t\tif ( keyframe !== animation.currentFrame ) {\n\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\n\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\n\n\t\t\tanimation.lastFrame = animation.currentFrame;\n\t\t\tanimation.currentFrame = keyframe;\n\n\t\t}\n\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\n\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\n\n\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\n\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\n\n\t}\n\n};\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar THREE = _interopRequire(require(\"three\"));\n\nvar Stats = _interopRequire(require(\"stats-js\"));\n\nvar numTargets = 1;\n\nvar stats = undefined;\nvar camera = undefined,\n    camControls = undefined,\n    scene = undefined,\n    renderer = undefined,\n    clock = undefined;\nvar particleMaterial = undefined;\nvar raycaster = undefined;\nvar mouse = undefined;\nvar objects = [];\nvar geometry = new THREE.BoxGeometry(100, 100, 100);\nvar lastHitTime = Date.now();\n\n// stats\nvar hitTimes = [];\nvar numHits = 0;\nvar numMisses = 0;\n\nfunction createTarget() {\n\tvar material = new THREE.MeshBasicMaterial({\n\t\tcolor: Math.random() * 16777215,\n\t\topacity: 0.5,\n\t\ttransparent: true\n\t});\n\n\tvar object = new THREE.Mesh(geometry, material);\n\n\tobject.position.x = Math.random() * 800 - 400;\n\tobject.position.y = Math.random() * 800 - 400;\n\tobject.position.z = Math.random() * 800 - 400;\n\n\tobject.scale.x = Math.random() * 2 + 1;\n\tobject.scale.y = Math.random() * 2 + 1;\n\tobject.scale.z = Math.random() * 2 + 1;\n\n\tobject.rotation.x = Math.random() * 2 * Math.PI;\n\tobject.rotation.y = Math.random() * 2 * Math.PI;\n\tobject.rotation.z = Math.random() * 2 * Math.PI;\n\n\treturn object;\n}\n\nfunction spawnTarget() {\n\tvar object = createTarget();\n\tscene.add(object);\n\tobjects.push(object);\n\treturn object;\n}\n\nfunction init() {\n\n\tcamera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 10000);\n\tcamera.position.set(0, 300, 500);\n\n\t/*clock = new THREE.Clock()\n camControls = new THREE.FirstPersonControls(camera)\n camControls.lookSpeed = 0.4\n camControls.movementSpeed = 20\n camControls.noFly = true\n camControls.lookVertical = true\n camControls.constrainVertical = true\n camControls.verticalMin = 1.0\n camControls.verticalMax = 2.0\n camControls.lon = -150\n camControls.lat = 120*/\n\n\tscene = new THREE.Scene();\n\n\tfor (var i = 0, l = numTargets; i < l; i++) {\n\t\tspawnTarget();\n\t}\n\n\t/*let PI2 = Math.PI * 2\n particleMaterial = new THREE.SpriteCanvasMaterial( {\n \tcolor: 0x000000,\n \tprogram: function ( context ) {\n \t\tcontext.beginPath()\n \t\tcontext.arc( 0, 0, 0.5, 0, PI2, true )\n \t\tcontext.fill()\n \t}\n \t} )*/\n\n\traycaster = new THREE.Raycaster();\n\tmouse = new THREE.Vector2();\n\n\tvar container = document.createElement(\"div\");\n\tdocument.body.appendChild(container);\n\n\trenderer = new THREE.WebGLRenderer();\n\trenderer.setClearColor(15790320);\n\trenderer.setPixelRatio(window.devicePixelRatio);\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\tcontainer.appendChild(renderer.domElement);\n\n\tstats = new Stats();\n\tstats.domElement.style.position = \"absolute\";\n\tstats.domElement.style.top = \"0px\";\n\tcontainer.appendChild(stats.domElement);\n\n\tdocument.addEventListener(\"mousedown\", onDocumentMouseDown, false);\n\tdocument.addEventListener(\"touchstart\", onDocumentTouchStart, false);\n\twindow.addEventListener(\"resize\", onWindowResize, false);\n\tanimate();\n}\n\nfunction onWindowResize() {\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n}\n\nfunction onDocumentTouchStart(e) {\n\te.preventDefault();\n\te.clientX = e.touches[0].clientX;\n\te.clientY = e.touches[0].clientY;\n\tonDocumentMouseDown(e);\n}\n\nfunction onDocumentMouseDown(e) {\n\te.preventDefault();\n\tmouse.x = e.clientX / renderer.domElement.width * 2 - 1;\n\tmouse.y = -(e.clientY / renderer.domElement.height) * 2 + 1;\n\n\traycaster.setFromCamera(mouse, camera);\n\n\tvar intersects = raycaster.intersectObjects(objects);\n\tif (intersects.length > 0) {\n\t\tvar object = intersects[0].object;\n\t\tonHit(object);\n\t\tnumHits++;\n\t} else {\n\t\tnumMisses++;\n\t}\n}\n\nfunction onHit(object) {\n\tobject.material.color.setHex(Math.random() * 16777215);\n\tvar now = Date.now();\n\tvar elapsed = now - lastHitTime;\n\n\tconsole.log(elapsed);\n\tlastHitTime = now;\n\thitTimes.push(elapsed);\n\tvar total = hitTimes.reduce(function (a, b) {\n\t\treturn a + b;\n\t});\n\tconsole.log(total, total / hitTimes.length);\n\t/*let particle = new THREE.Sprite(particleMaterial)\n particle.position.copy(object.point)\n particle.scale.x = particle.scale.y = 16\n scene.add(particle)*/\n\tscene.remove(object);\n\tfor (var i = objects.length; i--;) {\n\t\tif (objects[i].id === object.id) {\n\t\t\tobjects.splice(i, 1);\n\t\t}\n\t}\n\tspawnTarget();\n}\n\nfunction animate() {\n\trequestAnimationFrame(animate);\n\trender();\n}\n\nvar radius = 600;\nvar theta = 0;\n\nfunction render() {\n\t//let delta = clock.getDelta()\n\t//camControls.update(delta)\n\tstats.update();\n\ttheta += 0.1;\n\tcamera.position.x = radius * Math.sin(THREE.Math.degToRad(theta));\n\tcamera.position.y = radius * Math.sin(THREE.Math.degToRad(theta));\n\tcamera.position.z = radius * Math.cos(THREE.Math.degToRad(theta));\n\tcamera.lookAt(scene.position);\n\trenderer.render(scene, camera);\n}\n\nwindow.onload = init;\n\n},{\"stats-js\":1,\"three\":2}]},{},[3])"],"sourceRoot":"/source/"}